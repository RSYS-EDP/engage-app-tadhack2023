!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t(function(){try{return require("react-native")}catch(e){}}(),require("react-native-webrtc-rad")):"function"==typeof define&&define.amd?define(["react-native","react-native-webrtc-rad"],t):"object"==typeof exports?exports.EngageDigital=t(function(){try{return require("react-native")}catch(e){}}(),require("react-native-webrtc-rad")):e.EngageDigital=t(e["react-native"],e["react-native-webrtc-rad"])}(window,(function(e,t){return i={},n.m=r=[function(e,t,n){function r(e,t,n){var c,f,d,h=e&r.F,p=e&r.G,v=e&r.P,_=e&r.B,g=p?i:e&r.S?i[t]||(i[t]={}):(i[t]||{})[s],m=p?o:o[t]||(o[t]={}),y=m[s]||(m[s]={});for(c in n=p?t:n)f=((d=!h&&g&&void 0!==g[c])?g:n)[c],d=_&&d?a(f,i):v&&"function"==typeof f?a(Function.call,f):f,g&&l(g,c,f,e&r.U),m[c]!=f&&u(m,c,d),v&&y[c]!=f&&(y[c]=f)}var i=n(2),o=n(24),u=n(17),l=n(18),a=n(25),s="prototype";i.core=o,r.F=1,r.G=2,r.S=4,r.P=8,r.B=16,r.W=32,r.U=64,r.R=128,e.exports=r},function(e,t,n){var r=n(4);e.exports=function(e){if(!r(e))throw TypeError(e+" is not an object!");return e}},function(e,t){e=e.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")(),"number"==typeof __g&&(__g=e)},function(e,t){e.exports=function(e){try{return!!e()}catch(e){return!0}}},function(e,t){e.exports=function(e){return"object"==typeof e?null!==e:"function"==typeof e}},function(e,t,n){"use strict";var r=n(109),i=n(13),o=n(52),u=n(16),l=n(362),a=n(53),s=n(110),c=n(33),f=n(383),d=n(14),h=n(153);e.exports={C:i,Exceptions:o,Utils:u,UA:l,URI:a,NameAddrHeader:s,WebSocketInterface:f,Grammar:c,debug:n(111),Logger:d,logHandler:h,get name(){return r.title},get version(){return r.version}}},function(e,t,n){var r=n(60)("wks"),i=n(42),o=n(2).Symbol,u="function"==typeof o;(e.exports=function(e){return r[e]||(r[e]=u&&o[e]||(u?o:i)("Symbol."+e))}).store=r},function(e,t,n){var r=n(27),i=Math.min;e.exports=function(e){return 0<e?i(r(e),9007199254740991):0}},function(e,t,n){e.exports=!n(3)((function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a}))},function(e,t,n){n=n(109),e.exports={USER_AGENT:n.title+" "+n.version,SIP:"sip",SIPS:"sips",causes:{CONNECTION_ERROR:"Connection Error",REQUEST_TIMEOUT:"Request Timeout",SIP_FAILURE_CODE:"SIP Failure Code",INTERNAL_ERROR:"Internal Error",BUSY:"Busy",REJECTED:"Rejected",REDIRECTED:"Redirected",UNAVAILABLE:"Unavailable",NOT_FOUND:"Not Found",ADDRESS_INCOMPLETE:"Address Incomplete",INCOMPATIBLE_SDP:"Incompatible SDP",MISSING_SDP:"Missing SDP",AUTHENTICATION_ERROR:"Authentication Error",BYE:"Terminated",WEBRTC_ERROR:"WebRTC Error",CANCELED:"Canceled",NO_ANSWER:"No Answer",EXPIRES:"Expires",NO_ACK:"No ACK",DIALOG_ERROR:"Dialog Error",USER_DENIED_MEDIA_ACCESS:"User Denied Media Access",BAD_MEDIA_DESCRIPTION:"Bad Media Description",RTP_TIMEOUT:"RTP Timeout"},SIP_ERROR_CAUSES:{REDIRECTED:[300,301,302,305,380],BUSY:[486,600],REJECTED:[403,603],NOT_FOUND:[404,604],UNAVAILABLE:[480,410,408,430],ADDRESS_INCOMPLETE:[484,424],INCOMPATIBLE_SDP:[488,606],AUTHENTICATION_ERROR:[401,407]},ACK:"ACK",BYE:"BYE",CANCEL:"CANCEL",INFO:"INFO",INVITE:"INVITE",MESSAGE:"MESSAGE",NOTIFY:"NOTIFY",OPTIONS:"OPTIONS",REGISTER:"REGISTER",REFER:"REFER",UPDATE:"UPDATE",SUBSCRIBE:"SUBSCRIBE",DTMF_TRANSPORT:{INFO:"INFO",RFC2833:"RFC2833"},REASON_PHRASE:{100:"Trying",180:"Ringing",181:"Call Is Being Forwarded",182:"Queued",183:"Session Progress",199:"Early Dialog Terminated",200:"OK",202:"Accepted",204:"No Notification",300:"Multiple Choices",301:"Moved Permanently",302:"Moved Temporarily",305:"Use Proxy",380:"Alternative Service",400:"Bad Request",401:"Unauthorized",402:"Payment Required",403:"Forbidden",404:"Not Found",405:"Method Not Allowed",406:"Not Acceptable",407:"Proxy Authentication Required",408:"Request Timeout",410:"Gone",412:"Conditional Request Failed",413:"Request Entity Too Large",414:"Request-URI Too Long",415:"Unsupported Media Type",416:"Unsupported URI Scheme",417:"Unknown Resource-Priority",420:"Bad Extension",421:"Extension Required",422:"Session Interval Too Small",423:"Interval Too Brief",424:"Bad Location Information",428:"Use Identity Header",429:"Provide Referrer Identity",430:"Flow Failed",433:"Anonymity Disallowed",436:"Bad Identity-Info",437:"Unsupported Certificate",438:"Invalid Identity Header",439:"First Hop Lacks Outbound Support",440:"Max-Breadth Exceeded",469:"Bad Info Package",470:"Consent Needed",478:"Unresolvable Destination",480:"Temporarily Unavailable",481:"Call/Transaction Does Not Exist",482:"Loop Detected",483:"Too Many Hops",484:"Address Incomplete",485:"Ambiguous",486:"Busy Here",487:"Request Terminated",488:"Not Acceptable Here",489:"Bad Event",491:"Request Pending",493:"Undecipherable",494:"Security Agreement Required",500:"Internal Error",501:"Not Implemented",502:"Bad Gateway",503:"Service Unavailable",504:"Server Time-out",505:"Version Not Supported",513:"Message Too Large",580:"Precondition Failure",600:"Busy Everywhere",603:"Decline",604:"Does Not Exist Anywhere",606:"Not Acceptable"},ALLOWED_METHODS:"INVITE,ACK,CANCEL,BYE,UPDATE,MESSAGE,OPTIONS,REFER,INFO,NOTIFY",ACCEPTED_BODY_TYPES:"application/sdp, application/dtmf-relay",MAX_FORWARDS:69,SESSION_EXPIRES:90,MIN_SESSION_EXPIRES:60,CONNECTION_RECOVERY_MAX_INTERVAL:30,CONNECTION_RECOVERY_MIN_INTERVAL:2}},function(e,t,n){var r=n(364);n=n(365);t.write=n,t.parse=r.parse,t.parseParams=r.parseParams,t.parseFmtpConfig=r.parseFmtpConfig,t.parsePayloads=r.parsePayloads,t.parseRemoteCandidates=r.parseRemoteCandidates,t.parseImageAttributes=r.parseImageAttributes,t.parseSimulcastStreamList=r.parseSimulcastStreamList},function(e,t,n){var r=n(1),i=n(115),o=n(29),u=Object.defineProperty;t.f=n(8)?Object.defineProperty:function(e,t,n){if(r(e),t=o(t,!0),r(n),i)try{return u(e,t,n)}catch(e){}if("get"in n||"set"in n)throw TypeError("Accessors not supported!");return"value"in n&&(e[t]=n.value),e}},function(e,t,n){var r=n(30);e.exports=function(e){return Object(r(e))}},function(e,t,n){"use strict";n=n(109),e.exports={USER_AGENT:"".concat(n.title," ").concat(n.version),SIP:"sip",SIPS:"sips",causes:{CONNECTION_ERROR:"Connection Error",REQUEST_TIMEOUT:"Request Timeout",SIP_FAILURE_CODE:"SIP Failure Code",INTERNAL_ERROR:"Internal Error",BUSY:"Busy",REJECTED:"Rejected",REDIRECTED:"Redirected",UNAVAILABLE:"Unavailable",NOT_FOUND:"Not Found",ADDRESS_INCOMPLETE:"Address Incomplete",INCOMPATIBLE_SDP:"Incompatible SDP",MISSING_SDP:"Missing SDP",AUTHENTICATION_ERROR:"Authentication Error",BYE:"Terminated",WEBRTC_ERROR:"WebRTC Error",CANCELED:"Canceled",NO_ANSWER:"No Answer",EXPIRES:"Expires",NO_ACK:"No ACK",DIALOG_ERROR:"Dialog Error",USER_DENIED_MEDIA_ACCESS:"User Denied Media Access",BAD_MEDIA_DESCRIPTION:"Bad Media Description",RTP_TIMEOUT:"RTP Timeout"},SIP_ERROR_CAUSES:{REDIRECTED:[300,301,302,305,380],BUSY:[486,600],REJECTED:[403,603],NOT_FOUND:[404,604],UNAVAILABLE:[480,410,408,430],ADDRESS_INCOMPLETE:[484,424],INCOMPATIBLE_SDP:[488,606],AUTHENTICATION_ERROR:[401,407]},ACK:"ACK",BYE:"BYE",CANCEL:"CANCEL",INFO:"INFO",INVITE:"INVITE",MESSAGE:"MESSAGE",NOTIFY:"NOTIFY",OPTIONS:"OPTIONS",REGISTER:"REGISTER",REFER:"REFER",UPDATE:"UPDATE",SUBSCRIBE:"SUBSCRIBE",DTMF_TRANSPORT:{INFO:"INFO",RFC2833:"RFC2833"},REASON_PHRASE:{100:"Trying",180:"Ringing",181:"Call Is Being Forwarded",182:"Queued",183:"Session Progress",199:"Early Dialog Terminated",200:"OK",202:"Accepted",204:"No Notification",300:"Multiple Choices",301:"Moved Permanently",302:"Moved Temporarily",305:"Use Proxy",380:"Alternative Service",400:"Bad Request",401:"Unauthorized",402:"Payment Required",403:"Forbidden",404:"Not Found",405:"Method Not Allowed",406:"Not Acceptable",407:"Proxy Authentication Required",408:"Request Timeout",410:"Gone",412:"Conditional Request Failed",413:"Request Entity Too Large",414:"Request-URI Too Long",415:"Unsupported Media Type",416:"Unsupported URI Scheme",417:"Unknown Resource-Priority",420:"Bad Extension",421:"Extension Required",422:"Session Interval Too Small",423:"Interval Too Brief",424:"Bad Location Information",428:"Use Identity Header",429:"Provide Referrer Identity",430:"Flow Failed",433:"Anonymity Disallowed",436:"Bad Identity-Info",437:"Unsupported Certificate",438:"Invalid Identity Header",439:"First Hop Lacks Outbound Support",440:"Max-Breadth Exceeded",469:"Bad Info Package",470:"Consent Needed",478:"Unresolvable Destination",480:"Temporarily Unavailable",481:"Call/Transaction Does Not Exist",482:"Loop Detected",483:"Too Many Hops",484:"Address Incomplete",485:"Ambiguous",486:"Busy Here",487:"Request Terminated",488:"Not Acceptable Here",489:"Bad Event",491:"Request Pending",493:"Undecipherable",494:"Security Agreement Required",500:"Internal Error",501:"Not Implemented",502:"Bad Gateway",503:"Service Unavailable",504:"Server Time-out",505:"Version Not Supported",513:"Message Too Large",580:"Precondition Failure",600:"Busy Everywhere",603:"Decline",604:"Does Not Exist Anywhere",606:"Not Acceptable"},ALLOWED_METHODS:"INVITE,ACK,CANCEL,BYE,UPDATE,MESSAGE,OPTIONS,REFER,INFO,NOTIFY",ACCEPTED_BODY_TYPES:"application/sdp, application/dtmf-relay",MAX_FORWARDS:69,SESSION_EXPIRES:90,MIN_SESSION_EXPIRES:60,CONNECTION_RECOVERY_MAX_INTERVAL:30,CONNECTION_RECOVERY_MIN_INTERVAL:2}},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function o(e,t,n){return t&&i(e.prototype,t),n&&i(e,n),e}var u=n(111),l=n(153),a="EngageDigital",s=function(){function e(t){r(this,e),this.realDebugLogger=t}return o(e,[{key:"log",value:function(){(l.logSettings.console.enable||l.logSettings.blob.enable)&&this.realDebugLogger.apply(this,arguments)}}]),e}();e.exports=function(){function e(t){r(this,e),t?(this.debugWrapper=new s(u("".concat(a,":").concat(t))),this.warnWrapper=new s(u("".concat(a,":").concat(t,":WARN"))),this.errorWrapper=new s(u("".concat(a,":").concat(t,":ERROR")))):(this.debugWrapper=new s(u(a)),this.warnWrapper=new s(u("".concat(a,":WARN"))),this.errorWrapper=new s(u("".concat(a,":ERROR")))),this._debug=this.debugWrapper.log.bind(this.debugWrapper),this._warn=this.warnWrapper.log.bind(this.warnWrapper),this._error=this.errorWrapper.log.bind(this.errorWrapper),this.debugWrapper.realDebugLogger.log=l.info.bind(l),this.warnWrapper.realDebugLogger.log=l.warn.bind(l),this.errorWrapper.realDebugLogger.log=l.error.bind(l)}return o(e,[{key:"debug",get:function(){return this._debug}},{key:"warn",get:function(){return this._warn}},{key:"error",get:function(){return this._error}}]),e}()},function(e,t){e.exports=function(e){if("function"!=typeof e)throw TypeError(e+" is not a function!");return e}},function(e,t,n){"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return o(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Map"===(n="Object"===n&&e.constructor?e.constructor.name:n)||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?o(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0;return{s:t=function(){},n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:t}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,u=!0,l=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return u=e.done,e},e:function(e){l=!0,i=e},f:function(){try{u||null==n.return||n.return()}finally{if(l)throw i}}}}function o(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var u=n(13),l=n(53),a=n(33);t.str_utf8_length=function(e){return unescape(encodeURIComponent(e)).length};var s=t.isFunction=function(e){return void 0!==e&&"[object Function]"===Object.prototype.toString.call(e)};t.isString=function(e){return void 0!==e&&"[object String]"===Object.prototype.toString.call(e)},t.isDecimal=function(e){return!isNaN(e)&&parseFloat(e)===parseInt(e,10)},t.isEmpty=function(e){return null===e||""===e||void 0===e||Array.isArray(e)&&0===e.length||"number"==typeof e&&isNaN(e)},t.hasMethods=function(e){for(var t=arguments.length,n=new Array(1<t?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];for(var i=0,o=n;i<o.length;i++){var u=o[i];if(s(e[u]))return!1}return!0};var c=t.createRandomToken=function(e){for(var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:32,n="",r=0;r<e;r++)n+=(Math.random()*t|0).toString(t);return n};t.newTag=function(){return c(10)},t.newUUID=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(e){var t=16*Math.random()|0;return("x"===e?t:3&t|8).toString(16)}))},t.hostType=function(e){if(e&&-1!==(e=a.parse(e,"host")))return e.host_type};var f=t.escapeUser=function(e){return encodeURIComponent(decodeURIComponent(e)).replace(/%3A/gi,":").replace(/%2B/gi,"+").replace(/%3F/gi,"?").replace(/%2F/gi,"/")};t.normalizeTarget=function(e,t){if(e){if(e instanceof l)return e;if("string"==typeof e){var n,r,i,o=e.split("@");switch(o.length){case 1:if(!t)return;n=e,r=t;break;case 2:n=o[0],r=o[1];break;default:n=o.slice(0,o.length-1).join("@"),r=o[o.length-1]}if(n=n.replace(/^(sips?|tel):/i,""),/^[-.()]*\+?[0-9\-.()]+$/.test(n)&&(n=n.replace(/[-.()]/g,"")),e="".concat(u.SIP,":").concat(f(n),"@").concat(r),i=l.parse(e))return i}}},t.headerize=function(e){for(var t={"Call-Id":"Call-ID",Cseq:"CSeq","Www-Authenticate":"WWW-Authenticate"},n=e.toLowerCase().replace(/_/g,"-").split("-"),r="",i=n.length,o=0;o<i;o++)0!==o&&(r+="-"),r+=n[o].charAt(0).toUpperCase()+n[o].substring(1);return t[r]?t[r]:r},t.sipErrorCause=function(e){for(var t in u.SIP_ERROR_CAUSES)if(-1!==u.SIP_ERROR_CAUSES[t].indexOf(e))return u.causes[t];return u.causes.SIP_FAILURE_CODE},t.getRandomTestNetIP=function(){return"192.0.2.".concat((1,254,Math.floor(254*Math.random()+1)))},t.calculateMD5=function(e){function t(e,t){return e<<t|e>>>32-t}function n(e,t){var n=2147483648&e,r=2147483648&t,i=1073741824&e,o=1073741824&t;t=(1073741823&e)+(1073741823&t);return i&o?2147483648^t^n^r:i|o?1073741824&t?3221225472^t^n^r:1073741824^t^n^r:t^n^r}function r(e,r,i,o,u,l,a){return e=n(e,n(n(r&i|~r&o,u),a)),n(t(e,l),r)}function i(e,r,i,o,u,l,a){return e=n(e,n(n(r&o|i&~o,u),a)),n(t(e,l),r)}function o(e,r,i,o,u,l,a){return e=n(e,n(n(r^i^o,u),a)),n(t(e,l),r)}function u(e,r,i,o,u,l,a){return e=n(e,n(n(i^(r|~o),u),a)),n(t(e,l),r)}function l(e){for(var t="",n="",r=0;r<=3;r++)t+=(n="0".concat((e>>>8*r&255).toString(16))).substr(n.length-2,2);return t}for(var a,s,c,f,d=function(e){for(var t,n=e.length,r=16*(1+((r=n+8)-r%64)/64),i=new Array(r-1),o=0,u=0;u<n;)o=u%4*8,i[t=(u-u%4)/4]=i[t]|e.charCodeAt(u)<<o,u++;return i[t=(u-u%4)/4]=i[t]|128<<(o=u%4*8),i[r-2]=n<<3,i[r-1]=n>>>29,i}(e=function(e){e=e.replace(/\r\n/g,"\n");for(var t="",n=0;n<e.length;n++){var r=e.charCodeAt(n);r<128?t+=String.fromCharCode(r):(127<r&&r<2048?t+=String.fromCharCode(r>>6|192):(t+=String.fromCharCode(r>>12|224),t+=String.fromCharCode(r>>6&63|128)),t+=String.fromCharCode(63&r|128))}return t}(e)),h=1732584193,p=4023233417,v=2562383102,_=271733878,g=0;g<d.length;g+=16)h=r(a=h,s=p,c=v,f=_,d[g+0],7,3614090360),_=r(_,h,p,v,d[g+1],12,3905402710),v=r(v,_,h,p,d[g+2],17,606105819),p=r(p,v,_,h,d[g+3],22,3250441966),h=r(h,p,v,_,d[g+4],7,4118548399),_=r(_,h,p,v,d[g+5],12,1200080426),v=r(v,_,h,p,d[g+6],17,2821735955),p=r(p,v,_,h,d[g+7],22,4249261313),h=r(h,p,v,_,d[g+8],7,1770035416),_=r(_,h,p,v,d[g+9],12,2336552879),v=r(v,_,h,p,d[g+10],17,4294925233),p=r(p,v,_,h,d[g+11],22,2304563134),h=r(h,p,v,_,d[g+12],7,1804603682),_=r(_,h,p,v,d[g+13],12,4254626195),v=r(v,_,h,p,d[g+14],17,2792965006),h=i(h,p=r(p,v,_,h,d[g+15],22,1236535329),v,_,d[g+1],5,4129170786),_=i(_,h,p,v,d[g+6],9,3225465664),v=i(v,_,h,p,d[g+11],14,643717713),p=i(p,v,_,h,d[g+0],20,3921069994),h=i(h,p,v,_,d[g+5],5,3593408605),_=i(_,h,p,v,d[g+10],9,38016083),v=i(v,_,h,p,d[g+15],14,3634488961),p=i(p,v,_,h,d[g+4],20,3889429448),h=i(h,p,v,_,d[g+9],5,568446438),_=i(_,h,p,v,d[g+14],9,3275163606),v=i(v,_,h,p,d[g+3],14,4107603335),p=i(p,v,_,h,d[g+8],20,1163531501),h=i(h,p,v,_,d[g+13],5,2850285829),_=i(_,h,p,v,d[g+2],9,4243563512),v=i(v,_,h,p,d[g+7],14,1735328473),h=o(h,p=i(p,v,_,h,d[g+12],20,2368359562),v,_,d[g+5],4,4294588738),_=o(_,h,p,v,d[g+8],11,2272392833),v=o(v,_,h,p,d[g+11],16,1839030562),p=o(p,v,_,h,d[g+14],23,4259657740),h=o(h,p,v,_,d[g+1],4,2763975236),_=o(_,h,p,v,d[g+4],11,1272893353),v=o(v,_,h,p,d[g+7],16,4139469664),p=o(p,v,_,h,d[g+10],23,3200236656),h=o(h,p,v,_,d[g+13],4,681279174),_=o(_,h,p,v,d[g+0],11,3936430074),v=o(v,_,h,p,d[g+3],16,3572445317),p=o(p,v,_,h,d[g+6],23,76029189),h=o(h,p,v,_,d[g+9],4,3654602809),_=o(_,h,p,v,d[g+12],11,3873151461),v=o(v,_,h,p,d[g+15],16,530742520),h=u(h,p=o(p,v,_,h,d[g+2],23,3299628645),v,_,d[g+0],6,4096336452),_=u(_,h,p,v,d[g+7],10,1126891415),v=u(v,_,h,p,d[g+14],15,2878612391),p=u(p,v,_,h,d[g+5],21,4237533241),h=u(h,p,v,_,d[g+12],6,1700485571),_=u(_,h,p,v,d[g+3],10,2399980690),v=u(v,_,h,p,d[g+10],15,4293915773),p=u(p,v,_,h,d[g+1],21,2240044497),h=u(h,p,v,_,d[g+8],6,1873313359),_=u(_,h,p,v,d[g+15],10,4264355552),v=u(v,_,h,p,d[g+6],15,2734768916),p=u(p,v,_,h,d[g+13],21,1309151649),h=u(h,p,v,_,d[g+4],6,4149444226),_=u(_,h,p,v,d[g+11],10,3174756917),v=u(v,_,h,p,d[g+2],15,718787259),p=u(p,v,_,h,d[g+9],21,3951481745),h=n(h,a),p=n(p,s),v=n(v,c),_=n(_,f);return(l(h)+l(p)+l(v)+l(_)).toLowerCase()},t.closeMediaStream=function(e){if(e)try{if(e.getTracks){var t,n=i(e.getTracks());try{for(n.s();!(t=n.n()).done;)t.value.stop()}catch(t){n.e(t)}finally{n.f()}}else{var o,u=i(e.getAudioTracks());try{for(u.s();!(o=u.n()).done;)o.value.stop()}catch(t){u.e(t)}finally{u.f()}var l,a=i(e.getVideoTracks());try{for(a.s();!(l=a.n()).done;)l.value.stop()}catch(t){a.e(t)}finally{a.f()}}}catch(t){"function"!=typeof e.stop&&"object"!==r(e.stop)||e.stop()}},t.cloneArray=function(e){return e&&e.slice()||[]},t.cloneObject=function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};return e&&Object.assign({},e)||t}},function(e,t,n){var r=n(11),i=n(41);e.exports=n(8)?function(e,t,n){return r.f(e,t,i(1,n))}:function(e,t,n){return e[t]=n,e}},function(e,t,n){var r=n(2),i=n(17),o=n(20),u=n(42)("src"),l=n(162),a="toString",s=(""+l).split(a);n(24).inspectSource=function(e){return l.call(e)},(e.exports=function(e,t,n,l){var a="function"==typeof n;a&&(o(n,"name")||i(n,"name",t)),e[t]!==n&&(a&&(o(n,u)||i(n,u,e[t]?""+e[t]:s.join(String(t)))),e===r?e[t]=n:l?e[t]?e[t]=n:i(e,t,n):(delete e[t],i(e,t,n)))})(Function.prototype,a,(function(){return"function"==typeof this&&this[u]||l.call(this)}))},function(e,t,n){function r(e,t,n,r){var i=String(u(e));e="<"+t;return""!==n&&(e+=" "+n+'="'+String(r).replace(l,"&quot;")+'"'),e+">"+i+"</"+t+">"}var i=n(0),o=n(3),u=n(30),l=/"/g;e.exports=function(e,t){var n={};n[e]=t(r),i(i.P+i.F*o((function(){var t=""[e]('"');return t!==t.toLowerCase()||3<t.split('"').length})),"String",n)}},function(e,t){var n={}.hasOwnProperty;e.exports=function(e,t){return n.call(e,t)}},function(e,t,n){var r=n(61),i=n(30);e.exports=function(e){return r(i(e))}},function(e,t,n){var r=n(62),i=n(41),o=n(21),u=n(29),l=n(20),a=n(115),s=Object.getOwnPropertyDescriptor;t.f=n(8)?s:function(e,t){if(e=o(e),t=u(t,!0),a)try{return s(e,t)}catch(e){}if(l(e,t))return i(!r.f.call(e,t),e[t])}},function(e,t,n){var r=n(20),i=n(12),o=n(84)("IE_PROTO"),u=Object.prototype;e.exports=Object.getPrototypeOf||function(e){return e=i(e),r(e,o)?e[o]:"function"==typeof e.constructor&&e instanceof e.constructor?e.constructor.prototype:e instanceof Object?u:null}},function(e,t){e=e.exports={version:"2.6.12"},"number"==typeof __e&&(__e=e)},function(e,t,n){var r=n(15);e.exports=function(e,t,n){if(r(e),void 0===t)return e;switch(n){case 1:return function(n){return e.call(t,n)};case 2:return function(n,r){return e.call(t,n,r)};case 3:return function(n,r,i){return e.call(t,n,r,i)}}return function(){return e.apply(t,arguments)}}},function(e,t){var n={}.toString;e.exports=function(e){return n.call(e).slice(8,-1)}},function(e,t){var n=Math.ceil,r=Math.floor;e.exports=function(e){return isNaN(e=+e)?0:(0<e?r:n)(e)}},function(e,t,n){"use strict";var r=n(3);e.exports=function(e,t){return!!e&&r((function(){t?e.call(null,(function(){}),1):e.call(null)}))}},function(e,t,n){var r=n(4);e.exports=function(e,t){if(!r(e))return e;var n,i;if(t&&"function"==typeof(n=e.toString)&&!r(i=n.call(e)))return i;if("function"==typeof(n=e.valueOf)&&!r(i=n.call(e)))return i;if(!t&&"function"==typeof(n=e.toString)&&!r(i=n.call(e)))return i;throw TypeError("Can't convert object to primitive value")}},function(e,t){e.exports=function(e){if(null==e)throw TypeError("Can't call method on  "+e);return e}},function(e,t,n){var r=n(0),i=n(24),o=n(3);e.exports=function(e,t){var n=(i.Object||{})[e]||Object[e],u={};u[e]=t(n),r(r.S+r.F*o((function(){n(1)})),"Object",u)}},function(e,t,n){var r=n(25),i=n(61),o=n(12),u=n(7),l=n(100);e.exports=function(e,t){var n=1==e,a=2==e,s=3==e,c=4==e,f=6==e,d=5==e||f,h=t||l;return function(t,l,p){for(var v,_,g=o(t),m=i(g),y=r(l,p,3),b=u(m.length),C=0,S=n?h(t,b):a?h(t,0):void 0;C<b;C++)if((d||C in m)&&(_=y(v=m[C],C,g),e))if(n)S[C]=_;else if(_)switch(e){case 3:return!0;case 5:return v;case 6:return C;case 2:S.push(v)}else if(c)return!1;return f?-1:s||c?c:S}}},function(e,t,n){"use strict";function r(e){return'"'+e.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\x08/g,"\\b").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\f/g,"\\f").replace(/\r/g,"\\r").replace(/[\x00-\x07\x0B\x0E-\x1F\x80-\uFFFF]/g,escape)+'"'}e.exports=((e={parse:function(e,t){var i={CRLF:c,DIGIT:f,ALPHA:d,HEXDIG:h,WSP:p,OCTET:v,DQUOTE:_,SP:g,HTAB:m,alphanum:y,reserved:b,unreserved:C,mark:S,escaped:T,LWS:E,SWS:A,HCOLON:w,TEXT_UTF8_TRIM:R,TEXT_UTF8char:I,UTF8_NONASCII:O,UTF8_CONT:k,LHEX:function(){var t;return null===(t=f())&&(/^[a-f]/.test(e.charAt(o))?(t=e.charAt(o),o++):(t=null,0===u&&s("[a-f]"))),t},token:P,token_nodot:x,separators:function(){var t;return 40===e.charCodeAt(o)?(t="(",o++):(t=null,0===u&&s('"("')),null===t&&(41===e.charCodeAt(o)?(t=")",o++):(t=null,0===u&&s('")"')),null===t&&(60===e.charCodeAt(o)?(t="<",o++):(t=null,0===u&&s('"<"')),null===t&&(62===e.charCodeAt(o)?(t=">",o++):(t=null,0===u&&s('">"')),null===t&&(64===e.charCodeAt(o)?(t="@",o++):(t=null,0===u&&s('"@"')),null===t&&(44===e.charCodeAt(o)?(t=",",o++):(t=null,0===u&&s('","')),null===t&&(59===e.charCodeAt(o)?(t=";",o++):(t=null,0===u&&s('";"')),null===t&&(58===e.charCodeAt(o)?(t=":",o++):(t=null,0===u&&s('":"')),null===t&&(92===e.charCodeAt(o)?(t="\\",o++):(t=null,0===u&&s('"\\\\"')),null===t&&null===(t=_())&&(47===e.charCodeAt(o)?(t="/",o++):(t=null,0===u&&s('"/"')),null===t&&(91===e.charCodeAt(o)?(t="[",o++):(t=null,0===u&&s('"["')),null===t&&(93===e.charCodeAt(o)?(t="]",o++):(t=null,0===u&&s('"]"')),null===t&&(63===e.charCodeAt(o)?(t="?",o++):(t=null,0===u&&s('"?"')),null===t&&(61===e.charCodeAt(o)?(t="=",o++):(t=null,0===u&&s('"="')),null===t&&(123===e.charCodeAt(o)?(t="{",o++):(t=null,0===u&&s('"{"')),null===t&&(125===e.charCodeAt(o)?(t="}",o++):(t=null,0===u&&s('"}"')),null===t&&null===(t=g())&&(t=m())))))))))))))))),t},word:D,STAR:M,SLASH:N,EQUAL:L,LPAREN:U,RPAREN:j,RAQUOT:F,LAQUOT:q,COMMA:H,SEMI:V,COLON:W,LDQUOT:G,RDQUOT:B,comment:function e(){var t,n,r,i;if(i=o,null!==(t=U())){for(n=[],null===(r=z())&&null===(r=Y())&&(r=e());null!==r;)n.push(r),null===(r=z())&&null===(r=Y())&&(r=e());null!==n&&null!==(r=j())?t=[t,n,r]:(t=null,o=i)}else t=null,o=i;return t},ctext:z,quoted_string:$,quoted_string_clean:J,qdtext:K,quoted_pair:Y,SIP_URI_noparams:X,SIP_URI:Q,uri_scheme:Z,uri_scheme_sips:ee,uri_scheme_sip:te,userinfo:ne,user:re,user_unreserved:ie,password:oe,hostport:ue,host:le,hostname:ae,domainlabel:se,toplabel:ce,IPv6reference:fe,IPv6address:de,h16:he,ls32:pe,IPv4address:ve,dec_octet:_e,port:ge,uri_parameters:me,uri_parameter:ye,transport_param:be,user_param:Ce,method_param:Se,ttl_param:Te,maddr_param:Ee,lr_param:Ae,other_param:we,pname:Re,pvalue:Ie,paramchar:Oe,param_unreserved:ke,headers:Pe,header:xe,hname:De,hvalue:Me,hnv_unreserved:Ne,Request_Response:function(){var e;return null===(e=ft())&&(e=Le()),e},Request_Line:Le,Request_URI:Ue,absoluteURI:je,hier_part:Fe,net_path:qe,abs_path:He,opaque_part:Ve,uric:We,uric_no_slash:Ge,path_segments:Be,segment:ze,param:$e,pchar:Je,scheme:Ke,authority:Ye,srvr:Xe,reg_name:Qe,query:Ze,SIP_Version:et,INVITEm:tt,ACKm:nt,OPTIONSm:rt,BYEm:it,CANCELm:ot,REGISTERm:ut,SUBSCRIBEm:lt,NOTIFYm:at,REFERm:st,Method:ct,Status_Line:ft,Status_Code:dt,extension_code:ht,Reason_Phrase:pt,Allow_Events:function(){var e,t,n,r,i,u;if(i=o,null!==(e=jt())){for(t=[],u=o,null!==(n=H())&&null!==(r=jt())?n=[n,r]:(n=null,o=u);null!==n;)t.push(n),u=o,null!==(n=H())&&null!==(r=jt())?n=[n,r]:(n=null,o=u);null!==t?e=[e,t]:(e=null,o=i)}else e=null,o=i;return e},Call_ID:function(){var t,n,r,i,l,a;return l=i=o,null!==(t=D())?(a=o,64===e.charCodeAt(o)?(n="@",o++):(n=null,0===u&&s('"@"')),null!==n&&null!==(r=D())?n=[n,r]:(n=null,o=a),null!==(n=null!==n?n:"")?t=[t,n]:(t=null,o=l)):(t=null,o=l),null!==t&&(t=void(Hn=e.substring(o,i))),null===t&&(o=i),t},Contact:function(){var e,t,n,r,i,u,l;if(i=o,null===(e=M()))if(u=o,null!==(e=vt())){for(t=[],l=o,null!==(n=H())&&null!==(r=vt())?n=[n,r]:(n=null,o=l);null!==n;)t.push(n),l=o,null!==(n=H())&&null!==(r=vt())?n=[n,r]:(n=null,o=l);null!==t?e=[e,t]:(e=null,o=u)}else e=null,o=u;return null!==e&&(e=function(){for(var e=Hn.multi_header.length,t=0;t<e;t++)if(null===Hn.multi_header[t].parsed){Hn=null;break}Hn=null!==Hn?Hn.multi_header:-1}()),null===e&&(o=i),e},contact_param:vt,name_addr:_t,display_name:gt,contact_params:mt,c_p_q:yt,c_p_expires:bt,delta_seconds:Ct,qvalue:St,generic_param:Tt,gen_value:Et,Content_Disposition:function(){var e,t,n,r,i,u;if(i=o,null!==(e=At())){for(t=[],u=o,null!==(n=V())&&null!==(r=wt())?n=[n,r]:(n=null,o=u);null!==n;)t.push(n),u=o,null!==(n=V())&&null!==(r=wt())?n=[n,r]:(n=null,o=u);null!==t?e=[e,t]:(e=null,o=i)}else e=null,o=i;return e},disp_type:At,disp_param:wt,handling_param:Rt,Content_Encoding:function(){var e,t,n,r,i,u;if(i=o,null!==(e=P())){for(t=[],u=o,null!==(n=H())&&null!==(r=P())?n=[n,r]:(n=null,o=u);null!==n;)t.push(n),u=o,null!==(n=H())&&null!==(r=P())?n=[n,r]:(n=null,o=u);null!==t?e=[e,t]:(e=null,o=i)}else e=null,o=i;return e},Content_Length:function(){var e,t,n;if(n=o,null!==(t=f()))for(e=[];null!==t;)e.push(t),t=f();else e=null;return null!==e&&(e=void(Hn=parseInt(e.join("")))),null===e&&(o=n),e},Content_Type:function(){var t,n;return n=o,null!==(t=It())&&(t=void(Hn=e.substring(o,n))),null===t&&(o=n),t},media_type:It,m_type:Ot,discrete_type:kt,composite_type:Pt,extension_token:xt,x_token:Dt,m_subtype:Mt,m_parameter:Nt,m_value:Lt,CSeq:function(){var e,t,n,r;return r=o,null!==(e=Ut())&&null!==(t=E())&&null!==(n=ct())?e=[e,t,n]:(e=null,o=r),e},CSeq_value:Ut,Expires:function(){var e,t;return t=o,null!==(e=Ct())&&(e=void(Hn=e)),null===e&&(o=t),e},Event:function(){var e,t,n,r,i,u,l;if(u=i=o,null!==(e=jt())){for(t=[],l=o,null!==(n=V())&&null!==(r=Tt())?n=[n,r]:(n=null,o=l);null!==n;)t.push(n),l=o,null!==(n=V())&&null!==(r=Tt())?n=[n,r]:(n=null,o=l);null!==t?e=[e,t]:(e=null,o=u)}else e=null,o=u;return null!==e&&(e=function(e){Hn.event=e.join("").toLowerCase()}(e[0])),null===e&&(o=i),e},event_type:jt,From:function(){var e,t,n,r,i,u,l;if(u=i=o,null===(e=X())&&(e=_t()),null!==e){for(t=[],l=o,null!==(n=V())&&null!==(r=Ft())?n=[n,r]:(n=null,o=l);null!==n;)t.push(n),l=o,null!==(n=V())&&null!==(r=Ft())?n=[n,r]:(n=null,o=l);null!==t?e=[e,t]:(e=null,o=u)}else e=null,o=u;return null!==e&&(e=function(){var e=Hn.tag;try{Hn=new qn(Hn.uri,Hn.display_name,Hn.params),e&&Hn.setParam("tag",e)}catch(e){Hn=-1}}()),null===e&&(o=i),e},from_param:Ft,tag_param:qt,Max_Forwards:function(){var e,t,n;if(n=o,null!==(t=f()))for(e=[];null!==t;)e.push(t),t=f();else e=null;return null!==e&&(e=void(Hn=parseInt(e.join("")))),null===e&&(o=n),e},Min_Expires:function(){var e,t;return t=o,null!==(e=Ct())&&(e=void(Hn=e)),null===e&&(o=t),e},Name_Addr_Header:function(){var e,t,n,r,i,u,l,a,s,c;for(s=a=o,e=[],t=gt();null!==t;)e.push(t),t=gt();if(null!==e)if(null!==(t=q()))if(null!==(n=Q()))if(null!==(r=F())){for(i=[],c=o,null!==(u=V())&&null!==(l=Tt())?u=[u,l]:(u=null,o=c);null!==u;)i.push(u),c=o,null!==(u=V())&&null!==(l=Tt())?u=[u,l]:(u=null,o=c);null!==i?e=[e,t,n,r,i]:(e=null,o=s)}else e=null,o=s;else e=null,o=s;else e=null,o=s;else e=null,o=s;return null!==e&&(e=function(){try{Hn=new qn(Hn.uri,Hn.display_name,Hn.params)}catch(e){Hn=-1}}()),null===e&&(o=a),e},Proxy_Authenticate:function(){return Ht()},challenge:Ht,other_challenge:Vt,auth_param:Wt,digest_cln:Gt,realm:Bt,realm_value:zt,domain:$t,URI:Jt,nonce:Kt,nonce_value:Yt,opaque:Xt,stale:Qt,algorithm:Zt,qop_options:en,qop_value:tn,Proxy_Require:function(){var e,t,n,r,i,u;if(i=o,null!==(e=P())){for(t=[],u=o,null!==(n=H())&&null!==(r=P())?n=[n,r]:(n=null,o=u);null!==n;)t.push(n),u=o,null!==(n=H())&&null!==(r=P())?n=[n,r]:(n=null,o=u);null!==t?e=[e,t]:(e=null,o=i)}else e=null,o=i;return e},Record_Route:function(){var e,t,n,r,i,u,l;if(u=i=o,null!==(e=nn())){for(t=[],l=o,null!==(n=H())&&null!==(r=nn())?n=[n,r]:(n=null,o=l);null!==n;)t.push(n),l=o,null!==(n=H())&&null!==(r=nn())?n=[n,r]:(n=null,o=l);null!==t?e=[e,t]:(e=null,o=u)}else e=null,o=u;return null!==e&&(e=function(){for(var e=Hn.multi_header.length,t=0;t<e;t++)if(null===Hn.multi_header[t].parsed){Hn=null;break}Hn=null!==Hn?Hn.multi_header:-1}()),null===e&&(o=i),e},rec_route:nn,Reason:function(){var t,n,r,i,l,a,c;if(a=l=o,"sip"===e.substr(o,3).toLowerCase()?(t=e.substr(o,3),o+=3):(t=null,0===u&&s('"SIP"')),null===t&&(t=P()),null!==t){for(n=[],c=o,null!==(r=V())&&null!==(i=rn())?r=[r,i]:(r=null,o=c);null!==r;)n.push(r),c=o,null!==(r=V())&&null!==(i=rn())?r=[r,i]:(r=null,o=c);null!==n?t=[t,n]:(t=null,o=a)}else t=null,o=a;return null!==t&&(t=function(e){Hn.protocol=e.toLowerCase(),Hn.params||(Hn.params={}),Hn.params.text&&'"'===Hn.params.text[0]&&(e=Hn.params.text,Hn.text=e.substring(1,e.length-1),delete Hn.params.text)}(t[0])),null===t&&(o=l),t},reason_param:rn,reason_cause:on,Require:function(){var e,t,n,r,i,u;if(i=o,null!==(e=P())){for(t=[],u=o,null!==(n=H())&&null!==(r=P())?n=[n,r]:(n=null,o=u);null!==n;)t.push(n),u=o,null!==(n=H())&&null!==(r=P())?n=[n,r]:(n=null,o=u);null!==t?e=[e,t]:(e=null,o=i)}else e=null,o=i;return e},Route:function(){var e,t,n,r,i,u;if(i=o,null!==(e=un())){for(t=[],u=o,null!==(n=H())&&null!==(r=un())?n=[n,r]:(n=null,o=u);null!==n;)t.push(n),u=o,null!==(n=H())&&null!==(r=un())?n=[n,r]:(n=null,o=u);null!==t?e=[e,t]:(e=null,o=i)}else e=null,o=i;return e},route_param:un,Subscription_State:function(){var e,t,n,r,i,u;if(i=o,null!==(e=ln())){for(t=[],u=o,null!==(n=V())&&null!==(r=an())?n=[n,r]:(n=null,o=u);null!==n;)t.push(n),u=o,null!==(n=V())&&null!==(r=an())?n=[n,r]:(n=null,o=u);null!==t?e=[e,t]:(e=null,o=i)}else e=null,o=i;return e},substate_value:ln,subexp_params:an,event_reason_value:sn,Subject:function(){var e;return null!==(e=R())?e:""},Supported:function(){var e,t,n,r,i,u;if(i=o,null!==(e=P())){for(t=[],u=o,null!==(n=H())&&null!==(r=P())?n=[n,r]:(n=null,o=u);null!==n;)t.push(n),u=o,null!==(n=H())&&null!==(r=P())?n=[n,r]:(n=null,o=u);null!==t?e=[e,t]:(e=null,o=i)}else e=null,o=i;return null!==e?e:""},To:function(){var e,t,n,r,i,u,l;if(u=i=o,null===(e=X())&&(e=_t()),null!==e){for(t=[],l=o,null!==(n=V())&&null!==(r=cn())?n=[n,r]:(n=null,o=l);null!==n;)t.push(n),l=o,null!==(n=V())&&null!==(r=cn())?n=[n,r]:(n=null,o=l);null!==t?e=[e,t]:(e=null,o=u)}else e=null,o=u;return null!==e&&(e=function(){var e=Hn.tag;try{Hn=new qn(Hn.uri,Hn.display_name,Hn.params),e&&Hn.setParam("tag",e)}catch(e){Hn=-1}}()),null===e&&(o=i),e},to_param:cn,Via:function(){var e,t,n,r,i,u;if(i=o,null!==(e=fn())){for(t=[],u=o,null!==(n=H())&&null!==(r=fn())?n=[n,r]:(n=null,o=u);null!==n;)t.push(n),u=o,null!==(n=H())&&null!==(r=fn())?n=[n,r]:(n=null,o=u);null!==t?e=[e,t]:(e=null,o=i)}else e=null,o=i;return e},via_param:fn,via_params:dn,via_ttl:hn,via_maddr:pn,via_received:vn,via_branch:_n,response_port:gn,rport:mn,sent_protocol:yn,protocol_name:bn,transport:Cn,sent_by:Sn,via_host:Tn,via_port:En,ttl:An,WWW_Authenticate:function(){return Ht()},Session_Expires:function(){var e,t,n,r,i,u;if(i=o,null!==(e=wn())){for(t=[],u=o,null!==(n=V())&&null!==(r=Rn())?n=[n,r]:(n=null,o=u);null!==n;)t.push(n),u=o,null!==(n=V())&&null!==(r=Rn())?n=[n,r]:(n=null,o=u);null!==t?e=[e,t]:(e=null,o=i)}else e=null,o=i;return e},s_e_expires:wn,s_e_params:Rn,s_e_refresher:In,extension_header:function(){var e,t,n,r;return r=o,null!==(e=P())&&null!==(t=w())&&null!==(n=On())?e=[e,t,n]:(e=null,o=r),e},header_value:On,message_body:function(){var e,t;for(e=[],t=v();null!==t;)e.push(t),t=v();return e},uuid_URI:function(){var t,n,r;return r=o,"uuid:"===e.substr(o,5)?(t="uuid:",o+=5):(t=null,0===u&&s('"uuid:"')),null!==t&&null!==(n=kn())?t=[t,n]:(t=null,o=r),t},uuid:kn,hex4:Pn,hex8:xn,hex12:Dn,Refer_To:function(){var e,t,n,r,i,u,l;if(u=i=o,null===(e=X())&&(e=_t()),null!==e){for(t=[],l=o,null!==(n=V())&&null!==(r=Tt())?n=[n,r]:(n=null,o=l);null!==n;)t.push(n),l=o,null!==(n=V())&&null!==(r=Tt())?n=[n,r]:(n=null,o=l);null!==t?e=[e,t]:(e=null,o=u)}else e=null,o=u;return null!==e&&(e=function(){try{Hn=new qn(Hn.uri,Hn.display_name,Hn.params)}catch(e){Hn=-1}}()),null===e&&(o=i),e},Replaces:function(){var e,t,n,r,i,u;if(i=o,null!==(e=Mn())){for(t=[],u=o,null!==(n=V())&&null!==(r=Nn())?n=[n,r]:(n=null,o=u);null!==n;)t.push(n),u=o,null!==(n=V())&&null!==(r=Nn())?n=[n,r]:(n=null,o=u);null!==t?e=[e,t]:(e=null,o=i)}else e=null,o=i;return e},call_id:Mn,replaces_param:Nn,to_tag:Ln,from_tag:Un,early_flag:jn};if(void 0!==t){if(void 0===i[t])throw new Error("Invalid rule name: "+r(t)+".")}else t="CRLF";var o=0,u=0,l=0,a=[];function s(e){o<l||(l<o&&(l=o,a=[]),a.push(e))}function c(){var t;return"\r\n"===e.substr(o,2)?(t="\r\n",o+=2):(t=null,0===u&&s('"\\r\\n"')),t}function f(){var t;return/^[0-9]/.test(e.charAt(o))?(t=e.charAt(o),o++):(t=null,0===u&&s("[0-9]")),t}function d(){var t;return/^[a-zA-Z]/.test(e.charAt(o))?(t=e.charAt(o),o++):(t=null,0===u&&s("[a-zA-Z]")),t}function h(){var t;return/^[0-9a-fA-F]/.test(e.charAt(o))?(t=e.charAt(o),o++):(t=null,0===u&&s("[0-9a-fA-F]")),t}function p(){var e=g();return null===e?m():e}function v(){var t;return/^[\0-\xFF]/.test(e.charAt(o))?(t=e.charAt(o),o++):(t=null,0===u&&s("[\\0-\\xFF]")),t}function _(){var t;return/^["]/.test(e.charAt(o))?(t=e.charAt(o),o++):(t=null,0===u&&s('["]')),t}function g(){var t;return 32===e.charCodeAt(o)?(t=" ",o++):(t=null,0===u&&s('" "')),t}function m(){var t;return 9===e.charCodeAt(o)?(t="\t",o++):(t=null,0===u&&s('"\\t"')),t}function y(){var t;return/^[a-zA-Z0-9]/.test(e.charAt(o))?(t=e.charAt(o),o++):(t=null,0===u&&s("[a-zA-Z0-9]")),t}function b(){var t;return 59===e.charCodeAt(o)?(t=";",o++):(t=null,0===u&&s('";"')),null===t&&(47===e.charCodeAt(o)?(t="/",o++):(t=null,0===u&&s('"/"')),null===t&&(63===e.charCodeAt(o)?(t="?",o++):(t=null,0===u&&s('"?"')),null===t&&(58===e.charCodeAt(o)?(t=":",o++):(t=null,0===u&&s('":"')),null===t&&(64===e.charCodeAt(o)?(t="@",o++):(t=null,0===u&&s('"@"')),null===t&&(38===e.charCodeAt(o)?(t="&",o++):(t=null,0===u&&s('"&"')),null===t&&(61===e.charCodeAt(o)?(t="=",o++):(t=null,0===u&&s('"="')),null===t&&(43===e.charCodeAt(o)?(t="+",o++):(t=null,0===u&&s('"+"')),null===t&&(36===e.charCodeAt(o)?(t="$",o++):(t=null,0===u&&s('"$"')),null===t&&(44===e.charCodeAt(o)?(t=",",o++):(t=null,0===u&&s('","'))))))))))),t}function C(){var e=y();return null===e?S():e}function S(){var t;return 45===e.charCodeAt(o)?(t="-",o++):(t=null,0===u&&s('"-"')),null===t&&(95===e.charCodeAt(o)?(t="_",o++):(t=null,0===u&&s('"_"')),null===t&&(46===e.charCodeAt(o)?(t=".",o++):(t=null,0===u&&s('"."')),null===t&&(33===e.charCodeAt(o)?(t="!",o++):(t=null,0===u&&s('"!"')),null===t&&(126===e.charCodeAt(o)?(t="~",o++):(t=null,0===u&&s('"~"')),null===t&&(42===e.charCodeAt(o)?(t="*",o++):(t=null,0===u&&s('"*"')),null===t&&(39===e.charCodeAt(o)?(t="'",o++):(t=null,0===u&&s('"\'"')),null===t&&(40===e.charCodeAt(o)?(t="(",o++):(t=null,0===u&&s('"("')),null===t&&(41===e.charCodeAt(o)?(t=")",o++):(t=null,0===u&&s('")"')))))))))),t}function T(){var t,n,r,i=o,l=o;return 37===e.charCodeAt(o)?(t="%",o++):(t=null,0===u&&s('"%"')),null!==t&&null!==(n=h())&&null!==(r=h())?t=[t,n,r]:(t=null,o=l),null===(t=null!==t?t.join(""):t)&&(o=i),t}function E(){for(var e,t=o,n=o,r=o,i=[],u=p();null!==u;)i.push(u),u=p();if(null!==i&&null!==(u=c())?i=[i,u]:(i=null,o=r),null!==(i=null!==i?i:"")){if(null!==(e=p()))for(u=[];null!==e;)u.push(e),e=p();else u=null;null!==u?i=[i,u]:(i=null,o=n)}else i=null,o=n;return null===(i=null!==i?" ":i)&&(o=t),i}function A(){var e=E();return null!==e?e:""}function w(){var t,n=o,r=o,i=[],l=g();for(null===l&&(l=m());null!==l;)i.push(l),null===(l=g())&&(l=m());return null!==i?(58===e.charCodeAt(o)?(l=":",o++):(l=null,0===u&&s('":"')),null!==l&&null!==(t=A())?i=[i,l,t]:(i=null,o=r)):(i=null,o=r),null===(i=null!==i?":":i)&&(o=n),i}function R(){var t,n,r,i,u=o,l=o,a=I();if(null!==a)for(t=[];null!==a;)t.push(a),a=I();else t=null;if(null!==t){for(a=[],i=o,n=[],r=E();null!==r;)n.push(r),r=E();for(null!==n&&null!==(r=I())?n=[n,r]:(n=null,o=i);null!==n;){for(a.push(n),i=o,n=[],r=E();null!==r;)n.push(r),r=E();null!==n&&null!==(r=I())?n=[n,r]:(n=null,o=i)}null!==a?t=[t,a]:(t=null,o=l)}else t=null,o=l;return null===(t=null!==t?e.substring(o,u):t)&&(o=u),t}function I(){var t;return/^[!-~]/.test(e.charAt(o))?(t=e.charAt(o),o++):(t=null,0===u&&s("[!-~]")),null===t?O():t}function O(){var t;return/^[\x80-\uFFFF]/.test(e.charAt(o))?(t=e.charAt(o),o++):(t=null,0===u&&s("[\\x80-\\uFFFF]")),t}function k(){var t;return/^[\x80-\xBF]/.test(e.charAt(o))?(t=e.charAt(o),o++):(t=null,0===u&&s("[\\x80-\\xBF]")),t}function P(){var t,n=o,r=y();if(null===r&&(45===e.charCodeAt(o)?(r="-",o++):(r=null,0===u&&s('"-"')),null===r&&(46===e.charCodeAt(o)?(r=".",o++):(r=null,0===u&&s('"."')),null===r&&(33===e.charCodeAt(o)?(r="!",o++):(r=null,0===u&&s('"!"')),null===r&&(37===e.charCodeAt(o)?(r="%",o++):(r=null,0===u&&s('"%"')),null===r&&(42===e.charCodeAt(o)?(r="*",o++):(r=null,0===u&&s('"*"')),null===r&&(95===e.charCodeAt(o)?(r="_",o++):(r=null,0===u&&s('"_"')),null===r&&(43===e.charCodeAt(o)?(r="+",o++):(r=null,0===u&&s('"+"')),null===r&&(96===e.charCodeAt(o)?(r="`",o++):(r=null,0===u&&s('"`"')),null===r&&(39===e.charCodeAt(o)?(r="'",o++):(r=null,0===u&&s('"\'"')),null===r&&(126===e.charCodeAt(o)?(r="~",o++):(r=null,0===u&&s('"~"')))))))))))),null!==r)for(t=[];null!==r;)t.push(r),null===(r=y())&&(45===e.charCodeAt(o)?(r="-",o++):(r=null,0===u&&s('"-"')),null===r&&(46===e.charCodeAt(o)?(r=".",o++):(r=null,0===u&&s('"."')),null===r&&(33===e.charCodeAt(o)?(r="!",o++):(r=null,0===u&&s('"!"')),null===r&&(37===e.charCodeAt(o)?(r="%",o++):(r=null,0===u&&s('"%"')),null===r&&(42===e.charCodeAt(o)?(r="*",o++):(r=null,0===u&&s('"*"')),null===r&&(95===e.charCodeAt(o)?(r="_",o++):(r=null,0===u&&s('"_"')),null===r&&(43===e.charCodeAt(o)?(r="+",o++):(r=null,0===u&&s('"+"')),null===r&&(96===e.charCodeAt(o)?(r="`",o++):(r=null,0===u&&s('"`"')),null===r&&(39===e.charCodeAt(o)?(r="'",o++):(r=null,0===u&&s('"\'"')),null===r&&(126===e.charCodeAt(o)?(r="~",o++):(r=null,0===u&&s('"~"'))))))))))));else t=null;return null===(t=null!==t?e.substring(o,n):t)&&(o=n),t}function x(){var t,n=o,r=y();if(null===r&&(45===e.charCodeAt(o)?(r="-",o++):(r=null,0===u&&s('"-"')),null===r&&(33===e.charCodeAt(o)?(r="!",o++):(r=null,0===u&&s('"!"')),null===r&&(37===e.charCodeAt(o)?(r="%",o++):(r=null,0===u&&s('"%"')),null===r&&(42===e.charCodeAt(o)?(r="*",o++):(r=null,0===u&&s('"*"')),null===r&&(95===e.charCodeAt(o)?(r="_",o++):(r=null,0===u&&s('"_"')),null===r&&(43===e.charCodeAt(o)?(r="+",o++):(r=null,0===u&&s('"+"')),null===r&&(96===e.charCodeAt(o)?(r="`",o++):(r=null,0===u&&s('"`"')),null===r&&(39===e.charCodeAt(o)?(r="'",o++):(r=null,0===u&&s('"\'"')),null===r&&(126===e.charCodeAt(o)?(r="~",o++):(r=null,0===u&&s('"~"'))))))))))),null!==r)for(t=[];null!==r;)t.push(r),null===(r=y())&&(45===e.charCodeAt(o)?(r="-",o++):(r=null,0===u&&s('"-"')),null===r&&(33===e.charCodeAt(o)?(r="!",o++):(r=null,0===u&&s('"!"')),null===r&&(37===e.charCodeAt(o)?(r="%",o++):(r=null,0===u&&s('"%"')),null===r&&(42===e.charCodeAt(o)?(r="*",o++):(r=null,0===u&&s('"*"')),null===r&&(95===e.charCodeAt(o)?(r="_",o++):(r=null,0===u&&s('"_"')),null===r&&(43===e.charCodeAt(o)?(r="+",o++):(r=null,0===u&&s('"+"')),null===r&&(96===e.charCodeAt(o)?(r="`",o++):(r=null,0===u&&s('"`"')),null===r&&(39===e.charCodeAt(o)?(r="'",o++):(r=null,0===u&&s('"\'"')),null===r&&(126===e.charCodeAt(o)?(r="~",o++):(r=null,0===u&&s('"~"')))))))))));else t=null;return null===(t=null!==t?e.substring(o,n):t)&&(o=n),t}function D(){var t,n=o,r=y();if(null===r&&(45===e.charCodeAt(o)?(r="-",o++):(r=null,0===u&&s('"-"')),null===r&&(46===e.charCodeAt(o)?(r=".",o++):(r=null,0===u&&s('"."')),null===r&&(33===e.charCodeAt(o)?(r="!",o++):(r=null,0===u&&s('"!"')),null===r&&(37===e.charCodeAt(o)?(r="%",o++):(r=null,0===u&&s('"%"')),null===r&&(42===e.charCodeAt(o)?(r="*",o++):(r=null,0===u&&s('"*"')),null===r&&(95===e.charCodeAt(o)?(r="_",o++):(r=null,0===u&&s('"_"')),null===r&&(43===e.charCodeAt(o)?(r="+",o++):(r=null,0===u&&s('"+"')),null===r&&(96===e.charCodeAt(o)?(r="`",o++):(r=null,0===u&&s('"`"')),null===r&&(39===e.charCodeAt(o)?(r="'",o++):(r=null,0===u&&s('"\'"')),null===r&&(126===e.charCodeAt(o)?(r="~",o++):(r=null,0===u&&s('"~"')),null===r&&(40===e.charCodeAt(o)?(r="(",o++):(r=null,0===u&&s('"("')),null===r&&(41===e.charCodeAt(o)?(r=")",o++):(r=null,0===u&&s('")"')),null===r&&(60===e.charCodeAt(o)?(r="<",o++):(r=null,0===u&&s('"<"')),null===r&&(62===e.charCodeAt(o)?(r=">",o++):(r=null,0===u&&s('">"')),null===r&&(58===e.charCodeAt(o)?(r=":",o++):(r=null,0===u&&s('":"')),null===r&&(92===e.charCodeAt(o)?(r="\\",o++):(r=null,0===u&&s('"\\\\"')),null===r&&null===(r=_())&&(47===e.charCodeAt(o)?(r="/",o++):(r=null,0===u&&s('"/"')),null===r&&(91===e.charCodeAt(o)?(r="[",o++):(r=null,0===u&&s('"["')),null===r&&(93===e.charCodeAt(o)?(r="]",o++):(r=null,0===u&&s('"]"')),null===r&&(63===e.charCodeAt(o)?(r="?",o++):(r=null,0===u&&s('"?"')),null===r&&(123===e.charCodeAt(o)?(r="{",o++):(r=null,0===u&&s('"{"')),null===r&&(125===e.charCodeAt(o)?(r="}",o++):(r=null,0===u&&s('"}"')))))))))))))))))))))))),null!==r)for(t=[];null!==r;)t.push(r),null===(r=y())&&(45===e.charCodeAt(o)?(r="-",o++):(r=null,0===u&&s('"-"')),null===r&&(46===e.charCodeAt(o)?(r=".",o++):(r=null,0===u&&s('"."')),null===r&&(33===e.charCodeAt(o)?(r="!",o++):(r=null,0===u&&s('"!"')),null===r&&(37===e.charCodeAt(o)?(r="%",o++):(r=null,0===u&&s('"%"')),null===r&&(42===e.charCodeAt(o)?(r="*",o++):(r=null,0===u&&s('"*"')),null===r&&(95===e.charCodeAt(o)?(r="_",o++):(r=null,0===u&&s('"_"')),null===r&&(43===e.charCodeAt(o)?(r="+",o++):(r=null,0===u&&s('"+"')),null===r&&(96===e.charCodeAt(o)?(r="`",o++):(r=null,0===u&&s('"`"')),null===r&&(39===e.charCodeAt(o)?(r="'",o++):(r=null,0===u&&s('"\'"')),null===r&&(126===e.charCodeAt(o)?(r="~",o++):(r=null,0===u&&s('"~"')),null===r&&(40===e.charCodeAt(o)?(r="(",o++):(r=null,0===u&&s('"("')),null===r&&(41===e.charCodeAt(o)?(r=")",o++):(r=null,0===u&&s('")"')),null===r&&(60===e.charCodeAt(o)?(r="<",o++):(r=null,0===u&&s('"<"')),null===r&&(62===e.charCodeAt(o)?(r=">",o++):(r=null,0===u&&s('">"')),null===r&&(58===e.charCodeAt(o)?(r=":",o++):(r=null,0===u&&s('":"')),null===r&&(92===e.charCodeAt(o)?(r="\\",o++):(r=null,0===u&&s('"\\\\"')),null===r&&null===(r=_())&&(47===e.charCodeAt(o)?(r="/",o++):(r=null,0===u&&s('"/"')),null===r&&(91===e.charCodeAt(o)?(r="[",o++):(r=null,0===u&&s('"["')),null===r&&(93===e.charCodeAt(o)?(r="]",o++):(r=null,0===u&&s('"]"')),null===r&&(63===e.charCodeAt(o)?(r="?",o++):(r=null,0===u&&s('"?"')),null===r&&(123===e.charCodeAt(o)?(r="{",o++):(r=null,0===u&&s('"{"')),null===r&&(125===e.charCodeAt(o)?(r="}",o++):(r=null,0===u&&s('"}"'))))))))))))))))))))))));else t=null;return null===(t=null!==t?e.substring(o,n):t)&&(o=n),t}function M(){var t,n,r=o,i=o,l=A();return null!==l?(42===e.charCodeAt(o)?(t="*",o++):(t=null,0===u&&s('"*"')),null!==t&&null!==(n=A())?l=[l,t,n]:(l=null,o=i)):(l=null,o=i),null===(l=null!==l?"*":l)&&(o=r),l}function N(){var t,n,r=o,i=o,l=A();return null!==l?(47===e.charCodeAt(o)?(t="/",o++):(t=null,0===u&&s('"/"')),null!==t&&null!==(n=A())?l=[l,t,n]:(l=null,o=i)):(l=null,o=i),null===(l=null!==l?"/":l)&&(o=r),l}function L(){var t,n,r=o,i=o,l=A();return null!==l?(61===e.charCodeAt(o)?(t="=",o++):(t=null,0===u&&s('"="')),null!==t&&null!==(n=A())?l=[l,t,n]:(l=null,o=i)):(l=null,o=i),null===(l=null!==l?"=":l)&&(o=r),l}function U(){var t,n,r=o,i=o,l=A();return null!==l?(40===e.charCodeAt(o)?(t="(",o++):(t=null,0===u&&s('"("')),null!==t&&null!==(n=A())?l=[l,t,n]:(l=null,o=i)):(l=null,o=i),null===(l=null!==l?"(":l)&&(o=r),l}function j(){var t,n,r=o,i=o,l=A();return null!==l?(41===e.charCodeAt(o)?(t=")",o++):(t=null,0===u&&s('")"')),null!==t&&null!==(n=A())?l=[l,t,n]:(l=null,o=i)):(l=null,o=i),null===(l=null!==l?")":l)&&(o=r),l}function F(){var t,n,r=o,i=o;return 62===e.charCodeAt(o)?(t=">",o++):(t=null,0===u&&s('">"')),null!==t&&null!==(n=A())?t=[t,n]:(t=null,o=i),null===(t=null!==t?">":t)&&(o=r),t}function q(){var t,n=o,r=o,i=A();return null!==i?(60===e.charCodeAt(o)?(t="<",o++):(t=null,0===u&&s('"<"')),null!==t?i=[i,t]:(i=null,o=r)):(i=null,o=r),null===(i=null!==i?"<":i)&&(o=n),i}function H(){var t,n,r=o,i=o,l=A();return null!==l?(44===e.charCodeAt(o)?(t=",",o++):(t=null,0===u&&s('","')),null!==t&&null!==(n=A())?l=[l,t,n]:(l=null,o=i)):(l=null,o=i),null===(l=null!==l?",":l)&&(o=r),l}function V(){var t,n,r=o,i=o,l=A();return null!==l?(59===e.charCodeAt(o)?(t=";",o++):(t=null,0===u&&s('";"')),null!==t&&null!==(n=A())?l=[l,t,n]:(l=null,o=i)):(l=null,o=i),null===(l=null!==l?";":l)&&(o=r),l}function W(){var t,n,r=o,i=o,l=A();return null!==l?(58===e.charCodeAt(o)?(t=":",o++):(t=null,0===u&&s('":"')),null!==t&&null!==(n=A())?l=[l,t,n]:(l=null,o=i)):(l=null,o=i),null===(l=null!==l?":":l)&&(o=r),l}function G(){var e,t=o,n=o,r=A();return null!==r&&null!==(e=_())?r=[r,e]:(r=null,o=n),null===(r=null!==r?'"':r)&&(o=t),r}function B(){var e,t=o,n=o,r=_();return null!==r&&null!==(e=A())?r=[r,e]:(r=null,o=n),null===(r=null!==r?'"':r)&&(o=t),r}function z(){var t;return/^[!-']/.test(e.charAt(o))?(t=e.charAt(o),o++):(t=null,0===u&&s("[!-']")),null===t&&(/^[*-[]/.test(e.charAt(o))?(t=e.charAt(o),o++):(t=null,0===u&&s("[*-[]")),null===t&&(/^[\]-~]/.test(e.charAt(o))?(t=e.charAt(o),o++):(t=null,0===u&&s("[\\]-~]")),null===t&&null===(t=O())&&(t=E()))),t}function $(){var t,n,r,i=o,u=o,l=A();if(null!==l)if(null!==(t=_())){for(n=[],null===(r=K())&&(r=Y());null!==r;)n.push(r),null===(r=K())&&(r=Y());null!==n&&null!==(r=_())?l=[l,t,n,r]:(l=null,o=u)}else l=null,o=u;else l=null,o=u;return null===(l=null!==l?e.substring(o,i):l)&&(o=i),l}function J(){var t,n,r,i=o,u=o,l=A();if(null!==l)if(null!==(t=_())){for(n=[],null===(r=K())&&(r=Y());null!==r;)n.push(r),null===(r=K())&&(r=Y());null!==n&&null!==(r=_())?l=[l,t,n,r]:(l=null,o=u)}else l=null,o=u;else l=null,o=u;return null===(l=null!==l?(u=e.substring(o,i).trim()).substring(1,u.length-1).replace(/\\([\x00-\x09\x0b-\x0c\x0e-\x7f])/g,"$1"):l)&&(o=i),l}function K(){var t=E();return null===t&&(33===e.charCodeAt(o)?(t="!",o++):(t=null,0===u&&s('"!"')),null===t&&(/^[#-[]/.test(e.charAt(o))?(t=e.charAt(o),o++):(t=null,0===u&&s("[#-[]")),null===t&&(/^[\]-~]/.test(e.charAt(o))?(t=e.charAt(o),o++):(t=null,0===u&&s("[\\]-~]")),null===t&&(t=O())))),t}function Y(){var t,n,r=o;return 92===e.charCodeAt(o)?(t="\\",o++):(t=null,0===u&&s('"\\\\"')),null!==t?(/^[\0-\t]/.test(e.charAt(o))?(n=e.charAt(o),o++):(n=null,0===u&&s("[\\0-\\t]")),null===n&&(/^[\x0B-\f]/.test(e.charAt(o))?(n=e.charAt(o),o++):(n=null,0===u&&s("[\\x0B-\\f]")),null===n&&(/^[\x0E-]/.test(e.charAt(o))?(n=e.charAt(o),o++):(n=null,0===u&&s("[\\x0E-]")))),null!==n?t=[t,n]:(t=null,o=r)):(t=null,o=r),t}function X(){var t,n,r,i=o,l=o,a=Z();return null!==a?(58===e.charCodeAt(o)?(t=":",o++):(t=null,0===u&&s('":"')),null!==t&&null!==(n=null!==(n=ne())?n:"")&&null!==(r=ue())?a=[a,t,n,r]:(a=null,o=l)):(a=null,o=l),null===(a=null!==a?function(){try{Hn.uri=new Fn(Hn.scheme,Hn.user,Hn.host,Hn.port),delete Hn.scheme,delete Hn.user,delete Hn.host,delete Hn.host_type,delete Hn.port}catch(e){Hn=-1}}():a)&&(o=i),a}function Q(){var n,r,i,l,a,c=o,f=o,d=Z();return null!==d?(58===e.charCodeAt(o)?(n=":",o++):(n=null,0===u&&s('":"')),null!==n&&null!==(r=null!==(r=ne())?r:"")&&null!==(i=ue())&&null!==(l=me())&&null!==(a=null!==(a=Pe())?a:"")?d=[d,n,r,i,l,a]:(d=null,o=f)):(d=null,o=f),null===(d=null!==d?function(){try{Hn.uri=new Fn(Hn.scheme,Hn.user,Hn.host,Hn.port,Hn.uri_params,Hn.uri_headers),delete Hn.scheme,delete Hn.user,delete Hn.host,delete Hn.host_type,delete Hn.port,delete Hn.uri_params,"SIP_URI"===t&&(Hn=Hn.uri)}catch(e){Hn=-1}}():d)&&(o=c),d}function Z(){var e=ee();return null===e?te():e}function ee(){var t,n,r=o;return"sips"===e.substr(o,4).toLowerCase()?(t=e.substr(o,4),o+=4):(t=null,0===u&&s('"sips"')),null!==t&&(n=t,t=void(Hn.scheme=n.toLowerCase())),null===t&&(o=r),t}function te(){var t,n,r=o;return"sip"===e.substr(o,3).toLowerCase()?(t=e.substr(o,3),o+=3):(t=null,0===u&&s('"sip"')),null!==t&&(n=t,t=void(Hn.scheme=n.toLowerCase())),null===t&&(o=r),t}function ne(){var t,n,r,i=o,l=o,a=re();return null!==a?(r=o,58===e.charCodeAt(o)?(t=":",o++):(t=null,0===u&&s('":"')),null!==t&&null!==(n=oe())?t=[t,n]:(t=null,o=r),null!==(t=null!==t?t:"")?(64===e.charCodeAt(o)?(n="@",o++):(n=null,0===u&&s('"@"')),null!==n?a=[a,t,n]:(a=null,o=l)):(a=null,o=l)):(a=null,o=l),null===(a=null!==a?void(Hn.user=decodeURIComponent(e.substring(o-1,i))):a)&&(o=i),a}function re(){var e,t=C();if(null!==(t=null===t&&null===(t=T())?ie():t))for(e=[];null!==t;)e.push(t),null===(t=C())&&null===(t=T())&&(t=ie());else e=null;return e}function ie(){var t;return 38===e.charCodeAt(o)?(t="&",o++):(t=null,0===u&&s('"&"')),null===t&&(61===e.charCodeAt(o)?(t="=",o++):(t=null,0===u&&s('"="')),null===t&&(43===e.charCodeAt(o)?(t="+",o++):(t=null,0===u&&s('"+"')),null===t&&(36===e.charCodeAt(o)?(t="$",o++):(t=null,0===u&&s('"$"')),null===t&&(44===e.charCodeAt(o)?(t=",",o++):(t=null,0===u&&s('","')),null===t&&(59===e.charCodeAt(o)?(t=";",o++):(t=null,0===u&&s('";"')),null===t&&(63===e.charCodeAt(o)?(t="?",o++):(t=null,0===u&&s('"?"')),null===t&&(47===e.charCodeAt(o)?(t="/",o++):(t=null,0===u&&s('"/"'))))))))),t}function oe(){var t=o,n=[],r=C();for(null===r&&null===(r=T())&&(38===e.charCodeAt(o)?(r="&",o++):(r=null,0===u&&s('"&"')),null===r&&(61===e.charCodeAt(o)?(r="=",o++):(r=null,0===u&&s('"="')),null===r&&(43===e.charCodeAt(o)?(r="+",o++):(r=null,0===u&&s('"+"')),null===r&&(36===e.charCodeAt(o)?(r="$",o++):(r=null,0===u&&s('"$"')),null===r&&(44===e.charCodeAt(o)?(r=",",o++):(r=null,0===u&&s('","')))))));null!==r;)n.push(r),null===(r=C())&&null===(r=T())&&(38===e.charCodeAt(o)?(r="&",o++):(r=null,0===u&&s('"&"')),null===r&&(61===e.charCodeAt(o)?(r="=",o++):(r=null,0===u&&s('"="')),null===r&&(43===e.charCodeAt(o)?(r="+",o++):(r=null,0===u&&s('"+"')),null===r&&(36===e.charCodeAt(o)?(r="$",o++):(r=null,0===u&&s('"$"')),null===r&&(44===e.charCodeAt(o)?(r=",",o++):(r=null,0===u&&s('","')))))));return null===(n=null!==n?void(Hn.password=e.substring(o,t)):n)&&(o=t),n}function ue(){var t,n,r,i=o,l=le();return null!==l?(r=o,58===e.charCodeAt(o)?(t=":",o++):(t=null,0===u&&s('":"')),null!==t&&null!==(n=ge())?t=[t,n]:(t=null,o=r),null!==(t=null!==t?t:"")?l=[l,t]:(l=null,o=i)):(l=null,o=i),l}function le(){var t=o,n=ae();return null!==(n=null===n&&null===(n=ve())?fe():n)&&(Hn.host=e.substring(o,t).toLowerCase(),n=Hn.host),null===n&&(o=t),n}function ae(){var t,n=o,r=o,i=[],l=o,a=se();for(null!==a?(46===e.charCodeAt(o)?(t=".",o++):(t=null,0===u&&s('"."')),null!==t?a=[a,t]:(a=null,o=l)):(a=null,o=l);null!==a;)i.push(a),l=o,null!==(a=se())?(46===e.charCodeAt(o)?(t=".",o++):(t=null,0===u&&s('"."')),null!==t?a=[a,t]:(a=null,o=l)):(a=null,o=l);return null!==i&&null!==(a=ce())?(46===e.charCodeAt(o)?(t=".",o++):(t=null,0===u&&s('"."')),null!==(t=null!==t?t:"")?i=[i,a,t]:(i=null,o=r)):(i=null,o=r),null!==i&&(r=n,Hn.host_type="domain",i=e.substring(o,r)),null===i&&(o=n),i}function se(){var t,n,r=o,i=y();if(null!==i){for(t=[],null===(n=y())&&(45===e.charCodeAt(o)?(n="-",o++):(n=null,0===u&&s('"-"')),null===n&&(95===e.charCodeAt(o)?(n="_",o++):(n=null,0===u&&s('"_"'))));null!==n;)t.push(n),null===(n=y())&&(45===e.charCodeAt(o)?(n="-",o++):(n=null,0===u&&s('"-"')),null===n&&(95===e.charCodeAt(o)?(n="_",o++):(n=null,0===u&&s('"_"'))));null!==t?i=[i,t]:(i=null,o=r)}else i=null,o=r;return i}function ce(){var t,n,r=o,i=d();if(null!==i){for(t=[],null===(n=y())&&(45===e.charCodeAt(o)?(n="-",o++):(n=null,0===u&&s('"-"')),null===n&&(95===e.charCodeAt(o)?(n="_",o++):(n=null,0===u&&s('"_"'))));null!==n;)t.push(n),null===(n=y())&&(45===e.charCodeAt(o)?(n="-",o++):(n=null,0===u&&s('"-"')),null===n&&(95===e.charCodeAt(o)?(n="_",o++):(n=null,0===u&&s('"_"'))));null!==t?i=[i,t]:(i=null,o=r)}else i=null,o=r;return i}function fe(){var t,n,r,i=o,l=o;return 91===e.charCodeAt(o)?(t="[",o++):(t=null,0===u&&s('"["')),null!==t&&null!==(n=de())?(93===e.charCodeAt(o)?(r="]",o++):(r=null,0===u&&s('"]"')),null!==r?t=[t,n,r]:(t=null,o=l)):(t=null,o=l),null!==t&&(l=i,Hn.host_type="IPv6",t=e.substring(o,l)),null===t&&(o=i),t}function de(){var t,n,r,i,l,a,c,f,d,h,p,v,_,g=o,m=o,y=he();return null!==y?(58===e.charCodeAt(o)?(t=":",o++):(t=null,0===u&&s('":"')),null!==t&&null!==(n=he())?(58===e.charCodeAt(o)?(r=":",o++):(r=null,0===u&&s('":"')),null!==r&&null!==(i=he())?(58===e.charCodeAt(o)?(l=":",o++):(l=null,0===u&&s('":"')),null!==l&&null!==(a=he())?(58===e.charCodeAt(o)?(c=":",o++):(c=null,0===u&&s('":"')),null!==c&&null!==(f=he())?(58===e.charCodeAt(o)?(d=":",o++):(d=null,0===u&&s('":"')),null!==d&&null!==(h=he())?(58===e.charCodeAt(o)?(p=":",o++):(p=null,0===u&&s('":"')),null!==p&&null!==(v=pe())?y=[y,t,n,r,i,l,a,c,f,d,h,p,v]:(y=null,o=m)):(y=null,o=m)):(y=null,o=m)):(y=null,o=m)):(y=null,o=m)):(y=null,o=m)):(y=null,o=m),null===y&&(m=o,"::"===e.substr(o,2)?(y="::",o+=2):(y=null,0===u&&s('"::"')),null!==y&&null!==(t=he())?(58===e.charCodeAt(o)?(n=":",o++):(n=null,0===u&&s('":"')),null!==n&&null!==(r=he())?(58===e.charCodeAt(o)?(i=":",o++):(i=null,0===u&&s('":"')),null!==i&&null!==(l=he())?(58===e.charCodeAt(o)?(a=":",o++):(a=null,0===u&&s('":"')),null!==a&&null!==(c=he())?(58===e.charCodeAt(o)?(f=":",o++):(f=null,0===u&&s('":"')),null!==f&&null!==(d=he())?(58===e.charCodeAt(o)?(h=":",o++):(h=null,0===u&&s('":"')),null!==h&&null!==(p=pe())?y=[y,t,n,r,i,l,a,c,f,d,h,p]:(y=null,o=m)):(y=null,o=m)):(y=null,o=m)):(y=null,o=m)):(y=null,o=m)):(y=null,o=m),null===y&&(m=o,"::"===e.substr(o,2)?(y="::",o+=2):(y=null,0===u&&s('"::"')),null!==y&&null!==(t=he())?(58===e.charCodeAt(o)?(n=":",o++):(n=null,0===u&&s('":"')),null!==n&&null!==(r=he())?(58===e.charCodeAt(o)?(i=":",o++):(i=null,0===u&&s('":"')),null!==i&&null!==(l=he())?(58===e.charCodeAt(o)?(a=":",o++):(a=null,0===u&&s('":"')),null!==a&&null!==(c=he())?(58===e.charCodeAt(o)?(f=":",o++):(f=null,0===u&&s('":"')),null!==f&&null!==(d=pe())?y=[y,t,n,r,i,l,a,c,f,d]:(y=null,o=m)):(y=null,o=m)):(y=null,o=m)):(y=null,o=m)):(y=null,o=m),null===y&&(m=o,"::"===e.substr(o,2)?(y="::",o+=2):(y=null,0===u&&s('"::"')),null!==y&&null!==(t=he())?(58===e.charCodeAt(o)?(n=":",o++):(n=null,0===u&&s('":"')),null!==n&&null!==(r=he())?(58===e.charCodeAt(o)?(i=":",o++):(i=null,0===u&&s('":"')),null!==i&&null!==(l=he())?(58===e.charCodeAt(o)?(a=":",o++):(a=null,0===u&&s('":"')),null!==a&&null!==(c=pe())?y=[y,t,n,r,i,l,a,c]:(y=null,o=m)):(y=null,o=m)):(y=null,o=m)):(y=null,o=m),null===y&&(m=o,"::"===e.substr(o,2)?(y="::",o+=2):(y=null,0===u&&s('"::"')),null!==y&&null!==(t=he())?(58===e.charCodeAt(o)?(n=":",o++):(n=null,0===u&&s('":"')),null!==n&&null!==(r=he())?(58===e.charCodeAt(o)?(i=":",o++):(i=null,0===u&&s('":"')),null!==i&&null!==(l=pe())?y=[y,t,n,r,i,l]:(y=null,o=m)):(y=null,o=m)):(y=null,o=m),null===y&&(m=o,"::"===e.substr(o,2)?(y="::",o+=2):(y=null,0===u&&s('"::"')),null!==y&&null!==(t=he())?(58===e.charCodeAt(o)?(n=":",o++):(n=null,0===u&&s('":"')),null!==n&&null!==(r=pe())?y=[y,t,n,r]:(y=null,o=m)):(y=null,o=m),null===y&&(m=o,"::"===e.substr(o,2)?(y="::",o+=2):(y=null,0===u&&s('"::"')),null!==y&&null!==(t=pe())?y=[y,t]:(y=null,o=m),null===y&&(m=o,"::"===e.substr(o,2)?(y="::",o+=2):(y=null,0===u&&s('"::"')),null!==y&&null!==(t=he())?y=[y,t]:(y=null,o=m),null===y&&(m=o,null!==(y=he())?("::"===e.substr(o,2)?(t="::",o+=2):(t=null,0===u&&s('"::"')),null!==t&&null!==(n=he())?(58===e.charCodeAt(o)?(r=":",o++):(r=null,0===u&&s('":"')),null!==r&&null!==(i=he())?(58===e.charCodeAt(o)?(l=":",o++):(l=null,0===u&&s('":"')),null!==l&&null!==(a=he())?(58===e.charCodeAt(o)?(c=":",o++):(c=null,0===u&&s('":"')),null!==c&&null!==(f=he())?(58===e.charCodeAt(o)?(d=":",o++):(d=null,0===u&&s('":"')),null!==d&&null!==(h=pe())?y=[y,t,n,r,i,l,a,c,f,d,h]:(y=null,o=m)):(y=null,o=m)):(y=null,o=m)):(y=null,o=m)):(y=null,o=m)):(y=null,o=m),null===y&&(m=o,null!==(y=he())?(_=o,58===e.charCodeAt(o)?(t=":",o++):(t=null,0===u&&s('":"')),null!==t&&null!==(n=he())?t=[t,n]:(t=null,o=_),null!==(t=null!==t?t:"")?("::"===e.substr(o,2)?(n="::",o+=2):(n=null,0===u&&s('"::"')),null!==n&&null!==(r=he())?(58===e.charCodeAt(o)?(i=":",o++):(i=null,0===u&&s('":"')),null!==i&&null!==(l=he())?(58===e.charCodeAt(o)?(a=":",o++):(a=null,0===u&&s('":"')),null!==a&&null!==(c=he())?(58===e.charCodeAt(o)?(f=":",o++):(f=null,0===u&&s('":"')),null!==f&&null!==(d=pe())?y=[y,t,n,r,i,l,a,c,f,d]:(y=null,o=m)):(y=null,o=m)):(y=null,o=m)):(y=null,o=m)):(y=null,o=m)):(y=null,o=m),null===y&&(m=o,null!==(y=he())?(_=o,58===e.charCodeAt(o)?(t=":",o++):(t=null,0===u&&s('":"')),null!==t&&null!==(n=he())?t=[t,n]:(t=null,o=_),null!==(t=null!==t?t:"")?(_=o,58===e.charCodeAt(o)?(n=":",o++):(n=null,0===u&&s('":"')),null!==n&&null!==(r=he())?n=[n,r]:(n=null,o=_),null!==(n=null!==n?n:"")?("::"===e.substr(o,2)?(r="::",o+=2):(r=null,0===u&&s('"::"')),null!==r&&null!==(i=he())?(58===e.charCodeAt(o)?(l=":",o++):(l=null,0===u&&s('":"')),null!==l&&null!==(a=he())?(58===e.charCodeAt(o)?(c=":",o++):(c=null,0===u&&s('":"')),null!==c&&null!==(f=pe())?y=[y,t,n,r,i,l,a,c,f]:(y=null,o=m)):(y=null,o=m)):(y=null,o=m)):(y=null,o=m)):(y=null,o=m)):(y=null,o=m),null===y&&(m=o,null!==(y=he())?(_=o,58===e.charCodeAt(o)?(t=":",o++):(t=null,0===u&&s('":"')),null!==t&&null!==(n=he())?t=[t,n]:(t=null,o=_),null!==(t=null!==t?t:"")?(_=o,58===e.charCodeAt(o)?(n=":",o++):(n=null,0===u&&s('":"')),null!==n&&null!==(r=he())?n=[n,r]:(n=null,o=_),null!==(n=null!==n?n:"")?(_=o,58===e.charCodeAt(o)?(r=":",o++):(r=null,0===u&&s('":"')),null!==r&&null!==(i=he())?r=[r,i]:(r=null,o=_),null!==(r=null!==r?r:"")?("::"===e.substr(o,2)?(i="::",o+=2):(i=null,0===u&&s('"::"')),null!==i&&null!==(l=he())?(58===e.charCodeAt(o)?(a=":",o++):(a=null,0===u&&s('":"')),null!==a&&null!==(c=pe())?y=[y,t,n,r,i,l,a,c]:(y=null,o=m)):(y=null,o=m)):(y=null,o=m)):(y=null,o=m)):(y=null,o=m)):(y=null,o=m),null===y&&(m=o,null!==(y=he())?(_=o,58===e.charCodeAt(o)?(t=":",o++):(t=null,0===u&&s('":"')),null!==t&&null!==(n=he())?t=[t,n]:(t=null,o=_),null!==(t=null!==t?t:"")?(_=o,58===e.charCodeAt(o)?(n=":",o++):(n=null,0===u&&s('":"')),null!==n&&null!==(r=he())?n=[n,r]:(n=null,o=_),null!==(n=null!==n?n:"")?(_=o,58===e.charCodeAt(o)?(r=":",o++):(r=null,0===u&&s('":"')),null!==r&&null!==(i=he())?r=[r,i]:(r=null,o=_),null!==(r=null!==r?r:"")?(_=o,58===e.charCodeAt(o)?(i=":",o++):(i=null,0===u&&s('":"')),null!==i&&null!==(l=he())?i=[i,l]:(i=null,o=_),null!==(i=null!==i?i:"")?("::"===e.substr(o,2)?(l="::",o+=2):(l=null,0===u&&s('"::"')),null!==l&&null!==(a=pe())?y=[y,t,n,r,i,l,a]:(y=null,o=m)):(y=null,o=m)):(y=null,o=m)):(y=null,o=m)):(y=null,o=m)):(y=null,o=m),null===y&&(m=o,null!==(y=he())?(_=o,58===e.charCodeAt(o)?(t=":",o++):(t=null,0===u&&s('":"')),null!==t&&null!==(n=he())?t=[t,n]:(t=null,o=_),null!==(t=null!==t?t:"")?(_=o,58===e.charCodeAt(o)?(n=":",o++):(n=null,0===u&&s('":"')),null!==n&&null!==(r=he())?n=[n,r]:(n=null,o=_),null!==(n=null!==n?n:"")?(_=o,58===e.charCodeAt(o)?(r=":",o++):(r=null,0===u&&s('":"')),null!==r&&null!==(i=he())?r=[r,i]:(r=null,o=_),null!==(r=null!==r?r:"")?(_=o,58===e.charCodeAt(o)?(i=":",o++):(i=null,0===u&&s('":"')),null!==i&&null!==(l=he())?i=[i,l]:(i=null,o=_),null!==(i=null!==i?i:"")?(_=o,58===e.charCodeAt(o)?(l=":",o++):(l=null,0===u&&s('":"')),null!==l&&null!==(a=he())?l=[l,a]:(l=null,o=_),null!==(l=null!==l?l:"")?("::"===e.substr(o,2)?(a="::",o+=2):(a=null,0===u&&s('"::"')),null!==a&&null!==(c=he())?y=[y,t,n,r,i,l,a,c]:(y=null,o=m)):(y=null,o=m)):(y=null,o=m)):(y=null,o=m)):(y=null,o=m)):(y=null,o=m)):(y=null,o=m),null===y&&(m=o,null!==(y=he())?(_=o,58===e.charCodeAt(o)?(t=":",o++):(t=null,0===u&&s('":"')),null!==t&&null!==(n=he())?t=[t,n]:(t=null,o=_),null!==(t=null!==t?t:"")?(_=o,58===e.charCodeAt(o)?(n=":",o++):(n=null,0===u&&s('":"')),null!==n&&null!==(r=he())?n=[n,r]:(n=null,o=_),null!==(n=null!==n?n:"")?(_=o,58===e.charCodeAt(o)?(r=":",o++):(r=null,0===u&&s('":"')),null!==r&&null!==(i=he())?r=[r,i]:(r=null,o=_),null!==(r=null!==r?r:"")?(_=o,58===e.charCodeAt(o)?(i=":",o++):(i=null,0===u&&s('":"')),null!==i&&null!==(l=he())?i=[i,l]:(i=null,o=_),null!==(i=null!==i?i:"")?(_=o,58===e.charCodeAt(o)?(l=":",o++):(l=null,0===u&&s('":"')),null!==l&&null!==(a=he())?l=[l,a]:(l=null,o=_),null!==(l=null!==l?l:"")?(_=o,58===e.charCodeAt(o)?(a=":",o++):(a=null,0===u&&s('":"')),null!==a&&null!==(c=he())?a=[a,c]:(a=null,o=_),null!==(a=null!==a?a:"")?("::"===e.substr(o,2)?(c="::",o+=2):(c=null,0===u&&s('"::"')),null!==c?y=[y,t,n,r,i,l,a,c]:(y=null,o=m)):(y=null,o=m)):(y=null,o=m)):(y=null,o=m)):(y=null,o=m)):(y=null,o=m)):(y=null,o=m)):(y=null,o=m))))))))))))))),null!==y&&(m=g,Hn.host_type="IPv6",y=e.substring(o,m)),null===y&&(o=g),y}function he(){var e,t,n,r=o,i=h();return null!==i&&null!==(e=null!==(e=h())?e:"")&&null!==(t=null!==(t=h())?t:"")&&null!==(n=null!==(n=h())?n:"")?i=[i,e,t,n]:(i=null,o=r),i}function pe(){var t,n,r=o,i=he();return null!==i?(58===e.charCodeAt(o)?(t=":",o++):(t=null,0===u&&s('":"')),null!==t&&null!==(n=he())?i=[i,t,n]:(i=null,o=r)):(i=null,o=r),null===i?ve():i}function ve(){var t,n,r,i,l,a,c=o,f=o,d=_e();return null!==d?(46===e.charCodeAt(o)?(t=".",o++):(t=null,0===u&&s('"."')),null!==t&&null!==(n=_e())?(46===e.charCodeAt(o)?(r=".",o++):(r=null,0===u&&s('"."')),null!==r&&null!==(i=_e())?(46===e.charCodeAt(o)?(l=".",o++):(l=null,0===u&&s('"."')),null!==l&&null!==(a=_e())?d=[d,t,n,r,i,l,a]:(d=null,o=f)):(d=null,o=f)):(d=null,o=f)):(d=null,o=f),null!==d&&(f=c,Hn.host_type="IPv4",d=e.substring(o,f)),null===d&&(o=c),d}function _e(){var t,n,r,i=o;return"25"===e.substr(o,2)?(t="25",o+=2):(t=null,0===u&&s('"25"')),null!==t?(/^[0-5]/.test(e.charAt(o))?(n=e.charAt(o),o++):(n=null,0===u&&s("[0-5]")),null!==n?t=[t,n]:(t=null,o=i)):(t=null,o=i),null===t&&(i=o,50===e.charCodeAt(o)?(t="2",o++):(t=null,0===u&&s('"2"')),null!==t?(/^[0-4]/.test(e.charAt(o))?(n=e.charAt(o),o++):(n=null,0===u&&s("[0-4]")),null!==n&&null!==(r=f())?t=[t,n,r]:(t=null,o=i)):(t=null,o=i),null===t&&(i=o,49===e.charCodeAt(o)?(t="1",o++):(t=null,0===u&&s('"1"')),null!==t&&null!==(n=f())&&null!==(r=f())?t=[t,n,r]:(t=null,o=i),null===t&&(i=o,/^[1-9]/.test(e.charAt(o))?(t=e.charAt(o),o++):(t=null,0===u&&s("[1-9]")),null!==t&&null!==(n=f())?t=[t,n]:(t=null,o=i),null===t&&(t=f())))),t}function ge(){var e,t,n,r,i=o,u=o,l=f();return null!==(l=null!==l?l:"")&&null!==(e=null!==(e=f())?e:"")&&null!==(t=null!==(t=f())?t:"")&&null!==(n=null!==(n=f())?n:"")&&null!==(r=null!==(r=f())?r:"")?l=[l,e,t,n,r]:(l=null,o=u),null!==l&&(u=l,u=parseInt(u.join("")),l=Hn.port=u),null===l&&(o=i),l}function me(){var t,n,r=[],i=o;for(59===e.charCodeAt(o)?(t=";",o++):(t=null,0===u&&s('";"')),null!==t&&null!==(n=ye())?t=[t,n]:(t=null,o=i);null!==t;)r.push(t),i=o,59===e.charCodeAt(o)?(t=";",o++):(t=null,0===u&&s('";"')),null!==t&&null!==(n=ye())?t=[t,n]:(t=null,o=i);return r}function ye(){var e=be();return null===e&&null===(e=Ce())&&null===(e=Se())&&null===(e=Te())&&null===(e=Ee())&&null===(e=Ae())?we():e}function be(){var t,n,r=o,i=o;return"transport="===e.substr(o,10).toLowerCase()?(t=e.substr(o,10),o+=10):(t=null,0===u&&s('"transport="')),null!==t?("udp"===e.substr(o,3).toLowerCase()?(n=e.substr(o,3),o+=3):(n=null,0===u&&s('"udp"')),null===n&&("tcp"===e.substr(o,3).toLowerCase()?(n=e.substr(o,3),o+=3):(n=null,0===u&&s('"tcp"')),null===n&&("sctp"===e.substr(o,4).toLowerCase()?(n=e.substr(o,4),o+=4):(n=null,0===u&&s('"sctp"')),null===n&&("tls"===e.substr(o,3).toLowerCase()?(n=e.substr(o,3),o+=3):(n=null,0===u&&s('"tls"')),null===n&&(n=P())))),null!==n?t=[t,n]:(t=null,o=i)):(t=null,o=i),null!==t&&(i=t[1],Hn.uri_params||(Hn.uri_params={}),t=void(Hn.uri_params.transport=i.toLowerCase())),null===t&&(o=r),t}function Ce(){var t,n,r=o,i=o;return"user="===e.substr(o,5).toLowerCase()?(t=e.substr(o,5),o+=5):(t=null,0===u&&s('"user="')),null!==t?("phone"===e.substr(o,5).toLowerCase()?(n=e.substr(o,5),o+=5):(n=null,0===u&&s('"phone"')),null===n&&("ip"===e.substr(o,2).toLowerCase()?(n=e.substr(o,2),o+=2):(n=null,0===u&&s('"ip"')),null===n&&(n=P())),null!==n?t=[t,n]:(t=null,o=i)):(t=null,o=i),null!==t&&(i=t[1],Hn.uri_params||(Hn.uri_params={}),t=void(Hn.uri_params.user=i.toLowerCase())),null===t&&(o=r),t}function Se(){var t,n,r=o,i=o;return"method="===e.substr(o,7).toLowerCase()?(t=e.substr(o,7),o+=7):(t=null,0===u&&s('"method="')),null!==t&&null!==(n=ct())?t=[t,n]:(t=null,o=i),null!==t&&(i=t[1],Hn.uri_params||(Hn.uri_params={}),t=void(Hn.uri_params.method=i)),null===t&&(o=r),t}function Te(){var t,n,r=o,i=o;return"ttl="===e.substr(o,4).toLowerCase()?(t=e.substr(o,4),o+=4):(t=null,0===u&&s('"ttl="')),null!==t&&null!==(n=An())?t=[t,n]:(t=null,o=i),null!==t&&(i=t[1],Hn.params||(Hn.params={}),t=void(Hn.params.ttl=i)),null===t&&(o=r),t}function Ee(){var t,n,r=o,i=o;return"maddr="===e.substr(o,6).toLowerCase()?(t=e.substr(o,6),o+=6):(t=null,0===u&&s('"maddr="')),null!==t&&null!==(n=le())?t=[t,n]:(t=null,o=i),null!==t&&(i=t[1],Hn.uri_params||(Hn.uri_params={}),t=void(Hn.uri_params.maddr=i)),null===t&&(o=r),t}function Ae(){var t,n,r,i,l=o,a=o;return"lr"===e.substr(o,2).toLowerCase()?(t=e.substr(o,2),o+=2):(t=null,0===u&&s('"lr"')),null!==t?(i=o,61===e.charCodeAt(o)?(n="=",o++):(n=null,0===u&&s('"="')),null!==n&&null!==(r=P())?n=[n,r]:(n=null,o=i),null!==(n=null!==n?n:"")?t=[t,n]:(t=null,o=a)):(t=null,o=a),null!==t&&(Hn.uri_params||(Hn.uri_params={}),t=void(Hn.uri_params.lr=void 0)),null===t&&(o=l),t}function we(){var t,n,r,i=o,l=o,a=Re();return null!==a?(n=o,61===e.charCodeAt(o)?(r="=",o++):(r=null,0===u&&s('"="')),null!==r&&null!==(t=Ie())?r=[r,t]:(r=null,o=n),null!==(r=null!==r?r:"")?a=[a,r]:(a=null,o=l)):(a=null,o=l),null!==a&&(r=a[0],l=a[1],Hn.uri_params||(Hn.uri_params={}),l=void 0===l?void 0:l[1],a=void(Hn.uri_params[r.toLowerCase()]=l)),null===a&&(o=i),a}function Re(){var e,t=o,n=Oe();if(null!==n)for(e=[];null!==n;)e.push(n),n=Oe();else e=null;return null===(e=null!==e?e.join(""):e)&&(o=t),e}function Ie(){var e,t=o,n=Oe();if(null!==n)for(e=[];null!==n;)e.push(n),n=Oe();else e=null;return null===(e=null!==e?e.join(""):e)&&(o=t),e}function Oe(){var e=ke();return null===e&&null===(e=C())?T():e}function ke(){var t;return 91===e.charCodeAt(o)?(t="[",o++):(t=null,0===u&&s('"["')),null===t&&(93===e.charCodeAt(o)?(t="]",o++):(t=null,0===u&&s('"]"')),null===t&&(47===e.charCodeAt(o)?(t="/",o++):(t=null,0===u&&s('"/"')),null===t&&(58===e.charCodeAt(o)?(t=":",o++):(t=null,0===u&&s('":"')),null===t&&(38===e.charCodeAt(o)?(t="&",o++):(t=null,0===u&&s('"&"')),null===t&&(43===e.charCodeAt(o)?(t="+",o++):(t=null,0===u&&s('"+"')),null===t&&(36===e.charCodeAt(o)?(t="$",o++):(t=null,0===u&&s('"$"')))))))),t}function Pe(){var t,n,r,i,l,a,c=o;if(63===e.charCodeAt(o)?(t="?",o++):(t=null,0===u&&s('"?"')),null!==t)if(null!==(n=xe())){for(r=[],a=o,38===e.charCodeAt(o)?(i="&",o++):(i=null,0===u&&s('"&"')),null!==i&&null!==(l=xe())?i=[i,l]:(i=null,o=a);null!==i;)r.push(i),a=o,38===e.charCodeAt(o)?(i="&",o++):(i=null,0===u&&s('"&"')),null!==i&&null!==(l=xe())?i=[i,l]:(i=null,o=a);null!==r?t=[t,n,r]:(t=null,o=c)}else t=null,o=c;else t=null,o=c;return t}function xe(){var t,n,r=o,i=o,l=De();return null!==l?(61===e.charCodeAt(o)?(t="=",o++):(t=null,0===u&&s('"="')),null!==t&&null!==(n=Me())?l=[l,t,n]:(l=null,o=i)):(l=null,o=i),null!==l&&(n=l[0],i=l[2],n=n.join("").toLowerCase(),i=i.join(""),Hn.uri_headers||(Hn.uri_headers={}),l=void(Hn.uri_headers[n]?Hn.uri_headers[n].push(i):Hn.uri_headers[n]=[i])),null===l&&(o=r),l}function De(){var e,t=Ne();if(null!==(t=null===t&&null===(t=C())?T():t))for(e=[];null!==t;)e.push(t),null===(t=Ne())&&null===(t=C())&&(t=T());else e=null;return e}function Me(){var e=[],t=Ne();for(null===t&&null===(t=C())&&(t=T());null!==t;)e.push(t),null===(t=Ne())&&null===(t=C())&&(t=T());return e}function Ne(){var t;return 91===e.charCodeAt(o)?(t="[",o++):(t=null,0===u&&s('"["')),null===t&&(93===e.charCodeAt(o)?(t="]",o++):(t=null,0===u&&s('"]"')),null===t&&(47===e.charCodeAt(o)?(t="/",o++):(t=null,0===u&&s('"/"')),null===t&&(63===e.charCodeAt(o)?(t="?",o++):(t=null,0===u&&s('"?"')),null===t&&(58===e.charCodeAt(o)?(t=":",o++):(t=null,0===u&&s('":"')),null===t&&(43===e.charCodeAt(o)?(t="+",o++):(t=null,0===u&&s('"+"')),null===t&&(36===e.charCodeAt(o)?(t="$",o++):(t=null,0===u&&s('"$"')))))))),t}function Le(){var e,t,n,r,i=o,u=ct();return null!==u&&null!==(e=g())&&null!==(t=Ue())&&null!==(n=g())&&null!==(r=et())?u=[u,e,t,n,r]:(u=null,o=i),u}function Ue(){var e=Q();return null===e?je():e}function je(){var t,n,r=o,i=Ke();return null!==i?(58===e.charCodeAt(o)?(t=":",o++):(t=null,0===u&&s('":"')),null!==t&&null!==(n=null===(n=Fe())?Ve():n)?i=[i,t,n]:(i=null,o=r)):(i=null,o=r),i}function Fe(){var t,n,r,i=o,l=qe();return null!==(l=null===l?He():l)?(r=o,63===e.charCodeAt(o)?(t="?",o++):(t=null,0===u&&s('"?"')),null!==t&&null!==(n=Ze())?t=[t,n]:(t=null,o=r),null!==(t=null!==t?t:"")?l=[l,t]:(l=null,o=i)):(l=null,o=i),l}function qe(){var t,n,r,i=o;return"//"===e.substr(o,2)?(t="//",o+=2):(t=null,0===u&&s('"//"')),null!==t&&null!==(n=Ye())&&null!==(r=null!==(r=He())?r:"")?t=[t,n,r]:(t=null,o=i),t}function He(){var t,n,r=o;return 47===e.charCodeAt(o)?(t="/",o++):(t=null,0===u&&s('"/"')),null!==t&&null!==(n=Be())?t=[t,n]:(t=null,o=r),t}function Ve(){var e,t,n=o,r=Ge();if(null!==r){for(e=[],t=We();null!==t;)e.push(t),t=We();null!==e?r=[r,e]:(r=null,o=n)}else r=null,o=n;return r}function We(){var e=b();return null===e&&null===(e=C())?T():e}function Ge(){var t=C();return null===t&&null===(t=T())&&(59===e.charCodeAt(o)?(t=";",o++):(t=null,0===u&&s('";"')),null===t&&(63===e.charCodeAt(o)?(t="?",o++):(t=null,0===u&&s('"?"')),null===t&&(58===e.charCodeAt(o)?(t=":",o++):(t=null,0===u&&s('":"')),null===t&&(64===e.charCodeAt(o)?(t="@",o++):(t=null,0===u&&s('"@"')),null===t&&(38===e.charCodeAt(o)?(t="&",o++):(t=null,0===u&&s('"&"')),null===t&&(61===e.charCodeAt(o)?(t="=",o++):(t=null,0===u&&s('"="')),null===t&&(43===e.charCodeAt(o)?(t="+",o++):(t=null,0===u&&s('"+"')),null===t&&(36===e.charCodeAt(o)?(t="$",o++):(t=null,0===u&&s('"$"')),null===t&&(44===e.charCodeAt(o)?(t=",",o++):(t=null,0===u&&s('","'))))))))))),t}function Be(){var t,n,r,i,l=o,a=ze();if(null!==a){for(t=[],i=o,47===e.charCodeAt(o)?(n="/",o++):(n=null,0===u&&s('"/"')),null!==n&&null!==(r=ze())?n=[n,r]:(n=null,o=i);null!==n;)t.push(n),i=o,47===e.charCodeAt(o)?(n="/",o++):(n=null,0===u&&s('"/"')),null!==n&&null!==(r=ze())?n=[n,r]:(n=null,o=i);null!==t?a=[a,t]:(a=null,o=l)}else a=null,o=l;return a}function ze(){for(var t,n,r,i=o,l=[],a=Je();null!==a;)l.push(a),a=Je();if(null!==l){for(a=[],r=o,59===e.charCodeAt(o)?(t=";",o++):(t=null,0===u&&s('";"')),null!==t&&null!==(n=$e())?t=[t,n]:(t=null,o=r);null!==t;)a.push(t),r=o,59===e.charCodeAt(o)?(t=";",o++):(t=null,0===u&&s('";"')),null!==t&&null!==(n=$e())?t=[t,n]:(t=null,o=r);null!==a?l=[l,a]:(l=null,o=i)}else l=null,o=i;return l}function $e(){for(var e=[],t=Je();null!==t;)e.push(t),t=Je();return e}function Je(){var t=C();return null===t&&null===(t=T())&&(58===e.charCodeAt(o)?(t=":",o++):(t=null,0===u&&s('":"')),null===t&&(64===e.charCodeAt(o)?(t="@",o++):(t=null,0===u&&s('"@"')),null===t&&(38===e.charCodeAt(o)?(t="&",o++):(t=null,0===u&&s('"&"')),null===t&&(61===e.charCodeAt(o)?(t="=",o++):(t=null,0===u&&s('"="')),null===t&&(43===e.charCodeAt(o)?(t="+",o++):(t=null,0===u&&s('"+"')),null===t&&(36===e.charCodeAt(o)?(t="$",o++):(t=null,0===u&&s('"$"')),null===t&&(44===e.charCodeAt(o)?(t=",",o++):(t=null,0===u&&s('","'))))))))),t}function Ke(){var t,n,r=o,i=o,l=d();if(null!==l){for(t=[],null===(n=d())&&null===(n=f())&&(43===e.charCodeAt(o)?(n="+",o++):(n=null,0===u&&s('"+"')),null===n&&(45===e.charCodeAt(o)?(n="-",o++):(n=null,0===u&&s('"-"')),null===n&&(46===e.charCodeAt(o)?(n=".",o++):(n=null,0===u&&s('"."')))));null!==n;)t.push(n),null===(n=d())&&null===(n=f())&&(43===e.charCodeAt(o)?(n="+",o++):(n=null,0===u&&s('"+"')),null===n&&(45===e.charCodeAt(o)?(n="-",o++):(n=null,0===u&&s('"-"')),null===n&&(46===e.charCodeAt(o)?(n=".",o++):(n=null,0===u&&s('"."')))));null!==t?l=[l,t]:(l=null,o=i)}else l=null,o=i;return null===(l=null!==l?void(Hn.scheme=e.substring(o,r)):l)&&(o=r),l}function Ye(){var e=Xe();return null===e?Qe():e}function Xe(){var t,n=o,r=o,i=ne();return null!==i?(64===e.charCodeAt(o)?(t="@",o++):(t=null,0===u&&s('"@"')),null!==t?i=[i,t]:(i=null,o=r)):(i=null,o=r),null!==(i=null!==i?i:"")&&null!==(t=ue())?i=[i,t]:(i=null,o=n),null!==i?i:""}function Qe(){var t,n=C();if(null===n&&null===(n=T())&&(36===e.charCodeAt(o)?(n="$",o++):(n=null,0===u&&s('"$"')),null===n&&(44===e.charCodeAt(o)?(n=",",o++):(n=null,0===u&&s('","')),null===n&&(59===e.charCodeAt(o)?(n=";",o++):(n=null,0===u&&s('";"')),null===n&&(58===e.charCodeAt(o)?(n=":",o++):(n=null,0===u&&s('":"')),null===n&&(64===e.charCodeAt(o)?(n="@",o++):(n=null,0===u&&s('"@"')),null===n&&(38===e.charCodeAt(o)?(n="&",o++):(n=null,0===u&&s('"&"')),null===n&&(61===e.charCodeAt(o)?(n="=",o++):(n=null,0===u&&s('"="')),null===n&&(43===e.charCodeAt(o)?(n="+",o++):(n=null,0===u&&s('"+"')))))))))),null!==n)for(t=[];null!==n;)t.push(n),null===(n=C())&&null===(n=T())&&(36===e.charCodeAt(o)?(n="$",o++):(n=null,0===u&&s('"$"')),null===n&&(44===e.charCodeAt(o)?(n=",",o++):(n=null,0===u&&s('","')),null===n&&(59===e.charCodeAt(o)?(n=";",o++):(n=null,0===u&&s('";"')),null===n&&(58===e.charCodeAt(o)?(n=":",o++):(n=null,0===u&&s('":"')),null===n&&(64===e.charCodeAt(o)?(n="@",o++):(n=null,0===u&&s('"@"')),null===n&&(38===e.charCodeAt(o)?(n="&",o++):(n=null,0===u&&s('"&"')),null===n&&(61===e.charCodeAt(o)?(n="=",o++):(n=null,0===u&&s('"="')),null===n&&(43===e.charCodeAt(o)?(n="+",o++):(n=null,0===u&&s('"+"'))))))))));else t=null;return t}function Ze(){for(var e=[],t=We();null!==t;)e.push(t),t=We();return e}function et(){var t,n,r,i,l,a,c=o,d=o;if("sip"===e.substr(o,3).toLowerCase()?(t=e.substr(o,3),o+=3):(t=null,0===u&&s('"SIP"')),null!==t)if(47===e.charCodeAt(o)?(n="/",o++):(n=null,0===u&&s('"/"')),null!==n){if(null!==(i=f()))for(r=[];null!==i;)r.push(i),i=f();else r=null;if(null!==r)if(46===e.charCodeAt(o)?(i=".",o++):(i=null,0===u&&s('"."')),null!==i){if(null!==(a=f()))for(l=[];null!==a;)l.push(a),a=f();else l=null;null!==l?t=[t,n,r,i,l]:(t=null,o=d)}else t=null,o=d;else t=null,o=d}else t=null,o=d;else t=null,o=d;return null===(t=null!==t?void(Hn.sip_version=e.substring(o,c)):t)&&(o=c),t}function tt(){var t;return"INVITE"===e.substr(o,6)?(t="INVITE",o+=6):(t=null,0===u&&s('"INVITE"')),t}function nt(){var t;return"ACK"===e.substr(o,3)?(t="ACK",o+=3):(t=null,0===u&&s('"ACK"')),t}function rt(){var t;return"OPTIONS"===e.substr(o,7)?(t="OPTIONS",o+=7):(t=null,0===u&&s('"OPTIONS"')),t}function it(){var t;return"BYE"===e.substr(o,3)?(t="BYE",o+=3):(t=null,0===u&&s('"BYE"')),t}function ot(){var t;return"CANCEL"===e.substr(o,6)?(t="CANCEL",o+=6):(t=null,0===u&&s('"CANCEL"')),t}function ut(){var t;return"REGISTER"===e.substr(o,8)?(t="REGISTER",o+=8):(t=null,0===u&&s('"REGISTER"')),t}function lt(){var t;return"SUBSCRIBE"===e.substr(o,9)?(t="SUBSCRIBE",o+=9):(t=null,0===u&&s('"SUBSCRIBE"')),t}function at(){var t;return"NOTIFY"===e.substr(o,6)?(t="NOTIFY",o+=6):(t=null,0===u&&s('"NOTIFY"')),t}function st(){var t;return"REFER"===e.substr(o,5)?(t="REFER",o+=5):(t=null,0===u&&s('"REFER"')),t}function ct(){var t=o,n=tt();return null!==(n=null===n&&null===(n=nt())&&null===(n=rt())&&null===(n=it())&&null===(n=ot())&&null===(n=ut())&&null===(n=lt())&&null===(n=at())&&null===(n=st())?P():n)&&(Hn.method=e.substring(o,t),n=Hn.method),null===n&&(o=t),n}function ft(){var e,t,n,r,i=o,u=et();return null!==u&&null!==(e=g())&&null!==(t=dt())&&null!==(n=g())&&null!==(r=pt())?u=[u,e,t,n,r]:(u=null,o=i),u}function dt(){var e,t=o,n=ht();return null!==n&&(e=n,n=void(Hn.status_code=parseInt(e.join("")))),null===n&&(o=t),n}function ht(){var e,t,n=o,r=f();return null!==r&&null!==(e=f())&&null!==(t=f())?r=[r,e,t]:(r=null,o=n),r}function pt(){var t=o,n=[],r=b();for(null===r&&null===(r=C())&&null===(r=T())&&null===(r=O())&&null===(r=k())&&null===(r=g())&&(r=m());null!==r;)n.push(r),null===(r=b())&&null===(r=C())&&null===(r=T())&&null===(r=O())&&null===(r=k())&&null===(r=g())&&(r=m());return null===(n=null!==n?void(Hn.reason_phrase=e.substring(o,t)):n)&&(o=t),n}function vt(){var e,t,n,r,i=o,u=o,l=X();if(null!==(l=null===l?_t():l)){for(e=[],r=o,null!==(t=V())&&null!==(n=mt())?t=[t,n]:(t=null,o=r);null!==t;)e.push(t),r=o,null!==(t=V())&&null!==(n=mt())?t=[t,n]:(t=null,o=r);null!==e?l=[l,e]:(l=null,o=u)}else l=null,o=u;return null===(l=null!==l?function(e){var t;Hn.multi_header||(Hn.multi_header=[]);try{t=new qn(Hn.uri,Hn.display_name,Hn.params),delete Hn.uri,delete Hn.display_name,delete Hn.params}catch(e){t=null}Hn.multi_header.push({possition:o,offset:e,parsed:t})}(i):l)&&(o=i),l}function _t(){var e,t,n,r=o,i=gt();return null!==(i=null!==i?i:"")&&null!==(e=q())&&null!==(t=Q())&&null!==(n=F())?i=[i,e,t,n]:(i=null,o=r),i}function gt(){var e,t,n,r,i=o,u=o,l=P();if(null!==l){for(e=[],r=o,null!==(t=E())&&null!==(n=P())?t=[t,n]:(t=null,o=r);null!==t;)e.push(t),r=o,null!==(t=E())&&null!==(n=P())?t=[t,n]:(t=null,o=r);null!==e?l=[l,e]:(l=null,o=u)}else l=null,o=u;return null!==(l=null===l?J():l)&&(u=l,l=void(Hn.display_name="string"==typeof u?u:u[1].reduce((function(e,t){return e+t[0]+t[1]}),u[0]))),null===l&&(o=i),l}function mt(){var e=yt();return null===e&&null===(e=bt())?Tt():e}function yt(){var t,n,r,i=o,l=o;return"q"===e.substr(o,1).toLowerCase()?(t=e.substr(o,1),o++):(t=null,0===u&&s('"q"')),null!==t&&null!==(n=L())&&null!==(r=St())?t=[t,n,r]:(t=null,o=l),null!==t&&(l=t[2],Hn.params||(Hn.params={}),t=void(Hn.params.q=l)),null===t&&(o=i),t}function bt(){var t,n,r,i=o,l=o;return"expires"===e.substr(o,7).toLowerCase()?(t=e.substr(o,7),o+=7):(t=null,0===u&&s('"expires"')),null!==t&&null!==(n=L())&&null!==(r=Ct())?t=[t,n,r]:(t=null,o=l),null!==t&&(l=t[2],Hn.params||(Hn.params={}),t=void(Hn.params.expires=l)),null===t&&(o=i),t}function Ct(){var e,t=o,n=f();if(null!==n)for(e=[];null!==n;)e.push(n),n=f();else e=null;return null===(e=null!==e?parseInt(e.join("")):e)&&(o=t),e}function St(){var t,n,r,i,l,a,c=o,d=o;return 48===e.charCodeAt(o)?(t="0",o++):(t=null,0===u&&s('"0"')),null!==t?(a=o,46===e.charCodeAt(o)?(n=".",o++):(n=null,0===u&&s('"."')),null!==n&&null!==(r=null!==(r=f())?r:"")&&null!==(i=null!==(i=f())?i:"")&&null!==(l=null!==(l=f())?l:"")?n=[n,r,i,l]:(n=null,o=a),null!==(n=null!==n?n:"")?t=[t,n]:(t=null,o=d)):(t=null,o=d),null===(t=null!==t?parseFloat(e.substring(o,c)):t)&&(o=c),t}function Tt(){var e,t,n,r=o,i=o,u=P();return null!==u?(t=o,null!==(n=L())&&null!==(e=Et())?n=[n,e]:(n=null,o=t),null!==(n=null!==n?n:"")?u=[u,n]:(u=null,o=i)):(u=null,o=i),null!==u&&(n=u[0],i=u[1],Hn.params||(Hn.params={}),i=void 0===i?void 0:i[1],u=void(Hn.params[n.toLowerCase()]=i)),null===u&&(o=r),u}function Et(){var e=P();return null===e&&null===(e=le())?$():e}function At(){var t;return"render"===e.substr(o,6).toLowerCase()?(t=e.substr(o,6),o+=6):(t=null,0===u&&s('"render"')),null===t&&("session"===e.substr(o,7).toLowerCase()?(t=e.substr(o,7),o+=7):(t=null,0===u&&s('"session"')),null===t&&("icon"===e.substr(o,4).toLowerCase()?(t=e.substr(o,4),o+=4):(t=null,0===u&&s('"icon"')),null===t&&("alert"===e.substr(o,5).toLowerCase()?(t=e.substr(o,5),o+=5):(t=null,0===u&&s('"alert"')),null===t&&(t=P())))),t}function wt(){var e=Rt();return null===e?Tt():e}function Rt(){var t,n,r,i=o;return"handling"===e.substr(o,8).toLowerCase()?(t=e.substr(o,8),o+=8):(t=null,0===u&&s('"handling"')),null!==t&&null!==(n=L())?("optional"===e.substr(o,8).toLowerCase()?(r=e.substr(o,8),o+=8):(r=null,0===u&&s('"optional"')),null===r&&("required"===e.substr(o,8).toLowerCase()?(r=e.substr(o,8),o+=8):(r=null,0===u&&s('"required"')),null===r&&(r=P())),null!==r?t=[t,n,r]:(t=null,o=i)):(t=null,o=i),t}function It(){var e,t,n,r,i,u,l=o,a=Ot();if(null!==a)if(null!==(e=N()))if(null!==(t=Mt())){for(n=[],u=o,null!==(r=V())&&null!==(i=Nt())?r=[r,i]:(r=null,o=u);null!==r;)n.push(r),u=o,null!==(r=V())&&null!==(i=Nt())?r=[r,i]:(r=null,o=u);null!==n?a=[a,e,t,n]:(a=null,o=l)}else a=null,o=l;else a=null,o=l;else a=null,o=l;return a}function Ot(){var e=kt();return null===e?Pt():e}function kt(){var t;return"text"===e.substr(o,4).toLowerCase()?(t=e.substr(o,4),o+=4):(t=null,0===u&&s('"text"')),null===t&&("image"===e.substr(o,5).toLowerCase()?(t=e.substr(o,5),o+=5):(t=null,0===u&&s('"image"')),null===t&&("audio"===e.substr(o,5).toLowerCase()?(t=e.substr(o,5),o+=5):(t=null,0===u&&s('"audio"')),null===t&&("video"===e.substr(o,5).toLowerCase()?(t=e.substr(o,5),o+=5):(t=null,0===u&&s('"video"')),null===t&&("application"===e.substr(o,11).toLowerCase()?(t=e.substr(o,11),o+=11):(t=null,0===u&&s('"application"')),null===t&&(t=xt()))))),t}function Pt(){var t;return"message"===e.substr(o,7).toLowerCase()?(t=e.substr(o,7),o+=7):(t=null,0===u&&s('"message"')),null===t&&("multipart"===e.substr(o,9).toLowerCase()?(t=e.substr(o,9),o+=9):(t=null,0===u&&s('"multipart"')),null===t&&(t=xt())),t}function xt(){var e=P();return null===e?Dt():e}function Dt(){var t,n,r=o;return"x-"===e.substr(o,2).toLowerCase()?(t=e.substr(o,2),o+=2):(t=null,0===u&&s('"x-"')),null!==t&&null!==(n=P())?t=[t,n]:(t=null,o=r),t}function Mt(){var e=xt();return null===e?P():e}function Nt(){var e,t,n=o,r=P();return null!==r&&null!==(e=L())&&null!==(t=Lt())?r=[r,e,t]:(r=null,o=n),r}function Lt(){var e=P();return null===e?$():e}function Ut(){var e,t,n=o,r=f();if(null!==r)for(e=[];null!==r;)e.push(r),r=f();else e=null;return null!==e&&(t=e,e=void(Hn.value=parseInt(t.join("")))),null===e&&(o=n),e}function jt(){var t,n,r,i,l=o,a=x();if(null!==a){for(t=[],i=o,46===e.charCodeAt(o)?(n=".",o++):(n=null,0===u&&s('"."')),null!==n&&null!==(r=x())?n=[n,r]:(n=null,o=i);null!==n;)t.push(n),i=o,46===e.charCodeAt(o)?(n=".",o++):(n=null,0===u&&s('"."')),null!==n&&null!==(r=x())?n=[n,r]:(n=null,o=i);null!==t?a=[a,t]:(a=null,o=l)}else a=null,o=l;return a}function Ft(){var e=qt();return null===e?Tt():e}function qt(){var t,n,r,i=o,l=o;return"tag"===e.substr(o,3).toLowerCase()?(t=e.substr(o,3),o+=3):(t=null,0===u&&s('"tag"')),null!==t&&null!==(n=L())&&null!==(r=P())?t=[t,n,r]:(t=null,o=l),null!==t&&(l=t[2],t=void(Hn.tag=l)),null===t&&(o=i),t}function Ht(){var t,n,r,i,l,a,c,f=o;if("digest"===e.substr(o,6).toLowerCase()?(t=e.substr(o,6),o+=6):(t=null,0===u&&s('"Digest"')),null!==t)if(null!==(n=E()))if(null!==(r=Gt())){for(i=[],c=o,null!==(l=H())&&null!==(a=Gt())?l=[l,a]:(l=null,o=c);null!==l;)i.push(l),c=o,null!==(l=H())&&null!==(a=Gt())?l=[l,a]:(l=null,o=c);null!==i?t=[t,n,r,i]:(t=null,o=f)}else t=null,o=f;else t=null,o=f;else t=null,o=f;return null===t?Vt():t}function Vt(){var e,t,n,r,i,u,l=o,a=P();if(null!==a)if(null!==(e=E()))if(null!==(t=Wt())){for(n=[],u=o,null!==(r=H())&&null!==(i=Wt())?r=[r,i]:(r=null,o=u);null!==r;)n.push(r),u=o,null!==(r=H())&&null!==(i=Wt())?r=[r,i]:(r=null,o=u);null!==n?a=[a,e,t,n]:(a=null,o=l)}else a=null,o=l;else a=null,o=l;else a=null,o=l;return a}function Wt(){var e,t,n=o,r=P();return null!==r&&null!==(e=L())&&null!==(t=null===(t=P())?$():t)?r=[r,e,t]:(r=null,o=n),r}function Gt(){var e=Bt();return null===e&&null===(e=$t())&&null===(e=Kt())&&null===(e=Xt())&&null===(e=Qt())&&null===(e=Zt())&&null===(e=en())?Wt():e}function Bt(){var t,n,r,i=o;return"realm"===e.substr(o,5).toLowerCase()?(t=e.substr(o,5),o+=5):(t=null,0===u&&s('"realm"')),null!==t&&null!==(n=L())&&null!==(r=zt())?t=[t,n,r]:(t=null,o=i),t}function zt(){var e,t=o,n=J();return null!==n&&(e=n,n=void(Hn.realm=e)),null===n&&(o=t),n}function $t(){var t,n,r,i,l,a,c,f,d=o;if("domain"===e.substr(o,6).toLowerCase()?(t=e.substr(o,6),o+=6):(t=null,0===u&&s('"domain"')),null!==t)if(null!==(n=L()))if(null!==(r=G()))if(null!==(i=Jt())){if(l=[],f=o,null!==(c=g()))for(a=[];null!==c;)a.push(c),c=g();else a=null;for(null!==a&&null!==(c=Jt())?a=[a,c]:(a=null,o=f);null!==a;){if(l.push(a),f=o,null!==(c=g()))for(a=[];null!==c;)a.push(c),c=g();else a=null;null!==a&&null!==(c=Jt())?a=[a,c]:(a=null,o=f)}null!==l&&null!==(a=B())?t=[t,n,r,i,l,a]:(t=null,o=d)}else t=null,o=d;else t=null,o=d;else t=null,o=d;else t=null,o=d;return t}function Jt(){var e=je();return null===e?He():e}function Kt(){var t,n,r,i=o;return"nonce"===e.substr(o,5).toLowerCase()?(t=e.substr(o,5),o+=5):(t=null,0===u&&s('"nonce"')),null!==t&&null!==(n=L())&&null!==(r=Yt())?t=[t,n,r]:(t=null,o=i),t}function Yt(){var e,t=o,n=J();return null!==n&&(e=n,n=void(Hn.nonce=e)),null===n&&(o=t),n}function Xt(){var t,n,r,i=o,l=o;return"opaque"===e.substr(o,6).toLowerCase()?(t=e.substr(o,6),o+=6):(t=null,0===u&&s('"opaque"')),null!==t&&null!==(n=L())&&null!==(r=J())?t=[t,n,r]:(t=null,o=l),null!==t&&(l=t[2],t=void(Hn.opaque=l)),null===t&&(o=i),t}function Qt(){var t,n,r,i,l=o;return"stale"===e.substr(o,5).toLowerCase()?(t=e.substr(o,5),o+=5):(t=null,0===u&&s('"stale"')),null!==t&&null!==(n=L())?(i=o,"true"===e.substr(o,4).toLowerCase()?(r=e.substr(o,4),o+=4):(r=null,0===u&&s('"true"')),null===(r=null!==r?void(Hn.stale=!0):r)&&(o=i),null===r&&(i=o,"false"===e.substr(o,5).toLowerCase()?(r=e.substr(o,5),o+=5):(r=null,0===u&&s('"false"')),null===(r=null!==r?void(Hn.stale=!1):r)&&(o=i)),null!==r?t=[t,n,r]:(t=null,o=l)):(t=null,o=l),t}function Zt(){var t,n,r,i=o,l=o;return"algorithm"===e.substr(o,9).toLowerCase()?(t=e.substr(o,9),o+=9):(t=null,0===u&&s('"algorithm"')),null!==t&&null!==(n=L())?("md5"===e.substr(o,3).toLowerCase()?(r=e.substr(o,3),o+=3):(r=null,0===u&&s('"MD5"')),null===r&&("md5-sess"===e.substr(o,8).toLowerCase()?(r=e.substr(o,8),o+=8):(r=null,0===u&&s('"MD5-sess"')),null===r&&(r=P())),null!==r?t=[t,n,r]:(t=null,o=l)):(t=null,o=l),null!==t&&(l=t[2],t=void(Hn.algorithm=l.toUpperCase())),null===t&&(o=i),t}function en(){var t,n,r,i,l,a,c,f,d,h=o;if("qop"===e.substr(o,3).toLowerCase()?(t=e.substr(o,3),o+=3):(t=null,0===u&&s('"qop"')),null!==t)if(null!==(n=L()))if(null!==(r=G())){if(f=o,null!==(i=tn())){for(l=[],d=o,44===e.charCodeAt(o)?(a=",",o++):(a=null,0===u&&s('","')),null!==a&&null!==(c=tn())?a=[a,c]:(a=null,o=d);null!==a;)l.push(a),d=o,44===e.charCodeAt(o)?(a=",",o++):(a=null,0===u&&s('","')),null!==a&&null!==(c=tn())?a=[a,c]:(a=null,o=d);null!==l?i=[i,l]:(i=null,o=f)}else i=null,o=f;null!==i&&null!==(l=B())?t=[t,n,r,i,l]:(t=null,o=h)}else t=null,o=h;else t=null,o=h;else t=null,o=h;return t}function tn(){var t,n,r=o;return"auth-int"===e.substr(o,8).toLowerCase()?(t=e.substr(o,8),o+=8):(t=null,0===u&&s('"auth-int"')),null===t&&("auth"===e.substr(o,4).toLowerCase()?(t=e.substr(o,4),o+=4):(t=null,0===u&&s('"auth"')),null===t&&(t=P())),null!==t&&(n=t,Hn.qop||(Hn.qop=[]),t=void Hn.qop.push(n.toLowerCase())),null===t&&(o=r),t}function nn(){var e,t,n,r,i=o,u=o,l=_t();if(null!==l){for(e=[],r=o,null!==(t=V())&&null!==(n=Tt())?t=[t,n]:(t=null,o=r);null!==t;)e.push(t),r=o,null!==(t=V())&&null!==(n=Tt())?t=[t,n]:(t=null,o=r);null!==e?l=[l,e]:(l=null,o=u)}else l=null,o=u;return null===(l=null!==l?function(e){var t;Hn.multi_header||(Hn.multi_header=[]);try{t=new qn(Hn.uri,Hn.display_name,Hn.params),delete Hn.uri,delete Hn.display_name,delete Hn.params}catch(e){t=null}Hn.multi_header.push({possition:o,offset:e,parsed:t})}(i):l)&&(o=i),l}function rn(){var e=on();return null===e?Tt():e}function on(){var t,n,r,i,l=o,a=o;if("cause"===e.substr(o,5).toLowerCase()?(t=e.substr(o,5),o+=5):(t=null,0===u&&s('"cause"')),null!==t)if(null!==(n=L())){if(null!==(i=f()))for(r=[];null!==i;)r.push(i),i=f();else r=null;null!==r?t=[t,n,r]:(t=null,o=a)}else t=null,o=a;else t=null,o=a;return null!==t&&(a=t[2],t=void(Hn.cause=parseInt(a.join("")))),null===t&&(o=l),t}function un(){var e,t,n,r,i=o,u=_t();if(null!==u){for(e=[],r=o,null!==(t=V())&&null!==(n=Tt())?t=[t,n]:(t=null,o=r);null!==t;)e.push(t),r=o,null!==(t=V())&&null!==(n=Tt())?t=[t,n]:(t=null,o=r);null!==e?u=[u,e]:(u=null,o=i)}else u=null,o=i;return u}function ln(){var t,n=o;return"active"===e.substr(o,6).toLowerCase()?(t=e.substr(o,6),o+=6):(t=null,0===u&&s('"active"')),null===t&&("pending"===e.substr(o,7).toLowerCase()?(t=e.substr(o,7),o+=7):(t=null,0===u&&s('"pending"')),null===t&&("terminated"===e.substr(o,10).toLowerCase()?(t=e.substr(o,10),o+=10):(t=null,0===u&&s('"terminated"')),null===t&&(t=P()))),null===(t=null!==t?void(Hn.state=e.substring(o,n)):t)&&(o=n),t}function an(){var t,n,r,i,l=o,a=o;return"reason"===e.substr(o,6).toLowerCase()?(t=e.substr(o,6),o+=6):(t=null,0===u&&s('"reason"')),null!==t&&null!==(n=L())&&null!==(r=sn())?t=[t,n,r]:(t=null,o=a),null===(t=null!==t?void(void 0!==(i=t[2])&&(Hn.reason=i)):t)&&(o=l),null===t&&(a=l=o,"expires"===e.substr(o,7).toLowerCase()?(t=e.substr(o,7),o+=7):(t=null,0===u&&s('"expires"')),null!==t&&null!==(n=L())&&null!==(r=Ct())?t=[t,n,r]:(t=null,o=a),null===(t=null!==t?void(void 0!==(i=t[2])&&(Hn.expires=i)):t)&&(o=l),null===t&&(a=l=o,"retry_after"===e.substr(o,11).toLowerCase()?(t=e.substr(o,11),o+=11):(t=null,0===u&&s('"retry_after"')),null!==t&&null!==(n=L())&&null!==(r=Ct())?t=[t,n,r]:(t=null,o=a),null===(t=null!==t?void(void 0!==(a=t[2])&&(Hn.retry_after=a)):t)&&(o=l),null===t&&(t=Tt()))),t}function sn(){var t;return"deactivated"===e.substr(o,11).toLowerCase()?(t=e.substr(o,11),o+=11):(t=null,0===u&&s('"deactivated"')),null===t&&("probation"===e.substr(o,9).toLowerCase()?(t=e.substr(o,9),o+=9):(t=null,0===u&&s('"probation"')),null===t&&("rejected"===e.substr(o,8).toLowerCase()?(t=e.substr(o,8),o+=8):(t=null,0===u&&s('"rejected"')),null===t&&("timeout"===e.substr(o,7).toLowerCase()?(t=e.substr(o,7),o+=7):(t=null,0===u&&s('"timeout"')),null===t&&("giveup"===e.substr(o,6).toLowerCase()?(t=e.substr(o,6),o+=6):(t=null,0===u&&s('"giveup"')),null===t&&("noresource"===e.substr(o,10).toLowerCase()?(t=e.substr(o,10),o+=10):(t=null,0===u&&s('"noresource"')),null===t&&("invariant"===e.substr(o,9).toLowerCase()?(t=e.substr(o,9),o+=9):(t=null,0===u&&s('"invariant"')),null===t&&(t=P()))))))),t}function cn(){var e=qt();return null===e?Tt():e}function fn(){var e,t,n,r,i,u,l=o,a=yn();if(null!==a)if(null!==(e=E()))if(null!==(t=Sn())){for(n=[],u=o,null!==(r=V())&&null!==(i=dn())?r=[r,i]:(r=null,o=u);null!==r;)n.push(r),u=o,null!==(r=V())&&null!==(i=dn())?r=[r,i]:(r=null,o=u);null!==n?a=[a,e,t,n]:(a=null,o=l)}else a=null,o=l;else a=null,o=l;else a=null,o=l;return a}function dn(){var e=hn();return null===e&&null===(e=pn())&&null===(e=vn())&&null===(e=_n())&&null===(e=gn())?Tt():e}function hn(){var t,n,r,i=o,l=o;return"ttl"===e.substr(o,3).toLowerCase()?(t=e.substr(o,3),o+=3):(t=null,0===u&&s('"ttl"')),null!==t&&null!==(n=L())&&null!==(r=An())?t=[t,n,r]:(t=null,o=l),null!==t&&(l=t[2],t=void(Hn.ttl=l)),null===t&&(o=i),t}function pn(){var t,n,r,i=o,l=o;return"maddr"===e.substr(o,5).toLowerCase()?(t=e.substr(o,5),o+=5):(t=null,0===u&&s('"maddr"')),null!==t&&null!==(n=L())&&null!==(r=le())?t=[t,n,r]:(t=null,o=l),null!==t&&(l=t[2],t=void(Hn.maddr=l)),null===t&&(o=i),t}function vn(){var t,n,r,i=o,l=o;return"received"===e.substr(o,8).toLowerCase()?(t=e.substr(o,8),o+=8):(t=null,0===u&&s('"received"')),null!==t&&null!==(n=L())&&null!==(r=null===(r=ve())?de():r)?t=[t,n,r]:(t=null,o=l),null!==t&&(l=t[2],t=void(Hn.received=l)),null===t&&(o=i),t}function _n(){var t,n,r,i=o,l=o;return"branch"===e.substr(o,6).toLowerCase()?(t=e.substr(o,6),o+=6):(t=null,0===u&&s('"branch"')),null!==t&&null!==(n=L())&&null!==(r=P())?t=[t,n,r]:(t=null,o=l),null!==t&&(l=t[2],t=void(Hn.branch=l)),null===t&&(o=i),t}function gn(){var t,n,r,i,l=o;return"rport"===e.substr(o,5).toLowerCase()?(t=e.substr(o,5),o+=5):(t=null,0===u&&s('"rport"')),null!==t?(i=o,null!==(n=L())&&null!==(r=mn())?n=[n,r]:(n=null,o=i),null!==(n=null!==n?n:"")?t=[t,n]:(t=null,o=l)):(t=null,o=l),t}function mn(){var e,t,n,r,i=o,u=o,l=f();return null!==(l=null!==l?l:"")&&null!==(e=null!==(e=f())?e:"")&&null!==(t=null!==(t=f())?t:"")&&null!==(n=null!==(n=f())?n:"")&&null!==(r=null!==(r=f())?r:"")?l=[l,e,t,n,r]:(l=null,o=u),null!==l&&(u=l,l=void(Hn.rport=parseInt(u.join("")))),null===l&&(o=i),l}function yn(){var e,t,n,r,i=o,u=bn();return null!==u&&null!==(e=N())&&null!==(t=P())&&null!==(n=N())&&null!==(r=Cn())?u=[u,e,t,n,r]:(u=null,o=i),u}function bn(){var t,n,r=o;return"sip"===e.substr(o,3).toLowerCase()?(t=e.substr(o,3),o+=3):(t=null,0===u&&s('"SIP"')),null!==(t=null===t?P():t)&&(n=t,t=void(Hn.protocol=n)),null===t&&(o=r),t}function Cn(){var t,n,r=o;return"udp"===e.substr(o,3).toLowerCase()?(t=e.substr(o,3),o+=3):(t=null,0===u&&s('"UDP"')),null===t&&("tcp"===e.substr(o,3).toLowerCase()?(t=e.substr(o,3),o+=3):(t=null,0===u&&s('"TCP"')),null===t&&("tls"===e.substr(o,3).toLowerCase()?(t=e.substr(o,3),o+=3):(t=null,0===u&&s('"TLS"')),null===t&&("sctp"===e.substr(o,4).toLowerCase()?(t=e.substr(o,4),o+=4):(t=null,0===u&&s('"SCTP"')),null===t&&(t=P())))),null!==t&&(n=t,t=void(Hn.transport=n)),null===t&&(o=r),t}function Sn(){var e,t,n,r=o,i=Tn();return null!==i?(n=o,null!==(e=W())&&null!==(t=En())?e=[e,t]:(e=null,o=n),null!==(e=null!==e?e:"")?i=[i,e]:(i=null,o=r)):(i=null,o=r),i}function Tn(){var t=o,n=ve();return null===(n=null!==(n=null===n&&null===(n=fe())?ae():n)?void(Hn.host=e.substring(o,t)):n)&&(o=t),n}function En(){var e,t,n,r,i=o,u=o,l=f();return null!==(l=null!==l?l:"")&&null!==(e=null!==(e=f())?e:"")&&null!==(t=null!==(t=f())?t:"")&&null!==(n=null!==(n=f())?n:"")&&null!==(r=null!==(r=f())?r:"")?l=[l,e,t,n,r]:(l=null,o=u),null!==l&&(u=l,l=void(Hn.port=parseInt(u.join("")))),null===l&&(o=i),l}function An(){var e,t,n=o,r=o,i=f();return null!==i&&null!==(e=null!==(e=f())?e:"")&&null!==(t=null!==(t=f())?t:"")?i=[i,e,t]:(i=null,o=r),null===(i=null!==i?parseInt(i.join("")):i)&&(o=n),i}function wn(){var e,t=o,n=Ct();return null!==n&&(e=n,n=void(Hn.expires=e)),null===n&&(o=t),n}function Rn(){var e=In();return null===e?Tt():e}function In(){var t,n,r,i=o,l=o;return"refresher"===e.substr(o,9).toLowerCase()?(t=e.substr(o,9),o+=9):(t=null,0===u&&s('"refresher"')),null!==t&&null!==(n=L())?("uac"===e.substr(o,3).toLowerCase()?(r=e.substr(o,3),o+=3):(r=null,0===u&&s('"uac"')),null===r&&("uas"===e.substr(o,3).toLowerCase()?(r=e.substr(o,3),o+=3):(r=null,0===u&&s('"uas"'))),null!==r?t=[t,n,r]:(t=null,o=l)):(t=null,o=l),null!==t&&(l=t[2],t=void(Hn.refresher=l.toLowerCase())),null===t&&(o=i),t}function On(){var e=[],t=I();for(null===t&&null===(t=k())&&(t=E());null!==t;)e.push(t),null===(t=I())&&null===(t=k())&&(t=E());return e}function kn(){var t,n,r,i,l,a,c,f,d=o,h=o,p=xn();return null!==p?(45===e.charCodeAt(o)?(t="-",o++):(t=null,0===u&&s('"-"')),null!==t&&null!==(n=Pn())?(45===e.charCodeAt(o)?(r="-",o++):(r=null,0===u&&s('"-"')),null!==r&&null!==(i=Pn())?(45===e.charCodeAt(o)?(l="-",o++):(l=null,0===u&&s('"-"')),null!==l&&null!==(a=Pn())?(45===e.charCodeAt(o)?(c="-",o++):(c=null,0===u&&s('"-"')),null!==c&&null!==(f=Dn())?p=[p,t,n,r,i,l,a,c,f]:(p=null,o=h)):(p=null,o=h)):(p=null,o=h)):(p=null,o=h)):(p=null,o=h),null!==p&&(p[0],p=void(Hn=e.substring(o+5,d))),null===p&&(o=d),p}function Pn(){var e,t,n,r=o,i=h();return null!==i&&null!==(e=h())&&null!==(t=h())&&null!==(n=h())?i=[i,e,t,n]:(i=null,o=r),i}function xn(){var e,t=o,n=Pn();return null!==n&&null!==(e=Pn())?n=[n,e]:(n=null,o=t),n}function Dn(){var e,t,n=o,r=Pn();return null!==r&&null!==(e=Pn())&&null!==(t=Pn())?r=[r,e,t]:(r=null,o=n),r}function Mn(){var t,n,r,i=o,l=o,a=D();return null!==a?(r=o,64===e.charCodeAt(o)?(t="@",o++):(t=null,0===u&&s('"@"')),null!==t&&null!==(n=D())?t=[t,n]:(t=null,o=r),null!==(t=null!==t?t:"")?a=[a,t]:(a=null,o=l)):(a=null,o=l),null===(a=null!==a?void(Hn.call_id=e.substring(o,i)):a)&&(o=i),a}function Nn(){var e=Ln();return null===e&&null===(e=Un())&&null===(e=jn())?Tt():e}function Ln(){var t,n,r,i=o,l=o;return"to-tag"===e.substr(o,6)?(t="to-tag",o+=6):(t=null,0===u&&s('"to-tag"')),null!==t&&null!==(n=L())&&null!==(r=P())?t=[t,n,r]:(t=null,o=l),null!==t&&(l=t[2],t=void(Hn.to_tag=l)),null===t&&(o=i),t}function Un(){var t,n,r,i=o,l=o;return"from-tag"===e.substr(o,8)?(t="from-tag",o+=8):(t=null,0===u&&s('"from-tag"')),null!==t&&null!==(n=L())&&null!==(r=P())?t=[t,n,r]:(t=null,o=l),null!==t&&(l=t[2],t=void(Hn.from_tag=l)),null===t&&(o=i),t}function jn(){var t,n=o;return"early-only"===e.substr(o,10)?(t="early-only",o+=10):(t=null,0===u&&s('"early-only"')),null===(t=null!==t?void(Hn.early_only=!0):t)&&(o=n),t}var Fn=n(53),qn=n(110),Hn={};if(null!==i[t]()&&o===e.length)return Hn;var Vn=Math.max(o,l),Wn=Vn<e.length?e.charAt(Vn):null;i=function(){for(var t=1,n=1,r=!1,i=0;i<Math.max(o,l);i++){var u=e.charAt(i);r="\n"===u?(r||t++,!(n=1)):"\r"===u||"\u2028"===u||"\u2029"===u?(t++,n=1,!0):(n++,!1)}return{line:t,column:n}}();return new this.SyntaxError(function(e){e.sort();for(var t=null,n=[],r=0;r<e.length;r++)e[r]!==t&&(n.push(e[r]),t=e[r]);return n}(a),Wn,Vn,i.line,i.column),-1},toSource:function(){return this._source}}).SyntaxError=function(e,t,n,i,o){this.name="SyntaxError",this.expected=e,this.found=t,this.message=function(e,t){var n;switch(e.length){case 0:n="end of input";break;case 1:n=e[0];break;default:n=e.slice(0,e.length-1).join(", ")+" or "+e[e.length-1]}return"Expected "+n+" but "+(t?r(t):"end of input")+" found."}(e,t),this.offset=n,this.line=i,this.column=o},e.SyntaxError.prototype=Error.prototype,e)},function(e,t,n){"use strict";var r="object"==typeof Reflect?Reflect:null,i=r&&"function"==typeof r.apply?r.apply:function(e,t,n){return Function.prototype.apply.call(e,t,n)},o=r&&"function"==typeof r.ownKeys?r.ownKeys:Object.getOwnPropertySymbols?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:function(e){return Object.getOwnPropertyNames(e)},u=Number.isNaN||function(e){return e!=e};function l(){l.init.call(this)}e.exports=l,e.exports.once=function(e,t){return new Promise((function(n,r){function i(n){e.removeListener(t,o),r(n)}function o(){"function"==typeof e.removeListener&&e.removeListener("error",i),n([].slice.call(arguments))}var u,l,a;_(e,t,o,{once:!0}),"error"!==t&&(l=i,a={once:!0},"function"==typeof(u=e).on&&_(u,"error",l,a))}))},(l.EventEmitter=l).prototype._events=void 0,l.prototype._eventsCount=0,l.prototype._maxListeners=void 0;var a=10;function s(e){if("function"!=typeof e)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof e)}function c(e){return void 0===e._maxListeners?l.defaultMaxListeners:e._maxListeners}function f(e,t,n,r){var i,o;return s(n),void 0===(i=e._events)?(i=e._events=Object.create(null),e._eventsCount=0):(void 0!==i.newListener&&(e.emit("newListener",t,n.listener||n),i=e._events),o=i[t]),void 0===o?(o=i[t]=n,++e._eventsCount):("function"==typeof o?o=i[t]=r?[n,o]:[o,n]:r?o.unshift(n):o.push(n),0<(n=c(e))&&o.length>n&&!o.warned&&(o.warned=!0,(n=new Error("Possible EventEmitter memory leak detected. "+o.length+" "+String(t)+" listeners added. Use emitter.setMaxListeners() to increase limit")).name="MaxListenersExceededWarning",n.emitter=e,n.type=t,n.count=o.length,n=n,console&&console.warn&&console.warn(n))),e}function d(e,t,n){return(t=function(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0===arguments.length?this.listener.call(this.target):this.listener.apply(this.target,arguments)}.bind(e={fired:!1,wrapFn:void 0,target:e,type:t,listener:n})).listener=n,e.wrapFn=t}function h(e,t,n){return void 0===(e=e._events)||void 0===(t=e[t])?[]:"function"==typeof t?n?[t.listener||t]:[t]:n?function(e){for(var t=new Array(e.length),n=0;n<t.length;++n)t[n]=e[n].listener||e[n];return t}(t):v(t,t.length)}function p(e){var t=this._events;if(void 0!==t){if("function"==typeof(e=t[e]))return 1;if(void 0!==e)return e.length}return 0}function v(e,t){for(var n=new Array(t),r=0;r<t;++r)n[r]=e[r];return n}function _(e,t,n,r){if("function"==typeof e.on)r.once?e.once(t,n):e.on(t,n);else{if("function"!=typeof e.addEventListener)throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof e);e.addEventListener(t,(function i(o){r.once&&e.removeEventListener(t,i),n(o)}))}}Object.defineProperty(l,"defaultMaxListeners",{enumerable:!0,get:function(){return a},set:function(e){if("number"!=typeof e||e<0||u(e))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+e+".");a=e}}),l.init=function(){void 0!==this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},l.prototype.setMaxListeners=function(e){if("number"!=typeof e||e<0||u(e))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this},l.prototype.getMaxListeners=function(){return c(this)},l.prototype.emit=function(e){for(var t=[],n=1;n<arguments.length;n++)t.push(arguments[n]);var r,o="error"===e,u=this._events;if(void 0!==u)o=o&&void 0===u.error;else if(!o)return!1;if(o){if((r=0<t.length?t[0]:r)instanceof Error)throw r;throw(o=new Error("Unhandled error."+(r?" ("+r.message+")":""))).context=r,o}if(void 0===(e=u[e]))return!1;if("function"==typeof e)i(e,this,t);else{var l=e.length,a=v(e,l);for(n=0;n<l;++n)i(a[n],this,t)}return!0},l.prototype.on=l.prototype.addListener=function(e,t){return f(this,e,t,!1)},l.prototype.prependListener=function(e,t){return f(this,e,t,!0)},l.prototype.once=function(e,t){return s(t),this.on(e,d(this,e,t)),this},l.prototype.prependOnceListener=function(e,t){return s(t),this.prependListener(e,d(this,e,t)),this},l.prototype.off=l.prototype.removeListener=function(e,t){var n,r,i,o,u;if(s(t),void 0===(r=this._events))return this;if(void 0===(n=r[e]))return this;if(n===t||n.listener===t)0==--this._eventsCount?this._events=Object.create(null):(delete r[e],r.removeListener&&this.emit("removeListener",e,n.listener||t));else if("function"!=typeof n){for(i=-1,o=n.length-1;0<=o;o--)if(n[o]===t||n[o].listener===t){u=n[o].listener,i=o;break}if(i<0)return this;0===i?n.shift():function(e,t){for(;t+1<e.length;t++)e[t]=e[t+1];e.pop()}(n,i),1===n.length&&(r[e]=n[0]),void 0!==r.removeListener&&this.emit("removeListener",e,u||t)}return this},l.prototype.removeAllListeners=function(e){var t,n=this._events;if(void 0===n)return this;if(void 0===n.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==n[e]&&(0==--this._eventsCount?this._events=Object.create(null):delete n[e]),this;if(0===arguments.length){for(var r,i=Object.keys(n),o=0;o<i.length;++o)"removeListener"!==(r=i[o])&&this.removeAllListeners(r);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if("function"==typeof(t=n[e]))this.removeListener(e,t);else if(void 0!==t)for(o=t.length-1;0<=o;o--)this.removeListener(e,t[o]);return this},l.prototype.listeners=function(e){return h(this,e,!0)},l.prototype.rawListeners=function(e){return h(this,e,!1)},l.listenerCount=function(e,t){return"function"==typeof e.listenerCount?e.listenerCount(t):p.call(e,t)},l.prototype.listenerCount=p,l.prototype.eventNames=function(){return 0<this._eventsCount?o(this._events):[]}},function(e,t,n){"use strict";var r,i,o,u,l,a,s,c,f,d,h,p,v,_,g,m,y,b,C,S,T,E,A,w,R,I,O,k,P,x,D,M,N,L,U,j,F,q,H,V,W,G,B,z,$,J,K,Y,X,Q,Z,ee,te,ne,re,ie,oe,ue,le,ae,se,ce,fe,de,he,pe,ve,_e,ge,me,ye,be,Ce,Se,Te,Ee,Ae,we,Re,Ie,Oe,ke,Pe,xe,De,Me,Ne,Le,Ue,je,Fe,qe,He;n(8)?(r=n(37),i=n(2),o=n(3),u=n(0),l=n(76),a=n(108),s=n(25),c=n(48),f=n(41),d=n(17),h=n(50),p=n(27),v=n(7),_=n(143),g=n(44),m=n(29),y=n(20),b=n(57),C=n(4),S=n(12),T=n(97),E=n(45),A=n(23),w=n(46).f,R=n(99),Fe=n(42),Oe=n(6),qe=n(32),I=n(66),O=n(64),k=n(102),P=n(59),x=n(71),D=n(47),M=n(101),N=n(132),L=n(11),U=n(22),j=L.f,F=U.f,q=i.RangeError,H=i.TypeError,V=i.Uint8Array,G="Shared"+(W="ArrayBuffer"),B="BYTES_PER_ELEMENT",z="prototype",n=Array[z],$=a.ArrayBuffer,J=a.DataView,K=qe(0),Y=qe(2),X=qe(3),Q=qe(4),Z=qe(5),ee=qe(6),te=I(!0),ne=I(!1),re=k.values,ie=k.keys,oe=k.entries,ue=n.lastIndexOf,le=n.reduce,ae=n.reduceRight,se=n.join,ce=n.sort,fe=n.slice,de=n.toString,he=n.toLocaleString,pe=Oe("iterator"),ve=Oe("toStringTag"),_e=Fe("typed_constructor"),ge=Fe("def_constructor"),n=l.CONSTR,me=l.TYPED,ye=l.VIEW,be="Wrong length!",Ce=qe(1,(function(e,t){return we(O(e,e[ge]),t)})),Se=o((function(){return 1===new V(new Uint16Array([1]).buffer)[0]})),Te=!!V&&!!V[z].set&&o((function(){new V(1).set({})})),Ee=function(e,t){if((e=p(e))<0||e%t)throw q("Wrong offset!");return e},Ae=function(e){if(C(e)&&me in e)return e;throw H(e+" is not a typed array!")},we=function(e,t){if(!C(e)||!(_e in e))throw H("It is not a typed array constructor!");return new e(t)},Re=function(e,t){return Ie(O(e,e[ge]),t)},Ie=function(e,t){for(var n=0,r=t.length,i=we(e,r);n<r;)i[n]=t[n++];return i},Oe=function(e,t,n){j(e,t,{get:function(){return this._d[n]}})},ke=function(e){var t,n,r,i,o,u,l=S(e),a=arguments.length,c=1<a?arguments[1]:void 0,f=void 0!==c;if(null!=(e=R(l))&&!T(e)){for(u=e.call(l),r=[],t=0;!(o=u.next()).done;t++)r.push(o.value);l=r}for(f&&2<a&&(c=s(c,arguments[2],2)),t=0,n=v(l.length),i=we(this,n);t<n;t++)i[t]=f?c(l[t],t):l[t];return i},Pe=function(){for(var e=0,t=arguments.length,n=we(this,t);e<t;)n[e]=arguments[e++];return n},xe=!!V&&o((function(){he.call(new V(1))})),De=function(){return he.apply(xe?fe.call(Ae(this)):Ae(this),arguments)},Me={copyWithin:function(e,t){return N.call(Ae(this),e,t,2<arguments.length?arguments[2]:void 0)},every:function(e){return Q(Ae(this),e,1<arguments.length?arguments[1]:void 0)},fill:function(e){return M.apply(Ae(this),arguments)},filter:function(e){return Re(this,Y(Ae(this),e,1<arguments.length?arguments[1]:void 0))},find:function(e){return Z(Ae(this),e,1<arguments.length?arguments[1]:void 0)},findIndex:function(e){return ee(Ae(this),e,1<arguments.length?arguments[1]:void 0)},forEach:function(e){K(Ae(this),e,1<arguments.length?arguments[1]:void 0)},indexOf:function(e){return ne(Ae(this),e,1<arguments.length?arguments[1]:void 0)},includes:function(e){return te(Ae(this),e,1<arguments.length?arguments[1]:void 0)},join:function(e){return se.apply(Ae(this),arguments)},lastIndexOf:function(e){return ue.apply(Ae(this),arguments)},map:function(e){return Ce(Ae(this),e,1<arguments.length?arguments[1]:void 0)},reduce:function(e){return le.apply(Ae(this),arguments)},reduceRight:function(e){return ae.apply(Ae(this),arguments)},reverse:function(){for(var e,t=this,n=Ae(t).length,r=Math.floor(n/2),i=0;i<r;)e=t[i],t[i++]=t[--n],t[n]=e;return t},some:function(e){return X(Ae(this),e,1<arguments.length?arguments[1]:void 0)},sort:function(e){return ce.call(Ae(this),e)},subarray:function(e,t){var n=Ae(this),r=n.length;e=g(e,r);return new(O(n,n[ge]))(n.buffer,n.byteOffset+e*n.BYTES_PER_ELEMENT,v((void 0===t?r:g(t,r))-e))}},Ne=function(e,t){return Re(this,fe.call(Ae(this),e,t))},Le=function(e){Ae(this);var t=Ee(arguments[1],1),n=this.length,r=S(e),i=v(r.length),o=0;if(n<i+t)throw q(be);for(;o<i;)this[t+o]=r[o++]},Ue={entries:function(){return oe.call(Ae(this))},keys:function(){return ie.call(Ae(this))},values:function(){return re.call(Ae(this))}},je=function(e,t){return C(e)&&e[me]&&"symbol"!=typeof t&&t in e&&String(+t)==String(t)},Fe=function(e,t){return je(e,t=m(t,!0))?f(2,e[t]):F(e,t)},qe=function(e,t,n){return!(je(e,t=m(t,!0))&&C(n)&&y(n,"value"))||y(n,"get")||y(n,"set")||n.configurable||y(n,"writable")&&!n.writable||y(n,"enumerable")&&!n.enumerable?j(e,t,n):(e[t]=n.value,e)},n||(U.f=Fe,L.f=qe),u(u.S+u.F*!n,"Object",{getOwnPropertyDescriptor:Fe,defineProperty:qe}),o((function(){de.call({})}))&&(de=he=function(){return se.call(this)}),He=h({},Me),h(He,Ue),d(He,pe,Ue.values),h(He,{slice:Ne,set:Le,constructor:function(){},toString:de,toLocaleString:De}),Oe(He,"buffer","b"),Oe(He,"byteOffset","o"),Oe(He,"byteLength","l"),Oe(He,"length","e"),j(He,ve,{get:function(){return this[me]}}),e.exports=function(e,t,n,a){function s(e,n){j(e,n,{get:function(){return function(e,n){return(e=e._d).v[h](n*t+e.o,Se)}(this,n)},set:function(e){return function(e,n,r){e=e._d,a&&(r=(r=Math.round(r))<0?0:255<r?255:255&r),e.v[p](n*t+e.o,r,Se)}(this,n,e)},enumerable:!0})}var f=e+((a=!!a)?"Clamped":"")+"Array",h="get"+e,p="set"+e,g=i[f],m=g||{},y=g&&A(g),S=!g||!l.ABV,T=(e={},g&&g[z]);S?(g=n((function(e,n,r,i){c(e,g,f,"_d");var o,u,l=0,a=0;if(C(n)){if(!(n instanceof $||(h=b(n))==W||h==G))return me in n?Ie(g,n):ke.call(g,n);var h=n;a=Ee(r,t),r=n.byteLength;if(void 0===i){if(r%t)throw q(be);if((o=r-a)<0)throw q(be)}else if(r<(o=v(i)*t)+a)throw q(be);u=o/t}else u=_(n),h=new $(o=u*t);for(d(e,"_d",{b:h,o:a,l:o,e:u,v:new J(h)});l<u;)s(e,l++)})),T=g[z]=E(He),d(T,"constructor",g)):o((function(){g(1)}))&&o((function(){new g(-1)}))&&x((function(e){new g,new g(null),new g(1.5),new g(e)}),!0)||(g=n((function(e,n,r,i){var o;return c(e,g,f),C(n)?n instanceof $||(o=b(n))==W||o==G?void 0!==i?new m(n,Ee(r,t),i):void 0!==r?new m(n,Ee(r,t)):new m(n):me in n?Ie(g,n):ke.call(g,n):new m(_(n))})),K(y!==Function.prototype?w(m).concat(w(y)):w(m),(function(e){e in g||d(g,e,m[e])})),g[z]=T,r||(T.constructor=g)),n=!!(S=T[pe])&&("values"==S.name||null==S.name),y=Ue.values,d(g,_e,!0),d(T,me,f),d(T,ye,!0),d(T,ge,g),(a?new g(1)[ve]==f:ve in T)||j(T,ve,{get:function(){return f}}),e[f]=g,u(u.G+u.W+u.F*(g!=m),e),u(u.S,f,{BYTES_PER_ELEMENT:t}),u(u.S+u.F*o((function(){m.of.call(g,1)})),f,{from:ke,of:Pe}),B in T||d(T,B,t),u(u.P,f,Me),D(f),u(u.P+u.F*Te,f,{set:Le}),u(u.P+u.F*!n,f,Ue),r||T.toString==de||(T.toString=de),u(u.P+u.F*o((function(){new g(1).slice()})),f,{slice:Ne}),u(u.P+u.F*(o((function(){return[1,2].toLocaleString()!=new g([1,2]).toLocaleString()}))||!o((function(){T.toLocaleString.call([1,2])}))),f,{toLocaleString:De}),P[f]=n?S:y,r||n||d(T,pe,y)}):e.exports=function(){}},function(e,t,n){function r(e,t,n){var r=l.get(e);if(!r){if(!n)return;l.set(e,r=new i)}if(!(e=r.get(t))){if(!n)return;r.set(t,e=new i)}return e}var i=n(138),o=n(0),u=n(60)("metadata"),l=u.store||(u.store=new(n(141)));e.exports={store:l,map:r,has:function(e,t,n){return void 0!==(n=r(t,n,!1))&&n.has(e)},get:function(e,t,n){return void 0===(n=r(t,n,!1))?void 0:n.get(e)},set:function(e,t,n,i){r(n,i,!0).set(e,t)},keys:function(e,t){t=r(e,t,!1);var n=[];return t&&t.forEach((function(e,t){n.push(t)})),n},key:function(e){return void 0===e||"symbol"==typeof e?e:String(e)},exp:function(e){o(o.S,"Reflect",e)}}},function(e,t){e.exports=!1},function(e,t,n){function r(e){l(e,i,{value:{i:"O"+ ++a,w:{}}})}var i=n(42)("meta"),o=n(4),u=n(20),l=n(11).f,a=0,s=Object.isExtensible||function(){return!0},c=!n(3)((function(){return s(Object.preventExtensions({}))})),f=e.exports={KEY:i,NEED:!1,fastKey:function(e,t){if(!o(e))return"symbol"==typeof e?e:("string"==typeof e?"S":"P")+e;if(!u(e,i)){if(!s(e))return"F";if(!t)return"E";r(e)}return e[i].i},getWeak:function(e,t){if(!u(e,i)){if(!s(e))return!0;if(!t)return!1;r(e)}return e[i].w},onFreeze:function(e){return c&&f.NEED&&s(e)&&!u(e,i)&&r(e),e}}},function(e,t,n){var r=n(6)("unscopables"),i=Array.prototype;null==i[r]&&n(17)(i,r,{}),e.exports=function(e){i[r][e]=!0}},function(e,t,n){"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&function(e,t){(Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}(e,t)}function o(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=u(e);return function(e,t){if(t&&("object"===r(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0!==e)return e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(e)}(this,t?(n=u(this).constructor,Reflect.construct(i,arguments,n)):i.apply(this,arguments))}}function u(e){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function l(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return a(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Map"===(n="Object"===n&&e.constructor?e.constructor.name:n)||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?a(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0;return{s:t=function(){},n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:t}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,o=!0,u=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return o=e.done,e},e:function(e){u=!0,i=e},f:function(){try{o||null==n.return||n.return()}finally{if(u)throw i}}}}function a(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function c(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function f(e,t,n){return t&&c(e.prototype,t),n&&c(e,n),e}var d=n(10),h=n(13),p=n(16),v=n(110),_=n(33),g=new(n(14))("JsSIP:SIPMessage").debug,m=function(){function e(t,n,r,i,o,u){if(s(this,e),!t||!n||!r)return null;i=i||{},this.ua=r,this.headers={},this.method=t,this.ruri=n,this.body=u,this.extraHeaders=p.cloneArray(o),i.route_set?this.setHeader("route",i.route_set):r.configuration.use_preloaded_route&&this.setHeader("route","<".concat(r.transport.sip_uri,";lr>")),this.setHeader("via",""),this.setHeader("max-forwards",h.MAX_FORWARDS);u=i.to_uri||n,o=i.to_tag?{tag:i.to_tag}:null,n=void 0!==i.to_display_name?i.to_display_name:null;this.to=new v(u,n,o),this.setHeader("to",this.to.toString()),u=i.from_uri||r.configuration.uri,n={tag:i.from_tag||p.newTag()},o=void 0!==i.from_display_name?i.from_display_name:r.configuration.display_name||null,this.from=new v(u,o,n),this.setHeader("from",this.from.toString()),r=i.call_id||r.configuration.jssip_id+p.createRandomToken(15),this.call_id=r,this.setHeader("call-id",r),i=i.cseq||Math.floor(1e4*Math.random()),this.cseq=i,this.setHeader("cseq","".concat(i," ").concat(t))}return f(e,[{key:"setHeader",value:function(e,t){for(var n=new RegExp("^\\s*".concat(e,"\\s*:"),"i"),r=0;r<this.extraHeaders.length;r++)n.test(this.extraHeaders[r])&&this.extraHeaders.splice(r,1);this.headers[p.headerize(e)]=Array.isArray(t)?t:[t]}},{key:"getHeader",value:function(e){var t=this.headers[p.headerize(e)];if(t){if(t[0])return t[0]}else{var n,r=new RegExp("^\\s*".concat(e,"\\s*:"),"i"),i=l(this.extraHeaders);try{for(i.s();!(n=i.n()).done;){var o=n.value;if(r.test(o))return o.substring(o.indexOf(":")+1).trim()}}catch(e){i.e(e)}finally{i.f()}}}},{key:"getHeaders",value:function(e){var t=this.headers[p.headerize(e)],n=[];if(t){var r,i=l(t);try{for(i.s();!(r=i.n()).done;){var o=r.value;n.push(o)}}catch(e){i.e(e)}finally{i.f()}return n}var u,a=new RegExp("^\\s*".concat(e,"\\s*:"),"i"),s=l(this.extraHeaders);try{for(s.s();!(u=s.n()).done;){var c=u.value;a.test(c)&&n.push(c.substring(c.indexOf(":")+1).trim())}}catch(e){s.e(e)}finally{s.f()}return n}},{key:"hasHeader",value:function(e){if(this.headers[p.headerize(e)])return!0;var t,n=new RegExp("^\\s*".concat(e,"\\s*:"),"i"),r=l(this.extraHeaders);try{for(r.s();!(t=r.n()).done;){var i=t.value;if(n.test(i))return!0}}catch(e){r.e(e)}finally{r.f()}return!1}},{key:"parseSDP",value:function(e){return!e&&this.sdp||(this.sdp=d.parse(this.body||"")),this.sdp}},{key:"toString",value:function(){var e,t="".concat(this.method," ").concat(this.ruri," SIP/2.0\r\n");for(e in this.headers)if(Object.prototype.hasOwnProperty.call(this.headers,e)){var n,r=l(this.headers[e]);try{for(r.s();!(n=r.n()).done;){var i=n.value;t+="".concat(e,": ").concat(i,"\r\n")}}catch(e){r.e(e)}finally{r.f()}}var o,u=l(this.extraHeaders);try{for(u.s();!(o=u.n()).done;){var a=o.value;t+="".concat(a.trim(),"\r\n")}}catch(e){u.e(e)}finally{u.f()}var s=[];switch(this.method){case h.REGISTER:s.push("path","gruu");break;case h.INVITE:this.ua.configuration.session_timers&&s.push("timer"),(this.ua.contact.pub_gruu||this.ua.contact.temp_gruu)&&s.push("gruu"),s.push("ice","replaces");break;case h.UPDATE:this.ua.configuration.session_timers&&s.push("timer"),s.push("ice")}s.push("outbound");var c=this.ua.configuration.user_agent||h.USER_AGENT;return!this.extraHeaders.find((function(e){return-1!==e.indexOf("X-Client-Info")}))&&this.ua.xClientInfoHeader&&(t+="".concat(this.ua.xClientInfoHeader,"\r\n")),t+="Allow: ".concat(h.ALLOWED_METHODS,"\r\n"),t+="Supported: ".concat(s,"\r\n"),t+="User-Agent: ".concat(c,"\r\n"),this.body?(c=p.str_utf8_length(this.body),t+="Content-Length: ".concat(c,"\r\n\r\n"),t+=this.body):t+="Content-Length: 0\r\n\r\n",t}},{key:"clone",value:function(){var t=new e(this.method,this.ruri,this.ua);return Object.keys(this.headers).forEach((function(e){t.headers[e]=this.headers[e].slice()}),this),t.body=this.body,t.extraHeaders=p.cloneArray(this.extraHeaders),t.to=this.to,t.from=this.from,t.call_id=this.call_id,t.cseq=this.cseq,t}}]),e}(),y=function(){i(t,m);var e=o(t);function t(n,r,i,o,u){return s(this,t),(u=e.call(this,h.INVITE,n,r,i,o,u)).transaction=null,u}return f(t,[{key:"cancel",value:function(e){this.transaction.cancel(e)}},{key:"clone",value:function(){var e=new t(this.ruri,this.ua);return Object.keys(this.headers).forEach((function(t){e.headers[t]=this.headers[t].slice()}),this),e.body=this.body,e.extraHeaders=p.cloneArray(this.extraHeaders),e.to=this.to,e.from=this.from,e.call_id=this.call_id,e.cseq=this.cseq,e.transaction=this.transaction,e}}]),t}(),b=function(){function e(){s(this,e),this.data=null,this.headers=null,this.method=null,this.via=null,this.via_branch=null,this.call_id=null,this.cseq=null,this.from=null,this.from_tag=null,this.to=null,this.to_tag=null,this.body=null,this.sdp=null}return f(e,[{key:"addHeader",value:function(e,t){t={raw:t},e=p.headerize(e),this.headers[e]?this.headers[e].push(t):this.headers[e]=[t]}},{key:"getHeader",value:function(e){if((e=this.headers[p.headerize(e)])&&e[0])return e[0].raw}},{key:"getHeaders",value:function(e){var t=[];if(!(e=this.headers[p.headerize(e)]))return[];var n,r=l(e);try{for(r.s();!(n=r.n()).done;){var i=n.value;t.push(i.raw)}}catch(e){r.e(e)}finally{r.f()}return t}},{key:"hasHeader",value:function(e){return!!this.headers[p.headerize(e)]}},{key:"parseHeader",value:function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0;if(e=p.headerize(e),this.headers[e])if(t>=this.headers[e].length)g('not so many "'.concat(e,'" headers present'));else{var n=this.headers[e][t],r=n.raw;if(n.parsed)return n.parsed;var i=_.parse(r,e.replace(/-/g,"_"));if(-1!==i)return n.parsed=i;this.headers[e].splice(t,1),g('error parsing "'.concat(e,'" header field with value "').concat(r,'"'))}else g('header "'.concat(e,'" not present'))}},{key:"s",value:function(e,t){return this.parseHeader(e,t)}},{key:"setHeader",value:function(e,t){t={raw:t},this.headers[p.headerize(e)]=[t]}},{key:"parseSDP",value:function(e){return!e&&this.sdp||(this.sdp=d.parse(this.body||"")),this.sdp}},{key:"toString",value:function(){return this.data}}]),e}();n=function(){i(t,b);var e=o(t);function t(n){var r;return s(this,t),(r=e.call(this)).ua=n,r.headers={},r.ruri=null,r.transport=null,r.server_transaction=null,r}return f(t,[{key:"reply",value:function(e,t,n,r,i,o){var u=[],a=this.getHeader("To");if(t=t||null,!(e=e||null)||e<100||699<e)throw new TypeError("Invalid status_code: ".concat(e));if(t&&"string"!=typeof t&&!(t instanceof String))throw new TypeError("Invalid reason_phrase: ".concat(t));t=t||h.REASON_PHRASE[e]||"",n=p.cloneArray(n);var s="SIP/2.0 ".concat(e," ").concat(t,"\r\n");if(this.method===h.INVITE&&100<e&&e<=200){var c,f=l(this.getHeaders("record-route"));try{for(f.s();!(c=f.n()).done;){var d=c.value;s+="Record-Route: ".concat(d,"\r\n")}}catch(e){f.e(e)}finally{f.f()}}var v,_=l(this.getHeaders("via"));try{for(_.s();!(v=_.n()).done;){var g=v.value;s+="Via: ".concat(g,"\r\n")}}catch(e){_.e(e)}finally{_.f()}!this.to_tag&&100<e?a+=";tag=".concat(p.newTag()):this.to_tag&&!this.s("to").hasParam("tag")&&(a+=";tag=".concat(this.to_tag)),s+="To: ".concat(a,"\r\n"),s+="From: ".concat(this.getHeader("From"),"\r\n"),s+="Call-ID: ".concat(this.call_id,"\r\n"),s+="CSeq: ".concat(this.cseq," ").concat(this.method,"\r\n");var m,y=l(n);try{for(y.s();!(m=y.n()).done;){var b=m.value;s+="".concat(b.trim(),"\r\n")}}catch(e){y.e(e)}finally{y.f()}switch(this.method){case h.INVITE:this.ua.configuration.session_timers&&u.push("timer"),(this.ua.contact.pub_gruu||this.ua.contact.temp_gruu)&&u.push("gruu"),u.push("ice","replaces");break;case h.UPDATE:this.ua.configuration.session_timers&&u.push("timer"),r&&u.push("ice"),u.push("replaces")}u.push("outbound"),!n.find((function(e){return-1!==e.indexOf("X-Client-Info")}))&&this.ua.xClientInfoHeader&&(s+="".concat(this.ua.xClientInfoHeader,"\r\n")),s+="Allow: ".concat(h.ALLOWED_METHODS,"\r\n"),this.method!==h.OPTIONS&&415!==e||(s+="Accept: ".concat(h.ACCEPTED_BODY_TYPES,"\r\n")),s+="Supported: ".concat(u,"\r\n"),r?(n=p.str_utf8_length(r),s+="Content-Type: application/sdp\r\n",s+="Content-Length: ".concat(n,"\r\n\r\n"),s+=r):s+="Content-Length: ".concat(0,"\r\n\r\n"),this.server_transaction.receiveResponse(e,s,i,o)}},{key:"reply_sl",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:null,t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:null,n=this.getHeaders("via");if(!e||e<100||699<e)throw new TypeError("Invalid status_code: ".concat(e));if(t&&"string"!=typeof t&&!(t instanceof String))throw new TypeError("Invalid reason_phrase: ".concat(t));t=t||h.REASON_PHRASE[e]||"";var r,i="SIP/2.0 ".concat(e," ").concat(t,"\r\n"),o=l(n);try{for(o.s();!(r=o.n()).done;){var u=r.value;i+="Via: ".concat(u,"\r\n")}}catch(e){o.e(e)}finally{o.f()}n=this.getHeader("To"),!this.to_tag&&100<e?n+=";tag=".concat(p.newTag()):this.to_tag&&!this.s("to").hasParam("tag")&&(n+=";tag=".concat(this.to_tag)),i+="To: ".concat(n,"\r\n"),i+="From: ".concat(this.getHeader("From"),"\r\n"),i+="Call-ID: ".concat(this.call_id,"\r\n"),i+="CSeq: ".concat(this.cseq," ").concat(this.method,"\r\n"),i+="Content-Length: ".concat(0,"\r\n\r\n"),this.transport.send(i)}}]),t}();e.exports={OutgoingRequest:m,InitialOutgoingInviteRequest:y,IncomingRequest:n,IncomingResponse:function(){i(t,b);var e=o(t);function t(){var n;return s(this,t),(n=e.call(this)).headers={},n.status_code=null,n.reason_phrase=null,n}return t}()}},function(e,t){e.exports=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}}},function(e,t){var n=0,r=Math.random();e.exports=function(e){return"Symbol(".concat(void 0===e?"":e,")_",(++n+r).toString(36))}},function(e,t,n){var r=n(117),i=n(85);e.exports=Object.keys||function(e){return r(e,i)}},function(e,t,n){var r=n(27),i=Math.max,o=Math.min;e.exports=function(e,t){return(e=r(e))<0?i(e+t,0):o(e,t)}},function(e,t,n){function r(){}var i=n(1),o=n(118),u=n(85),l=n(84)("IE_PROTO"),a="prototype",s=function(){var e=n(82)("iframe"),t=u.length;for(e.style.display="none",n(86).appendChild(e),e.src="javascript:",(e=e.contentWindow.document).open(),e.write("<script>document.F=Object<\/script>"),e.close(),s=e.F;t--;)delete s[a][u[t]];return s()};e.exports=Object.create||function(e,t){var n;return null!==e?(r[a]=i(e),n=new r,r[a]=null,n[l]=e):n=s(),void 0===t?n:o(n,t)}},function(e,t,n){var r=n(117),i=n(85).concat("length","prototype");t.f=Object.getOwnPropertyNames||function(e){return r(e,i)}},function(e,t,n){"use strict";var r=n(2),i=n(11),o=n(8),u=n(6)("species");e.exports=function(e){e=r[e],o&&e&&!e[u]&&i.f(e,u,{configurable:!0,get:function(){return this}})}},function(e,t){e.exports=function(e,t,n,r){if(!(e instanceof t)||void 0!==r&&r in e)throw TypeError(n+": incorrect invocation!");return e}},function(e,t,n){var r=n(25),i=n(130),o=n(97),u=n(1),l=n(7),a=n(99),s={},c={};(t=e.exports=function(e,t,n,f,d){d=d?function(){return e}:a(e);var h,p,v,_,g=r(n,f,t?2:1),m=0;if("function"!=typeof d)throw TypeError(e+" is not iterable!");if(o(d)){for(h=l(e.length);m<h;m++)if((_=t?g(u(p=e[m])[0],p[1]):g(e[m]))===s||_===c)return _}else for(v=d.call(e);!(p=v.next()).done;)if((_=i(v,g,p.value,t))===s||_===c)return _}).BREAK=s,t.RETURN=c},function(e,t,n){var r=n(18);e.exports=function(e,t,n){for(var i in t)r(e,i,t[i],n);return e}},function(e,t,n){var r=n(4);e.exports=function(e,t){if(!r(e)||e._t!==t)throw TypeError("Incompatible receiver, "+t+" required!");return e}},function(e,t,n){"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&c(e,t)}function u(e){var t=s();return function(){var n,i=f(e);return function(e,t){if(t&&("object"===r(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0!==e)return e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(e)}(this,t?(n=f(this).constructor,Reflect.construct(i,arguments,n)):i.apply(this,arguments))}}function l(e){var t="function"==typeof Map?new Map:void 0;return(l=function(e){if(null===e||-1===Function.toString.call(e).indexOf("[native code]"))return e;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==t){if(t.has(e))return t.get(e);t.set(e,n)}function n(){return a(e,arguments,f(this).constructor)}return n.prototype=Object.create(e.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),c(n,e)})(e)}function a(e,t,n){return(a=s()?Reflect.construct:function(e,t,n){var r=[null];return r.push.apply(r,t),r=new(Function.bind.apply(e,r)),n&&c(r,n.prototype),r}).apply(null,arguments)}function s(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}function c(e,t){return(c=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function f(e){return(f=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var d=function(){o(t,l(Error));var e=u(t);function t(n,r){var o;return i(this,t),(o=e.call(this)).code=1,o.name="CONFIGURATION_ERROR",o.parameter=n,o.value=r,o.message=o.value?"Invalid value ".concat(JSON.stringify(o.value),' for parameter "').concat(o.parameter,'"'):"Missing parameter: ".concat(o.parameter),o}return t}(),h=function(){o(t,l(Error));var e=u(t);function t(n){var r;return i(this,t),(r=e.call(this)).code=2,r.name="INVALID_STATE_ERROR",r.status=n,r.message="Invalid status: ".concat(n),r}return t}(),p=function(){o(t,l(Error));var e=u(t);function t(n){var r;return i(this,t),(r=e.call(this)).code=3,r.name="NOT_SUPPORTED_ERROR",r.message=n,r}return t}(),v=function(){o(t,l(Error));var e=u(t);function t(n){var r;return i(this,t),(r=e.call(this)).code=4,r.name="NOT_READY_ERROR",r.message=n,r}return t}();e.exports={ConfigurationError:d,InvalidStateError:h,NotSupportedError:p,NotReadyError:v}},function(e,t,n){"use strict";function r(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return i(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Map"===(n="Object"===n&&e.constructor?e.constructor.name:n)||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?i(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0;return{s:t=function(){},n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:t}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,u=!0,l=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return u=e.done,e},e:function(e){l=!0,o=e},f:function(){try{u||null==n.return||n.return()}finally{if(l)throw o}}}}function i(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function o(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var u=n(13),l=n(16),a=n(33);e.exports=function(){function e(t,n,r,i){var o,l,a=4<arguments.length&&void 0!==arguments[4]?arguments[4]:{},s=5<arguments.length&&void 0!==arguments[5]?arguments[5]:{};if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),!r)throw new TypeError('missing or invalid "host" parameter');for(o in this._parameters={},this._headers={},this._scheme=t||u.SIP,this._user=n,this._host=r,this._port=i,a)Object.prototype.hasOwnProperty.call(a,o)&&this.setParam(o,a[o]);for(l in s)Object.prototype.hasOwnProperty.call(s,l)&&this.setHeader(l,s[l])}var t,n,i;return t=e,i=[{key:"parse",value:function(e){if(-1!==(e=a.parse(e,"SIP_URI")))return e}}],(n=[{key:"scheme",get:function(){return this._scheme},set:function(e){this._scheme=e.toLowerCase()}},{key:"user",get:function(){return this._user},set:function(e){this._user=e}},{key:"host",get:function(){return this._host},set:function(e){this._host=e.toLowerCase()}},{key:"port",get:function(){return this._port},set:function(e){this._port=0===e?e:parseInt(e,10)||null}},{key:"setParam",value:function(e,t){e&&(this._parameters[e.toLowerCase()]=null==t?null:t.toString())}},{key:"getParam",value:function(e){if(e)return this._parameters[e.toLowerCase()]}},{key:"hasParam",value:function(e){if(e)return!!this._parameters.hasOwnProperty(e.toLowerCase())}},{key:"deleteParam",value:function(e){if(e=e.toLowerCase(),this._parameters.hasOwnProperty(e)){var t=this._parameters[e];return delete this._parameters[e],t}}},{key:"clearParams",value:function(){this._parameters={}}},{key:"setHeader",value:function(e,t){this._headers[l.headerize(e)]=Array.isArray(t)?t:[t]}},{key:"getHeader",value:function(e){if(e)return this._headers[l.headerize(e)]}},{key:"hasHeader",value:function(e){if(e)return!!this._headers.hasOwnProperty(l.headerize(e))}},{key:"deleteHeader",value:function(e){if(e=l.headerize(e),this._headers.hasOwnProperty(e)){var t=this._headers[e];return delete this._headers[e],t}}},{key:"clearHeaders",value:function(){this._headers={}}},{key:"clone",value:function(){return new e(this._scheme,this._user,this._host,this._port,JSON.parse(JSON.stringify(this._parameters)),JSON.parse(JSON.stringify(this._headers)))}},{key:"toString",value:function(){var e,t,n=[],i="".concat(this._scheme,":");for(e in this._user&&(i+="".concat(l.escapeUser(this._user),"@")),i+=this._host,!this._port&&0!==this._port||(i+=":".concat(this._port)),this._parameters)Object.prototype.hasOwnProperty.call(this._parameters,e)&&(i+=";".concat(e),null!==this._parameters[e]&&(i+="=".concat(this._parameters[e])));for(t in this._headers)if(Object.prototype.hasOwnProperty.call(this._headers,t)){var o,u=r(this._headers[t]);try{for(u.s();!(o=u.n()).done;){var a=o.value;n.push("".concat(t,"=").concat(a))}}catch(e){u.e(e)}finally{u.f()}}return 0<n.length&&(i+="?".concat(n.join("&"))),i}},{key:"toAor",value:function(e){var t="".concat(this._scheme,":");return this._user&&(t+="".concat(l.escapeUser(this._user),"@")),t+=this._host,e&&(this._port||0===this._port)&&(t+=":".concat(this._port)),t}}])&&o(t.prototype,n),i&&o(t,i),e}()},function(e,t,n){const r=n(9),i=n(112),o=n(113);t.str_utf8_length=e=>unescape(encodeURIComponent(e)).length;const u=t.isFunction=e=>void 0!==e&&"[object Function]"===Object.prototype.toString.call(e);t.isString=e=>void 0!==e&&"[object String]"===Object.prototype.toString.call(e),t.isDecimal=e=>!isNaN(e)&&parseFloat(e)===parseInt(e,10),t.isEmpty=e=>null===e||""===e||void 0===e||Array.isArray(e)&&0===e.length||"number"==typeof e&&isNaN(e),t.hasMethods=function(e,...t){for(const n of t)if(u(e[n]))return!1;return!0};const l=t.createRandomToken=(e,t=32)=>{let n,r,i="";for(n=0;n<e;n++)r=Math.random()*t|0,i+=r.toString(t);return i};t.newTag=()=>l(10),t.newUUID=()=>"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,e=>{const t=16*Math.random()|0;return("x"===e?t:3&t|8).toString(16)}),t.hostType=e=>{if(e&&-1!==(e=o.parse(e,"host")))return e.host_type};const a=t.escapeUser=e=>encodeURIComponent(decodeURIComponent(e)).replace(/%3A/gi,":").replace(/%2B/gi,"+").replace(/%3F/gi,"?").replace(/%2F/gi,"/");t.normalizeTarget=(e,t)=>{if(e){if(e instanceof i)return e;if("string"==typeof e){const o=e.split("@");let u,l;switch(o.length){case 1:if(!t)return;u=e,l=t;break;case 2:u=o[0],l=o[1];break;default:u=o.slice(0,o.length-1).join("@"),l=o[o.length-1]}var n;if(u=u.replace(/^(sips?|tel):/i,""),/^[-.()]*\+?[0-9\-.()]+$/.test(u)&&(u=u.replace(/[-.()]/g,"")),e=`${r.SIP}:${a(u)}@`+l,n=i.parse(e))return n}}},t.headerize=e=>{var t={"Call-Id":"Call-ID",Cseq:"CSeq","Www-Authenticate":"WWW-Authenticate"};const n=e.toLowerCase().replace(/_/g,"-").split("-");let r="";var i=n.length;let o;for(o=0;o<i;o++)0!==o&&(r+="-"),r+=n[o].charAt(0).toUpperCase()+n[o].substring(1);return t[r]&&(r=t[r]),r},t.sipErrorCause=e=>{for(const t in r.SIP_ERROR_CAUSES)if(-1!==r.SIP_ERROR_CAUSES[t].indexOf(e))return r.causes[t];return r.causes.SIP_FAILURE_CODE},t.getRandomTestNetIP=()=>"192.0.2."+(1,254,Math.floor(254*Math.random()+1)),t.calculateMD5=e=>{function t(e,t){return e<<t|e>>>32-t}function n(e,t){var n=2147483648&e,r=2147483648&t,i=1073741824&e,o=1073741824&t;t=(1073741823&e)+(1073741823&t);return i&o?2147483648^t^n^r:i|o?1073741824&t?3221225472^t^n^r:1073741824^t^n^r:t^n^r}function r(e,r,i,o,u,l,a){return e=n(e,n(n(r&i|~r&o,u),a)),n(t(e,l),r)}function i(e,r,i,o,u,l,a){return e=n(e,n(n(r&o|i&~o,u),a)),n(t(e,l),r)}function o(e,r,i,o,u,l,a){return e=n(e,n(n(r^i^o,u),a)),n(t(e,l),r)}function u(e,r,i,o,u,l,a){return e=n(e,n(n(i^(r|~o),u),a)),n(t(e,l),r)}function l(e){let t,n,r="",i="";for(n=0;n<=3;n++)t=e>>>8*n&255,i="0"+t.toString(16),r+=i.substr(i.length-2,2);return r}let a,s,c,f,d,h,p,v,_;var g=function(e){let t;var n=e.length,r=16*(1+((r=n+8)-r%64)/64);const i=new Array(r-1);let o=0,u=0;for(;u<n;)t=(u-u%4)/4,o=u%4*8,i[t]=i[t]|e.charCodeAt(u)<<o,u++;return t=(u-u%4)/4,o=u%4*8,i[t]=i[t]|128<<o,i[r-2]=n<<3,i[r-1]=n>>>29,i}(e=function(e){e=e.replace(/\r\n/g,"\n");let t="";for(let r=0;r<e.length;r++){var n=e.charCodeAt(r);n<128?t+=String.fromCharCode(n):(127<n&&n<2048?t+=String.fromCharCode(n>>6|192):(t+=String.fromCharCode(n>>12|224),t+=String.fromCharCode(n>>6&63|128)),t+=String.fromCharCode(63&n|128))}return t}(e));for(h=1732584193,p=4023233417,v=2562383102,_=271733878,a=0;a<g.length;a+=16)s=h,c=p,f=v,d=_,h=r(h,p,v,_,g[a+0],7,3614090360),_=r(_,h,p,v,g[a+1],12,3905402710),v=r(v,_,h,p,g[a+2],17,606105819),p=r(p,v,_,h,g[a+3],22,3250441966),h=r(h,p,v,_,g[a+4],7,4118548399),_=r(_,h,p,v,g[a+5],12,1200080426),v=r(v,_,h,p,g[a+6],17,2821735955),p=r(p,v,_,h,g[a+7],22,4249261313),h=r(h,p,v,_,g[a+8],7,1770035416),_=r(_,h,p,v,g[a+9],12,2336552879),v=r(v,_,h,p,g[a+10],17,4294925233),p=r(p,v,_,h,g[a+11],22,2304563134),h=r(h,p,v,_,g[a+12],7,1804603682),_=r(_,h,p,v,g[a+13],12,4254626195),v=r(v,_,h,p,g[a+14],17,2792965006),p=r(p,v,_,h,g[a+15],22,1236535329),h=i(h,p,v,_,g[a+1],5,4129170786),_=i(_,h,p,v,g[a+6],9,3225465664),v=i(v,_,h,p,g[a+11],14,643717713),p=i(p,v,_,h,g[a+0],20,3921069994),h=i(h,p,v,_,g[a+5],5,3593408605),_=i(_,h,p,v,g[a+10],9,38016083),v=i(v,_,h,p,g[a+15],14,3634488961),p=i(p,v,_,h,g[a+4],20,3889429448),h=i(h,p,v,_,g[a+9],5,568446438),_=i(_,h,p,v,g[a+14],9,3275163606),v=i(v,_,h,p,g[a+3],14,4107603335),p=i(p,v,_,h,g[a+8],20,1163531501),h=i(h,p,v,_,g[a+13],5,2850285829),_=i(_,h,p,v,g[a+2],9,4243563512),v=i(v,_,h,p,g[a+7],14,1735328473),p=i(p,v,_,h,g[a+12],20,2368359562),h=o(h,p,v,_,g[a+5],4,4294588738),_=o(_,h,p,v,g[a+8],11,2272392833),v=o(v,_,h,p,g[a+11],16,1839030562),p=o(p,v,_,h,g[a+14],23,4259657740),h=o(h,p,v,_,g[a+1],4,2763975236),_=o(_,h,p,v,g[a+4],11,1272893353),v=o(v,_,h,p,g[a+7],16,4139469664),p=o(p,v,_,h,g[a+10],23,3200236656),h=o(h,p,v,_,g[a+13],4,681279174),_=o(_,h,p,v,g[a+0],11,3936430074),v=o(v,_,h,p,g[a+3],16,3572445317),p=o(p,v,_,h,g[a+6],23,76029189),h=o(h,p,v,_,g[a+9],4,3654602809),_=o(_,h,p,v,g[a+12],11,3873151461),v=o(v,_,h,p,g[a+15],16,530742520),p=o(p,v,_,h,g[a+2],23,3299628645),h=u(h,p,v,_,g[a+0],6,4096336452),_=u(_,h,p,v,g[a+7],10,1126891415),v=u(v,_,h,p,g[a+14],15,2878612391),p=u(p,v,_,h,g[a+5],21,4237533241),h=u(h,p,v,_,g[a+12],6,1700485571),_=u(_,h,p,v,g[a+3],10,2399980690),v=u(v,_,h,p,g[a+10],15,4293915773),p=u(p,v,_,h,g[a+1],21,2240044497),h=u(h,p,v,_,g[a+8],6,1873313359),_=u(_,h,p,v,g[a+15],10,4264355552),v=u(v,_,h,p,g[a+6],15,2734768916),p=u(p,v,_,h,g[a+13],21,1309151649),h=u(h,p,v,_,g[a+4],6,4149444226),_=u(_,h,p,v,g[a+11],10,3174756917),v=u(v,_,h,p,g[a+2],15,718787259),p=u(p,v,_,h,g[a+9],21,3951481745),h=n(h,s),p=n(p,c),v=n(v,f),_=n(_,d);return(l(h)+l(p)+l(v)+l(_)).toLowerCase()},t.closeMediaStream=e=>{if(e)try{let t;if(e.getTracks){t=e.getTracks();for(const e of t)e.stop()}else{t=e.getAudioTracks();for(const e of t)e.stop();t=e.getVideoTracks();for(const e of t)e.stop()}}catch(t){"function"!=typeof e.stop&&"object"!=typeof e.stop||e.stop()}},t.cloneArray=e=>e&&e.slice()||[],t.cloneObject=(e,t={})=>e&&Object.assign({},e)||t},function(e,t,n){"use strict";const r={generateIdentifier:function(){return Math.random().toString(36).substr(2,10)}};r.localCName=r.generateIdentifier(),r.splitLines=function(e){return e.trim().split("\n").map(e=>e.trim())},r.splitSections=function(e){return e.split("\nm=").map((e,t)=>(0<t?"m="+e:e).trim()+"\r\n")},r.getDescription=function(e){return(e=r.splitSections(e))&&e[0]},r.getMediaSections=function(e){const t=r.splitSections(e);return t.shift(),t},r.matchPrefix=function(e,t){return r.splitLines(e).filter(e=>0===e.indexOf(t))},r.parseCandidate=function(e){let t;t=(0===e.indexOf("a=candidate:")?e.substring(12):e.substring(10)).split(" ");const n={foundation:t[0],component:{1:"rtp",2:"rtcp"}[t[1]]||t[1],protocol:t[2].toLowerCase(),priority:parseInt(t[3],10),ip:t[4],address:t[4],port:parseInt(t[5],10),type:t[7]};for(let e=8;e<t.length;e+=2)switch(t[e]){case"raddr":n.relatedAddress=t[e+1];break;case"rport":n.relatedPort=parseInt(t[e+1],10);break;case"tcptype":n.tcpType=t[e+1];break;case"ufrag":n.ufrag=t[e+1],n.usernameFragment=t[e+1];break;default:void 0===n[t[e]]&&(n[t[e]]=t[e+1])}return n},r.writeCandidate=function(e){const t=[];t.push(e.foundation);var n=e.component;return"rtp"===n?t.push(1):"rtcp"===n?t.push(2):t.push(n),t.push(e.protocol.toUpperCase()),t.push(e.priority),t.push(e.address||e.ip),t.push(e.port),n=e.type,t.push("typ"),t.push(n),"host"!==n&&e.relatedAddress&&e.relatedPort&&(t.push("raddr"),t.push(e.relatedAddress),t.push("rport"),t.push(e.relatedPort)),e.tcpType&&"tcp"===e.protocol.toLowerCase()&&(t.push("tcptype"),t.push(e.tcpType)),(e.usernameFragment||e.ufrag)&&(t.push("ufrag"),t.push(e.usernameFragment||e.ufrag)),"candidate:"+t.join(" ")},r.parseIceOptions=function(e){return e.substr(14).split(" ")},r.parseRtpMap=function(e){let t=e.substr(9).split(" ");const n={payloadType:parseInt(t.shift(),10)};return t=t[0].split("/"),n.name=t[0],n.clockRate=parseInt(t[1],10),n.channels=3===t.length?parseInt(t[2],10):1,n.numChannels=n.channels,n},r.writeRtpMap=function(e){let t=e.payloadType;void 0!==e.preferredPayloadType&&(t=e.preferredPayloadType);var n=e.channels||e.numChannels||1;return"a=rtpmap:"+t+" "+e.name+"/"+e.clockRate+(1!==n?"/"+n:"")+"\r\n"},r.parseExtmap=function(e){const t=e.substr(9).split(" ");return{id:parseInt(t[0],10),direction:0<t[0].indexOf("/")?t[0].split("/")[1]:"sendrecv",uri:t[1]}},r.writeExtmap=function(e){return"a=extmap:"+(e.id||e.preferredId)+(e.direction&&"sendrecv"!==e.direction?"/"+e.direction:"")+" "+e.uri+"\r\n"},r.parseFmtp=function(e){const t={};let n;const r=e.substr(e.indexOf(" ")+1).split(";");for(let e=0;e<r.length;e++)n=r[e].trim().split("="),t[n[0].trim()]=n[1];return t},r.writeFmtp=function(e){let t="",n=e.payloadType;if(void 0!==e.preferredPayloadType&&(n=e.preferredPayloadType),e.parameters&&Object.keys(e.parameters).length){const r=[];Object.keys(e.parameters).forEach(t=>{void 0!==e.parameters[t]?r.push(t+"="+e.parameters[t]):r.push(t)}),t+="a=fmtp:"+n+" "+r.join(";")+"\r\n"}return t},r.parseRtcpFb=function(e){const t=e.substr(e.indexOf(" ")+1).split(" ");return{type:t.shift(),parameter:t.join(" ")}},r.writeRtcpFb=function(e){let t="",n=e.payloadType;return void 0!==e.preferredPayloadType&&(n=e.preferredPayloadType),e.rtcpFeedback&&e.rtcpFeedback.length&&e.rtcpFeedback.forEach(e=>{t+="a=rtcp-fb:"+n+" "+e.type+(e.parameter&&e.parameter.length?" "+e.parameter:"")+"\r\n"}),t},r.parseSsrcMedia=function(e){var t=e.indexOf(" ");const n={ssrc:parseInt(e.substr(7,t-7),10)};var r=e.indexOf(":",t);return-1<r?(n.attribute=e.substr(t+1,r-t-1),n.value=e.substr(r+1)):n.attribute=e.substr(t+1),n},r.parseSsrcGroup=function(e){const t=e.substr(13).split(" ");return{semantics:t.shift(),ssrcs:t.map(e=>parseInt(e,10))}},r.getMid=function(e){const t=r.matchPrefix(e,"a=mid:")[0];if(t)return t.substr(6)},r.parseFingerprint=function(e){const t=e.substr(14).split(" ");return{algorithm:t[0].toLowerCase(),value:t[1].toUpperCase()}},r.getDtlsParameters=function(e,t){return{role:"auto",fingerprints:r.matchPrefix(e+t,"a=fingerprint:").map(r.parseFingerprint)}},r.writeDtlsParameters=function(e,t){let n="a=setup:"+t+"\r\n";return e.fingerprints.forEach(e=>{n+="a=fingerprint:"+e.algorithm+" "+e.value+"\r\n"}),n},r.parseCryptoLine=function(e){const t=e.substr(9).split(" ");return{tag:parseInt(t[0],10),cryptoSuite:t[1],keyParams:t[2],sessionParams:t.slice(3)}},r.writeCryptoLine=function(e){return"a=crypto:"+e.tag+" "+e.cryptoSuite+" "+("object"==typeof e.keyParams?r.writeCryptoKeyParams(e.keyParams):e.keyParams)+(e.sessionParams?" "+e.sessionParams.join(" "):"")+"\r\n"},r.parseCryptoKeyParams=function(e){if(0!==e.indexOf("inline:"))return null;const t=e.substr(7).split("|");return{keyMethod:"inline",keySalt:t[0],lifeTime:t[1],mkiValue:t[2]?t[2].split(":")[0]:void 0,mkiLength:t[2]?t[2].split(":")[1]:void 0}},r.writeCryptoKeyParams=function(e){return e.keyMethod+":"+e.keySalt+(e.lifeTime?"|"+e.lifeTime:"")+(e.mkiValue&&e.mkiLength?"|"+e.mkiValue+":"+e.mkiLength:"")},r.getCryptoParameters=function(e,t){return r.matchPrefix(e+t,"a=crypto:").map(r.parseCryptoLine)},r.getIceParameters=function(e,t){const n=r.matchPrefix(e+t,"a=ice-ufrag:")[0],i=r.matchPrefix(e+t,"a=ice-pwd:")[0];return n&&i?{usernameFragment:n.substr(12),password:i.substr(10)}:null},r.writeIceParameters=function(e){let t="a=ice-ufrag:"+e.usernameFragment+"\r\na=ice-pwd:"+e.password+"\r\n";return e.iceLite&&(t+="a=ice-lite\r\n"),t},r.parseRtpParameters=function(e){const t={codecs:[],headerExtensions:[],fecMechanisms:[],rtcp:[]};var n=r.splitLines(e)[0].split(" ");for(let u=3;u<n.length;u++){var i=n[u],o=r.matchPrefix(e,"a=rtpmap:"+i+" ")[0];if(o){const n=r.parseRtpMap(o);switch(o=r.matchPrefix(e,"a=fmtp:"+i+" "),n.parameters=o.length?r.parseFmtp(o[0]):{},n.rtcpFeedback=r.matchPrefix(e,"a=rtcp-fb:"+i+" ").map(r.parseRtcpFb),t.codecs.push(n),n.name.toUpperCase()){case"RED":case"ULPFEC":t.fecMechanisms.push(n.name.toUpperCase())}}}return r.matchPrefix(e,"a=extmap:").forEach(e=>{t.headerExtensions.push(r.parseExtmap(e))}),t},r.writeRtpDescription=function(e,t){let n="";n+="m="+e+" ",n+=0<t.codecs.length?"9":"0",n+=" UDP/TLS/RTP/SAVPF ",n+=t.codecs.map(e=>void 0!==e.preferredPayloadType?e.preferredPayloadType:e.payloadType).join(" ")+"\r\n",n+="c=IN IP4 0.0.0.0\r\n",n+="a=rtcp:9 IN IP4 0.0.0.0\r\n",t.codecs.forEach(e=>{n+=r.writeRtpMap(e),n+=r.writeFmtp(e),n+=r.writeRtcpFb(e)});let i=0;return t.codecs.forEach(e=>{e.maxptime>i&&(i=e.maxptime)}),0<i&&(n+="a=maxptime:"+i+"\r\n"),t.headerExtensions&&t.headerExtensions.forEach(e=>{n+=r.writeExtmap(e)}),n},r.parseRtpEncodingParameters=function(e){const t=[],n=r.parseRtpParameters(e),i=-1!==n.fecMechanisms.indexOf("RED"),o=-1!==n.fecMechanisms.indexOf("ULPFEC");var u=r.matchPrefix(e,"a=ssrc:").map(e=>r.parseSsrcMedia(e)).filter(e=>"cname"===e.attribute);const l=0<u.length&&u[0].ssrc;let a;0<(u=r.matchPrefix(e,"a=ssrc-group:FID").map(e=>e.substr(17).split(" ").map(e=>parseInt(e,10)))).length&&1<u[0].length&&u[0][0]===l&&(a=u[0][1]),n.codecs.forEach(e=>{if("RTX"===e.name.toUpperCase()&&e.parameters.apt){let n={ssrc:l,codecPayloadType:parseInt(e.parameters.apt,10)};l&&a&&(n.rtx={ssrc:a}),t.push(n),i&&(n=JSON.parse(JSON.stringify(n)),n.fec={ssrc:l,mechanism:o?"red+ulpfec":"red"},t.push(n))}}),0===t.length&&l&&t.push({ssrc:l});let s=r.matchPrefix(e,"b=");return s.length&&(s=0===s[0].indexOf("b=TIAS:")?parseInt(s[0].substr(7),10):0===s[0].indexOf("b=AS:")?1e3*parseInt(s[0].substr(5),10)*.95-16e3:void 0,t.forEach(e=>{e.maxBitrate=s})),t},r.parseRtcpParameters=function(e){const t={};var n=r.matchPrefix(e,"a=ssrc:").map(e=>r.parseSsrcMedia(e)).filter(e=>"cname"===e.attribute)[0];return n&&(t.cname=n.value,t.ssrc=n.ssrc),n=r.matchPrefix(e,"a=rtcp-rsize"),t.reducedSize=0<n.length,t.compound=0===n.length,e=r.matchPrefix(e,"a=rtcp-mux"),t.mux=0<e.length,t},r.writeRtcpParameters=function(e){let t="";return e.reducedSize&&(t+="a=rtcp-rsize\r\n"),e.mux&&(t+="a=rtcp-mux\r\n"),void 0!==e.ssrc&&e.cname&&(t+="a=ssrc:"+e.ssrc+" cname:"+e.cname+"\r\n"),t},r.parseMsid=function(e){let t;const n=r.matchPrefix(e,"a=msid:");if(1===n.length)return t=n[0].substr(7).split(" "),{stream:t[0],track:t[1]};const i=r.matchPrefix(e,"a=ssrc:").map(e=>r.parseSsrcMedia(e)).filter(e=>"msid"===e.attribute);return 0<i.length?(t=i[0].value.split(" "),{stream:t[0],track:t[1]}):void 0},r.parseSctpDescription=function(e){var t=r.parseMLine(e);const n=r.matchPrefix(e,"a=max-message-size:");let i;0<n.length&&(i=parseInt(n[0].substr(19),10)),isNaN(i)&&(i=65536);const o=r.matchPrefix(e,"a=sctp-port:");if(0<o.length)return{port:parseInt(o[0].substr(12),10),protocol:t.fmt,maxMessageSize:i};const u=r.matchPrefix(e,"a=sctpmap:");return 0<u.length?(e=u[0].substr(10).split(" "),{port:parseInt(e[0],10),protocol:e[1],maxMessageSize:i}):void 0},r.writeSctpDescription=function(e,t){let n=[];return n="DTLS/SCTP"!==e.protocol?["m="+e.kind+" 9 "+e.protocol+" "+t.protocol+"\r\n","c=IN IP4 0.0.0.0\r\n","a=sctp-port:"+t.port+"\r\n"]:["m="+e.kind+" 9 "+e.protocol+" "+t.port+"\r\n","c=IN IP4 0.0.0.0\r\n","a=sctpmap:"+t.port+" "+t.protocol+" 65535\r\n"],void 0!==t.maxMessageSize&&n.push("a=max-message-size:"+t.maxMessageSize+"\r\n"),n.join("")},r.generateSessionId=function(){return Math.random().toString().substr(2,21)},r.writeSessionBoilerplate=function(e,t,n){let i;return t=void 0!==t?t:2,i=e||r.generateSessionId(),"v=0\r\no="+(n||"thisisadapterortc")+" "+i+" "+t+" IN IP4 127.0.0.1\r\ns=-\r\nt=0 0\r\n"},r.getDirection=function(e,t){const n=r.splitLines(e);for(let e=0;e<n.length;e++)switch(n[e]){case"a=sendrecv":case"a=sendonly":case"a=recvonly":case"a=inactive":return n[e].substr(2)}return t?r.getDirection(t):"sendrecv"},r.getKind=function(e){return r.splitLines(e)[0].split(" ")[0].substr(2)},r.isRejected=function(e){return"0"===e.split(" ",2)[1]},r.parseMLine=function(e){const t=r.splitLines(e)[0].substr(2).split(" ");return{kind:t[0],port:parseInt(t[1],10),protocol:t[2],fmt:t.slice(3).join(" ")}},r.parseOLine=function(e){return{username:(e=r.matchPrefix(e,"o=")[0].substr(2).split(" "))[0],sessionId:e[1],sessionVersion:parseInt(e[2],10),netType:e[3],addressType:e[4],address:e[5]}},r.isValidSDP=function(e){if("string"!=typeof e||0===e.length)return!1;const t=r.splitLines(e);for(let e=0;e<t.length;e++)if(t[e].length<2||"="!==t[e].charAt(1))return!1;return!0},e.exports=r},function(e,t,n){var r=n(11).f,i=n(20),o=n(6)("toStringTag");e.exports=function(e,t,n){e&&!i(e=n?e:e.prototype,o)&&r(e,o,{configurable:!0,value:t})}},function(e,t,n){var r=n(26),i=n(6)("toStringTag"),o="Arguments"==r(function(){return arguments}());e.exports=function(e){var t;return void 0===e?"Undefined":null===e?"Null":"string"==typeof(e=function(e,t){try{return e[t]}catch(e){}}(t=Object(e),i))?e:o?r(t):"Object"==(e=r(t))&&"function"==typeof t.callee?"Arguments":e}},function(e,t,n){function r(e,t,n){var r={},o=u((function(){return!!l[e]()||"​"!="​"[e]()}));t=r[e]=o?t(c):l[e];n&&(r[n]=t),i(i.P+i.F*o,"String",r)}var i=n(0),o=n(30),u=n(3),l=n(88),a=(n="["+l+"]",RegExp("^"+n+n+"*")),s=RegExp(n+n+"*$"),c=r.trim=function(e,t){return e=String(o(e)),1&t&&(e=e.replace(a,"")),2&t?e.replace(s,""):e};e.exports=r},function(e,t){e.exports={}},function(e,t,n){var r=n(24),i=n(2),o="__core-js_shared__",u=i[o]||(i[o]={});(e.exports=function(e,t){return u[e]||(u[e]=void 0!==t?t:{})})("versions",[]).push({version:r.version,mode:n(37)?"pure":"global",copyright:"© 2020 Denis Pushkarev (zloirock.ru)"})},function(e,t,n){var r=n(26);e.exports=Object("z").propertyIsEnumerable(0)?Object:function(e){return"String"==r(e)?e.split(""):Object(e)}},function(e,t){t.f={}.propertyIsEnumerable},function(e,t,n){"use strict";var r=n(1);e.exports=function(){var e=r(this),t="";return e.global&&(t+="g"),e.ignoreCase&&(t+="i"),e.multiline&&(t+="m"),e.unicode&&(t+="u"),e.sticky&&(t+="y"),t}},function(e,t,n){var r=n(1),i=n(15),o=n(6)("species");e.exports=function(e,t){var n;return void 0===(e=r(e).constructor)||null==(n=r(e)[o])?t:i(n)}},function(e,t,n){"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function u(e,t,n){return t&&o(e.prototype,t),n&&o(e,n),e}function l(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&function(e,t){(Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}(e,t)}function a(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=c(e);return function(e,t){if(t&&("object"===r(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return s(e)}(this,t?(n=c(this).constructor,Reflect.construct(i,arguments,n)):i.apply(this,arguments))}}function s(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function c(e){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var f=n(34).EventEmitter,d=n(13),h=n(40),p=n(154),v=new(E=n(14))("JsSIP:NonInviteClientTransaction").debug,_=new E("JsSIP:InviteClientTransaction").debug,g=new E("JsSIP:AckClientTransaction").debug,m=new E("JsSIP:NonInviteServerTransaction").debug,y=new E("JsSIP:InviteServerTransaction").debug,b={STATUS_TRYING:1,STATUS_PROCEEDING:2,STATUS_CALLING:3,STATUS_ACCEPTED:4,STATUS_COMPLETED:5,STATUS_TERMINATED:6,STATUS_CONFIRMED:7,NON_INVITE_CLIENT:"nict",NON_INVITE_SERVER:"nist",INVITE_CLIENT:"ict",INVITE_SERVER:"ist"},C=function(){l(t,f);var e=a(t);function t(n,r,o,u){var l;return i(this,t),(l=e.call(this)).type=b.NON_INVITE_CLIENT,l.id="z9hG4bK".concat(Math.floor(1e7*Math.random())),l.ua=n,l.transport=r,l.request=o,l.eventHandlers=u,r="SIP/2.0/".concat(r.via_transport),r+=" ".concat(n.configuration.via_host,";branch=").concat(l.id),l.request.setHeader("via",r),l.ua.newTransaction(s(l)),l}return u(t,[{key:"C",get:function(){return b}},{key:"stateChanged",value:function(e){this.state=e,this.emit("stateChanged")}},{key:"send",value:function(){var e=this;this.stateChanged(b.STATUS_TRYING),this.F=setTimeout((function(){e.timer_F()}),p.TIMER_F),this.transport.send(this.request)||this.onTransportError()}},{key:"onTransportError",value:function(){v("transport error occurred, deleting transaction ".concat(this.id)),clearTimeout(this.F),clearTimeout(this.K),this.stateChanged(b.STATUS_TERMINATED),this.ua.destroyTransaction(this),this.eventHandlers.onTransportError()}},{key:"timer_F",value:function(){v("Timer F expired for transaction ".concat(this.id)),this.stateChanged(b.STATUS_TERMINATED),this.ua.destroyTransaction(this),this.eventHandlers.onRequestTimeout()}},{key:"timer_K",value:function(){this.stateChanged(b.STATUS_TERMINATED),this.ua.destroyTransaction(this)}},{key:"receiveResponse",value:function(e){var t=this,n=e.status_code;if(n<200)switch(this.state){case b.STATUS_TRYING:case b.STATUS_PROCEEDING:this.stateChanged(b.STATUS_PROCEEDING),this.eventHandlers.onReceiveResponse(e)}else switch(this.state){case b.STATUS_TRYING:case b.STATUS_PROCEEDING:this.stateChanged(b.STATUS_COMPLETED),clearTimeout(this.F),408===n?this.eventHandlers.onRequestTimeout():this.eventHandlers.onReceiveResponse(e),this.K=setTimeout((function(){t.timer_K()}),p.TIMER_K)}}}]),t}(),S=function(){l(t,f);var e=a(t);function t(n,r,o,u){var l;return i(this,t),(l=e.call(this)).type=b.INVITE_CLIENT,l.id="z9hG4bK".concat(Math.floor(1e7*Math.random())),l.ua=n,l.transport=r,l.request=o,l.eventHandlers=u,o.transaction=s(l),r="SIP/2.0/".concat(r.via_transport),r+=" ".concat(n.configuration.via_host,";branch=").concat(l.id),l.request.setHeader("via",r),l.ua.newTransaction(s(l)),l}return u(t,[{key:"C",get:function(){return b}},{key:"stateChanged",value:function(e){this.state=e,this.emit("stateChanged")}},{key:"send",value:function(){var e=this;this.stateChanged(b.STATUS_CALLING),this.B=setTimeout((function(){e.timer_B()}),p.TIMER_B),this.transport.send(this.request)||this.onTransportError()}},{key:"onTransportError",value:function(){clearTimeout(this.B),clearTimeout(this.D),clearTimeout(this.M),this.state!==b.STATUS_ACCEPTED&&(_("transport error occurred, deleting transaction ".concat(this.id)),this.eventHandlers.onTransportError()),this.stateChanged(b.STATUS_TERMINATED),this.ua.destroyTransaction(this)}},{key:"timer_M",value:function(){_("Timer M expired for transaction ".concat(this.id)),this.state===b.STATUS_ACCEPTED&&(clearTimeout(this.B),this.stateChanged(b.STATUS_TERMINATED),this.ua.destroyTransaction(this))}},{key:"timer_B",value:function(){_("Timer B expired for transaction ".concat(this.id)),this.state===b.STATUS_CALLING&&(this.stateChanged(b.STATUS_TERMINATED),this.ua.destroyTransaction(this),this.eventHandlers.onRequestTimeout())}},{key:"timer_D",value:function(){_("Timer D expired for transaction ".concat(this.id)),clearTimeout(this.B),this.stateChanged(b.STATUS_TERMINATED),this.ua.destroyTransaction(this)}},{key:"sendACK",value:function(e){var t=this,n=new h.OutgoingRequest(d.ACK,this.request.ruri,this.ua,{route_set:this.request.getHeaders("route"),call_id:this.request.getHeader("call-id"),cseq:this.request.cseq});n.setHeader("from",this.request.getHeader("from")),n.setHeader("via",this.request.getHeader("via")),n.setHeader("to",e.getHeader("to")),this.D=setTimeout((function(){t.timer_D()}),p.TIMER_D),this.transport.send(n)}},{key:"cancel",value:function(e){var t;this.state===b.STATUS_PROCEEDING&&((t=new h.OutgoingRequest(d.CANCEL,this.request.ruri,this.ua,{route_set:this.request.getHeaders("route"),call_id:this.request.getHeader("call-id"),cseq:this.request.cseq})).setHeader("from",this.request.getHeader("from")),t.setHeader("via",this.request.getHeader("via")),t.setHeader("to",this.request.getHeader("to")),e&&t.setHeader("reason",e),this.transport.send(t))}},{key:"receiveResponse",value:function(e){var t=this,n=e.status_code;if(100<=n&&n<=199)switch(this.state){case b.STATUS_CALLING:this.stateChanged(b.STATUS_PROCEEDING),this.eventHandlers.onReceiveResponse(e);break;case b.STATUS_PROCEEDING:this.eventHandlers.onReceiveResponse(e)}else if(200<=n&&n<=299)switch(this.state){case b.STATUS_CALLING:case b.STATUS_PROCEEDING:this.stateChanged(b.STATUS_ACCEPTED),this.M=setTimeout((function(){t.timer_M()}),p.TIMER_M),this.eventHandlers.onReceiveResponse(e);break;case b.STATUS_ACCEPTED:this.eventHandlers.onReceiveResponse(e)}else if(300<=n&&n<=699)switch(this.state){case b.STATUS_CALLING:case b.STATUS_PROCEEDING:this.stateChanged(b.STATUS_COMPLETED),this.sendACK(e),this.eventHandlers.onReceiveResponse(e);break;case b.STATUS_COMPLETED:this.sendACK(e)}}}]),t}(),T=function(){l(t,f);var e=a(t);function t(n,r,o,u){var l;return i(this,t),(l=e.call(this)).id="z9hG4bK".concat(Math.floor(1e7*Math.random())),l.transport=r,l.request=o,l.eventHandlers=u,r="SIP/2.0/".concat(r.via_transport),r+=" ".concat(n.configuration.via_host,";branch=").concat(l.id),l.request.setHeader("via",r),l}return u(t,[{key:"C",get:function(){return b}},{key:"send",value:function(){this.transport.send(this.request)||this.onTransportError()}},{key:"onTransportError",value:function(){g("transport error occurred for transaction ".concat(this.id)),this.eventHandlers.onTransportError()}}]),t}(),E=(n=function(){l(t,f);var e=a(t);function t(n,r,o){var u;return i(this,t),(u=e.call(this)).type=b.NON_INVITE_SERVER,u.id=o.via_branch,u.ua=n,u.transport=r,u.request=o,u.last_response="",o.server_transaction=s(u),u.state=b.STATUS_TRYING,n.newTransaction(s(u)),u}return u(t,[{key:"C",get:function(){return b}},{key:"stateChanged",value:function(e){this.state=e,this.emit("stateChanged")}},{key:"timer_J",value:function(){m("Timer J expired for transaction ".concat(this.id)),this.stateChanged(b.STATUS_TERMINATED),this.ua.destroyTransaction(this)}},{key:"onTransportError",value:function(){this.transportError||(this.transportError=!0,m("transport error occurred, deleting transaction ".concat(this.id)),clearTimeout(this.J),this.stateChanged(b.STATUS_TERMINATED),this.ua.destroyTransaction(this))}},{key:"receiveResponse",value:function(e,t,n,r){var i=this;if(100===e)switch(this.state){case b.STATUS_TRYING:this.stateChanged(b.STATUS_PROCEEDING),this.transport.send(t)||this.onTransportError();break;case b.STATUS_PROCEEDING:this.last_response=t,this.transport.send(t)?n&&n():(this.onTransportError(),r&&r())}else if(200<=e&&e<=699)switch(this.state){case b.STATUS_TRYING:case b.STATUS_PROCEEDING:this.stateChanged(b.STATUS_COMPLETED),this.last_response=t,this.J=setTimeout((function(){i.timer_J()}),p.TIMER_J),this.transport.send(t)?n&&n():(this.onTransportError(),r&&r())}}}]),t}(),function(){l(t,f);var e=a(t);function t(n,r,o){var u;return i(this,t),(u=e.call(this)).type=b.INVITE_SERVER,u.id=o.via_branch,u.ua=n,u.transport=r,u.request=o,u.last_response="",o.server_transaction=s(u),u.state=b.STATUS_PROCEEDING,n.newTransaction(s(u)),u.resendProvisionalTimer=null,o.reply(100),u}return u(t,[{key:"C",get:function(){return b}},{key:"stateChanged",value:function(e){this.state=e,this.emit("stateChanged")}},{key:"timer_H",value:function(){y("Timer H expired for transaction ".concat(this.id)),this.state===b.STATUS_COMPLETED&&y("ACK not received, dialog will be terminated"),this.stateChanged(b.STATUS_TERMINATED),this.ua.destroyTransaction(this)}},{key:"timer_I",value:function(){this.stateChanged(b.STATUS_TERMINATED),this.ua.destroyTransaction(this)}},{key:"timer_L",value:function(){y("Timer L expired for transaction ".concat(this.id)),this.state===b.STATUS_ACCEPTED&&(this.stateChanged(b.STATUS_TERMINATED),this.ua.destroyTransaction(this))}},{key:"onTransportError",value:function(){this.transportError||(this.transportError=!0,y("transport error occurred, deleting transaction ".concat(this.id)),null!==this.resendProvisionalTimer&&(clearInterval(this.resendProvisionalTimer),this.resendProvisionalTimer=null),clearTimeout(this.L),clearTimeout(this.H),clearTimeout(this.I),this.stateChanged(b.STATUS_TERMINATED),this.ua.destroyTransaction(this))}},{key:"resend_provisional",value:function(){this.transport.send(this.last_response)||this.onTransportError()}},{key:"receiveResponse",value:function(e,t,n,r){var i=this;if(100<=e&&e<=199&&this.state===b.STATUS_PROCEEDING&&(this.transport.send(t)||this.onTransportError(),this.last_response=t),100<e&&e<=199&&this.state===b.STATUS_PROCEEDING)null===this.resendProvisionalTimer&&(this.resendProvisionalTimer=setInterval((function(){i.resend_provisional()}),p.PROVISIONAL_RESPONSE_INTERVAL));else if(200<=e&&e<=299)switch(this.state){case b.STATUS_PROCEEDING:this.stateChanged(b.STATUS_ACCEPTED),this.last_response=t,this.L=setTimeout((function(){i.timer_L()}),p.TIMER_L),null!==this.resendProvisionalTimer&&(clearInterval(this.resendProvisionalTimer),this.resendProvisionalTimer=null);case b.STATUS_ACCEPTED:this.transport.send(t)?n&&n():(this.onTransportError(),r&&r())}else 300<=e&&e<=699&&this.state===b.STATUS_PROCEEDING&&(null!==this.resendProvisionalTimer&&(clearInterval(this.resendProvisionalTimer),this.resendProvisionalTimer=null),this.transport.send(t)?(this.stateChanged(b.STATUS_COMPLETED),this.H=setTimeout((function(){i.timer_H()}),p.TIMER_H),n&&n()):(this.onTransportError(),r&&r()))}}]),t}());e.exports={C:b,NonInviteClientTransaction:C,InviteClientTransaction:S,AckClientTransaction:T,NonInviteServerTransaction:n,InviteServerTransaction:E,checkTransaction:function(e,t){var n,r=e._transactions;switch(t.method){case d.INVITE:if(n=r.ist[t.via_branch])return n.state===b.STATUS_PROCEEDING&&n.transport.send(n.last_response),!0;break;case d.ACK:if(!(n=r.ist[t.via_branch]))return!1;if(n.state===b.STATUS_ACCEPTED)return!1;if(n.state===b.STATUS_COMPLETED)return n.state=b.STATUS_CONFIRMED,n.I=setTimeout((function(){n.timer_I()}),p.TIMER_I),!0;break;case d.CANCEL:return(n=r.ist[t.via_branch])?(t.reply_sl(200),n.state!==b.STATUS_PROCEEDING):(t.reply_sl(481),!0);default:if(n=r.nist[t.via_branch]){switch(n.state){case b.STATUS_TRYING:break;case b.STATUS_PROCEEDING:case b.STATUS_COMPLETED:n.transport.send(n.last_response)}return!0}}}}},function(e,t,n){var r=n(21),i=n(7),o=n(44);e.exports=function(e){return function(t,n,u){var l,a=r(t),s=i(a.length),c=o(u,s);if(e&&n!=n){for(;c<s;)if((l=a[c++])!=l)return!0}else for(;c<s;c++)if((e||c in a)&&a[c]===n)return e||c||0;return!e&&-1}}},function(e,t){t.f=Object.getOwnPropertySymbols},function(e,t,n){var r=n(26);e.exports=Array.isArray||function(e){return"Array"==r(e)}},function(e,t,n){var r=n(27),i=n(30);e.exports=function(e){return function(t,n){var o,u=String(i(t)),l=r(n);t=u.length;return l<0||t<=l?e?"":void 0:(n=u.charCodeAt(l))<55296||56319<n||l+1===t||(o=u.charCodeAt(l+1))<56320||57343<o?e?u.charAt(l):n:e?u.slice(l,l+2):o-56320+(n-55296<<10)+65536}}},function(e,t,n){var r=n(4),i=n(26),o=n(6)("match");e.exports=function(e){var t;return r(e)&&(void 0!==(t=e[o])?!!t:"RegExp"==i(e))}},function(e,t,n){var r=n(6)("iterator"),i=!1;try{var o=[7][r]();o.return=function(){i=!0},Array.from(o,(function(){throw 2}))}catch(e){}e.exports=function(e,t){if(!t&&!i)return!1;var n=!1;try{var o=[7],u=o[r]();u.next=function(){return{done:n=!0}},o[r]=function(){return u},e(o)}catch(e){}return n}},function(e,t,n){"use strict";var r=n(57),i=RegExp.prototype.exec;e.exports=function(e,t){var n=e.exec;if("function"==typeof n){if("object"!=typeof(n=n.call(e,t)))throw new TypeError("RegExp exec method returned something other than an Object or null");return n}if("RegExp"!==r(e))throw new TypeError("RegExp#exec called on incompatible receiver");return i.call(e,t)}},function(e,t,n){"use strict";n(134);var r=n(18),i=n(17),o=n(3),u=n(30),l=n(6),a=n(103),s=l("species"),c=!o((function(){var e=/./;return e.exec=function(){var e=[];return e.groups={a:"7"},e},"7"!=="".replace(e,"$<a>")})),f=function(){var e=/(?:)/,t=e.exec;return e.exec=function(){return t.apply(this,arguments)},2===(e="ab".split(e)).length&&"a"===e[0]&&"b"===e[1]}();e.exports=function(e,t,n){var d,h,p=l(e),v=!o((function(){var t={};return t[p]=function(){return 7},7!=""[e](t)})),_=v?!o((function(){var t=!1,n=/a/;return n.exec=function(){return t=!0,null},"split"===e&&(n.constructor={},n.constructor[s]=function(){return n}),n[p](""),!t})):void 0;v&&_&&("replace"!==e||c)&&("split"!==e||f)||(d=/./[p],n=(_=n(u,p,""[e],(function(e,t,n,r,i){return t.exec===a?v&&!i?{done:!0,value:d.call(t,n,r)}:{done:!0,value:e.call(n,t,r)}:{done:!1}})))[0],h=_[1],r(String.prototype,e,n),i(RegExp.prototype,p,2==t?function(e,t){return h.call(e,this,t)}:function(e){return h.call(e,this)}))}},function(e,t,n){n=n(2).navigator,e.exports=n&&n.userAgent||""},function(e,t,n){"use strict";var r=n(2),i=n(0),o=n(18),u=n(50),l=n(38),a=n(49),s=n(48),c=n(4),f=n(3),d=n(71),h=n(56),p=n(89);e.exports=function(e,t,n,v,_,g){function m(e){var t=R[e];o(R,e,"delete"==e||"has"==e?function(e){return!(g&&!c(e))&&t.call(this,0===e?0:e)}:"get"==e?function(e){return g&&!c(e)?void 0:t.call(this,0===e?0:e)}:"add"==e?function(e){return t.call(this,0===e?0:e),this}:function(e,n){return t.call(this,0===e?0:e,n),this})}var y,b,C,S,T,E=r[e],A=E,w=_?"set":"add",R=A&&A.prototype,I={};return"function"==typeof A&&(g||R.forEach&&!f((function(){(new A).entries().next()})))?(b=(y=new A)[w](g?{}:-0,1)!=y,C=f((function(){y.has(1)})),S=d((function(e){new A(e)})),T=!g&&f((function(){for(var e=new A,t=5;t--;)e[w](t,t);return!e.has(-0)})),S||(((A=t((function(t,n){return s(t,A,e),t=p(new E,t,A),null!=n&&a(n,_,t[w],t),t}))).prototype=R).constructor=A),(C||T)&&(m("delete"),m("has"),_&&m("get")),(T||b)&&m(w),g&&R.clear&&delete R.clear):(A=v.getConstructor(t,e,_,w),u(A.prototype,n),l.NEED=!0),h(A,e),I[e]=A,i(i.G+i.W+i.F*(A!=E),I),g||v.setStrong(A,e,_),A}},function(e,t,n){for(var r,i=n(2),o=n(17),u=(n=n(42))("typed_array"),l=n("view"),a=n=!(!i.ArrayBuffer||!i.DataView),s=0,c="Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array".split(",");s<9;)(r=i[c[s++]])?(o(r.prototype,u,!0),o(r.prototype,l,!0)):a=!1;e.exports={ABV:n,CONSTR:a,TYPED:u,VIEW:l}},function(e,t,n){"use strict";e.exports=n(37)||!n(3)((function(){var e=Math.random();__defineSetter__.call(null,e,(function(){})),delete n(2)[e]}))},function(e,t,n){"use strict";var r=n(0);e.exports=function(e){r(r.S,e,{of:function(){for(var e=arguments.length,t=new Array(e);e--;)t[e]=arguments[e];return new this(t)}})}},function(e,t,n){"use strict";var r=n(0),i=n(15),o=n(25),u=n(49);e.exports=function(e){r(r.S,e,{from:function(e){var t,n,r,l,a=arguments[1];return i(this),(t=void 0!==a)&&i(a),null==e?new this:(n=[],t?(r=0,l=o(a,arguments[2],2),u(e,!1,(function(e){n.push(l(e,r++))}))):u(e,!1,n.push,n),new this(n))}})}},function(e,t,n){"use strict";function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var i=n(13),o=n(371),u=n(65),l=new(n(14))("JsSIP:RequestSender").debug,a={onRequestTimeout:function(){},onTransportError:function(){},onReceiveResponse:function(){},onAuthenticated:function(){}};e.exports=function(){function e(t,n,r){for(var o in function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._ua=t,this._eventHandlers=r,this._method=n.method,this._request=n,this._auth=null,this._challenged=!1,this._staled=!1,a)Object.prototype.hasOwnProperty.call(a,o)&&(this._eventHandlers[o]||(this._eventHandlers[o]=a[o]));t.status!==t.C.STATUS_USER_CLOSED||this._method===i.BYE&&this._method===i.ACK||this._eventHandlers.onTransportError()}var t,n;return t=e,(n=[{key:"send",value:function(){var e=this,t={onRequestTimeout:function(){e._eventHandlers.onRequestTimeout()},onTransportError:function(){e._eventHandlers.onTransportError()},onReceiveResponse:function(t){e._receiveResponse(t)}};switch(this._method){case"INVITE":this.clientTransaction=new u.InviteClientTransaction(this._ua,this._ua.transport,this._request,t);break;case"ACK":this.clientTransaction=new u.AckClientTransaction(this._ua,this._ua.transport,this._request,t);break;default:this.clientTransaction=new u.NonInviteClientTransaction(this._ua,this._ua.transport,this._request,t)}this._ua._configuration.authorization_jwt&&this._request.setHeader("Authorization",this._ua._configuration.authorization_jwt),this.clientTransaction.send()}},{key:"_receiveResponse",value:function(e){var t,n=e.status_code;if(401!==n&&407!==n||null===this._ua.configuration.password&&null===this._ua.configuration.ha1)this._eventHandlers.onReceiveResponse(e);else{if(n=401===e.status_code?(t=e.parseHeader("www-authenticate"),"authorization"):(t=e.parseHeader("proxy-authenticate"),"proxy-authorization"),!t)return l("".concat(e.status_code," with wrong or missing challenge, cannot authenticate")),void this._eventHandlers.onReceiveResponse(e);!this._challenged||!this._staled&&!0===t.stale?(this._auth||(this._auth=new o({username:this._ua.configuration.authorization_user,password:this._ua.configuration.password,realm:this._ua.configuration.realm,ha1:this._ua.configuration.ha1})),this._auth.authenticate(this._request,t)?(this._challenged=!0,this._ua.set("realm",this._auth.get("realm")),this._ua.set("ha1",this._auth.get("ha1")),t.stale&&(this._staled=!0),this._request=this._request.clone(),this._request.cseq+=1,this._request.setHeader("cseq","".concat(this._request.cseq," ").concat(this._method)),this._request.setHeader(n,this._auth.toString()),this._eventHandlers.onAuthenticated(this._request),this.send()):this._eventHandlers.onReceiveResponse(e)):this._eventHandlers.onReceiveResponse(e)}}}])&&r(t.prototype,n),e}()},function(e,t){var n=function(){return this}();try{n=n||new Function("return this")()}catch(e){"object"==typeof window&&(n=window)}e.exports=n},function(e,t,n){var r=n(4),i=n(2).document,o=r(i)&&r(i.createElement);e.exports=function(e){return o?i.createElement(e):{}}},function(e,t,n){var r=n(2),i=n(24),o=n(37),u=n(116),l=n(11).f;e.exports=function(e){var t=i.Symbol||(i.Symbol=!o&&r.Symbol||{});"_"==e.charAt(0)||e in t||l(t,e,{value:u.f(e)})}},function(e,t,n){var r=n(60)("keys"),i=n(42);e.exports=function(e){return r[e]||(r[e]=i(e))}},function(e,t){e.exports="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(",")},function(e,t,n){n=n(2).document,e.exports=n&&n.documentElement},function(e,t,n){function r(e,t){if(o(e),!i(t)&&null!==t)throw TypeError(t+": can't set as prototype!")}var i=n(4),o=n(1);e.exports={set:Object.setPrototypeOf||("__proto__"in{}?function(e,t,i){try{(i=n(25)(Function.call,n(22).f(Object.prototype,"__proto__").set,2))(e,[]),t=!(e instanceof Array)}catch(e){t=!0}return function(e,n){return r(e,n),t?e.__proto__=n:i(e,n),e}}({},!1):void 0),check:r}},function(e,t){e.exports="\t\n\v\f\r   ᠎             　\u2028\u2029\ufeff"},function(e,t,n){var r=n(4),i=n(87).set;e.exports=function(e,t,n){var o;return(t=t.constructor)!==n&&"function"==typeof t&&(o=t.prototype)!==n.prototype&&r(o)&&i&&i(e,o),e}},function(e,t,n){"use strict";var r=n(27),i=n(30);e.exports=function(e){var t=String(i(this)),n="",o=r(e);if(o<0||o==1/0)throw RangeError("Count can't be negative");for(;0<o;(o>>>=1)&&(t+=t))1&o&&(n+=t);return n}},function(e,t){e.exports=Math.sign||function(e){return 0==(e=+e)||e!=e?e:e<0?-1:1}},function(e,t){var n=Math.expm1;e.exports=!n||22025.465794806718<n(10)||n(10)<22025.465794806718||-2e-17!=n(-2e-17)?function(e){return 0==(e=+e)?e:-1e-6<e&&e<1e-6?e+e*e/2:Math.exp(e)-1}:n},function(e,t,n){"use strict";function r(){return this}var i=n(37),o=n(0),u=n(18),l=n(17),a=n(59),s=n(94),c=n(56),f=n(23),d=n(6)("iterator"),h=!([].keys&&"next"in[].keys()),p="values";e.exports=function(e,t,n,v,_,g,m){function y(e){if(!h&&e in w)return w[e];switch(e){case"keys":case p:return function(){return new n(this,e)}}return function(){return new n(this,e)}}s(n,t,v);var b,C,S,T=t+" Iterator",E=_==p,A=!1,w=e.prototype,R=w[d]||w["@@iterator"]||_&&w[_],I=R||y(_),O=_?E?y("entries"):I:void 0;if((v="Array"==t&&w.entries||R)&&(S=f(v.call(new e)))!==Object.prototype&&S.next&&(c(S,T,!0),i||"function"==typeof S[d]||l(S,d,r)),E&&R&&R.name!==p&&(A=!0,I=function(){return R.call(this)}),i&&!m||!h&&!A&&w[d]||l(w,d,I),a[t]=I,a[T]=r,_)if(b={values:E?I:y(p),keys:g?I:y("keys"),entries:O},m)for(C in b)C in w||u(w,C,b[C]);else o(o.P+o.F*(h||A),t,b);return b}},function(e,t,n){"use strict";var r=n(45),i=n(41),o=n(56),u={};n(17)(u,n(6)("iterator"),(function(){return this})),e.exports=function(e,t,n){e.prototype=r(u,{next:i(1,n)}),o(e,t+" Iterator")}},function(e,t,n){var r=n(70),i=n(30);e.exports=function(e,t,n){if(r(t))throw TypeError("String#"+n+" doesn't accept regex!");return String(i(e))}},function(e,t,n){var r=n(6)("match");e.exports=function(e){var t=/./;try{"/./"[e](t)}catch(n){try{return t[r]=!1,!"/./"[e](t)}catch(e){}}return!0}},function(e,t,n){var r=n(59),i=n(6)("iterator"),o=Array.prototype;e.exports=function(e){return void 0!==e&&(r.Array===e||o[i]===e)}},function(e,t,n){"use strict";var r=n(11),i=n(41);e.exports=function(e,t,n){t in e?r.f(e,t,i(0,n)):e[t]=n}},function(e,t,n){var r=n(57),i=n(6)("iterator"),o=n(59);e.exports=n(24).getIteratorMethod=function(e){if(null!=e)return e[i]||e["@@iterator"]||o[r(e)]}},function(e,t,n){var r=n(251);e.exports=function(e,t){return new(r(e))(t)}},function(e,t,n){"use strict";var r=n(12),i=n(44),o=n(7);e.exports=function(e){for(var t,n=r(this),u=o(n.length),l=i(1<(t=arguments.length)?arguments[1]:void 0,u),a=void 0===(t=2<t?arguments[2]:void 0)?u:i(t,u);l<a;)n[l++]=e;return n}},function(e,t,n){"use strict";var r=n(39),i=n(133),o=n(59),u=n(21);e.exports=n(93)(Array,"Array",(function(e,t){this._t=u(e),this._i=0,this._k=t}),(function(){var e=this._t,t=this._k,n=this._i++;return!e||n>=e.length?(this._t=void 0,i(1)):i(0,"keys"==t?n:"values"==t?e[n]:[n,e[n]])}),"values"),o.Arguments=o.Array,r("keys"),r("values"),r("entries")},function(e,t,n){"use strict";var r,i=n(63),o=RegExp.prototype.exec,u=String.prototype.replace,l=o,a="lastIndex",s=(r=/a/,n=/b*/g,o.call(r,"a"),o.call(n,"a"),0!==r[a]||0!==n[a]),c=void 0!==/()??/.exec("")[1];e.exports=l=s||c?function(e){var t,n,r,l;return c&&(n=new RegExp("^"+this.source+"$(?!\\s)",i.call(this))),s&&(t=this[a]),r=o.call(this,e),s&&r&&(this[a]=this.global?r.index+r[0].length:t),c&&r&&1<r.length&&u.call(r[0],n,(function(){for(l=1;l<arguments.length-2;l++)void 0===arguments[l]&&(r[l]=void 0)})),r}:l},function(e,t,n){"use strict";var r=n(69)(!0);e.exports=function(e,t,n){return t+(n?r(e,t).length:1)}},function(e,t,n){function r(){var e,t=+this;g.hasOwnProperty(t)&&(e=g[t],delete g[t],e())}function i(e){r.call(e.data)}var o,u=n(25),l=n(123),a=n(86),s=n(82),c=n(2),f=c.process,d=c.setImmediate,h=c.clearImmediate,p=c.MessageChannel,v=c.Dispatch,_=0,g={},m="onreadystatechange";d&&h||(d=function(e){for(var t=[],n=1;n<arguments.length;)t.push(arguments[n++]);return g[++_]=function(){l("function"==typeof e?e:Function(e),t)},o(_),_},h=function(e){delete g[e]},"process"==n(26)(f)?o=function(e){f.nextTick(u(r,e,1))}:v&&v.now?o=function(e){v.now(u(r,e,1))}:p?(p=(n=new p).port2,n.port1.onmessage=i,o=u(p.postMessage,p,1)):c.addEventListener&&"function"==typeof postMessage&&!c.importScripts?(o=function(e){c.postMessage(e+"","*")},c.addEventListener("message",i,!1)):o=m in s("script")?function(e){a.appendChild(s("script"))[m]=function(){a.removeChild(this),r.call(e)}}:function(e){setTimeout(u(r,e,1),0)}),e.exports={set:d,clear:h}},function(e,t,n){var r=n(2),i=n(105).set,o=r.MutationObserver||r.WebKitMutationObserver,u=r.process,l=r.Promise,a="process"==n(26)(u);e.exports=function(){function e(){var e,r;for(a&&(e=u.domain)&&e.exit();t;){r=t.fn,t=t.next;try{r()}catch(e){throw t?c():n=void 0,e}}n=void 0,e&&e.enter()}var t,n,s,c,f,d;return c=a?function(){u.nextTick(e)}:!o||r.navigator&&r.navigator.standalone?l&&l.resolve?(s=l.resolve(void 0),function(){s.then(e)}):function(){i.call(r,e)}:(f=!0,d=document.createTextNode(""),new o(e).observe(d,{characterData:!0}),function(){d.data=f=!f}),function(e){e={fn:e,next:void 0},n&&(n.next=e),t||(t=e,c()),n=e}}},function(e,t,n){"use strict";var r=n(15);function i(e){var t,n;this.promise=new e((function(e,r){if(void 0!==t||void 0!==n)throw TypeError("Bad Promise constructor");t=e,n=r})),this.resolve=r(t),this.reject=r(n)}e.exports.f=function(e){return new i(e)}},function(e,t,n){"use strict";var r=n(2),i=n(8),o=n(37),u=n(76),l=n(17),a=n(50),s=n(3),c=n(48),f=n(27),d=n(7),h=n(143),p=n(46).f,v=n(11).f,_=n(101),g=n(56),m="ArrayBuffer",y="DataView",b="prototype",C="Wrong index!",S=r[m],T=r[y],E=(n=r.Math,r.RangeError),A=r.Infinity,w=S,R=n.abs,I=n.pow,O=n.floor,k=n.log,P=n.LN2,x=(r="byteLength",n="byteOffset",i?"_b":"buffer"),D=i?"_l":r,M=i?"_o":n;function N(e,t,n){var r,i,o=new Array(n),u=8*n-t-1,l=(1<<u)-1,a=l>>1,s=23===t?I(2,-24)-I(2,-77):0,c=0,f=e<0||0===e&&1/e<0?1:0;for((e=R(e))!=e||e===A?(i=e!=e?1:0,r=l):(r=O(k(e)/P),e*(n=I(2,-r))<1&&(r--,n*=2),2<=(e+=1<=r+a?s/n:s*I(2,1-a))*n&&(r++,n/=2),l<=r+a?(i=0,r=l):1<=r+a?(i=(e*n-1)*I(2,t),r+=a):(i=e*I(2,a-1)*I(2,t),r=0));8<=t;o[c++]=255&i,i/=256,t-=8);for(r=r<<t|i,u+=t;0<u;o[c++]=255&r,r/=256,u-=8);return o[--c]|=128*f,o}function L(e,t,n){var r,i=8*n-t-1,o=(1<<i)-1,u=o>>1,l=i-7,a=n-1,s=127&(n=e[a--]);for(n>>=7;0<l;s=256*s+e[a],a--,l-=8);for(r=s&(1<<-l)-1,s>>=-l,l+=t;0<l;r=256*r+e[a],a--,l-=8);if(0===s)s=1-u;else{if(s===o)return r?NaN:n?-A:A;r+=I(2,t),s-=u}return(n?-1:1)*r*I(2,s-t)}function U(e){return e[3]<<24|e[2]<<16|e[1]<<8|e[0]}function j(e){return[255&e]}function F(e){return[255&e,e>>8&255]}function q(e){return[255&e,e>>8&255,e>>16&255,e>>24&255]}function H(e){return N(e,52,8)}function V(e){return N(e,23,4)}function W(e,t,n){v(e[b],t,{get:function(){return this[n]}})}function G(e,t,n,r){var i=h(+n);if(i+t>e[D])throw E(C);return n=e[x]._b,e=i+e[M],t=n.slice(e,e+t),r?t:t.reverse()}function B(e,t,n,r,i,o){if((n=h(+n))+t>e[D])throw E(C);for(var u=e[x]._b,l=n+e[M],a=r(+i),s=0;s<t;s++)u[l+s]=a[o?s:t-s-1]}if(u.ABV){if(!s((function(){S(1)}))||!s((function(){new S(-1)}))||s((function(){return new S,new S(1.5),new S(NaN),S.name!=m}))){for(var z,$=(S=function(e){return c(this,S),new w(h(e))})[b]=w[b],J=p(w),K=0;J.length>K;)(z=J[K++])in S||l(S,z,w[z]);o||($.constructor=S)}$=new T(new S(2));var Y=T[b].setInt8;$.setInt8(0,2147483648),$.setInt8(1,2147483649),!$.getInt8(0)&&$.getInt8(1)||a(T[b],{setInt8:function(e,t){Y.call(this,e,t<<24>>24)},setUint8:function(e,t){Y.call(this,e,t<<24>>24)}},!0)}else S=function(e){c(this,S,m),e=h(e),this._b=_.call(new Array(e),0),this[D]=e},T=function(e,t,n){c(this,T,y),c(e,S,y);var r=e[D];if((t=f(t))<0||r<t)throw E("Wrong offset!");if(r<t+(n=void 0===n?r-t:d(n)))throw E("Wrong length!");this[x]=e,this[M]=t,this[D]=n},i&&(W(S,r,"_l"),W(T,"buffer","_b"),W(T,r,"_l"),W(T,n,"_o")),a(T[b],{getInt8:function(e){return G(this,1,e)[0]<<24>>24},getUint8:function(e){return G(this,1,e)[0]},getInt16:function(e){return((e=G(this,2,e,arguments[1]))[1]<<8|e[0])<<16>>16},getUint16:function(e){return(e=G(this,2,e,arguments[1]))[1]<<8|e[0]},getInt32:function(e){return U(G(this,4,e,arguments[1]))},getUint32:function(e){return U(G(this,4,e,arguments[1]))>>>0},getFloat32:function(e){return L(G(this,4,e,arguments[1]),23,4)},getFloat64:function(e){return L(G(this,8,e,arguments[1]),52,8)},setInt8:function(e,t){B(this,1,e,j,t)},setUint8:function(e,t){B(this,1,e,j,t)},setInt16:function(e,t){B(this,2,e,F,t,arguments[2])},setUint16:function(e,t){B(this,2,e,F,t,arguments[2])},setInt32:function(e,t){B(this,4,e,q,t,arguments[2])},setUint32:function(e,t){B(this,4,e,q,t,arguments[2])},setFloat32:function(e,t){B(this,4,e,V,t,arguments[2])},setFloat64:function(e,t){B(this,8,e,H,t,arguments[2])}});g(S,m),g(T,y),l(T[b],u.VIEW,!0),t[m]=S,t[y]=T},function(e){e.exports=JSON.parse('{"name":"@cdep/jssip","title":"JsSIP","description":"the Javascript SIP library","version":"3.7.5","homepage":"https://jssip.net","author":"José Luis Millán <jmillan@aliax.net> (https://github.com/jmillan)","contributors":["Iñaki Baz Castillo <ibc@aliax.net> (https://github.com/ibc)"],"types":"lib/JsSIP.d.ts","main":"lib-es5/JsSIP.js","keywords":["sip","websocket","webrtc","node","browser","library"],"license":"MIT","repository":{"type":"git","url":"https://github.com/versatica/JsSIP.git"},"bugs":{"url":"https://github.com/versatica/JsSIP/issues"},"dependencies":{"@types/debug":"^4.1.5","@types/node":"^14.14.34","debug":"^4.3.1","events":"^3.3.0","sdp-transform":"^2.14.1","util":"^0.12.4"},"devDependencies":{"@babel/core":"^7.13.10","@babel/preset-env":"^7.13.10","ansi-colors":"^3.2.4","browserify":"^16.5.1","eslint":"^5.16.0","fancy-log":"^1.3.3","gulp":"^4.0.2","gulp-babel":"^8.0.0","gulp-eslint":"^5.0.0","gulp-expect-file":"^1.0.2","gulp-header":"^2.0.9","gulp-nodeunit-runner":"^0.2.2","gulp-plumber":"^1.2.1","gulp-rename":"^1.4.0","gulp-uglify-es":"^1.0.4","pegjs":"^0.7.0","vinyl-buffer":"^1.0.1","vinyl-source-stream":"^2.0.0"},"scripts":{"lint":"gulp lint","test":"gulp test","prepublishOnly":"gulp babel"}}')},function(e,t,n){"use strict";function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var i=n(53),o=n(33);e.exports=function(){function e(t,n,r){if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),!(t&&t instanceof i))throw new TypeError('missing or invalid "uri" parameter');for(var o in this._uri=t,this._parameters={},this.display_name=n,r)Object.prototype.hasOwnProperty.call(r,o)&&this.setParam(o,r[o])}var t,n,u;return t=e,u=[{key:"parse",value:function(e){if(-1!==(e=o.parse(e,"Name_Addr_Header")))return e}}],(n=[{key:"uri",get:function(){return this._uri}},{key:"display_name",get:function(){return this._display_name},set:function(e){this._display_name=0===e?"0":e}},{key:"setParam",value:function(e,t){e&&(this._parameters[e.toLowerCase()]=null==t?null:t.toString())}},{key:"getParam",value:function(e){if(e)return this._parameters[e.toLowerCase()]}},{key:"hasParam",value:function(e){if(e)return!!this._parameters.hasOwnProperty(e.toLowerCase())}},{key:"deleteParam",value:function(e){if(e=e.toLowerCase(),this._parameters.hasOwnProperty(e)){var t=this._parameters[e];return delete this._parameters[e],t}}},{key:"clearParams",value:function(){this._parameters={}}},{key:"clone",value:function(){return new e(this._uri.clone(),this._display_name,JSON.parse(JSON.stringify(this._parameters)))}},{key:"_quote",value:function(e){return e.replace(/\\/g,"\\\\").replace(/"/g,'\\"')}},{key:"toString",value:function(){var e,t=this._display_name?'"'.concat(this._quote(this._display_name),'" '):"";for(e in t+="<".concat(this._uri.toString(),">"),this._parameters)Object.prototype.hasOwnProperty.call(this._parameters,e)&&(t+=";".concat(e),null!==this._parameters[e]&&(t+="=".concat(this._parameters[e])));return t}}])&&r(t.prototype,n),u&&r(t,u),e}()},function(e,t,n){(function(r){t.formatArgs=function(t){if(t[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+t[0]+(this.useColors?"%c ":" ")+"+"+e.exports.humanize(this.diff),this.useColors){var n="color: "+this.color;t.splice(1,0,n,"color: inherit");let e=0,r=0;t[0].replace(/%[a-zA-Z%]/g,t=>{"%%"!==t&&(e++,"%c"===t&&(r=e))}),t.splice(r,0,n)}},t.save=function(e){try{e?t.storage.setItem("debug",e):t.storage.removeItem("debug")}catch(e){}},t.load=function(){let e;try{e=t.storage.getItem("debug")}catch(e){}return!e&&void 0!==r&&"env"in r&&(e=r.env.DEBUG),e},t.useColors=function(){return!("undefined"==typeof window||!window.process||"renderer"!==window.process.type&&!window.process.__nwjs)||("undefined"==typeof navigator||!navigator.userAgent||!navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))&&("undefined"!=typeof document&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||"undefined"!=typeof window&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&31<=parseInt(RegExp.$1,10)||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/))},t.storage=function(){try{return localStorage}catch(e){}}(),t.destroy=(()=>{let e=!1;return()=>{e||(e=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})(),t.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"],t.log=console.debug||console.log||(()=>{}),e.exports=n(366)(t);e.exports.formatters.j=function(e){try{return JSON.stringify(e)}catch(e){return"[UnexpectedJSONParseError]: "+e.message}}}).call(this,n(152))},function(e,t,n){const r=n(9),i=n(54),o=n(113);e.exports=class e{static parse(e){if(-1!==(e=o.parse(e,"SIP_URI")))return e}constructor(e,t,n,i,o={},u={}){if(!n)throw new TypeError('missing or invalid "host" parameter');this._parameters={},this._headers={},this._scheme=e||r.SIP,this._user=t,this._host=n,this._port=i;for(const e in o)Object.prototype.hasOwnProperty.call(o,e)&&this.setParam(e,o[e]);for(const e in u)Object.prototype.hasOwnProperty.call(u,e)&&this.setHeader(e,u[e])}get scheme(){return this._scheme}set scheme(e){this._scheme=e.toLowerCase()}get user(){return this._user}set user(e){this._user=e}get host(){return this._host}set host(e){this._host=e.toLowerCase()}get port(){return this._port}set port(e){this._port=0===e?e:parseInt(e,10)||null}setParam(e,t){e&&(this._parameters[e.toLowerCase()]=null==t?null:t.toString())}getParam(e){if(e)return this._parameters[e.toLowerCase()]}hasParam(e){if(e)return!!this._parameters.hasOwnProperty(e.toLowerCase())}deleteParam(e){if(e=e.toLowerCase(),this._parameters.hasOwnProperty(e)){var t=this._parameters[e];return delete this._parameters[e],t}}clearParams(){this._parameters={}}setHeader(e,t){this._headers[i.headerize(e)]=Array.isArray(t)?t:[t]}getHeader(e){if(e)return this._headers[i.headerize(e)]}hasHeader(e){if(e)return!!this._headers.hasOwnProperty(i.headerize(e))}deleteHeader(e){if(e=i.headerize(e),this._headers.hasOwnProperty(e)){var t=this._headers[e];return delete this._headers[e],t}}clearHeaders(){this._headers={}}clone(){return new e(this._scheme,this._user,this._host,this._port,JSON.parse(JSON.stringify(this._parameters)),JSON.parse(JSON.stringify(this._headers)))}toString(){const e=[];let t=this._scheme+":";this._user&&(t+=i.escapeUser(this._user)+"@"),t+=this._host,!this._port&&0!==this._port||(t+=":"+this._port);for(const e in this._parameters)Object.prototype.hasOwnProperty.call(this._parameters,e)&&(t+=";"+e,null!==this._parameters[e]&&(t+="="+this._parameters[e]));for(const t in this._headers)if(Object.prototype.hasOwnProperty.call(this._headers,t))for(const n of this._headers[t])e.push(t+"="+n);return 0<e.length&&(t+="?"+e.join("&")),t}toAor(e){let t=this._scheme+":";return this._user&&(t+=i.escapeUser(this._user)+"@"),t+=this._host,e&&(this._port||0===this._port)&&(t+=":"+this._port),t}}},function(e,t,n){function r(e){return'"'+e.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\x08/g,"\\b").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\f/g,"\\f").replace(/\r/g,"\\r").replace(/[\x00-\x07\x0B\x0E-\x1F\x80-\uFFFF]/g,escape)+'"'}e.exports=((e={parse:function(e,t){var i={CRLF:c,DIGIT:f,ALPHA:d,HEXDIG:h,WSP:p,OCTET:v,DQUOTE:_,SP:g,HTAB:m,alphanum:y,reserved:b,unreserved:C,mark:S,escaped:T,LWS:E,SWS:A,HCOLON:w,TEXT_UTF8_TRIM:R,TEXT_UTF8char:I,UTF8_NONASCII:O,UTF8_CONT:k,LHEX:function(){var t;return null===(t=f())&&(/^[a-f]/.test(e.charAt(o))?(t=e.charAt(o),o++):(t=null,0===u&&s("[a-f]"))),t},token:P,token_nodot:x,separators:function(){var t;return 40===e.charCodeAt(o)?(t="(",o++):(t=null,0===u&&s('"("')),null===t&&(41===e.charCodeAt(o)?(t=")",o++):(t=null,0===u&&s('")"')),null===t&&(60===e.charCodeAt(o)?(t="<",o++):(t=null,0===u&&s('"<"')),null===t&&(62===e.charCodeAt(o)?(t=">",o++):(t=null,0===u&&s('">"')),null===t&&(64===e.charCodeAt(o)?(t="@",o++):(t=null,0===u&&s('"@"')),null===t&&(44===e.charCodeAt(o)?(t=",",o++):(t=null,0===u&&s('","')),null===t&&(59===e.charCodeAt(o)?(t=";",o++):(t=null,0===u&&s('";"')),null===t&&(58===e.charCodeAt(o)?(t=":",o++):(t=null,0===u&&s('":"')),null===t&&(92===e.charCodeAt(o)?(t="\\",o++):(t=null,0===u&&s('"\\\\"')),null===t&&null===(t=_())&&(47===e.charCodeAt(o)?(t="/",o++):(t=null,0===u&&s('"/"')),null===t&&(91===e.charCodeAt(o)?(t="[",o++):(t=null,0===u&&s('"["')),null===t&&(93===e.charCodeAt(o)?(t="]",o++):(t=null,0===u&&s('"]"')),null===t&&(63===e.charCodeAt(o)?(t="?",o++):(t=null,0===u&&s('"?"')),null===t&&(61===e.charCodeAt(o)?(t="=",o++):(t=null,0===u&&s('"="')),null===t&&(123===e.charCodeAt(o)?(t="{",o++):(t=null,0===u&&s('"{"')),null===t&&(125===e.charCodeAt(o)?(t="}",o++):(t=null,0===u&&s('"}"')),null===t&&null===(t=g())&&(t=m())))))))))))))))),t},word:D,STAR:M,SLASH:N,EQUAL:L,LPAREN:U,RPAREN:j,RAQUOT:F,LAQUOT:q,COMMA:H,SEMI:V,COLON:W,LDQUOT:G,RDQUOT:B,comment:function e(){var t,n,r,i;if(i=o,null!==(t=U())){for(n=[],null===(r=z())&&null===(r=Y())&&(r=e());null!==r;)n.push(r),null===(r=z())&&null===(r=Y())&&(r=e());null!==n&&null!==(r=j())?t=[t,n,r]:(t=null,o=i)}else t=null,o=i;return t},ctext:z,quoted_string:$,quoted_string_clean:J,qdtext:K,quoted_pair:Y,SIP_URI_noparams:X,SIP_URI:Q,uri_scheme:Z,uri_scheme_sips:ee,uri_scheme_sip:te,userinfo:ne,user:re,user_unreserved:ie,password:oe,hostport:ue,host:le,hostname:ae,domainlabel:se,toplabel:ce,IPv6reference:fe,IPv6address:de,h16:he,ls32:pe,IPv4address:ve,dec_octet:_e,port:ge,uri_parameters:me,uri_parameter:ye,transport_param:be,user_param:Ce,method_param:Se,ttl_param:Te,maddr_param:Ee,lr_param:Ae,other_param:we,pname:Re,pvalue:Ie,paramchar:Oe,param_unreserved:ke,headers:Pe,header:xe,hname:De,hvalue:Me,hnv_unreserved:Ne,Request_Response:function(){var e;return null===(e=ft())&&(e=Le()),e},Request_Line:Le,Request_URI:Ue,absoluteURI:je,hier_part:Fe,net_path:qe,abs_path:He,opaque_part:Ve,uric:We,uric_no_slash:Ge,path_segments:Be,segment:ze,param:$e,pchar:Je,scheme:Ke,authority:Ye,srvr:Xe,reg_name:Qe,query:Ze,SIP_Version:et,INVITEm:tt,ACKm:nt,OPTIONSm:rt,BYEm:it,CANCELm:ot,REGISTERm:ut,SUBSCRIBEm:lt,NOTIFYm:at,REFERm:st,Method:ct,Status_Line:ft,Status_Code:dt,extension_code:ht,Reason_Phrase:pt,Allow_Events:function(){var e,t,n,r,i,u;if(i=o,null!==(e=jt())){for(t=[],u=o,null!==(n=H())&&null!==(r=jt())?n=[n,r]:(n=null,o=u);null!==n;)t.push(n),u=o,null!==(n=H())&&null!==(r=jt())?n=[n,r]:(n=null,o=u);null!==t?e=[e,t]:(e=null,o=i)}else e=null,o=i;return e},Call_ID:function(){var t,n,r,i,l,a;return l=i=o,null!==(t=D())?(a=o,64===e.charCodeAt(o)?(n="@",o++):(n=null,0===u&&s('"@"')),null!==n&&null!==(r=D())?n=[n,r]:(n=null,o=a),null!==(n=null!==n?n:"")?t=[t,n]:(t=null,o=l)):(t=null,o=l),null!==t&&(t=void(Hn=e.substring(o,i))),null===t&&(o=i),t},Contact:function(){var e,t,n,r,i,u,l;if(i=o,null===(e=M()))if(u=o,null!==(e=vt())){for(t=[],l=o,null!==(n=H())&&null!==(r=vt())?n=[n,r]:(n=null,o=l);null!==n;)t.push(n),l=o,null!==(n=H())&&null!==(r=vt())?n=[n,r]:(n=null,o=l);null!==t?e=[e,t]:(e=null,o=u)}else e=null,o=u;return null!==e&&(e=function(){for(var e=Hn.multi_header.length,t=0;t<e;t++)if(null===Hn.multi_header[t].parsed){Hn=null;break}Hn=null!==Hn?Hn.multi_header:-1}()),null===e&&(o=i),e},contact_param:vt,name_addr:_t,display_name:gt,contact_params:mt,c_p_q:yt,c_p_expires:bt,delta_seconds:Ct,qvalue:St,generic_param:Tt,gen_value:Et,Content_Disposition:function(){var e,t,n,r,i,u;if(i=o,null!==(e=At())){for(t=[],u=o,null!==(n=V())&&null!==(r=wt())?n=[n,r]:(n=null,o=u);null!==n;)t.push(n),u=o,null!==(n=V())&&null!==(r=wt())?n=[n,r]:(n=null,o=u);null!==t?e=[e,t]:(e=null,o=i)}else e=null,o=i;return e},disp_type:At,disp_param:wt,handling_param:Rt,Content_Encoding:function(){var e,t,n,r,i,u;if(i=o,null!==(e=P())){for(t=[],u=o,null!==(n=H())&&null!==(r=P())?n=[n,r]:(n=null,o=u);null!==n;)t.push(n),u=o,null!==(n=H())&&null!==(r=P())?n=[n,r]:(n=null,o=u);null!==t?e=[e,t]:(e=null,o=i)}else e=null,o=i;return e},Content_Length:function(){var e,t,n;if(n=o,null!==(t=f()))for(e=[];null!==t;)e.push(t),t=f();else e=null;return null!==e&&(e=void(Hn=parseInt(e.join("")))),null===e&&(o=n),e},Content_Type:function(){var t,n;return n=o,null!==(t=It())&&(t=void(Hn=e.substring(o,n))),null===t&&(o=n),t},media_type:It,m_type:Ot,discrete_type:kt,composite_type:Pt,extension_token:xt,x_token:Dt,m_subtype:Mt,m_parameter:Nt,m_value:Lt,CSeq:function(){var e,t,n,r;return r=o,null!==(e=Ut())&&null!==(t=E())&&null!==(n=ct())?e=[e,t,n]:(e=null,o=r),e},CSeq_value:Ut,Expires:function(){var e,t;return t=o,null!==(e=Ct())&&(e=void(Hn=e)),null===e&&(o=t),e},Event:function(){var e,t,n,r,i,u,l;if(u=i=o,null!==(e=jt())){for(t=[],l=o,null!==(n=V())&&null!==(r=Tt())?n=[n,r]:(n=null,o=l);null!==n;)t.push(n),l=o,null!==(n=V())&&null!==(r=Tt())?n=[n,r]:(n=null,o=l);null!==t?e=[e,t]:(e=null,o=u)}else e=null,o=u;return null!==e&&(e=function(e){Hn.event=e.join("").toLowerCase()}(e[0])),null===e&&(o=i),e},event_type:jt,From:function(){var e,t,n,r,i,u,l;if(u=i=o,null===(e=X())&&(e=_t()),null!==e){for(t=[],l=o,null!==(n=V())&&null!==(r=Ft())?n=[n,r]:(n=null,o=l);null!==n;)t.push(n),l=o,null!==(n=V())&&null!==(r=Ft())?n=[n,r]:(n=null,o=l);null!==t?e=[e,t]:(e=null,o=u)}else e=null,o=u;return null!==e&&(e=function(){var e=Hn.tag;try{Hn=new qn(Hn.uri,Hn.display_name,Hn.params),e&&Hn.setParam("tag",e)}catch(e){Hn=-1}}()),null===e&&(o=i),e},from_param:Ft,tag_param:qt,Max_Forwards:function(){var e,t,n;if(n=o,null!==(t=f()))for(e=[];null!==t;)e.push(t),t=f();else e=null;return null!==e&&(e=void(Hn=parseInt(e.join("")))),null===e&&(o=n),e},Min_Expires:function(){var e,t;return t=o,null!==(e=Ct())&&(e=void(Hn=e)),null===e&&(o=t),e},Name_Addr_Header:function(){var e,t,n,r,i,u,l,a,s,c;for(s=a=o,e=[],t=gt();null!==t;)e.push(t),t=gt();if(null!==e)if(null!==(t=q()))if(null!==(n=Q()))if(null!==(r=F())){for(i=[],c=o,null!==(u=V())&&null!==(l=Tt())?u=[u,l]:(u=null,o=c);null!==u;)i.push(u),c=o,null!==(u=V())&&null!==(l=Tt())?u=[u,l]:(u=null,o=c);null!==i?e=[e,t,n,r,i]:(e=null,o=s)}else e=null,o=s;else e=null,o=s;else e=null,o=s;else e=null,o=s;return null!==e&&(e=function(){try{Hn=new qn(Hn.uri,Hn.display_name,Hn.params)}catch(e){Hn=-1}}()),null===e&&(o=a),e},Proxy_Authenticate:function(){return Ht()},challenge:Ht,other_challenge:Vt,auth_param:Wt,digest_cln:Gt,realm:Bt,realm_value:zt,domain:$t,URI:Jt,nonce:Kt,nonce_value:Yt,opaque:Xt,stale:Qt,algorithm:Zt,qop_options:en,qop_value:tn,Proxy_Require:function(){var e,t,n,r,i,u;if(i=o,null!==(e=P())){for(t=[],u=o,null!==(n=H())&&null!==(r=P())?n=[n,r]:(n=null,o=u);null!==n;)t.push(n),u=o,null!==(n=H())&&null!==(r=P())?n=[n,r]:(n=null,o=u);null!==t?e=[e,t]:(e=null,o=i)}else e=null,o=i;return e},Record_Route:function(){var e,t,n,r,i,u,l;if(u=i=o,null!==(e=nn())){for(t=[],l=o,null!==(n=H())&&null!==(r=nn())?n=[n,r]:(n=null,o=l);null!==n;)t.push(n),l=o,null!==(n=H())&&null!==(r=nn())?n=[n,r]:(n=null,o=l);null!==t?e=[e,t]:(e=null,o=u)}else e=null,o=u;return null!==e&&(e=function(){for(var e=Hn.multi_header.length,t=0;t<e;t++)if(null===Hn.multi_header[t].parsed){Hn=null;break}Hn=null!==Hn?Hn.multi_header:-1}()),null===e&&(o=i),e},rec_route:nn,Reason:function(){var t,n,r,i,l,a,c;if(a=l=o,"sip"===e.substr(o,3).toLowerCase()?(t=e.substr(o,3),o+=3):(t=null,0===u&&s('"SIP"')),null===t&&(t=P()),null!==t){for(n=[],c=o,null!==(r=V())&&null!==(i=rn())?r=[r,i]:(r=null,o=c);null!==r;)n.push(r),c=o,null!==(r=V())&&null!==(i=rn())?r=[r,i]:(r=null,o=c);null!==n?t=[t,n]:(t=null,o=a)}else t=null,o=a;return null!==t&&(t=function(e){Hn.protocol=e.toLowerCase(),Hn.params||(Hn.params={}),Hn.params.text&&'"'===Hn.params.text[0]&&(e=Hn.params.text,Hn.text=e.substring(1,e.length-1),delete Hn.params.text)}(t[0])),null===t&&(o=l),t},reason_param:rn,reason_cause:on,Require:function(){var e,t,n,r,i,u;if(i=o,null!==(e=P())){for(t=[],u=o,null!==(n=H())&&null!==(r=P())?n=[n,r]:(n=null,o=u);null!==n;)t.push(n),u=o,null!==(n=H())&&null!==(r=P())?n=[n,r]:(n=null,o=u);null!==t?e=[e,t]:(e=null,o=i)}else e=null,o=i;return e},Route:function(){var e,t,n,r,i,u;if(i=o,null!==(e=un())){for(t=[],u=o,null!==(n=H())&&null!==(r=un())?n=[n,r]:(n=null,o=u);null!==n;)t.push(n),u=o,null!==(n=H())&&null!==(r=un())?n=[n,r]:(n=null,o=u);null!==t?e=[e,t]:(e=null,o=i)}else e=null,o=i;return e},route_param:un,Subscription_State:function(){var e,t,n,r,i,u;if(i=o,null!==(e=ln())){for(t=[],u=o,null!==(n=V())&&null!==(r=an())?n=[n,r]:(n=null,o=u);null!==n;)t.push(n),u=o,null!==(n=V())&&null!==(r=an())?n=[n,r]:(n=null,o=u);null!==t?e=[e,t]:(e=null,o=i)}else e=null,o=i;return e},substate_value:ln,subexp_params:an,event_reason_value:sn,Subject:function(){var e;return null!==(e=R())?e:""},Supported:function(){var e,t,n,r,i,u;if(i=o,null!==(e=P())){for(t=[],u=o,null!==(n=H())&&null!==(r=P())?n=[n,r]:(n=null,o=u);null!==n;)t.push(n),u=o,null!==(n=H())&&null!==(r=P())?n=[n,r]:(n=null,o=u);null!==t?e=[e,t]:(e=null,o=i)}else e=null,o=i;return null!==e?e:""},To:function(){var e,t,n,r,i,u,l;if(u=i=o,null===(e=X())&&(e=_t()),null!==e){for(t=[],l=o,null!==(n=V())&&null!==(r=cn())?n=[n,r]:(n=null,o=l);null!==n;)t.push(n),l=o,null!==(n=V())&&null!==(r=cn())?n=[n,r]:(n=null,o=l);null!==t?e=[e,t]:(e=null,o=u)}else e=null,o=u;return null!==e&&(e=function(){var e=Hn.tag;try{Hn=new qn(Hn.uri,Hn.display_name,Hn.params),e&&Hn.setParam("tag",e)}catch(e){Hn=-1}}()),null===e&&(o=i),e},to_param:cn,Via:function(){var e,t,n,r,i,u;if(i=o,null!==(e=fn())){for(t=[],u=o,null!==(n=H())&&null!==(r=fn())?n=[n,r]:(n=null,o=u);null!==n;)t.push(n),u=o,null!==(n=H())&&null!==(r=fn())?n=[n,r]:(n=null,o=u);null!==t?e=[e,t]:(e=null,o=i)}else e=null,o=i;return e},via_param:fn,via_params:dn,via_ttl:hn,via_maddr:pn,via_received:vn,via_branch:_n,response_port:gn,rport:mn,sent_protocol:yn,protocol_name:bn,transport:Cn,sent_by:Sn,via_host:Tn,via_port:En,ttl:An,WWW_Authenticate:function(){return Ht()},Session_Expires:function(){var e,t,n,r,i,u;if(i=o,null!==(e=wn())){for(t=[],u=o,null!==(n=V())&&null!==(r=Rn())?n=[n,r]:(n=null,o=u);null!==n;)t.push(n),u=o,null!==(n=V())&&null!==(r=Rn())?n=[n,r]:(n=null,o=u);null!==t?e=[e,t]:(e=null,o=i)}else e=null,o=i;return e},s_e_expires:wn,s_e_params:Rn,s_e_refresher:In,extension_header:function(){var e,t,n,r;return r=o,null!==(e=P())&&null!==(t=w())&&null!==(n=On())?e=[e,t,n]:(e=null,o=r),e},header_value:On,message_body:function(){var e,t;for(e=[],t=v();null!==t;)e.push(t),t=v();return e},uuid_URI:function(){var t,n,r;return r=o,"uuid:"===e.substr(o,5)?(t="uuid:",o+=5):(t=null,0===u&&s('"uuid:"')),null!==t&&null!==(n=kn())?t=[t,n]:(t=null,o=r),t},uuid:kn,hex4:Pn,hex8:xn,hex12:Dn,Refer_To:function(){var e,t,n,r,i,u,l;if(u=i=o,null===(e=X())&&(e=_t()),null!==e){for(t=[],l=o,null!==(n=V())&&null!==(r=Tt())?n=[n,r]:(n=null,o=l);null!==n;)t.push(n),l=o,null!==(n=V())&&null!==(r=Tt())?n=[n,r]:(n=null,o=l);null!==t?e=[e,t]:(e=null,o=u)}else e=null,o=u;return null!==e&&(e=function(){try{Hn=new qn(Hn.uri,Hn.display_name,Hn.params)}catch(e){Hn=-1}}()),null===e&&(o=i),e},Replaces:function(){var e,t,n,r,i,u;if(i=o,null!==(e=Mn())){for(t=[],u=o,null!==(n=V())&&null!==(r=Nn())?n=[n,r]:(n=null,o=u);null!==n;)t.push(n),u=o,null!==(n=V())&&null!==(r=Nn())?n=[n,r]:(n=null,o=u);null!==t?e=[e,t]:(e=null,o=i)}else e=null,o=i;return e},call_id:Mn,replaces_param:Nn,to_tag:Ln,from_tag:Un,early_flag:jn};if(void 0!==t){if(void 0===i[t])throw new Error("Invalid rule name: "+r(t)+".")}else t="CRLF";var o=0,u=0,l=0,a=[];function s(e){o<l||(l<o&&(l=o,a=[]),a.push(e))}function c(){var t;return"\r\n"===e.substr(o,2)?(t="\r\n",o+=2):(t=null,0===u&&s('"\\r\\n"')),t}function f(){var t;return/^[0-9]/.test(e.charAt(o))?(t=e.charAt(o),o++):(t=null,0===u&&s("[0-9]")),t}function d(){var t;return/^[a-zA-Z]/.test(e.charAt(o))?(t=e.charAt(o),o++):(t=null,0===u&&s("[a-zA-Z]")),t}function h(){var t;return/^[0-9a-fA-F]/.test(e.charAt(o))?(t=e.charAt(o),o++):(t=null,0===u&&s("[0-9a-fA-F]")),t}function p(){var e=g();return null===e?m():e}function v(){var t;return/^[\0-\xFF]/.test(e.charAt(o))?(t=e.charAt(o),o++):(t=null,0===u&&s("[\\0-\\xFF]")),t}function _(){var t;return/^["]/.test(e.charAt(o))?(t=e.charAt(o),o++):(t=null,0===u&&s('["]')),t}function g(){var t;return 32===e.charCodeAt(o)?(t=" ",o++):(t=null,0===u&&s('" "')),t}function m(){var t;return 9===e.charCodeAt(o)?(t="\t",o++):(t=null,0===u&&s('"\\t"')),t}function y(){var t;return/^[a-zA-Z0-9]/.test(e.charAt(o))?(t=e.charAt(o),o++):(t=null,0===u&&s("[a-zA-Z0-9]")),t}function b(){var t;return 59===e.charCodeAt(o)?(t=";",o++):(t=null,0===u&&s('";"')),null===t&&(47===e.charCodeAt(o)?(t="/",o++):(t=null,0===u&&s('"/"')),null===t&&(63===e.charCodeAt(o)?(t="?",o++):(t=null,0===u&&s('"?"')),null===t&&(58===e.charCodeAt(o)?(t=":",o++):(t=null,0===u&&s('":"')),null===t&&(64===e.charCodeAt(o)?(t="@",o++):(t=null,0===u&&s('"@"')),null===t&&(38===e.charCodeAt(o)?(t="&",o++):(t=null,0===u&&s('"&"')),null===t&&(61===e.charCodeAt(o)?(t="=",o++):(t=null,0===u&&s('"="')),null===t&&(43===e.charCodeAt(o)?(t="+",o++):(t=null,0===u&&s('"+"')),null===t&&(36===e.charCodeAt(o)?(t="$",o++):(t=null,0===u&&s('"$"')),null===t&&(44===e.charCodeAt(o)?(t=",",o++):(t=null,0===u&&s('","'))))))))))),t}function C(){var e=y();return null===e?S():e}function S(){var t;return 45===e.charCodeAt(o)?(t="-",o++):(t=null,0===u&&s('"-"')),null===t&&(95===e.charCodeAt(o)?(t="_",o++):(t=null,0===u&&s('"_"')),null===t&&(46===e.charCodeAt(o)?(t=".",o++):(t=null,0===u&&s('"."')),null===t&&(33===e.charCodeAt(o)?(t="!",o++):(t=null,0===u&&s('"!"')),null===t&&(126===e.charCodeAt(o)?(t="~",o++):(t=null,0===u&&s('"~"')),null===t&&(42===e.charCodeAt(o)?(t="*",o++):(t=null,0===u&&s('"*"')),null===t&&(39===e.charCodeAt(o)?(t="'",o++):(t=null,0===u&&s('"\'"')),null===t&&(40===e.charCodeAt(o)?(t="(",o++):(t=null,0===u&&s('"("')),null===t&&(41===e.charCodeAt(o)?(t=")",o++):(t=null,0===u&&s('")"')))))))))),t}function T(){var t,n,r,i=o,l=o;return 37===e.charCodeAt(o)?(t="%",o++):(t=null,0===u&&s('"%"')),null!==t&&null!==(n=h())&&null!==(r=h())?t=[t,n,r]:(t=null,o=l),null===(t=null!==t?t.join(""):t)&&(o=i),t}function E(){for(var e,t=o,n=o,r=o,i=[],u=p();null!==u;)i.push(u),u=p();if(null!==i&&null!==(u=c())?i=[i,u]:(i=null,o=r),null!==(i=null!==i?i:"")){if(null!==(e=p()))for(u=[];null!==e;)u.push(e),e=p();else u=null;null!==u?i=[i,u]:(i=null,o=n)}else i=null,o=n;return null===(i=null!==i?" ":i)&&(o=t),i}function A(){var e=E();return null!==e?e:""}function w(){var t,n=o,r=o,i=[],l=g();for(null===l&&(l=m());null!==l;)i.push(l),null===(l=g())&&(l=m());return null!==i?(58===e.charCodeAt(o)?(l=":",o++):(l=null,0===u&&s('":"')),null!==l&&null!==(t=A())?i=[i,l,t]:(i=null,o=r)):(i=null,o=r),null===(i=null!==i?":":i)&&(o=n),i}function R(){var t,n,r,i,u=o,l=o,a=I();if(null!==a)for(t=[];null!==a;)t.push(a),a=I();else t=null;if(null!==t){for(a=[],i=o,n=[],r=E();null!==r;)n.push(r),r=E();for(null!==n&&null!==(r=I())?n=[n,r]:(n=null,o=i);null!==n;){for(a.push(n),i=o,n=[],r=E();null!==r;)n.push(r),r=E();null!==n&&null!==(r=I())?n=[n,r]:(n=null,o=i)}null!==a?t=[t,a]:(t=null,o=l)}else t=null,o=l;return null===(t=null!==t?e.substring(o,u):t)&&(o=u),t}function I(){var t;return/^[!-~]/.test(e.charAt(o))?(t=e.charAt(o),o++):(t=null,0===u&&s("[!-~]")),null===t?O():t}function O(){var t;return/^[\x80-\uFFFF]/.test(e.charAt(o))?(t=e.charAt(o),o++):(t=null,0===u&&s("[\\x80-\\uFFFF]")),t}function k(){var t;return/^[\x80-\xBF]/.test(e.charAt(o))?(t=e.charAt(o),o++):(t=null,0===u&&s("[\\x80-\\xBF]")),t}function P(){var t,n=o,r=y();if(null===r&&(45===e.charCodeAt(o)?(r="-",o++):(r=null,0===u&&s('"-"')),null===r&&(46===e.charCodeAt(o)?(r=".",o++):(r=null,0===u&&s('"."')),null===r&&(33===e.charCodeAt(o)?(r="!",o++):(r=null,0===u&&s('"!"')),null===r&&(37===e.charCodeAt(o)?(r="%",o++):(r=null,0===u&&s('"%"')),null===r&&(42===e.charCodeAt(o)?(r="*",o++):(r=null,0===u&&s('"*"')),null===r&&(95===e.charCodeAt(o)?(r="_",o++):(r=null,0===u&&s('"_"')),null===r&&(43===e.charCodeAt(o)?(r="+",o++):(r=null,0===u&&s('"+"')),null===r&&(96===e.charCodeAt(o)?(r="`",o++):(r=null,0===u&&s('"`"')),null===r&&(39===e.charCodeAt(o)?(r="'",o++):(r=null,0===u&&s('"\'"')),null===r&&(126===e.charCodeAt(o)?(r="~",o++):(r=null,0===u&&s('"~"')))))))))))),null!==r)for(t=[];null!==r;)t.push(r),null===(r=y())&&(45===e.charCodeAt(o)?(r="-",o++):(r=null,0===u&&s('"-"')),null===r&&(46===e.charCodeAt(o)?(r=".",o++):(r=null,0===u&&s('"."')),null===r&&(33===e.charCodeAt(o)?(r="!",o++):(r=null,0===u&&s('"!"')),null===r&&(37===e.charCodeAt(o)?(r="%",o++):(r=null,0===u&&s('"%"')),null===r&&(42===e.charCodeAt(o)?(r="*",o++):(r=null,0===u&&s('"*"')),null===r&&(95===e.charCodeAt(o)?(r="_",o++):(r=null,0===u&&s('"_"')),null===r&&(43===e.charCodeAt(o)?(r="+",o++):(r=null,0===u&&s('"+"')),null===r&&(96===e.charCodeAt(o)?(r="`",o++):(r=null,0===u&&s('"`"')),null===r&&(39===e.charCodeAt(o)?(r="'",o++):(r=null,0===u&&s('"\'"')),null===r&&(126===e.charCodeAt(o)?(r="~",o++):(r=null,0===u&&s('"~"'))))))))))));else t=null;return null===(t=null!==t?e.substring(o,n):t)&&(o=n),t}function x(){var t,n=o,r=y();if(null===r&&(45===e.charCodeAt(o)?(r="-",o++):(r=null,0===u&&s('"-"')),null===r&&(33===e.charCodeAt(o)?(r="!",o++):(r=null,0===u&&s('"!"')),null===r&&(37===e.charCodeAt(o)?(r="%",o++):(r=null,0===u&&s('"%"')),null===r&&(42===e.charCodeAt(o)?(r="*",o++):(r=null,0===u&&s('"*"')),null===r&&(95===e.charCodeAt(o)?(r="_",o++):(r=null,0===u&&s('"_"')),null===r&&(43===e.charCodeAt(o)?(r="+",o++):(r=null,0===u&&s('"+"')),null===r&&(96===e.charCodeAt(o)?(r="`",o++):(r=null,0===u&&s('"`"')),null===r&&(39===e.charCodeAt(o)?(r="'",o++):(r=null,0===u&&s('"\'"')),null===r&&(126===e.charCodeAt(o)?(r="~",o++):(r=null,0===u&&s('"~"'))))))))))),null!==r)for(t=[];null!==r;)t.push(r),null===(r=y())&&(45===e.charCodeAt(o)?(r="-",o++):(r=null,0===u&&s('"-"')),null===r&&(33===e.charCodeAt(o)?(r="!",o++):(r=null,0===u&&s('"!"')),null===r&&(37===e.charCodeAt(o)?(r="%",o++):(r=null,0===u&&s('"%"')),null===r&&(42===e.charCodeAt(o)?(r="*",o++):(r=null,0===u&&s('"*"')),null===r&&(95===e.charCodeAt(o)?(r="_",o++):(r=null,0===u&&s('"_"')),null===r&&(43===e.charCodeAt(o)?(r="+",o++):(r=null,0===u&&s('"+"')),null===r&&(96===e.charCodeAt(o)?(r="`",o++):(r=null,0===u&&s('"`"')),null===r&&(39===e.charCodeAt(o)?(r="'",o++):(r=null,0===u&&s('"\'"')),null===r&&(126===e.charCodeAt(o)?(r="~",o++):(r=null,0===u&&s('"~"')))))))))));else t=null;return null===(t=null!==t?e.substring(o,n):t)&&(o=n),t}function D(){var t,n=o,r=y();if(null===r&&(45===e.charCodeAt(o)?(r="-",o++):(r=null,0===u&&s('"-"')),null===r&&(46===e.charCodeAt(o)?(r=".",o++):(r=null,0===u&&s('"."')),null===r&&(33===e.charCodeAt(o)?(r="!",o++):(r=null,0===u&&s('"!"')),null===r&&(37===e.charCodeAt(o)?(r="%",o++):(r=null,0===u&&s('"%"')),null===r&&(42===e.charCodeAt(o)?(r="*",o++):(r=null,0===u&&s('"*"')),null===r&&(95===e.charCodeAt(o)?(r="_",o++):(r=null,0===u&&s('"_"')),null===r&&(43===e.charCodeAt(o)?(r="+",o++):(r=null,0===u&&s('"+"')),null===r&&(96===e.charCodeAt(o)?(r="`",o++):(r=null,0===u&&s('"`"')),null===r&&(39===e.charCodeAt(o)?(r="'",o++):(r=null,0===u&&s('"\'"')),null===r&&(126===e.charCodeAt(o)?(r="~",o++):(r=null,0===u&&s('"~"')),null===r&&(40===e.charCodeAt(o)?(r="(",o++):(r=null,0===u&&s('"("')),null===r&&(41===e.charCodeAt(o)?(r=")",o++):(r=null,0===u&&s('")"')),null===r&&(60===e.charCodeAt(o)?(r="<",o++):(r=null,0===u&&s('"<"')),null===r&&(62===e.charCodeAt(o)?(r=">",o++):(r=null,0===u&&s('">"')),null===r&&(58===e.charCodeAt(o)?(r=":",o++):(r=null,0===u&&s('":"')),null===r&&(92===e.charCodeAt(o)?(r="\\",o++):(r=null,0===u&&s('"\\\\"')),null===r&&null===(r=_())&&(47===e.charCodeAt(o)?(r="/",o++):(r=null,0===u&&s('"/"')),null===r&&(91===e.charCodeAt(o)?(r="[",o++):(r=null,0===u&&s('"["')),null===r&&(93===e.charCodeAt(o)?(r="]",o++):(r=null,0===u&&s('"]"')),null===r&&(63===e.charCodeAt(o)?(r="?",o++):(r=null,0===u&&s('"?"')),null===r&&(123===e.charCodeAt(o)?(r="{",o++):(r=null,0===u&&s('"{"')),null===r&&(125===e.charCodeAt(o)?(r="}",o++):(r=null,0===u&&s('"}"')))))))))))))))))))))))),null!==r)for(t=[];null!==r;)t.push(r),null===(r=y())&&(45===e.charCodeAt(o)?(r="-",o++):(r=null,0===u&&s('"-"')),null===r&&(46===e.charCodeAt(o)?(r=".",o++):(r=null,0===u&&s('"."')),null===r&&(33===e.charCodeAt(o)?(r="!",o++):(r=null,0===u&&s('"!"')),null===r&&(37===e.charCodeAt(o)?(r="%",o++):(r=null,0===u&&s('"%"')),null===r&&(42===e.charCodeAt(o)?(r="*",o++):(r=null,0===u&&s('"*"')),null===r&&(95===e.charCodeAt(o)?(r="_",o++):(r=null,0===u&&s('"_"')),null===r&&(43===e.charCodeAt(o)?(r="+",o++):(r=null,0===u&&s('"+"')),null===r&&(96===e.charCodeAt(o)?(r="`",o++):(r=null,0===u&&s('"`"')),null===r&&(39===e.charCodeAt(o)?(r="'",o++):(r=null,0===u&&s('"\'"')),null===r&&(126===e.charCodeAt(o)?(r="~",o++):(r=null,0===u&&s('"~"')),null===r&&(40===e.charCodeAt(o)?(r="(",o++):(r=null,0===u&&s('"("')),null===r&&(41===e.charCodeAt(o)?(r=")",o++):(r=null,0===u&&s('")"')),null===r&&(60===e.charCodeAt(o)?(r="<",o++):(r=null,0===u&&s('"<"')),null===r&&(62===e.charCodeAt(o)?(r=">",o++):(r=null,0===u&&s('">"')),null===r&&(58===e.charCodeAt(o)?(r=":",o++):(r=null,0===u&&s('":"')),null===r&&(92===e.charCodeAt(o)?(r="\\",o++):(r=null,0===u&&s('"\\\\"')),null===r&&null===(r=_())&&(47===e.charCodeAt(o)?(r="/",o++):(r=null,0===u&&s('"/"')),null===r&&(91===e.charCodeAt(o)?(r="[",o++):(r=null,0===u&&s('"["')),null===r&&(93===e.charCodeAt(o)?(r="]",o++):(r=null,0===u&&s('"]"')),null===r&&(63===e.charCodeAt(o)?(r="?",o++):(r=null,0===u&&s('"?"')),null===r&&(123===e.charCodeAt(o)?(r="{",o++):(r=null,0===u&&s('"{"')),null===r&&(125===e.charCodeAt(o)?(r="}",o++):(r=null,0===u&&s('"}"'))))))))))))))))))))))));else t=null;return null===(t=null!==t?e.substring(o,n):t)&&(o=n),t}function M(){var t,n,r=o,i=o,l=A();return null!==l?(42===e.charCodeAt(o)?(t="*",o++):(t=null,0===u&&s('"*"')),null!==t&&null!==(n=A())?l=[l,t,n]:(l=null,o=i)):(l=null,o=i),null===(l=null!==l?"*":l)&&(o=r),l}function N(){var t,n,r=o,i=o,l=A();return null!==l?(47===e.charCodeAt(o)?(t="/",o++):(t=null,0===u&&s('"/"')),null!==t&&null!==(n=A())?l=[l,t,n]:(l=null,o=i)):(l=null,o=i),null===(l=null!==l?"/":l)&&(o=r),l}function L(){var t,n,r=o,i=o,l=A();return null!==l?(61===e.charCodeAt(o)?(t="=",o++):(t=null,0===u&&s('"="')),null!==t&&null!==(n=A())?l=[l,t,n]:(l=null,o=i)):(l=null,o=i),null===(l=null!==l?"=":l)&&(o=r),l}function U(){var t,n,r=o,i=o,l=A();return null!==l?(40===e.charCodeAt(o)?(t="(",o++):(t=null,0===u&&s('"("')),null!==t&&null!==(n=A())?l=[l,t,n]:(l=null,o=i)):(l=null,o=i),null===(l=null!==l?"(":l)&&(o=r),l}function j(){var t,n,r=o,i=o,l=A();return null!==l?(41===e.charCodeAt(o)?(t=")",o++):(t=null,0===u&&s('")"')),null!==t&&null!==(n=A())?l=[l,t,n]:(l=null,o=i)):(l=null,o=i),null===(l=null!==l?")":l)&&(o=r),l}function F(){var t,n,r=o,i=o;return 62===e.charCodeAt(o)?(t=">",o++):(t=null,0===u&&s('">"')),null!==t&&null!==(n=A())?t=[t,n]:(t=null,o=i),null===(t=null!==t?">":t)&&(o=r),t}function q(){var t,n=o,r=o,i=A();return null!==i?(60===e.charCodeAt(o)?(t="<",o++):(t=null,0===u&&s('"<"')),null!==t?i=[i,t]:(i=null,o=r)):(i=null,o=r),null===(i=null!==i?"<":i)&&(o=n),i}function H(){var t,n,r=o,i=o,l=A();return null!==l?(44===e.charCodeAt(o)?(t=",",o++):(t=null,0===u&&s('","')),null!==t&&null!==(n=A())?l=[l,t,n]:(l=null,o=i)):(l=null,o=i),null===(l=null!==l?",":l)&&(o=r),l}function V(){var t,n,r=o,i=o,l=A();return null!==l?(59===e.charCodeAt(o)?(t=";",o++):(t=null,0===u&&s('";"')),null!==t&&null!==(n=A())?l=[l,t,n]:(l=null,o=i)):(l=null,o=i),null===(l=null!==l?";":l)&&(o=r),l}function W(){var t,n,r=o,i=o,l=A();return null!==l?(58===e.charCodeAt(o)?(t=":",o++):(t=null,0===u&&s('":"')),null!==t&&null!==(n=A())?l=[l,t,n]:(l=null,o=i)):(l=null,o=i),null===(l=null!==l?":":l)&&(o=r),l}function G(){var e,t=o,n=o,r=A();return null!==r&&null!==(e=_())?r=[r,e]:(r=null,o=n),null===(r=null!==r?'"':r)&&(o=t),r}function B(){var e,t=o,n=o,r=_();return null!==r&&null!==(e=A())?r=[r,e]:(r=null,o=n),null===(r=null!==r?'"':r)&&(o=t),r}function z(){var t;return/^[!-']/.test(e.charAt(o))?(t=e.charAt(o),o++):(t=null,0===u&&s("[!-']")),null===t&&(/^[*-[]/.test(e.charAt(o))?(t=e.charAt(o),o++):(t=null,0===u&&s("[*-[]")),null===t&&(/^[\]-~]/.test(e.charAt(o))?(t=e.charAt(o),o++):(t=null,0===u&&s("[\\]-~]")),null===t&&null===(t=O())&&(t=E()))),t}function $(){var t,n,r,i=o,u=o,l=A();if(null!==l)if(null!==(t=_())){for(n=[],null===(r=K())&&(r=Y());null!==r;)n.push(r),null===(r=K())&&(r=Y());null!==n&&null!==(r=_())?l=[l,t,n,r]:(l=null,o=u)}else l=null,o=u;else l=null,o=u;return null===(l=null!==l?e.substring(o,i):l)&&(o=i),l}function J(){var t,n,r,i=o,u=o,l=A();if(null!==l)if(null!==(t=_())){for(n=[],null===(r=K())&&(r=Y());null!==r;)n.push(r),null===(r=K())&&(r=Y());null!==n&&null!==(r=_())?l=[l,t,n,r]:(l=null,o=u)}else l=null,o=u;else l=null,o=u;return null===(l=null!==l?(u=e.substring(o,i).trim()).substring(1,u.length-1).replace(/\\([\x00-\x09\x0b-\x0c\x0e-\x7f])/g,"$1"):l)&&(o=i),l}function K(){var t=E();return null===t&&(33===e.charCodeAt(o)?(t="!",o++):(t=null,0===u&&s('"!"')),null===t&&(/^[#-[]/.test(e.charAt(o))?(t=e.charAt(o),o++):(t=null,0===u&&s("[#-[]")),null===t&&(/^[\]-~]/.test(e.charAt(o))?(t=e.charAt(o),o++):(t=null,0===u&&s("[\\]-~]")),null===t&&(t=O())))),t}function Y(){var t,n,r=o;return 92===e.charCodeAt(o)?(t="\\",o++):(t=null,0===u&&s('"\\\\"')),null!==t?(/^[\0-\t]/.test(e.charAt(o))?(n=e.charAt(o),o++):(n=null,0===u&&s("[\\0-\\t]")),null===n&&(/^[\x0B-\f]/.test(e.charAt(o))?(n=e.charAt(o),o++):(n=null,0===u&&s("[\\x0B-\\f]")),null===n&&(/^[\x0E-]/.test(e.charAt(o))?(n=e.charAt(o),o++):(n=null,0===u&&s("[\\x0E-]")))),null!==n?t=[t,n]:(t=null,o=r)):(t=null,o=r),t}function X(){var t,n,r,i=o,l=o,a=Z();return null!==a?(58===e.charCodeAt(o)?(t=":",o++):(t=null,0===u&&s('":"')),null!==t&&null!==(n=null!==(n=ne())?n:"")&&null!==(r=ue())?a=[a,t,n,r]:(a=null,o=l)):(a=null,o=l),null===(a=null!==a?function(){try{Hn.uri=new Fn(Hn.scheme,Hn.user,Hn.host,Hn.port),delete Hn.scheme,delete Hn.user,delete Hn.host,delete Hn.host_type,delete Hn.port}catch(e){Hn=-1}}():a)&&(o=i),a}function Q(){var n,r,i,l,a,c=o,f=o,d=Z();return null!==d?(58===e.charCodeAt(o)?(n=":",o++):(n=null,0===u&&s('":"')),null!==n&&null!==(r=null!==(r=ne())?r:"")&&null!==(i=ue())&&null!==(l=me())&&null!==(a=null!==(a=Pe())?a:"")?d=[d,n,r,i,l,a]:(d=null,o=f)):(d=null,o=f),null===(d=null!==d?function(){try{Hn.uri=new Fn(Hn.scheme,Hn.user,Hn.host,Hn.port,Hn.uri_params,Hn.uri_headers),delete Hn.scheme,delete Hn.user,delete Hn.host,delete Hn.host_type,delete Hn.port,delete Hn.uri_params,"SIP_URI"===t&&(Hn=Hn.uri)}catch(e){Hn=-1}}():d)&&(o=c),d}function Z(){var e=ee();return null===e?te():e}function ee(){var t,n,r=o;return"sips"===e.substr(o,4).toLowerCase()?(t=e.substr(o,4),o+=4):(t=null,0===u&&s('"sips"')),null!==t&&(n=t,t=void(Hn.scheme=n.toLowerCase())),null===t&&(o=r),t}function te(){var t,n,r=o;return"sip"===e.substr(o,3).toLowerCase()?(t=e.substr(o,3),o+=3):(t=null,0===u&&s('"sip"')),null!==t&&(n=t,t=void(Hn.scheme=n.toLowerCase())),null===t&&(o=r),t}function ne(){var t,n,r,i=o,l=o,a=re();return null!==a?(r=o,58===e.charCodeAt(o)?(t=":",o++):(t=null,0===u&&s('":"')),null!==t&&null!==(n=oe())?t=[t,n]:(t=null,o=r),null!==(t=null!==t?t:"")?(64===e.charCodeAt(o)?(n="@",o++):(n=null,0===u&&s('"@"')),null!==n?a=[a,t,n]:(a=null,o=l)):(a=null,o=l)):(a=null,o=l),null===(a=null!==a?void(Hn.user=decodeURIComponent(e.substring(o-1,i))):a)&&(o=i),a}function re(){var e,t=C();if(null!==(t=null===t&&null===(t=T())?ie():t))for(e=[];null!==t;)e.push(t),null===(t=C())&&null===(t=T())&&(t=ie());else e=null;return e}function ie(){var t;return 38===e.charCodeAt(o)?(t="&",o++):(t=null,0===u&&s('"&"')),null===t&&(61===e.charCodeAt(o)?(t="=",o++):(t=null,0===u&&s('"="')),null===t&&(43===e.charCodeAt(o)?(t="+",o++):(t=null,0===u&&s('"+"')),null===t&&(36===e.charCodeAt(o)?(t="$",o++):(t=null,0===u&&s('"$"')),null===t&&(44===e.charCodeAt(o)?(t=",",o++):(t=null,0===u&&s('","')),null===t&&(59===e.charCodeAt(o)?(t=";",o++):(t=null,0===u&&s('";"')),null===t&&(63===e.charCodeAt(o)?(t="?",o++):(t=null,0===u&&s('"?"')),null===t&&(47===e.charCodeAt(o)?(t="/",o++):(t=null,0===u&&s('"/"'))))))))),t}function oe(){var t=o,n=[],r=C();for(null===r&&null===(r=T())&&(38===e.charCodeAt(o)?(r="&",o++):(r=null,0===u&&s('"&"')),null===r&&(61===e.charCodeAt(o)?(r="=",o++):(r=null,0===u&&s('"="')),null===r&&(43===e.charCodeAt(o)?(r="+",o++):(r=null,0===u&&s('"+"')),null===r&&(36===e.charCodeAt(o)?(r="$",o++):(r=null,0===u&&s('"$"')),null===r&&(44===e.charCodeAt(o)?(r=",",o++):(r=null,0===u&&s('","')))))));null!==r;)n.push(r),null===(r=C())&&null===(r=T())&&(38===e.charCodeAt(o)?(r="&",o++):(r=null,0===u&&s('"&"')),null===r&&(61===e.charCodeAt(o)?(r="=",o++):(r=null,0===u&&s('"="')),null===r&&(43===e.charCodeAt(o)?(r="+",o++):(r=null,0===u&&s('"+"')),null===r&&(36===e.charCodeAt(o)?(r="$",o++):(r=null,0===u&&s('"$"')),null===r&&(44===e.charCodeAt(o)?(r=",",o++):(r=null,0===u&&s('","')))))));return null===(n=null!==n?void(Hn.password=e.substring(o,t)):n)&&(o=t),n}function ue(){var t,n,r,i=o,l=le();return null!==l?(r=o,58===e.charCodeAt(o)?(t=":",o++):(t=null,0===u&&s('":"')),null!==t&&null!==(n=ge())?t=[t,n]:(t=null,o=r),null!==(t=null!==t?t:"")?l=[l,t]:(l=null,o=i)):(l=null,o=i),l}function le(){var t=o,n=ae();return null!==(n=null===n&&null===(n=ve())?fe():n)&&(Hn.host=e.substring(o,t).toLowerCase(),n=Hn.host),null===n&&(o=t),n}function ae(){var t,n=o,r=o,i=[],l=o,a=se();for(null!==a?(46===e.charCodeAt(o)?(t=".",o++):(t=null,0===u&&s('"."')),null!==t?a=[a,t]:(a=null,o=l)):(a=null,o=l);null!==a;)i.push(a),l=o,null!==(a=se())?(46===e.charCodeAt(o)?(t=".",o++):(t=null,0===u&&s('"."')),null!==t?a=[a,t]:(a=null,o=l)):(a=null,o=l);return null!==i&&null!==(a=ce())?(46===e.charCodeAt(o)?(t=".",o++):(t=null,0===u&&s('"."')),null!==(t=null!==t?t:"")?i=[i,a,t]:(i=null,o=r)):(i=null,o=r),null!==i&&(r=n,Hn.host_type="domain",i=e.substring(o,r)),null===i&&(o=n),i}function se(){var t,n,r=o,i=y();if(null!==i){for(t=[],null===(n=y())&&(45===e.charCodeAt(o)?(n="-",o++):(n=null,0===u&&s('"-"')),null===n&&(95===e.charCodeAt(o)?(n="_",o++):(n=null,0===u&&s('"_"'))));null!==n;)t.push(n),null===(n=y())&&(45===e.charCodeAt(o)?(n="-",o++):(n=null,0===u&&s('"-"')),null===n&&(95===e.charCodeAt(o)?(n="_",o++):(n=null,0===u&&s('"_"'))));null!==t?i=[i,t]:(i=null,o=r)}else i=null,o=r;return i}function ce(){var t,n,r=o,i=d();if(null!==i){for(t=[],null===(n=y())&&(45===e.charCodeAt(o)?(n="-",o++):(n=null,0===u&&s('"-"')),null===n&&(95===e.charCodeAt(o)?(n="_",o++):(n=null,0===u&&s('"_"'))));null!==n;)t.push(n),null===(n=y())&&(45===e.charCodeAt(o)?(n="-",o++):(n=null,0===u&&s('"-"')),null===n&&(95===e.charCodeAt(o)?(n="_",o++):(n=null,0===u&&s('"_"'))));null!==t?i=[i,t]:(i=null,o=r)}else i=null,o=r;return i}function fe(){var t,n,r,i=o,l=o;return 91===e.charCodeAt(o)?(t="[",o++):(t=null,0===u&&s('"["')),null!==t&&null!==(n=de())?(93===e.charCodeAt(o)?(r="]",o++):(r=null,0===u&&s('"]"')),null!==r?t=[t,n,r]:(t=null,o=l)):(t=null,o=l),null!==t&&(l=i,Hn.host_type="IPv6",t=e.substring(o,l)),null===t&&(o=i),t}function de(){var t,n,r,i,l,a,c,f,d,h,p,v,_,g=o,m=o,y=he();return null!==y?(58===e.charCodeAt(o)?(t=":",o++):(t=null,0===u&&s('":"')),null!==t&&null!==(n=he())?(58===e.charCodeAt(o)?(r=":",o++):(r=null,0===u&&s('":"')),null!==r&&null!==(i=he())?(58===e.charCodeAt(o)?(l=":",o++):(l=null,0===u&&s('":"')),null!==l&&null!==(a=he())?(58===e.charCodeAt(o)?(c=":",o++):(c=null,0===u&&s('":"')),null!==c&&null!==(f=he())?(58===e.charCodeAt(o)?(d=":",o++):(d=null,0===u&&s('":"')),null!==d&&null!==(h=he())?(58===e.charCodeAt(o)?(p=":",o++):(p=null,0===u&&s('":"')),null!==p&&null!==(v=pe())?y=[y,t,n,r,i,l,a,c,f,d,h,p,v]:(y=null,o=m)):(y=null,o=m)):(y=null,o=m)):(y=null,o=m)):(y=null,o=m)):(y=null,o=m)):(y=null,o=m),null===y&&(m=o,"::"===e.substr(o,2)?(y="::",o+=2):(y=null,0===u&&s('"::"')),null!==y&&null!==(t=he())?(58===e.charCodeAt(o)?(n=":",o++):(n=null,0===u&&s('":"')),null!==n&&null!==(r=he())?(58===e.charCodeAt(o)?(i=":",o++):(i=null,0===u&&s('":"')),null!==i&&null!==(l=he())?(58===e.charCodeAt(o)?(a=":",o++):(a=null,0===u&&s('":"')),null!==a&&null!==(c=he())?(58===e.charCodeAt(o)?(f=":",o++):(f=null,0===u&&s('":"')),null!==f&&null!==(d=he())?(58===e.charCodeAt(o)?(h=":",o++):(h=null,0===u&&s('":"')),null!==h&&null!==(p=pe())?y=[y,t,n,r,i,l,a,c,f,d,h,p]:(y=null,o=m)):(y=null,o=m)):(y=null,o=m)):(y=null,o=m)):(y=null,o=m)):(y=null,o=m),null===y&&(m=o,"::"===e.substr(o,2)?(y="::",o+=2):(y=null,0===u&&s('"::"')),null!==y&&null!==(t=he())?(58===e.charCodeAt(o)?(n=":",o++):(n=null,0===u&&s('":"')),null!==n&&null!==(r=he())?(58===e.charCodeAt(o)?(i=":",o++):(i=null,0===u&&s('":"')),null!==i&&null!==(l=he())?(58===e.charCodeAt(o)?(a=":",o++):(a=null,0===u&&s('":"')),null!==a&&null!==(c=he())?(58===e.charCodeAt(o)?(f=":",o++):(f=null,0===u&&s('":"')),null!==f&&null!==(d=pe())?y=[y,t,n,r,i,l,a,c,f,d]:(y=null,o=m)):(y=null,o=m)):(y=null,o=m)):(y=null,o=m)):(y=null,o=m),null===y&&(m=o,"::"===e.substr(o,2)?(y="::",o+=2):(y=null,0===u&&s('"::"')),null!==y&&null!==(t=he())?(58===e.charCodeAt(o)?(n=":",o++):(n=null,0===u&&s('":"')),null!==n&&null!==(r=he())?(58===e.charCodeAt(o)?(i=":",o++):(i=null,0===u&&s('":"')),null!==i&&null!==(l=he())?(58===e.charCodeAt(o)?(a=":",o++):(a=null,0===u&&s('":"')),null!==a&&null!==(c=pe())?y=[y,t,n,r,i,l,a,c]:(y=null,o=m)):(y=null,o=m)):(y=null,o=m)):(y=null,o=m),null===y&&(m=o,"::"===e.substr(o,2)?(y="::",o+=2):(y=null,0===u&&s('"::"')),null!==y&&null!==(t=he())?(58===e.charCodeAt(o)?(n=":",o++):(n=null,0===u&&s('":"')),null!==n&&null!==(r=he())?(58===e.charCodeAt(o)?(i=":",o++):(i=null,0===u&&s('":"')),null!==i&&null!==(l=pe())?y=[y,t,n,r,i,l]:(y=null,o=m)):(y=null,o=m)):(y=null,o=m),null===y&&(m=o,"::"===e.substr(o,2)?(y="::",o+=2):(y=null,0===u&&s('"::"')),null!==y&&null!==(t=he())?(58===e.charCodeAt(o)?(n=":",o++):(n=null,0===u&&s('":"')),null!==n&&null!==(r=pe())?y=[y,t,n,r]:(y=null,o=m)):(y=null,o=m),null===y&&(m=o,"::"===e.substr(o,2)?(y="::",o+=2):(y=null,0===u&&s('"::"')),null!==y&&null!==(t=pe())?y=[y,t]:(y=null,o=m),null===y&&(m=o,"::"===e.substr(o,2)?(y="::",o+=2):(y=null,0===u&&s('"::"')),null!==y&&null!==(t=he())?y=[y,t]:(y=null,o=m),null===y&&(m=o,null!==(y=he())?("::"===e.substr(o,2)?(t="::",o+=2):(t=null,0===u&&s('"::"')),null!==t&&null!==(n=he())?(58===e.charCodeAt(o)?(r=":",o++):(r=null,0===u&&s('":"')),null!==r&&null!==(i=he())?(58===e.charCodeAt(o)?(l=":",o++):(l=null,0===u&&s('":"')),null!==l&&null!==(a=he())?(58===e.charCodeAt(o)?(c=":",o++):(c=null,0===u&&s('":"')),null!==c&&null!==(f=he())?(58===e.charCodeAt(o)?(d=":",o++):(d=null,0===u&&s('":"')),null!==d&&null!==(h=pe())?y=[y,t,n,r,i,l,a,c,f,d,h]:(y=null,o=m)):(y=null,o=m)):(y=null,o=m)):(y=null,o=m)):(y=null,o=m)):(y=null,o=m),null===y&&(m=o,null!==(y=he())?(_=o,58===e.charCodeAt(o)?(t=":",o++):(t=null,0===u&&s('":"')),null!==t&&null!==(n=he())?t=[t,n]:(t=null,o=_),null!==(t=null!==t?t:"")?("::"===e.substr(o,2)?(n="::",o+=2):(n=null,0===u&&s('"::"')),null!==n&&null!==(r=he())?(58===e.charCodeAt(o)?(i=":",o++):(i=null,0===u&&s('":"')),null!==i&&null!==(l=he())?(58===e.charCodeAt(o)?(a=":",o++):(a=null,0===u&&s('":"')),null!==a&&null!==(c=he())?(58===e.charCodeAt(o)?(f=":",o++):(f=null,0===u&&s('":"')),null!==f&&null!==(d=pe())?y=[y,t,n,r,i,l,a,c,f,d]:(y=null,o=m)):(y=null,o=m)):(y=null,o=m)):(y=null,o=m)):(y=null,o=m)):(y=null,o=m),null===y&&(m=o,null!==(y=he())?(_=o,58===e.charCodeAt(o)?(t=":",o++):(t=null,0===u&&s('":"')),null!==t&&null!==(n=he())?t=[t,n]:(t=null,o=_),null!==(t=null!==t?t:"")?(_=o,58===e.charCodeAt(o)?(n=":",o++):(n=null,0===u&&s('":"')),null!==n&&null!==(r=he())?n=[n,r]:(n=null,o=_),null!==(n=null!==n?n:"")?("::"===e.substr(o,2)?(r="::",o+=2):(r=null,0===u&&s('"::"')),null!==r&&null!==(i=he())?(58===e.charCodeAt(o)?(l=":",o++):(l=null,0===u&&s('":"')),null!==l&&null!==(a=he())?(58===e.charCodeAt(o)?(c=":",o++):(c=null,0===u&&s('":"')),null!==c&&null!==(f=pe())?y=[y,t,n,r,i,l,a,c,f]:(y=null,o=m)):(y=null,o=m)):(y=null,o=m)):(y=null,o=m)):(y=null,o=m)):(y=null,o=m),null===y&&(m=o,null!==(y=he())?(_=o,58===e.charCodeAt(o)?(t=":",o++):(t=null,0===u&&s('":"')),null!==t&&null!==(n=he())?t=[t,n]:(t=null,o=_),null!==(t=null!==t?t:"")?(_=o,58===e.charCodeAt(o)?(n=":",o++):(n=null,0===u&&s('":"')),null!==n&&null!==(r=he())?n=[n,r]:(n=null,o=_),null!==(n=null!==n?n:"")?(_=o,58===e.charCodeAt(o)?(r=":",o++):(r=null,0===u&&s('":"')),null!==r&&null!==(i=he())?r=[r,i]:(r=null,o=_),null!==(r=null!==r?r:"")?("::"===e.substr(o,2)?(i="::",o+=2):(i=null,0===u&&s('"::"')),null!==i&&null!==(l=he())?(58===e.charCodeAt(o)?(a=":",o++):(a=null,0===u&&s('":"')),null!==a&&null!==(c=pe())?y=[y,t,n,r,i,l,a,c]:(y=null,o=m)):(y=null,o=m)):(y=null,o=m)):(y=null,o=m)):(y=null,o=m)):(y=null,o=m),null===y&&(m=o,null!==(y=he())?(_=o,58===e.charCodeAt(o)?(t=":",o++):(t=null,0===u&&s('":"')),null!==t&&null!==(n=he())?t=[t,n]:(t=null,o=_),null!==(t=null!==t?t:"")?(_=o,58===e.charCodeAt(o)?(n=":",o++):(n=null,0===u&&s('":"')),null!==n&&null!==(r=he())?n=[n,r]:(n=null,o=_),null!==(n=null!==n?n:"")?(_=o,58===e.charCodeAt(o)?(r=":",o++):(r=null,0===u&&s('":"')),null!==r&&null!==(i=he())?r=[r,i]:(r=null,o=_),null!==(r=null!==r?r:"")?(_=o,58===e.charCodeAt(o)?(i=":",o++):(i=null,0===u&&s('":"')),null!==i&&null!==(l=he())?i=[i,l]:(i=null,o=_),null!==(i=null!==i?i:"")?("::"===e.substr(o,2)?(l="::",o+=2):(l=null,0===u&&s('"::"')),null!==l&&null!==(a=pe())?y=[y,t,n,r,i,l,a]:(y=null,o=m)):(y=null,o=m)):(y=null,o=m)):(y=null,o=m)):(y=null,o=m)):(y=null,o=m),null===y&&(m=o,null!==(y=he())?(_=o,58===e.charCodeAt(o)?(t=":",o++):(t=null,0===u&&s('":"')),null!==t&&null!==(n=he())?t=[t,n]:(t=null,o=_),null!==(t=null!==t?t:"")?(_=o,58===e.charCodeAt(o)?(n=":",o++):(n=null,0===u&&s('":"')),null!==n&&null!==(r=he())?n=[n,r]:(n=null,o=_),null!==(n=null!==n?n:"")?(_=o,58===e.charCodeAt(o)?(r=":",o++):(r=null,0===u&&s('":"')),null!==r&&null!==(i=he())?r=[r,i]:(r=null,o=_),null!==(r=null!==r?r:"")?(_=o,58===e.charCodeAt(o)?(i=":",o++):(i=null,0===u&&s('":"')),null!==i&&null!==(l=he())?i=[i,l]:(i=null,o=_),null!==(i=null!==i?i:"")?(_=o,58===e.charCodeAt(o)?(l=":",o++):(l=null,0===u&&s('":"')),null!==l&&null!==(a=he())?l=[l,a]:(l=null,o=_),null!==(l=null!==l?l:"")?("::"===e.substr(o,2)?(a="::",o+=2):(a=null,0===u&&s('"::"')),null!==a&&null!==(c=he())?y=[y,t,n,r,i,l,a,c]:(y=null,o=m)):(y=null,o=m)):(y=null,o=m)):(y=null,o=m)):(y=null,o=m)):(y=null,o=m)):(y=null,o=m),null===y&&(m=o,null!==(y=he())?(_=o,58===e.charCodeAt(o)?(t=":",o++):(t=null,0===u&&s('":"')),null!==t&&null!==(n=he())?t=[t,n]:(t=null,o=_),null!==(t=null!==t?t:"")?(_=o,58===e.charCodeAt(o)?(n=":",o++):(n=null,0===u&&s('":"')),null!==n&&null!==(r=he())?n=[n,r]:(n=null,o=_),null!==(n=null!==n?n:"")?(_=o,58===e.charCodeAt(o)?(r=":",o++):(r=null,0===u&&s('":"')),null!==r&&null!==(i=he())?r=[r,i]:(r=null,o=_),null!==(r=null!==r?r:"")?(_=o,58===e.charCodeAt(o)?(i=":",o++):(i=null,0===u&&s('":"')),null!==i&&null!==(l=he())?i=[i,l]:(i=null,o=_),null!==(i=null!==i?i:"")?(_=o,58===e.charCodeAt(o)?(l=":",o++):(l=null,0===u&&s('":"')),null!==l&&null!==(a=he())?l=[l,a]:(l=null,o=_),null!==(l=null!==l?l:"")?(_=o,58===e.charCodeAt(o)?(a=":",o++):(a=null,0===u&&s('":"')),null!==a&&null!==(c=he())?a=[a,c]:(a=null,o=_),null!==(a=null!==a?a:"")?("::"===e.substr(o,2)?(c="::",o+=2):(c=null,0===u&&s('"::"')),null!==c?y=[y,t,n,r,i,l,a,c]:(y=null,o=m)):(y=null,o=m)):(y=null,o=m)):(y=null,o=m)):(y=null,o=m)):(y=null,o=m)):(y=null,o=m)):(y=null,o=m))))))))))))))),null!==y&&(m=g,Hn.host_type="IPv6",y=e.substring(o,m)),null===y&&(o=g),y}function he(){var e,t,n,r=o,i=h();return null!==i&&null!==(e=null!==(e=h())?e:"")&&null!==(t=null!==(t=h())?t:"")&&null!==(n=null!==(n=h())?n:"")?i=[i,e,t,n]:(i=null,o=r),i}function pe(){var t,n,r=o,i=he();return null!==i?(58===e.charCodeAt(o)?(t=":",o++):(t=null,0===u&&s('":"')),null!==t&&null!==(n=he())?i=[i,t,n]:(i=null,o=r)):(i=null,o=r),null===i?ve():i}function ve(){var t,n,r,i,l,a,c=o,f=o,d=_e();return null!==d?(46===e.charCodeAt(o)?(t=".",o++):(t=null,0===u&&s('"."')),null!==t&&null!==(n=_e())?(46===e.charCodeAt(o)?(r=".",o++):(r=null,0===u&&s('"."')),null!==r&&null!==(i=_e())?(46===e.charCodeAt(o)?(l=".",o++):(l=null,0===u&&s('"."')),null!==l&&null!==(a=_e())?d=[d,t,n,r,i,l,a]:(d=null,o=f)):(d=null,o=f)):(d=null,o=f)):(d=null,o=f),null!==d&&(f=c,Hn.host_type="IPv4",d=e.substring(o,f)),null===d&&(o=c),d}function _e(){var t,n,r,i=o;return"25"===e.substr(o,2)?(t="25",o+=2):(t=null,0===u&&s('"25"')),null!==t?(/^[0-5]/.test(e.charAt(o))?(n=e.charAt(o),o++):(n=null,0===u&&s("[0-5]")),null!==n?t=[t,n]:(t=null,o=i)):(t=null,o=i),null===t&&(i=o,50===e.charCodeAt(o)?(t="2",o++):(t=null,0===u&&s('"2"')),null!==t?(/^[0-4]/.test(e.charAt(o))?(n=e.charAt(o),o++):(n=null,0===u&&s("[0-4]")),null!==n&&null!==(r=f())?t=[t,n,r]:(t=null,o=i)):(t=null,o=i),null===t&&(i=o,49===e.charCodeAt(o)?(t="1",o++):(t=null,0===u&&s('"1"')),null!==t&&null!==(n=f())&&null!==(r=f())?t=[t,n,r]:(t=null,o=i),null===t&&(i=o,/^[1-9]/.test(e.charAt(o))?(t=e.charAt(o),o++):(t=null,0===u&&s("[1-9]")),null!==t&&null!==(n=f())?t=[t,n]:(t=null,o=i),null===t&&(t=f())))),t}function ge(){var e,t,n,r,i=o,u=o,l=f();return null!==(l=null!==l?l:"")&&null!==(e=null!==(e=f())?e:"")&&null!==(t=null!==(t=f())?t:"")&&null!==(n=null!==(n=f())?n:"")&&null!==(r=null!==(r=f())?r:"")?l=[l,e,t,n,r]:(l=null,o=u),null!==l&&(u=l,u=parseInt(u.join("")),l=Hn.port=u),null===l&&(o=i),l}function me(){var t,n,r=[],i=o;for(59===e.charCodeAt(o)?(t=";",o++):(t=null,0===u&&s('";"')),null!==t&&null!==(n=ye())?t=[t,n]:(t=null,o=i);null!==t;)r.push(t),i=o,59===e.charCodeAt(o)?(t=";",o++):(t=null,0===u&&s('";"')),null!==t&&null!==(n=ye())?t=[t,n]:(t=null,o=i);return r}function ye(){var e=be();return null===e&&null===(e=Ce())&&null===(e=Se())&&null===(e=Te())&&null===(e=Ee())&&null===(e=Ae())?we():e}function be(){var t,n,r=o,i=o;return"transport="===e.substr(o,10).toLowerCase()?(t=e.substr(o,10),o+=10):(t=null,0===u&&s('"transport="')),null!==t?("udp"===e.substr(o,3).toLowerCase()?(n=e.substr(o,3),o+=3):(n=null,0===u&&s('"udp"')),null===n&&("tcp"===e.substr(o,3).toLowerCase()?(n=e.substr(o,3),o+=3):(n=null,0===u&&s('"tcp"')),null===n&&("sctp"===e.substr(o,4).toLowerCase()?(n=e.substr(o,4),o+=4):(n=null,0===u&&s('"sctp"')),null===n&&("tls"===e.substr(o,3).toLowerCase()?(n=e.substr(o,3),o+=3):(n=null,0===u&&s('"tls"')),null===n&&(n=P())))),null!==n?t=[t,n]:(t=null,o=i)):(t=null,o=i),null!==t&&(i=t[1],Hn.uri_params||(Hn.uri_params={}),t=void(Hn.uri_params.transport=i.toLowerCase())),null===t&&(o=r),t}function Ce(){var t,n,r=o,i=o;return"user="===e.substr(o,5).toLowerCase()?(t=e.substr(o,5),o+=5):(t=null,0===u&&s('"user="')),null!==t?("phone"===e.substr(o,5).toLowerCase()?(n=e.substr(o,5),o+=5):(n=null,0===u&&s('"phone"')),null===n&&("ip"===e.substr(o,2).toLowerCase()?(n=e.substr(o,2),o+=2):(n=null,0===u&&s('"ip"')),null===n&&(n=P())),null!==n?t=[t,n]:(t=null,o=i)):(t=null,o=i),null!==t&&(i=t[1],Hn.uri_params||(Hn.uri_params={}),t=void(Hn.uri_params.user=i.toLowerCase())),null===t&&(o=r),t}function Se(){var t,n,r=o,i=o;return"method="===e.substr(o,7).toLowerCase()?(t=e.substr(o,7),o+=7):(t=null,0===u&&s('"method="')),null!==t&&null!==(n=ct())?t=[t,n]:(t=null,o=i),null!==t&&(i=t[1],Hn.uri_params||(Hn.uri_params={}),t=void(Hn.uri_params.method=i)),null===t&&(o=r),t}function Te(){var t,n,r=o,i=o;return"ttl="===e.substr(o,4).toLowerCase()?(t=e.substr(o,4),o+=4):(t=null,0===u&&s('"ttl="')),null!==t&&null!==(n=An())?t=[t,n]:(t=null,o=i),null!==t&&(i=t[1],Hn.params||(Hn.params={}),t=void(Hn.params.ttl=i)),null===t&&(o=r),t}function Ee(){var t,n,r=o,i=o;return"maddr="===e.substr(o,6).toLowerCase()?(t=e.substr(o,6),o+=6):(t=null,0===u&&s('"maddr="')),null!==t&&null!==(n=le())?t=[t,n]:(t=null,o=i),null!==t&&(i=t[1],Hn.uri_params||(Hn.uri_params={}),t=void(Hn.uri_params.maddr=i)),null===t&&(o=r),t}function Ae(){var t,n,r,i,l=o,a=o;return"lr"===e.substr(o,2).toLowerCase()?(t=e.substr(o,2),o+=2):(t=null,0===u&&s('"lr"')),null!==t?(i=o,61===e.charCodeAt(o)?(n="=",o++):(n=null,0===u&&s('"="')),null!==n&&null!==(r=P())?n=[n,r]:(n=null,o=i),null!==(n=null!==n?n:"")?t=[t,n]:(t=null,o=a)):(t=null,o=a),null!==t&&(Hn.uri_params||(Hn.uri_params={}),t=void(Hn.uri_params.lr=void 0)),null===t&&(o=l),t}function we(){var t,n,r,i=o,l=o,a=Re();return null!==a?(n=o,61===e.charCodeAt(o)?(r="=",o++):(r=null,0===u&&s('"="')),null!==r&&null!==(t=Ie())?r=[r,t]:(r=null,o=n),null!==(r=null!==r?r:"")?a=[a,r]:(a=null,o=l)):(a=null,o=l),null!==a&&(r=a[0],l=a[1],Hn.uri_params||(Hn.uri_params={}),l=void 0===l?void 0:l[1],a=void(Hn.uri_params[r.toLowerCase()]=l)),null===a&&(o=i),a}function Re(){var e,t=o,n=Oe();if(null!==n)for(e=[];null!==n;)e.push(n),n=Oe();else e=null;return null===(e=null!==e?e.join(""):e)&&(o=t),e}function Ie(){var e,t=o,n=Oe();if(null!==n)for(e=[];null!==n;)e.push(n),n=Oe();else e=null;return null===(e=null!==e?e.join(""):e)&&(o=t),e}function Oe(){var e=ke();return null===e&&null===(e=C())?T():e}function ke(){var t;return 91===e.charCodeAt(o)?(t="[",o++):(t=null,0===u&&s('"["')),null===t&&(93===e.charCodeAt(o)?(t="]",o++):(t=null,0===u&&s('"]"')),null===t&&(47===e.charCodeAt(o)?(t="/",o++):(t=null,0===u&&s('"/"')),null===t&&(58===e.charCodeAt(o)?(t=":",o++):(t=null,0===u&&s('":"')),null===t&&(38===e.charCodeAt(o)?(t="&",o++):(t=null,0===u&&s('"&"')),null===t&&(43===e.charCodeAt(o)?(t="+",o++):(t=null,0===u&&s('"+"')),null===t&&(36===e.charCodeAt(o)?(t="$",o++):(t=null,0===u&&s('"$"')))))))),t}function Pe(){var t,n,r,i,l,a,c=o;if(63===e.charCodeAt(o)?(t="?",o++):(t=null,0===u&&s('"?"')),null!==t)if(null!==(n=xe())){for(r=[],a=o,38===e.charCodeAt(o)?(i="&",o++):(i=null,0===u&&s('"&"')),null!==i&&null!==(l=xe())?i=[i,l]:(i=null,o=a);null!==i;)r.push(i),a=o,38===e.charCodeAt(o)?(i="&",o++):(i=null,0===u&&s('"&"')),null!==i&&null!==(l=xe())?i=[i,l]:(i=null,o=a);null!==r?t=[t,n,r]:(t=null,o=c)}else t=null,o=c;else t=null,o=c;return t}function xe(){var t,n,r=o,i=o,l=De();return null!==l?(61===e.charCodeAt(o)?(t="=",o++):(t=null,0===u&&s('"="')),null!==t&&null!==(n=Me())?l=[l,t,n]:(l=null,o=i)):(l=null,o=i),null!==l&&(n=l[0],i=l[2],n=n.join("").toLowerCase(),i=i.join(""),Hn.uri_headers||(Hn.uri_headers={}),l=void(Hn.uri_headers[n]?Hn.uri_headers[n].push(i):Hn.uri_headers[n]=[i])),null===l&&(o=r),l}function De(){var e,t=Ne();if(null!==(t=null===t&&null===(t=C())?T():t))for(e=[];null!==t;)e.push(t),null===(t=Ne())&&null===(t=C())&&(t=T());else e=null;return e}function Me(){var e=[],t=Ne();for(null===t&&null===(t=C())&&(t=T());null!==t;)e.push(t),null===(t=Ne())&&null===(t=C())&&(t=T());return e}function Ne(){var t;return 91===e.charCodeAt(o)?(t="[",o++):(t=null,0===u&&s('"["')),null===t&&(93===e.charCodeAt(o)?(t="]",o++):(t=null,0===u&&s('"]"')),null===t&&(47===e.charCodeAt(o)?(t="/",o++):(t=null,0===u&&s('"/"')),null===t&&(63===e.charCodeAt(o)?(t="?",o++):(t=null,0===u&&s('"?"')),null===t&&(58===e.charCodeAt(o)?(t=":",o++):(t=null,0===u&&s('":"')),null===t&&(43===e.charCodeAt(o)?(t="+",o++):(t=null,0===u&&s('"+"')),null===t&&(36===e.charCodeAt(o)?(t="$",o++):(t=null,0===u&&s('"$"')))))))),t}function Le(){var e,t,n,r,i=o,u=ct();return null!==u&&null!==(e=g())&&null!==(t=Ue())&&null!==(n=g())&&null!==(r=et())?u=[u,e,t,n,r]:(u=null,o=i),u}function Ue(){var e=Q();return null===e?je():e}function je(){var t,n,r=o,i=Ke();return null!==i?(58===e.charCodeAt(o)?(t=":",o++):(t=null,0===u&&s('":"')),null!==t&&null!==(n=null===(n=Fe())?Ve():n)?i=[i,t,n]:(i=null,o=r)):(i=null,o=r),i}function Fe(){var t,n,r,i=o,l=qe();return null!==(l=null===l?He():l)?(r=o,63===e.charCodeAt(o)?(t="?",o++):(t=null,0===u&&s('"?"')),null!==t&&null!==(n=Ze())?t=[t,n]:(t=null,o=r),null!==(t=null!==t?t:"")?l=[l,t]:(l=null,o=i)):(l=null,o=i),l}function qe(){var t,n,r,i=o;return"//"===e.substr(o,2)?(t="//",o+=2):(t=null,0===u&&s('"//"')),null!==t&&null!==(n=Ye())&&null!==(r=null!==(r=He())?r:"")?t=[t,n,r]:(t=null,o=i),t}function He(){var t,n,r=o;return 47===e.charCodeAt(o)?(t="/",o++):(t=null,0===u&&s('"/"')),null!==t&&null!==(n=Be())?t=[t,n]:(t=null,o=r),t}function Ve(){var e,t,n=o,r=Ge();if(null!==r){for(e=[],t=We();null!==t;)e.push(t),t=We();null!==e?r=[r,e]:(r=null,o=n)}else r=null,o=n;return r}function We(){var e=b();return null===e&&null===(e=C())?T():e}function Ge(){var t=C();return null===t&&null===(t=T())&&(59===e.charCodeAt(o)?(t=";",o++):(t=null,0===u&&s('";"')),null===t&&(63===e.charCodeAt(o)?(t="?",o++):(t=null,0===u&&s('"?"')),null===t&&(58===e.charCodeAt(o)?(t=":",o++):(t=null,0===u&&s('":"')),null===t&&(64===e.charCodeAt(o)?(t="@",o++):(t=null,0===u&&s('"@"')),null===t&&(38===e.charCodeAt(o)?(t="&",o++):(t=null,0===u&&s('"&"')),null===t&&(61===e.charCodeAt(o)?(t="=",o++):(t=null,0===u&&s('"="')),null===t&&(43===e.charCodeAt(o)?(t="+",o++):(t=null,0===u&&s('"+"')),null===t&&(36===e.charCodeAt(o)?(t="$",o++):(t=null,0===u&&s('"$"')),null===t&&(44===e.charCodeAt(o)?(t=",",o++):(t=null,0===u&&s('","'))))))))))),t}function Be(){var t,n,r,i,l=o,a=ze();if(null!==a){for(t=[],i=o,47===e.charCodeAt(o)?(n="/",o++):(n=null,0===u&&s('"/"')),null!==n&&null!==(r=ze())?n=[n,r]:(n=null,o=i);null!==n;)t.push(n),i=o,47===e.charCodeAt(o)?(n="/",o++):(n=null,0===u&&s('"/"')),null!==n&&null!==(r=ze())?n=[n,r]:(n=null,o=i);null!==t?a=[a,t]:(a=null,o=l)}else a=null,o=l;return a}function ze(){for(var t,n,r,i=o,l=[],a=Je();null!==a;)l.push(a),a=Je();if(null!==l){for(a=[],r=o,59===e.charCodeAt(o)?(t=";",o++):(t=null,0===u&&s('";"')),null!==t&&null!==(n=$e())?t=[t,n]:(t=null,o=r);null!==t;)a.push(t),r=o,59===e.charCodeAt(o)?(t=";",o++):(t=null,0===u&&s('";"')),null!==t&&null!==(n=$e())?t=[t,n]:(t=null,o=r);null!==a?l=[l,a]:(l=null,o=i)}else l=null,o=i;return l}function $e(){for(var e=[],t=Je();null!==t;)e.push(t),t=Je();return e}function Je(){var t=C();return null===t&&null===(t=T())&&(58===e.charCodeAt(o)?(t=":",o++):(t=null,0===u&&s('":"')),null===t&&(64===e.charCodeAt(o)?(t="@",o++):(t=null,0===u&&s('"@"')),null===t&&(38===e.charCodeAt(o)?(t="&",o++):(t=null,0===u&&s('"&"')),null===t&&(61===e.charCodeAt(o)?(t="=",o++):(t=null,0===u&&s('"="')),null===t&&(43===e.charCodeAt(o)?(t="+",o++):(t=null,0===u&&s('"+"')),null===t&&(36===e.charCodeAt(o)?(t="$",o++):(t=null,0===u&&s('"$"')),null===t&&(44===e.charCodeAt(o)?(t=",",o++):(t=null,0===u&&s('","'))))))))),t}function Ke(){var t,n,r=o,i=o,l=d();if(null!==l){for(t=[],null===(n=d())&&null===(n=f())&&(43===e.charCodeAt(o)?(n="+",o++):(n=null,0===u&&s('"+"')),null===n&&(45===e.charCodeAt(o)?(n="-",o++):(n=null,0===u&&s('"-"')),null===n&&(46===e.charCodeAt(o)?(n=".",o++):(n=null,0===u&&s('"."')))));null!==n;)t.push(n),null===(n=d())&&null===(n=f())&&(43===e.charCodeAt(o)?(n="+",o++):(n=null,0===u&&s('"+"')),null===n&&(45===e.charCodeAt(o)?(n="-",o++):(n=null,0===u&&s('"-"')),null===n&&(46===e.charCodeAt(o)?(n=".",o++):(n=null,0===u&&s('"."')))));null!==t?l=[l,t]:(l=null,o=i)}else l=null,o=i;return null===(l=null!==l?void(Hn.scheme=e.substring(o,r)):l)&&(o=r),l}function Ye(){var e=Xe();return null===e?Qe():e}function Xe(){var t,n=o,r=o,i=ne();return null!==i?(64===e.charCodeAt(o)?(t="@",o++):(t=null,0===u&&s('"@"')),null!==t?i=[i,t]:(i=null,o=r)):(i=null,o=r),null!==(i=null!==i?i:"")&&null!==(t=ue())?i=[i,t]:(i=null,o=n),null!==i?i:""}function Qe(){var t,n=C();if(null===n&&null===(n=T())&&(36===e.charCodeAt(o)?(n="$",o++):(n=null,0===u&&s('"$"')),null===n&&(44===e.charCodeAt(o)?(n=",",o++):(n=null,0===u&&s('","')),null===n&&(59===e.charCodeAt(o)?(n=";",o++):(n=null,0===u&&s('";"')),null===n&&(58===e.charCodeAt(o)?(n=":",o++):(n=null,0===u&&s('":"')),null===n&&(64===e.charCodeAt(o)?(n="@",o++):(n=null,0===u&&s('"@"')),null===n&&(38===e.charCodeAt(o)?(n="&",o++):(n=null,0===u&&s('"&"')),null===n&&(61===e.charCodeAt(o)?(n="=",o++):(n=null,0===u&&s('"="')),null===n&&(43===e.charCodeAt(o)?(n="+",o++):(n=null,0===u&&s('"+"')))))))))),null!==n)for(t=[];null!==n;)t.push(n),null===(n=C())&&null===(n=T())&&(36===e.charCodeAt(o)?(n="$",o++):(n=null,0===u&&s('"$"')),null===n&&(44===e.charCodeAt(o)?(n=",",o++):(n=null,0===u&&s('","')),null===n&&(59===e.charCodeAt(o)?(n=";",o++):(n=null,0===u&&s('";"')),null===n&&(58===e.charCodeAt(o)?(n=":",o++):(n=null,0===u&&s('":"')),null===n&&(64===e.charCodeAt(o)?(n="@",o++):(n=null,0===u&&s('"@"')),null===n&&(38===e.charCodeAt(o)?(n="&",o++):(n=null,0===u&&s('"&"')),null===n&&(61===e.charCodeAt(o)?(n="=",o++):(n=null,0===u&&s('"="')),null===n&&(43===e.charCodeAt(o)?(n="+",o++):(n=null,0===u&&s('"+"'))))))))));else t=null;return t}function Ze(){for(var e=[],t=We();null!==t;)e.push(t),t=We();return e}function et(){var t,n,r,i,l,a,c=o,d=o;if("sip"===e.substr(o,3).toLowerCase()?(t=e.substr(o,3),o+=3):(t=null,0===u&&s('"SIP"')),null!==t)if(47===e.charCodeAt(o)?(n="/",o++):(n=null,0===u&&s('"/"')),null!==n){if(null!==(i=f()))for(r=[];null!==i;)r.push(i),i=f();else r=null;if(null!==r)if(46===e.charCodeAt(o)?(i=".",o++):(i=null,0===u&&s('"."')),null!==i){if(null!==(a=f()))for(l=[];null!==a;)l.push(a),a=f();else l=null;null!==l?t=[t,n,r,i,l]:(t=null,o=d)}else t=null,o=d;else t=null,o=d}else t=null,o=d;else t=null,o=d;return null===(t=null!==t?void(Hn.sip_version=e.substring(o,c)):t)&&(o=c),t}function tt(){var t;return"INVITE"===e.substr(o,6)?(t="INVITE",o+=6):(t=null,0===u&&s('"INVITE"')),t}function nt(){var t;return"ACK"===e.substr(o,3)?(t="ACK",o+=3):(t=null,0===u&&s('"ACK"')),t}function rt(){var t;return"OPTIONS"===e.substr(o,7)?(t="OPTIONS",o+=7):(t=null,0===u&&s('"OPTIONS"')),t}function it(){var t;return"BYE"===e.substr(o,3)?(t="BYE",o+=3):(t=null,0===u&&s('"BYE"')),t}function ot(){var t;return"CANCEL"===e.substr(o,6)?(t="CANCEL",o+=6):(t=null,0===u&&s('"CANCEL"')),t}function ut(){var t;return"REGISTER"===e.substr(o,8)?(t="REGISTER",o+=8):(t=null,0===u&&s('"REGISTER"')),t}function lt(){var t;return"SUBSCRIBE"===e.substr(o,9)?(t="SUBSCRIBE",o+=9):(t=null,0===u&&s('"SUBSCRIBE"')),t}function at(){var t;return"NOTIFY"===e.substr(o,6)?(t="NOTIFY",o+=6):(t=null,0===u&&s('"NOTIFY"')),t}function st(){var t;return"REFER"===e.substr(o,5)?(t="REFER",o+=5):(t=null,0===u&&s('"REFER"')),t}function ct(){var t=o,n=tt();return null!==(n=null===n&&null===(n=nt())&&null===(n=rt())&&null===(n=it())&&null===(n=ot())&&null===(n=ut())&&null===(n=lt())&&null===(n=at())&&null===(n=st())?P():n)&&(Hn.method=e.substring(o,t),n=Hn.method),null===n&&(o=t),n}function ft(){var e,t,n,r,i=o,u=et();return null!==u&&null!==(e=g())&&null!==(t=dt())&&null!==(n=g())&&null!==(r=pt())?u=[u,e,t,n,r]:(u=null,o=i),u}function dt(){var e,t=o,n=ht();return null!==n&&(e=n,n=void(Hn.status_code=parseInt(e.join("")))),null===n&&(o=t),n}function ht(){var e,t,n=o,r=f();return null!==r&&null!==(e=f())&&null!==(t=f())?r=[r,e,t]:(r=null,o=n),r}function pt(){var t=o,n=[],r=b();for(null===r&&null===(r=C())&&null===(r=T())&&null===(r=O())&&null===(r=k())&&null===(r=g())&&(r=m());null!==r;)n.push(r),null===(r=b())&&null===(r=C())&&null===(r=T())&&null===(r=O())&&null===(r=k())&&null===(r=g())&&(r=m());return null===(n=null!==n?void(Hn.reason_phrase=e.substring(o,t)):n)&&(o=t),n}function vt(){var e,t,n,r,i=o,u=o,l=X();if(null!==(l=null===l?_t():l)){for(e=[],r=o,null!==(t=V())&&null!==(n=mt())?t=[t,n]:(t=null,o=r);null!==t;)e.push(t),r=o,null!==(t=V())&&null!==(n=mt())?t=[t,n]:(t=null,o=r);null!==e?l=[l,e]:(l=null,o=u)}else l=null,o=u;return null===(l=null!==l?function(e){var t;Hn.multi_header||(Hn.multi_header=[]);try{t=new qn(Hn.uri,Hn.display_name,Hn.params),delete Hn.uri,delete Hn.display_name,delete Hn.params}catch(e){t=null}Hn.multi_header.push({possition:o,offset:e,parsed:t})}(i):l)&&(o=i),l}function _t(){var e,t,n,r=o,i=gt();return null!==(i=null!==i?i:"")&&null!==(e=q())&&null!==(t=Q())&&null!==(n=F())?i=[i,e,t,n]:(i=null,o=r),i}function gt(){var e,t,n,r,i=o,u=o,l=P();if(null!==l){for(e=[],r=o,null!==(t=E())&&null!==(n=P())?t=[t,n]:(t=null,o=r);null!==t;)e.push(t),r=o,null!==(t=E())&&null!==(n=P())?t=[t,n]:(t=null,o=r);null!==e?l=[l,e]:(l=null,o=u)}else l=null,o=u;return null!==(l=null===l?J():l)&&(u=l,l=void(Hn.display_name="string"==typeof u?u:u[1].reduce((function(e,t){return e+t[0]+t[1]}),u[0]))),null===l&&(o=i),l}function mt(){var e=yt();return null===e&&null===(e=bt())?Tt():e}function yt(){var t,n,r,i=o,l=o;return"q"===e.substr(o,1).toLowerCase()?(t=e.substr(o,1),o++):(t=null,0===u&&s('"q"')),null!==t&&null!==(n=L())&&null!==(r=St())?t=[t,n,r]:(t=null,o=l),null!==t&&(l=t[2],Hn.params||(Hn.params={}),t=void(Hn.params.q=l)),null===t&&(o=i),t}function bt(){var t,n,r,i=o,l=o;return"expires"===e.substr(o,7).toLowerCase()?(t=e.substr(o,7),o+=7):(t=null,0===u&&s('"expires"')),null!==t&&null!==(n=L())&&null!==(r=Ct())?t=[t,n,r]:(t=null,o=l),null!==t&&(l=t[2],Hn.params||(Hn.params={}),t=void(Hn.params.expires=l)),null===t&&(o=i),t}function Ct(){var e,t=o,n=f();if(null!==n)for(e=[];null!==n;)e.push(n),n=f();else e=null;return null===(e=null!==e?parseInt(e.join("")):e)&&(o=t),e}function St(){var t,n,r,i,l,a,c=o,d=o;return 48===e.charCodeAt(o)?(t="0",o++):(t=null,0===u&&s('"0"')),null!==t?(a=o,46===e.charCodeAt(o)?(n=".",o++):(n=null,0===u&&s('"."')),null!==n&&null!==(r=null!==(r=f())?r:"")&&null!==(i=null!==(i=f())?i:"")&&null!==(l=null!==(l=f())?l:"")?n=[n,r,i,l]:(n=null,o=a),null!==(n=null!==n?n:"")?t=[t,n]:(t=null,o=d)):(t=null,o=d),null===(t=null!==t?parseFloat(e.substring(o,c)):t)&&(o=c),t}function Tt(){var e,t,n,r=o,i=o,u=P();return null!==u?(t=o,null!==(n=L())&&null!==(e=Et())?n=[n,e]:(n=null,o=t),null!==(n=null!==n?n:"")?u=[u,n]:(u=null,o=i)):(u=null,o=i),null!==u&&(n=u[0],i=u[1],Hn.params||(Hn.params={}),i=void 0===i?void 0:i[1],u=void(Hn.params[n.toLowerCase()]=i)),null===u&&(o=r),u}function Et(){var e=P();return null===e&&null===(e=le())?$():e}function At(){var t;return"render"===e.substr(o,6).toLowerCase()?(t=e.substr(o,6),o+=6):(t=null,0===u&&s('"render"')),null===t&&("session"===e.substr(o,7).toLowerCase()?(t=e.substr(o,7),o+=7):(t=null,0===u&&s('"session"')),null===t&&("icon"===e.substr(o,4).toLowerCase()?(t=e.substr(o,4),o+=4):(t=null,0===u&&s('"icon"')),null===t&&("alert"===e.substr(o,5).toLowerCase()?(t=e.substr(o,5),o+=5):(t=null,0===u&&s('"alert"')),null===t&&(t=P())))),t}function wt(){var e=Rt();return null===e?Tt():e}function Rt(){var t,n,r,i=o;return"handling"===e.substr(o,8).toLowerCase()?(t=e.substr(o,8),o+=8):(t=null,0===u&&s('"handling"')),null!==t&&null!==(n=L())?("optional"===e.substr(o,8).toLowerCase()?(r=e.substr(o,8),o+=8):(r=null,0===u&&s('"optional"')),null===r&&("required"===e.substr(o,8).toLowerCase()?(r=e.substr(o,8),o+=8):(r=null,0===u&&s('"required"')),null===r&&(r=P())),null!==r?t=[t,n,r]:(t=null,o=i)):(t=null,o=i),t}function It(){var e,t,n,r,i,u,l=o,a=Ot();if(null!==a)if(null!==(e=N()))if(null!==(t=Mt())){for(n=[],u=o,null!==(r=V())&&null!==(i=Nt())?r=[r,i]:(r=null,o=u);null!==r;)n.push(r),u=o,null!==(r=V())&&null!==(i=Nt())?r=[r,i]:(r=null,o=u);null!==n?a=[a,e,t,n]:(a=null,o=l)}else a=null,o=l;else a=null,o=l;else a=null,o=l;return a}function Ot(){var e=kt();return null===e?Pt():e}function kt(){var t;return"text"===e.substr(o,4).toLowerCase()?(t=e.substr(o,4),o+=4):(t=null,0===u&&s('"text"')),null===t&&("image"===e.substr(o,5).toLowerCase()?(t=e.substr(o,5),o+=5):(t=null,0===u&&s('"image"')),null===t&&("audio"===e.substr(o,5).toLowerCase()?(t=e.substr(o,5),o+=5):(t=null,0===u&&s('"audio"')),null===t&&("video"===e.substr(o,5).toLowerCase()?(t=e.substr(o,5),o+=5):(t=null,0===u&&s('"video"')),null===t&&("application"===e.substr(o,11).toLowerCase()?(t=e.substr(o,11),o+=11):(t=null,0===u&&s('"application"')),null===t&&(t=xt()))))),t}function Pt(){var t;return"message"===e.substr(o,7).toLowerCase()?(t=e.substr(o,7),o+=7):(t=null,0===u&&s('"message"')),null===t&&("multipart"===e.substr(o,9).toLowerCase()?(t=e.substr(o,9),o+=9):(t=null,0===u&&s('"multipart"')),null===t&&(t=xt())),t}function xt(){var e=P();return null===e?Dt():e}function Dt(){var t,n,r=o;return"x-"===e.substr(o,2).toLowerCase()?(t=e.substr(o,2),o+=2):(t=null,0===u&&s('"x-"')),null!==t&&null!==(n=P())?t=[t,n]:(t=null,o=r),t}function Mt(){var e=xt();return null===e?P():e}function Nt(){var e,t,n=o,r=P();return null!==r&&null!==(e=L())&&null!==(t=Lt())?r=[r,e,t]:(r=null,o=n),r}function Lt(){var e=P();return null===e?$():e}function Ut(){var e,t,n=o,r=f();if(null!==r)for(e=[];null!==r;)e.push(r),r=f();else e=null;return null!==e&&(t=e,e=void(Hn.value=parseInt(t.join("")))),null===e&&(o=n),e}function jt(){var t,n,r,i,l=o,a=x();if(null!==a){for(t=[],i=o,46===e.charCodeAt(o)?(n=".",o++):(n=null,0===u&&s('"."')),null!==n&&null!==(r=x())?n=[n,r]:(n=null,o=i);null!==n;)t.push(n),i=o,46===e.charCodeAt(o)?(n=".",o++):(n=null,0===u&&s('"."')),null!==n&&null!==(r=x())?n=[n,r]:(n=null,o=i);null!==t?a=[a,t]:(a=null,o=l)}else a=null,o=l;return a}function Ft(){var e=qt();return null===e?Tt():e}function qt(){var t,n,r,i=o,l=o;return"tag"===e.substr(o,3).toLowerCase()?(t=e.substr(o,3),o+=3):(t=null,0===u&&s('"tag"')),null!==t&&null!==(n=L())&&null!==(r=P())?t=[t,n,r]:(t=null,o=l),null!==t&&(l=t[2],t=void(Hn.tag=l)),null===t&&(o=i),t}function Ht(){var t,n,r,i,l,a,c,f=o;if("digest"===e.substr(o,6).toLowerCase()?(t=e.substr(o,6),o+=6):(t=null,0===u&&s('"Digest"')),null!==t)if(null!==(n=E()))if(null!==(r=Gt())){for(i=[],c=o,null!==(l=H())&&null!==(a=Gt())?l=[l,a]:(l=null,o=c);null!==l;)i.push(l),c=o,null!==(l=H())&&null!==(a=Gt())?l=[l,a]:(l=null,o=c);null!==i?t=[t,n,r,i]:(t=null,o=f)}else t=null,o=f;else t=null,o=f;else t=null,o=f;return null===t?Vt():t}function Vt(){var e,t,n,r,i,u,l=o,a=P();if(null!==a)if(null!==(e=E()))if(null!==(t=Wt())){for(n=[],u=o,null!==(r=H())&&null!==(i=Wt())?r=[r,i]:(r=null,o=u);null!==r;)n.push(r),u=o,null!==(r=H())&&null!==(i=Wt())?r=[r,i]:(r=null,o=u);null!==n?a=[a,e,t,n]:(a=null,o=l)}else a=null,o=l;else a=null,o=l;else a=null,o=l;return a}function Wt(){var e,t,n=o,r=P();return null!==r&&null!==(e=L())&&null!==(t=null===(t=P())?$():t)?r=[r,e,t]:(r=null,o=n),r}function Gt(){var e=Bt();return null===e&&null===(e=$t())&&null===(e=Kt())&&null===(e=Xt())&&null===(e=Qt())&&null===(e=Zt())&&null===(e=en())?Wt():e}function Bt(){var t,n,r,i=o;return"realm"===e.substr(o,5).toLowerCase()?(t=e.substr(o,5),o+=5):(t=null,0===u&&s('"realm"')),null!==t&&null!==(n=L())&&null!==(r=zt())?t=[t,n,r]:(t=null,o=i),t}function zt(){var e,t=o,n=J();return null!==n&&(e=n,n=void(Hn.realm=e)),null===n&&(o=t),n}function $t(){var t,n,r,i,l,a,c,f,d=o;if("domain"===e.substr(o,6).toLowerCase()?(t=e.substr(o,6),o+=6):(t=null,0===u&&s('"domain"')),null!==t)if(null!==(n=L()))if(null!==(r=G()))if(null!==(i=Jt())){if(l=[],f=o,null!==(c=g()))for(a=[];null!==c;)a.push(c),c=g();else a=null;for(null!==a&&null!==(c=Jt())?a=[a,c]:(a=null,o=f);null!==a;){if(l.push(a),f=o,null!==(c=g()))for(a=[];null!==c;)a.push(c),c=g();else a=null;null!==a&&null!==(c=Jt())?a=[a,c]:(a=null,o=f)}null!==l&&null!==(a=B())?t=[t,n,r,i,l,a]:(t=null,o=d)}else t=null,o=d;else t=null,o=d;else t=null,o=d;else t=null,o=d;return t}function Jt(){var e=je();return null===e?He():e}function Kt(){var t,n,r,i=o;return"nonce"===e.substr(o,5).toLowerCase()?(t=e.substr(o,5),o+=5):(t=null,0===u&&s('"nonce"')),null!==t&&null!==(n=L())&&null!==(r=Yt())?t=[t,n,r]:(t=null,o=i),t}function Yt(){var e,t=o,n=J();return null!==n&&(e=n,n=void(Hn.nonce=e)),null===n&&(o=t),n}function Xt(){var t,n,r,i=o,l=o;return"opaque"===e.substr(o,6).toLowerCase()?(t=e.substr(o,6),o+=6):(t=null,0===u&&s('"opaque"')),null!==t&&null!==(n=L())&&null!==(r=J())?t=[t,n,r]:(t=null,o=l),null!==t&&(l=t[2],t=void(Hn.opaque=l)),null===t&&(o=i),t}function Qt(){var t,n,r,i,l=o;return"stale"===e.substr(o,5).toLowerCase()?(t=e.substr(o,5),o+=5):(t=null,0===u&&s('"stale"')),null!==t&&null!==(n=L())?(i=o,"true"===e.substr(o,4).toLowerCase()?(r=e.substr(o,4),o+=4):(r=null,0===u&&s('"true"')),null===(r=null!==r?void(Hn.stale=!0):r)&&(o=i),null===r&&(i=o,"false"===e.substr(o,5).toLowerCase()?(r=e.substr(o,5),o+=5):(r=null,0===u&&s('"false"')),null===(r=null!==r?void(Hn.stale=!1):r)&&(o=i)),null!==r?t=[t,n,r]:(t=null,o=l)):(t=null,o=l),t}function Zt(){var t,n,r,i=o,l=o;return"algorithm"===e.substr(o,9).toLowerCase()?(t=e.substr(o,9),o+=9):(t=null,0===u&&s('"algorithm"')),null!==t&&null!==(n=L())?("md5"===e.substr(o,3).toLowerCase()?(r=e.substr(o,3),o+=3):(r=null,0===u&&s('"MD5"')),null===r&&("md5-sess"===e.substr(o,8).toLowerCase()?(r=e.substr(o,8),o+=8):(r=null,0===u&&s('"MD5-sess"')),null===r&&(r=P())),null!==r?t=[t,n,r]:(t=null,o=l)):(t=null,o=l),null!==t&&(l=t[2],t=void(Hn.algorithm=l.toUpperCase())),null===t&&(o=i),t}function en(){var t,n,r,i,l,a,c,f,d,h=o;if("qop"===e.substr(o,3).toLowerCase()?(t=e.substr(o,3),o+=3):(t=null,0===u&&s('"qop"')),null!==t)if(null!==(n=L()))if(null!==(r=G())){if(f=o,null!==(i=tn())){for(l=[],d=o,44===e.charCodeAt(o)?(a=",",o++):(a=null,0===u&&s('","')),null!==a&&null!==(c=tn())?a=[a,c]:(a=null,o=d);null!==a;)l.push(a),d=o,44===e.charCodeAt(o)?(a=",",o++):(a=null,0===u&&s('","')),null!==a&&null!==(c=tn())?a=[a,c]:(a=null,o=d);null!==l?i=[i,l]:(i=null,o=f)}else i=null,o=f;null!==i&&null!==(l=B())?t=[t,n,r,i,l]:(t=null,o=h)}else t=null,o=h;else t=null,o=h;else t=null,o=h;return t}function tn(){var t,n,r=o;return"auth-int"===e.substr(o,8).toLowerCase()?(t=e.substr(o,8),o+=8):(t=null,0===u&&s('"auth-int"')),null===t&&("auth"===e.substr(o,4).toLowerCase()?(t=e.substr(o,4),o+=4):(t=null,0===u&&s('"auth"')),null===t&&(t=P())),null!==t&&(n=t,Hn.qop||(Hn.qop=[]),t=void Hn.qop.push(n.toLowerCase())),null===t&&(o=r),t}function nn(){var e,t,n,r,i=o,u=o,l=_t();if(null!==l){for(e=[],r=o,null!==(t=V())&&null!==(n=Tt())?t=[t,n]:(t=null,o=r);null!==t;)e.push(t),r=o,null!==(t=V())&&null!==(n=Tt())?t=[t,n]:(t=null,o=r);null!==e?l=[l,e]:(l=null,o=u)}else l=null,o=u;return null===(l=null!==l?function(e){var t;Hn.multi_header||(Hn.multi_header=[]);try{t=new qn(Hn.uri,Hn.display_name,Hn.params),delete Hn.uri,delete Hn.display_name,delete Hn.params}catch(e){t=null}Hn.multi_header.push({possition:o,offset:e,parsed:t})}(i):l)&&(o=i),l}function rn(){var e=on();return null===e?Tt():e}function on(){var t,n,r,i,l=o,a=o;if("cause"===e.substr(o,5).toLowerCase()?(t=e.substr(o,5),o+=5):(t=null,0===u&&s('"cause"')),null!==t)if(null!==(n=L())){if(null!==(i=f()))for(r=[];null!==i;)r.push(i),i=f();else r=null;null!==r?t=[t,n,r]:(t=null,o=a)}else t=null,o=a;else t=null,o=a;return null!==t&&(a=t[2],t=void(Hn.cause=parseInt(a.join("")))),null===t&&(o=l),t}function un(){var e,t,n,r,i=o,u=_t();if(null!==u){for(e=[],r=o,null!==(t=V())&&null!==(n=Tt())?t=[t,n]:(t=null,o=r);null!==t;)e.push(t),r=o,null!==(t=V())&&null!==(n=Tt())?t=[t,n]:(t=null,o=r);null!==e?u=[u,e]:(u=null,o=i)}else u=null,o=i;return u}function ln(){var t,n=o;return"active"===e.substr(o,6).toLowerCase()?(t=e.substr(o,6),o+=6):(t=null,0===u&&s('"active"')),null===t&&("pending"===e.substr(o,7).toLowerCase()?(t=e.substr(o,7),o+=7):(t=null,0===u&&s('"pending"')),null===t&&("terminated"===e.substr(o,10).toLowerCase()?(t=e.substr(o,10),o+=10):(t=null,0===u&&s('"terminated"')),null===t&&(t=P()))),null===(t=null!==t?void(Hn.state=e.substring(o,n)):t)&&(o=n),t}function an(){var t,n,r,i,l=o,a=o;return"reason"===e.substr(o,6).toLowerCase()?(t=e.substr(o,6),o+=6):(t=null,0===u&&s('"reason"')),null!==t&&null!==(n=L())&&null!==(r=sn())?t=[t,n,r]:(t=null,o=a),null===(t=null!==t?void(void 0!==(i=t[2])&&(Hn.reason=i)):t)&&(o=l),null===t&&(a=l=o,"expires"===e.substr(o,7).toLowerCase()?(t=e.substr(o,7),o+=7):(t=null,0===u&&s('"expires"')),null!==t&&null!==(n=L())&&null!==(r=Ct())?t=[t,n,r]:(t=null,o=a),null===(t=null!==t?void(void 0!==(i=t[2])&&(Hn.expires=i)):t)&&(o=l),null===t&&(a=l=o,"retry_after"===e.substr(o,11).toLowerCase()?(t=e.substr(o,11),o+=11):(t=null,0===u&&s('"retry_after"')),null!==t&&null!==(n=L())&&null!==(r=Ct())?t=[t,n,r]:(t=null,o=a),null===(t=null!==t?void(void 0!==(a=t[2])&&(Hn.retry_after=a)):t)&&(o=l),null===t&&(t=Tt()))),t}function sn(){var t;return"deactivated"===e.substr(o,11).toLowerCase()?(t=e.substr(o,11),o+=11):(t=null,0===u&&s('"deactivated"')),null===t&&("probation"===e.substr(o,9).toLowerCase()?(t=e.substr(o,9),o+=9):(t=null,0===u&&s('"probation"')),null===t&&("rejected"===e.substr(o,8).toLowerCase()?(t=e.substr(o,8),o+=8):(t=null,0===u&&s('"rejected"')),null===t&&("timeout"===e.substr(o,7).toLowerCase()?(t=e.substr(o,7),o+=7):(t=null,0===u&&s('"timeout"')),null===t&&("giveup"===e.substr(o,6).toLowerCase()?(t=e.substr(o,6),o+=6):(t=null,0===u&&s('"giveup"')),null===t&&("noresource"===e.substr(o,10).toLowerCase()?(t=e.substr(o,10),o+=10):(t=null,0===u&&s('"noresource"')),null===t&&("invariant"===e.substr(o,9).toLowerCase()?(t=e.substr(o,9),o+=9):(t=null,0===u&&s('"invariant"')),null===t&&(t=P()))))))),t}function cn(){var e=qt();return null===e?Tt():e}function fn(){var e,t,n,r,i,u,l=o,a=yn();if(null!==a)if(null!==(e=E()))if(null!==(t=Sn())){for(n=[],u=o,null!==(r=V())&&null!==(i=dn())?r=[r,i]:(r=null,o=u);null!==r;)n.push(r),u=o,null!==(r=V())&&null!==(i=dn())?r=[r,i]:(r=null,o=u);null!==n?a=[a,e,t,n]:(a=null,o=l)}else a=null,o=l;else a=null,o=l;else a=null,o=l;return a}function dn(){var e=hn();return null===e&&null===(e=pn())&&null===(e=vn())&&null===(e=_n())&&null===(e=gn())?Tt():e}function hn(){var t,n,r,i=o,l=o;return"ttl"===e.substr(o,3).toLowerCase()?(t=e.substr(o,3),o+=3):(t=null,0===u&&s('"ttl"')),null!==t&&null!==(n=L())&&null!==(r=An())?t=[t,n,r]:(t=null,o=l),null!==t&&(l=t[2],t=void(Hn.ttl=l)),null===t&&(o=i),t}function pn(){var t,n,r,i=o,l=o;return"maddr"===e.substr(o,5).toLowerCase()?(t=e.substr(o,5),o+=5):(t=null,0===u&&s('"maddr"')),null!==t&&null!==(n=L())&&null!==(r=le())?t=[t,n,r]:(t=null,o=l),null!==t&&(l=t[2],t=void(Hn.maddr=l)),null===t&&(o=i),t}function vn(){var t,n,r,i=o,l=o;return"received"===e.substr(o,8).toLowerCase()?(t=e.substr(o,8),o+=8):(t=null,0===u&&s('"received"')),null!==t&&null!==(n=L())&&null!==(r=null===(r=ve())?de():r)?t=[t,n,r]:(t=null,o=l),null!==t&&(l=t[2],t=void(Hn.received=l)),null===t&&(o=i),t}function _n(){var t,n,r,i=o,l=o;return"branch"===e.substr(o,6).toLowerCase()?(t=e.substr(o,6),o+=6):(t=null,0===u&&s('"branch"')),null!==t&&null!==(n=L())&&null!==(r=P())?t=[t,n,r]:(t=null,o=l),null!==t&&(l=t[2],t=void(Hn.branch=l)),null===t&&(o=i),t}function gn(){var t,n,r,i,l=o;return"rport"===e.substr(o,5).toLowerCase()?(t=e.substr(o,5),o+=5):(t=null,0===u&&s('"rport"')),null!==t?(i=o,null!==(n=L())&&null!==(r=mn())?n=[n,r]:(n=null,o=i),null!==(n=null!==n?n:"")?t=[t,n]:(t=null,o=l)):(t=null,o=l),t}function mn(){var e,t,n,r,i=o,u=o,l=f();return null!==(l=null!==l?l:"")&&null!==(e=null!==(e=f())?e:"")&&null!==(t=null!==(t=f())?t:"")&&null!==(n=null!==(n=f())?n:"")&&null!==(r=null!==(r=f())?r:"")?l=[l,e,t,n,r]:(l=null,o=u),null!==l&&(u=l,l=void(Hn.rport=parseInt(u.join("")))),null===l&&(o=i),l}function yn(){var e,t,n,r,i=o,u=bn();return null!==u&&null!==(e=N())&&null!==(t=P())&&null!==(n=N())&&null!==(r=Cn())?u=[u,e,t,n,r]:(u=null,o=i),u}function bn(){var t,n,r=o;return"sip"===e.substr(o,3).toLowerCase()?(t=e.substr(o,3),o+=3):(t=null,0===u&&s('"SIP"')),null!==(t=null===t?P():t)&&(n=t,t=void(Hn.protocol=n)),null===t&&(o=r),t}function Cn(){var t,n,r=o;return"udp"===e.substr(o,3).toLowerCase()?(t=e.substr(o,3),o+=3):(t=null,0===u&&s('"UDP"')),null===t&&("tcp"===e.substr(o,3).toLowerCase()?(t=e.substr(o,3),o+=3):(t=null,0===u&&s('"TCP"')),null===t&&("tls"===e.substr(o,3).toLowerCase()?(t=e.substr(o,3),o+=3):(t=null,0===u&&s('"TLS"')),null===t&&("sctp"===e.substr(o,4).toLowerCase()?(t=e.substr(o,4),o+=4):(t=null,0===u&&s('"SCTP"')),null===t&&(t=P())))),null!==t&&(n=t,t=void(Hn.transport=n)),null===t&&(o=r),t}function Sn(){var e,t,n,r=o,i=Tn();return null!==i?(n=o,null!==(e=W())&&null!==(t=En())?e=[e,t]:(e=null,o=n),null!==(e=null!==e?e:"")?i=[i,e]:(i=null,o=r)):(i=null,o=r),i}function Tn(){var t=o,n=ve();return null===(n=null!==(n=null===n&&null===(n=fe())?ae():n)?void(Hn.host=e.substring(o,t)):n)&&(o=t),n}function En(){var e,t,n,r,i=o,u=o,l=f();return null!==(l=null!==l?l:"")&&null!==(e=null!==(e=f())?e:"")&&null!==(t=null!==(t=f())?t:"")&&null!==(n=null!==(n=f())?n:"")&&null!==(r=null!==(r=f())?r:"")?l=[l,e,t,n,r]:(l=null,o=u),null!==l&&(u=l,l=void(Hn.port=parseInt(u.join("")))),null===l&&(o=i),l}function An(){var e,t,n=o,r=o,i=f();return null!==i&&null!==(e=null!==(e=f())?e:"")&&null!==(t=null!==(t=f())?t:"")?i=[i,e,t]:(i=null,o=r),null===(i=null!==i?parseInt(i.join("")):i)&&(o=n),i}function wn(){var e,t=o,n=Ct();return null!==n&&(e=n,n=void(Hn.expires=e)),null===n&&(o=t),n}function Rn(){var e=In();return null===e?Tt():e}function In(){var t,n,r,i=o,l=o;return"refresher"===e.substr(o,9).toLowerCase()?(t=e.substr(o,9),o+=9):(t=null,0===u&&s('"refresher"')),null!==t&&null!==(n=L())?("uac"===e.substr(o,3).toLowerCase()?(r=e.substr(o,3),o+=3):(r=null,0===u&&s('"uac"')),null===r&&("uas"===e.substr(o,3).toLowerCase()?(r=e.substr(o,3),o+=3):(r=null,0===u&&s('"uas"'))),null!==r?t=[t,n,r]:(t=null,o=l)):(t=null,o=l),null!==t&&(l=t[2],t=void(Hn.refresher=l.toLowerCase())),null===t&&(o=i),t}function On(){var e=[],t=I();for(null===t&&null===(t=k())&&(t=E());null!==t;)e.push(t),null===(t=I())&&null===(t=k())&&(t=E());return e}function kn(){var t,n,r,i,l,a,c,f,d=o,h=o,p=xn();return null!==p?(45===e.charCodeAt(o)?(t="-",o++):(t=null,0===u&&s('"-"')),null!==t&&null!==(n=Pn())?(45===e.charCodeAt(o)?(r="-",o++):(r=null,0===u&&s('"-"')),null!==r&&null!==(i=Pn())?(45===e.charCodeAt(o)?(l="-",o++):(l=null,0===u&&s('"-"')),null!==l&&null!==(a=Pn())?(45===e.charCodeAt(o)?(c="-",o++):(c=null,0===u&&s('"-"')),null!==c&&null!==(f=Dn())?p=[p,t,n,r,i,l,a,c,f]:(p=null,o=h)):(p=null,o=h)):(p=null,o=h)):(p=null,o=h)):(p=null,o=h),null!==p&&(p[0],p=void(Hn=e.substring(o+5,d))),null===p&&(o=d),p}function Pn(){var e,t,n,r=o,i=h();return null!==i&&null!==(e=h())&&null!==(t=h())&&null!==(n=h())?i=[i,e,t,n]:(i=null,o=r),i}function xn(){var e,t=o,n=Pn();return null!==n&&null!==(e=Pn())?n=[n,e]:(n=null,o=t),n}function Dn(){var e,t,n=o,r=Pn();return null!==r&&null!==(e=Pn())&&null!==(t=Pn())?r=[r,e,t]:(r=null,o=n),r}function Mn(){var t,n,r,i=o,l=o,a=D();return null!==a?(r=o,64===e.charCodeAt(o)?(t="@",o++):(t=null,0===u&&s('"@"')),null!==t&&null!==(n=D())?t=[t,n]:(t=null,o=r),null!==(t=null!==t?t:"")?a=[a,t]:(a=null,o=l)):(a=null,o=l),null===(a=null!==a?void(Hn.call_id=e.substring(o,i)):a)&&(o=i),a}function Nn(){var e=Ln();return null===e&&null===(e=Un())&&null===(e=jn())?Tt():e}function Ln(){var t,n,r,i=o,l=o;return"to-tag"===e.substr(o,6)?(t="to-tag",o+=6):(t=null,0===u&&s('"to-tag"')),null!==t&&null!==(n=L())&&null!==(r=P())?t=[t,n,r]:(t=null,o=l),null!==t&&(l=t[2],t=void(Hn.to_tag=l)),null===t&&(o=i),t}function Un(){var t,n,r,i=o,l=o;return"from-tag"===e.substr(o,8)?(t="from-tag",o+=8):(t=null,0===u&&s('"from-tag"')),null!==t&&null!==(n=L())&&null!==(r=P())?t=[t,n,r]:(t=null,o=l),null!==t&&(l=t[2],t=void(Hn.from_tag=l)),null===t&&(o=i),t}function jn(){var t,n=o;return"early-only"===e.substr(o,10)?(t="early-only",o+=10):(t=null,0===u&&s('"early-only"')),null===(t=null!==t?void(Hn.early_only=!0):t)&&(o=n),t}var Fn=n(112),qn=n(384),Hn={};if(null!==i[t]()&&o===e.length)return Hn;var Vn=Math.max(o,l),Wn=Vn<e.length?e.charAt(Vn):null;i=function(){for(var t=1,n=1,r=!1,i=0;i<Math.max(o,l);i++){var u=e.charAt(i);r="\n"===u?(r||t++,!(n=1)):"\r"===u||"\u2028"===u||"\u2029"===u?(t++,n=1,!0):(n++,!1)}return{line:t,column:n}}();return new this.SyntaxError(function(e){e.sort();for(var t=null,n=[],r=0;r<e.length;r++)e[r]!==t&&(n.push(e[r]),t=e[r]);return n}(a),Wn,Vn,i.line,i.column),-1},toSource:function(){return this._source}}).SyntaxError=function(e,t,n,i,o){this.name="SyntaxError",this.expected=e,this.found=t,this.message=function(e,t){var n;switch(e.length){case 0:n="end of input";break;case 1:n=e[0];break;default:n=e.slice(0,e.length-1).join(", ")+" or "+e[e.length-1]}return"Expected "+n+" but "+(t?r(t):"end of input")+" found."}(e,t),this.offset=n,this.line=i,this.column=o},e.SyntaxError.prototype=Error.prototype,e)},function(e,t,n){(function(e,r){var i;
/**
 * @license
 * Lodash <https://lodash.com/>
 * Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
 * Released under MIT license <https://lodash.com/license>
 * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
 * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 */(function(){var o,u,l="Expected a function",a="__lodash_hash_undefined__",s="__lodash_placeholder__",c=9007199254740991,f=4294967295,d=[["ary",128],["bind",1],["bindKey",2],["curry",8],["curryRight",16],["flip",512],["partial",32],["partialRight",64],["rearg",256]],h="[object Arguments]",p="[object Array]",v="[object Boolean]",_="[object Date]",g="[object Error]",m="[object Function]",y="[object GeneratorFunction]",b="[object Map]",C="[object Number]",S="[object Object]",T="[object Promise]",E="[object RegExp]",A="[object Set]",w="[object String]",R="[object Symbol]",I="[object WeakMap]",O="[object ArrayBuffer]",k="[object DataView]",P="[object Float32Array]",x="[object Float64Array]",D="[object Int8Array]",M="[object Int16Array]",N="[object Int32Array]",L="[object Uint8Array]",U="[object Uint8ClampedArray]",j="[object Uint16Array]",F="[object Uint32Array]",q=/\b__p \+= '';/g,H=/\b(__p \+=) '' \+/g,V=/(__e\(.*?\)|\b__t\)) \+\n'';/g,W=/&(?:amp|lt|gt|quot|#39);/g,G=/[&<>"']/g,B=RegExp(W.source),z=RegExp(G.source),$=/<%-([\s\S]+?)%>/g,J=/<%([\s\S]+?)%>/g,K=/<%=([\s\S]+?)%>/g,Y=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,X=/^\w*$/,Q=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Z=/[\\^$.*+?()[\]{}|]/g,ee=RegExp(Z.source),te=/^\s+/,ne=/\s/,re=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,ie=/\{\n\/\* \[wrapped with (.+)\] \*/,oe=/,? & /,ue=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,le=/[()=,{}\[\]\/\s]/,ae=/\\(\\)?/g,se=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,ce=/\w*$/,fe=/^[-+]0x[0-9a-f]+$/i,de=/^0b[01]+$/i,he=/^\[object .+?Constructor\]$/,pe=/^0o[0-7]+$/i,ve=/^(?:0|[1-9]\d*)$/,_e=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,ge=/($^)/,me=/['\n\r\u2028\u2029\\]/g,ye="\\ud800-\\udfff",be="["+ye+"]",Ce="["+(Pe="\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000")+"]",Se="["+(Je="\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff")+"]",Te="["+(xe="\\u2700-\\u27bf")+"]",Ee="["+(De="a-z\\xdf-\\xf6\\xf8-\\xff")+"]",Ae="\\ud83c[\\udffb-\\udfff]",we="[^"+ye+"]",Re="(?:\\ud83c[\\udde6-\\uddff]){2}",Ie="[\\ud800-\\udbff][\\udc00-\\udfff]",Oe="["+(Me="A-Z\\xc0-\\xd6\\xd8-\\xde")+"]",ke="(?:"+Ee+"|"+(u="[^"+ye+Pe+"\\d+"+xe+De+Me+"]")+")",Pe="(?:"+Oe+"|"+u+")",xe="(?:['’](?:d|ll|m|re|s|t|ve))?",De="(?:['’](?:D|LL|M|RE|S|T|VE))?",Me=(u="["+(Ke="\\ufe0e\\ufe0f")+"]?")+(Me="(?:"+Se+"|"+Ae+")?")+"(?:\\u200d(?:"+[we,Re,Ie].join("|")+")"+u+Me+")*",Ne=(Te="(?:"+[Te,Re,Ie].join("|")+")"+Me,be="(?:"+[we+Se+"?",Se,Re,Ie,be].join("|")+")",RegExp("['’]","g")),Le=RegExp(Se,"g"),Ue=RegExp(Ae+"(?="+Ae+")|"+be+Me,"g"),je=RegExp([Oe+"?"+Ee+"+"+xe+"(?="+[Ce,Oe,"$"].join("|")+")",Pe+"+"+De+"(?="+[Ce,Oe+ke,"$"].join("|")+")",Oe+"?"+ke+"+"+xe,Oe+"+"+De,"\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])","\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])","\\d+",Te].join("|"),"g"),Fe=RegExp("[\\u200d"+ye+Je+Ke+"]"),qe=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,He=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],Ve=-1,We={};We[P]=We[x]=We[D]=We[M]=We[N]=We[L]=We[U]=We[j]=We[F]=!0,We[h]=We[p]=We[O]=We[v]=We[k]=We[_]=We[g]=We[m]=We[b]=We[C]=We[S]=We[E]=We[A]=We[w]=We[I]=!1;var Ge={};Ge[h]=Ge[p]=Ge[O]=Ge[k]=Ge[v]=Ge[_]=Ge[P]=Ge[x]=Ge[D]=Ge[M]=Ge[N]=Ge[b]=Ge[C]=Ge[S]=Ge[E]=Ge[A]=Ge[w]=Ge[R]=Ge[L]=Ge[U]=Ge[j]=Ge[F]=!0,Ge[g]=Ge[m]=Ge[I]=!1;var Be={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},ze=parseFloat,$e=parseInt,Je="object"==typeof e&&e&&e.Object===Object&&e,Ke="object"==typeof self&&self&&self.Object===Object&&self,Ye=Je||Ke||Function("return this")(),Xe=(Ke=t&&!t.nodeType&&t)&&"object"==typeof r&&r&&!r.nodeType&&r,Qe=Xe&&Xe.exports===Ke,Ze=Qe&&Je.process,et=(Je=function(){try{var e=Xe&&Xe.require&&Xe.require("util").types;return e||Ze&&Ze.binding&&Ze.binding("util")}catch(e){}}())&&Je.isArrayBuffer,tt=Je&&Je.isDate,nt=Je&&Je.isMap,rt=Je&&Je.isRegExp,it=Je&&Je.isSet,ot=Je&&Je.isTypedArray;function ut(e,t,n){switch(n.length){case 0:return e.call(t);case 1:return e.call(t,n[0]);case 2:return e.call(t,n[0],n[1]);case 3:return e.call(t,n[0],n[1],n[2])}return e.apply(t,n)}function lt(e,t,n,r){for(var i=-1,o=null==e?0:e.length;++i<o;){var u=e[i];t(r,u,n(u),e)}return r}function at(e,t){for(var n=-1,r=null==e?0:e.length;++n<r&&!1!==t(e[n],n,e););return e}function st(e,t){for(var n=null==e?0:e.length;n--&&!1!==t(e[n],n,e););return e}function ct(e,t){for(var n=-1,r=null==e?0:e.length;++n<r;)if(!t(e[n],n,e))return!1;return!0}function ft(e,t){for(var n=-1,r=null==e?0:e.length,i=0,o=[];++n<r;){var u=e[n];t(u,n,e)&&(o[i++]=u)}return o}function dt(e,t){return!(null==e||!e.length)&&-1<St(e,t,0)}function ht(e,t,n){for(var r=-1,i=null==e?0:e.length;++r<i;)if(n(t,e[r]))return!0;return!1}function pt(e,t){for(var n=-1,r=null==e?0:e.length,i=Array(r);++n<r;)i[n]=t(e[n],n,e);return i}function vt(e,t){for(var n=-1,r=t.length,i=e.length;++n<r;)e[i+n]=t[n];return e}function _t(e,t,n,r){var i=-1,o=null==e?0:e.length;for(r&&o&&(n=e[++i]);++i<o;)n=t(n,e[i],i,e);return n}function gt(e,t,n,r){var i=null==e?0:e.length;for(r&&i&&(n=e[--i]);i--;)n=t(n,e[i],i,e);return n}function mt(e,t){for(var n=-1,r=null==e?0:e.length;++n<r;)if(t(e[n],n,e))return!0;return!1}var yt=wt("length");function bt(e,t,n){var r;return n(e,(function(e,n,i){if(t(e,n,i))return r=n,!1})),r}function Ct(e,t,n,r){for(var i=e.length,o=n+(r?1:-1);r?o--:++o<i;)if(t(e[o],o,e))return o;return-1}function St(e,t,n){return t==t?function(e,t,n){for(var r=n-1,i=e.length;++r<i;)if(e[r]===t)return r;return-1}(e,t,n):Ct(e,Et,n)}function Tt(e,t,n,r){for(var i=n-1,o=e.length;++i<o;)if(r(e[i],t))return i;return-1}function Et(e){return e!=e}function At(e,t){var n=null==e?0:e.length;return n?Ot(e,t)/n:NaN}function wt(e){return function(t){return null==t?o:t[e]}}function Rt(e){return function(t){return null==e?o:e[t]}}function It(e,t,n,r,i){return i(e,(function(e,i,o){n=r?(r=!1,e):t(n,e,i,o)})),n}function Ot(e,t){for(var n,r=-1,i=e.length;++r<i;){var u=t(e[r]);u!==o&&(n=n===o?u:n+u)}return n}function kt(e,t){for(var n=-1,r=Array(e);++n<e;)r[n]=t(n);return r}function Pt(e){return e&&e.slice(0,$t(e)+1).replace(te,"")}function xt(e){return function(t){return e(t)}}function Dt(e,t){return pt(t,(function(t){return e[t]}))}function Mt(e,t){return e.has(t)}function Nt(e,t){for(var n=-1,r=e.length;++n<r&&-1<St(t,e[n],0););return n}function Lt(e,t){for(var n=e.length;n--&&-1<St(t,e[n],0););return n}var Ut=Rt({"À":"A","Á":"A","Â":"A","Ã":"A","Ä":"A","Å":"A","à":"a","á":"a","â":"a","ã":"a","ä":"a","å":"a","Ç":"C","ç":"c","Ð":"D","ð":"d","È":"E","É":"E","Ê":"E","Ë":"E","è":"e","é":"e","ê":"e","ë":"e","Ì":"I","Í":"I","Î":"I","Ï":"I","ì":"i","í":"i","î":"i","ï":"i","Ñ":"N","ñ":"n","Ò":"O","Ó":"O","Ô":"O","Õ":"O","Ö":"O","Ø":"O","ò":"o","ó":"o","ô":"o","õ":"o","ö":"o","ø":"o","Ù":"U","Ú":"U","Û":"U","Ü":"U","ù":"u","ú":"u","û":"u","ü":"u","Ý":"Y","ý":"y","ÿ":"y","Æ":"Ae","æ":"ae","Þ":"Th","þ":"th","ß":"ss","Ā":"A","Ă":"A","Ą":"A","ā":"a","ă":"a","ą":"a","Ć":"C","Ĉ":"C","Ċ":"C","Č":"C","ć":"c","ĉ":"c","ċ":"c","č":"c","Ď":"D","Đ":"D","ď":"d","đ":"d","Ē":"E","Ĕ":"E","Ė":"E","Ę":"E","Ě":"E","ē":"e","ĕ":"e","ė":"e","ę":"e","ě":"e","Ĝ":"G","Ğ":"G","Ġ":"G","Ģ":"G","ĝ":"g","ğ":"g","ġ":"g","ģ":"g","Ĥ":"H","Ħ":"H","ĥ":"h","ħ":"h","Ĩ":"I","Ī":"I","Ĭ":"I","Į":"I","İ":"I","ĩ":"i","ī":"i","ĭ":"i","į":"i","ı":"i","Ĵ":"J","ĵ":"j","Ķ":"K","ķ":"k","ĸ":"k","Ĺ":"L","Ļ":"L","Ľ":"L","Ŀ":"L","Ł":"L","ĺ":"l","ļ":"l","ľ":"l","ŀ":"l","ł":"l","Ń":"N","Ņ":"N","Ň":"N","Ŋ":"N","ń":"n","ņ":"n","ň":"n","ŋ":"n","Ō":"O","Ŏ":"O","Ő":"O","ō":"o","ŏ":"o","ő":"o","Ŕ":"R","Ŗ":"R","Ř":"R","ŕ":"r","ŗ":"r","ř":"r","Ś":"S","Ŝ":"S","Ş":"S","Š":"S","ś":"s","ŝ":"s","ş":"s","š":"s","Ţ":"T","Ť":"T","Ŧ":"T","ţ":"t","ť":"t","ŧ":"t","Ũ":"U","Ū":"U","Ŭ":"U","Ů":"U","Ű":"U","Ų":"U","ũ":"u","ū":"u","ŭ":"u","ů":"u","ű":"u","ų":"u","Ŵ":"W","ŵ":"w","Ŷ":"Y","ŷ":"y","Ÿ":"Y","Ź":"Z","Ż":"Z","Ž":"Z","ź":"z","ż":"z","ž":"z","Ĳ":"IJ","ĳ":"ij","Œ":"Oe","œ":"oe","ŉ":"'n","ſ":"s"}),jt=Rt({"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"});function Ft(e){return"\\"+Be[e]}function qt(e){return Fe.test(e)}function Ht(e){var t=-1,n=Array(e.size);return e.forEach((function(e,r){n[++t]=[r,e]})),n}function Vt(e,t){return function(n){return e(t(n))}}function Wt(e,t){for(var n=-1,r=e.length,i=0,o=[];++n<r;){var u=e[n];u!==t&&u!==s||(e[n]=s,o[i++]=n)}return o}function Gt(e){var t=-1,n=Array(e.size);return e.forEach((function(e){n[++t]=e})),n}function Bt(e){return(qt(e)?function(e){for(var t=Ue.lastIndex=0;Ue.test(e);)++t;return t}:yt)(e)}function zt(e){return qt(e)?e.match(Ue)||[]:e.split("")}function $t(e){for(var t=e.length;t--&&ne.test(e.charAt(t)););return t}var Jt=Rt({"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"}),Kt=function e(t){var n=(t=null==t?Ye:Kt.defaults(Ye.Object(),t,Kt.pick(Ye,He))).Array,r=t.Date,i=t.Error,u=t.Function,ne=t.Math,ye=t.Object,be=t.RegExp,Ce=t.String,Se=t.TypeError,Te=n.prototype,Ee=u.prototype,Ae=ye.prototype,we=t["__core-js_shared__"],Re=Ee.toString,Ie=Ae.hasOwnProperty,Oe=0,ke=(Bl=/[^.]+$/.exec(we&&we.keys&&we.keys.IE_PROTO||""))?"Symbol(src)_1."+Bl:"",Pe=Ae.toString,xe=Re.call(ye),De=Ye._,Me=be("^"+Re.call(Ie).replace(Z,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Ue=Qe?t.Buffer:o,Fe=t.Symbol,Be=t.Uint8Array,Je=Ue?Ue.allocUnsafe:o,Ke=Vt(ye.getPrototypeOf,ye),Xe=ye.create,Ze=Ae.propertyIsEnumerable,yt=Te.splice,Rt=Fe?Fe.isConcatSpreadable:o,Yt=Fe?Fe.iterator:o,Xt=Fe?Fe.toStringTag:o,Qt=function(){try{var e=ro(ye,"defineProperty");return e({},"",{}),e}catch(e){}}(),Zt=t.clearTimeout!==Ye.clearTimeout&&t.clearTimeout,en=r&&r.now!==Ye.Date.now&&r.now,tn=t.setTimeout!==Ye.setTimeout&&t.setTimeout,nn=ne.ceil,rn=ne.floor,on=ye.getOwnPropertySymbols,un=Ue?Ue.isBuffer:o,ln=t.isFinite,an=Te.join,sn=Vt(ye.keys,ye),cn=ne.max,fn=ne.min,dn=r.now,hn=t.parseInt,pn=ne.random,vn=Te.reverse,_n=ro(t,"DataView"),gn=ro(t,"Map"),mn=ro(t,"Promise"),yn=ro(t,"Set"),bn=ro(t,"WeakMap"),Cn=ro(ye,"create"),Sn=bn&&new bn,Tn={},En=Po(_n),An=Po(gn),wn=Po(mn),Rn=Po(yn),In=Po(bn),On=Fe?Fe.prototype:o,kn=On?On.valueOf:o,Pn=On?On.toString:o;function xn(e){if(Ju(e)&&!Uu(e)&&!(e instanceof Un)){if(e instanceof Ln)return e;if(Ie.call(e,"__wrapped__"))return xo(e)}return new Ln(e)}var Dn=function(e){return $u(e)?Xe?Xe(e):(Mn.prototype=e,e=new Mn,Mn.prototype=o,e):{}};function Mn(){}function Nn(){}function Ln(e,t){this.__wrapped__=e,this.__actions__=[],this.__chain__=!!t,this.__index__=0,this.__values__=o}function Un(e){this.__wrapped__=e,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=f,this.__views__=[]}function jn(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function Fn(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function qn(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function Hn(e){var t=-1,n=null==e?0:e.length;for(this.__data__=new qn;++t<n;)this.add(e[t])}function Vn(e){e=this.__data__=new Fn(e),this.size=e.size}function Wn(e,t){var n,r=Uu(e),i=!r&&Lu(e),o=!r&&!i&&Hu(e),u=!r&&!i&&!o&&nl(e),l=r||i||o||u,a=l?kt(e.length,Ce):[],s=a.length;for(n in e)!t&&!Ie.call(e,n)||l&&("length"==n||o&&("offset"==n||"parent"==n)||u&&("buffer"==n||"byteLength"==n||"byteOffset"==n)||co(n,s))||a.push(n);return a}function Gn(e){var t=e.length;return t?e[qr(0,t-1)]:o}function Bn(e,t){return Ro(Ci(e),er(t,0,e.length))}function zn(e){return Ro(Ci(e))}function $n(e,t,n){(n===o||Du(e[t],n))&&(n!==o||t in e)||Qn(e,t,n)}function Jn(e,t,n){var r=e[t];Ie.call(e,t)&&Du(r,n)&&(n!==o||t in e)||Qn(e,t,n)}function Kn(e,t){for(var n=e.length;n--;)if(Du(e[n][0],t))return n;return-1}function Yn(e,t,n,r){return or(e,(function(e,i,o){t(r,e,n(e),o)})),r}function Xn(e,t){return e&&Si(t,El(t),e)}function Qn(e,t,n){"__proto__"==t&&Qt?Qt(e,t,{configurable:!0,enumerable:!0,value:n,writable:!0}):e[t]=n}function Zn(e,t){for(var r=-1,i=t.length,u=n(i),l=null==e;++r<i;)u[r]=l?o:yl(e,t[r]);return u}function er(e,t,n){return e==e&&(n!==o&&(e=e<=n?e:n),t!==o&&(e=t<=e?e:t)),e}function tr(e,t,n,r,i,u){var l,a=1&t,s=2&t,c=4&t;if((l=n?i?n(e,r,i,u):n(e):l)!==o)return l;if(!$u(e))return e;var f,d,p=Uu(e);if(p){if(l=function(e){var t=e.length,n=new e.constructor(t);return t&&"string"==typeof e[0]&&Ie.call(e,"index")&&(n.index=e.index,n.input=e.input),n}(e),!a)return Ci(e,l)}else{var g=uo(e);r=g==m||g==y;if(Hu(e))return vi(e,a);if(g==S||g==h||r&&!i){if(l=s||r?{}:ao(e),!a)return s?(r=f=e,d=(d=l)&&Si(r,Al(r),d),Si(f,oo(f),d)):(d=Xn(l,f=e),Si(f,io(f),d))}else{if(!Ge[g])return i?e:{};l=function(e,t,n){var r=e.constructor;switch(t){case O:return _i(e);case v:case _:return new r(+e);case k:return function(e,t){return t=t?_i(e.buffer):e.buffer,new e.constructor(t,e.byteOffset,e.byteLength)}(e,n);case P:case x:case D:case M:case N:case L:case U:case j:case F:return gi(e,n);case b:return new r;case C:case w:return new r(e);case E:return function(e){var t=new e.constructor(e.source,ce.exec(e));return t.lastIndex=e.lastIndex,t}(e);case A:return new r;case R:return function(e){return kn?ye(kn.call(e)):{}}(e)}}(e,g,a)}}if(a=(u=u||new Vn).get(e))return a;u.set(e,l),Zu(e)?e.forEach((function(r){l.add(tr(r,t,n,r,e,u))})):Ku(e)&&e.forEach((function(r,i){l.set(i,tr(r,t,n,i,e,u))}));var T=p?o:(c?s?Yi:Ki:s?Al:El)(e);return at(T||e,(function(r,i){T&&(r=e[i=r]),Jn(l,i,tr(r,t,n,i,e,u))})),l}function nr(e,t,n){var r=n.length;if(null==e)return!r;for(e=ye(e);r--;){var i=n[r],u=t[i],l=e[i];if(l===o&&!(i in e)||!u(l))return!1}return!0}function rr(e,t,n){if("function"!=typeof e)throw new Se(l);return To((function(){e.apply(o,n)}),t)}function ir(e,t,n,r){var i=-1,o=dt,u=!0,l=e.length,a=[],s=t.length;if(!l)return a;n&&(t=pt(t,xt(n))),r?(o=ht,u=!1):200<=t.length&&(o=Mt,u=!1,t=new Hn(t));e:for(;++i<l;){var c=e[i],f=null==n?c:n(c);c=r||0!==c?c:0;if(u&&f==f){for(var d=s;d--;)if(t[d]===f)continue e;a.push(c)}else o(t,f,r)||a.push(c)}return a}xn.templateSettings={escape:$,evaluate:J,interpolate:K,variable:"",imports:{_:xn}},(xn.prototype=Nn.prototype).constructor=xn,(Ln.prototype=Dn(Nn.prototype)).constructor=Ln,(Un.prototype=Dn(Nn.prototype)).constructor=Un,jn.prototype.clear=function(){this.__data__=Cn?Cn(null):{},this.size=0},jn.prototype.delete=function(e){return e=this.has(e)&&delete this.__data__[e],this.size-=e?1:0,e},jn.prototype.get=function(e){var t=this.__data__;if(Cn){var n=t[e];return n===a?o:n}return Ie.call(t,e)?t[e]:o},jn.prototype.has=function(e){var t=this.__data__;return Cn?t[e]!==o:Ie.call(t,e)},jn.prototype.set=function(e,t){var n=this.__data__;return this.size+=this.has(e)?0:1,n[e]=Cn&&t===o?a:t,this},Fn.prototype.clear=function(){this.__data__=[],this.size=0},Fn.prototype.delete=function(e){var t=this.__data__;return!((e=Kn(t,e))<0||(e==t.length-1?t.pop():yt.call(t,e,1),--this.size,0))},Fn.prototype.get=function(e){var t=this.__data__;return(e=Kn(t,e))<0?o:t[e][1]},Fn.prototype.has=function(e){return-1<Kn(this.__data__,e)},Fn.prototype.set=function(e,t){var n=this.__data__,r=Kn(n,e);return r<0?(++this.size,n.push([e,t])):n[r][1]=t,this},qn.prototype.clear=function(){this.size=0,this.__data__={hash:new jn,map:new(gn||Fn),string:new jn}},qn.prototype.delete=function(e){return e=to(this,e).delete(e),this.size-=e?1:0,e},qn.prototype.get=function(e){return to(this,e).get(e)},qn.prototype.has=function(e){return to(this,e).has(e)},qn.prototype.set=function(e,t){var n=to(this,e),r=n.size;return n.set(e,t),this.size+=n.size==r?0:1,this},Hn.prototype.add=Hn.prototype.push=function(e){return this.__data__.set(e,a),this},Hn.prototype.has=function(e){return this.__data__.has(e)},Vn.prototype.clear=function(){this.__data__=new Fn,this.size=0},Vn.prototype.delete=function(e){var t=this.__data__;e=t.delete(e);return this.size=t.size,e},Vn.prototype.get=function(e){return this.__data__.get(e)},Vn.prototype.has=function(e){return this.__data__.has(e)},Vn.prototype.set=function(e,t){var n=this.__data__;if(n instanceof Fn){var r=n.__data__;if(!gn||r.length<199)return r.push([e,t]),this.size=++n.size,this;n=this.__data__=new qn(r)}return n.set(e,t),this.size=n.size,this};var or=Ai(hr),ur=Ai(pr,!0);function lr(e,t){var n=!0;return or(e,(function(e,r,i){return n=!!t(e,r,i)})),n}function ar(e,t,n){for(var r=-1,i=e.length;++r<i;){var u,l,a=e[r],s=t(a);null!=s&&(u===o?s==s&&!tl(s):n(s,u))&&(u=s,l=a)}return l}function sr(e,t){var n=[];return or(e,(function(e,r,i){t(e,r,i)&&n.push(e)})),n}function cr(e,t,n,r,i){var o=-1,u=e.length;for(n=n||so,i=i||[];++o<u;){var l=e[o];0<t&&n(l)?1<t?cr(l,t-1,n,r,i):vt(i,l):r||(i[i.length]=l)}return i}var fr=wi(),dr=wi(!0);function hr(e,t){return e&&fr(e,t,El)}function pr(e,t){return e&&dr(e,t,El)}function vr(e,t){return ft(t,(function(t){return Gu(e[t])}))}function _r(e,t){for(var n=0,r=(t=fi(t,e)).length;null!=e&&n<r;)e=e[ko(t[n++])];return n&&n==r?e:o}function gr(e,t,n){return t=t(e),Uu(e)?t:vt(t,n(e))}function mr(e){return null==e?e===o?"[object Undefined]":"[object Null]":Xt&&Xt in ye(e)?function(e){var t=Ie.call(e,Xt),n=e[Xt];try{e[Xt]=o;var r=!0}catch(e){}var i=Pe.call(e);return r&&(t?e[Xt]=n:delete e[Xt]),i}(e):Pe.call(e)}function yr(e,t){return t<e}function br(e,t){return null!=e&&Ie.call(e,t)}function Cr(e,t){return null!=e&&t in ye(e)}function Sr(e,t,r){for(var i=r?ht:dt,u=e[0].length,l=e.length,a=l,s=n(l),c=1/0,f=[];a--;){var d=e[a];a&&t&&(d=pt(d,xt(t))),c=fn(d.length,c),s[a]=!r&&(t||120<=u&&120<=d.length)?new Hn(a&&d):o}d=e[0];var h=-1,p=s[0];e:for(;++h<u&&f.length<c;){var v=d[h],_=t?t(v):v;v=r||0!==v?v:0;if(!(p?Mt(p,_):i(f,_,r))){for(a=l;--a;){var g=s[a];if(!(g?Mt(g,_):i(e[a],_,r)))continue e}p&&p.push(_),f.push(v)}}return f}function Tr(e,t,n){return null==(t=null==(e=bo(e,t=fi(t,e)))?e:e[ko(Wo(t))])?o:ut(t,e,n)}function Er(e){return Ju(e)&&mr(e)==h}function Ar(e,t,n,r,i){return e===t||(null==e||null==t||!Ju(e)&&!Ju(t)?e!=e&&t!=t:function(e,t,n,r,i,u){var l=Uu(e),a=Uu(t),s=l?p:uo(e),c=a?p:uo(t),f=(s=s==h?S:s)==S;a=(c=c==h?S:c)==S;if((c=s==c)&&Hu(e)){if(!Hu(t))return!1;f=!(l=!0)}return c&&!f?(u=u||new Vn,l||nl(e)?$i(e,t,n,r,i,u):function(e,t,n,r,i,o,u){switch(n){case k:if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case O:return!(e.byteLength!=t.byteLength||!o(new Be(e),new Be(t)));case v:case _:case C:return Du(+e,+t);case g:return e.name==t.name&&e.message==t.message;case E:case w:return e==t+"";case b:var l=Ht;case A:var a=1&r;return l=l||Gt,e.size==t.size||a?(a=u.get(e))?a==t:(r|=2,u.set(e,t),l=$i(l(e),l(t),r,i,o,u),u.delete(e),l):!1;case R:if(kn)return kn.call(e)==kn.call(t)}return!1}(e,t,s,n,r,i,u)):1&n||(f=f&&Ie.call(e,"__wrapped__"),a=a&&Ie.call(t,"__wrapped__"),!f&&!a)?c&&function(e,t,n,r,i,u){var l=1&n,a=Ki(e),s=a.length;if(s!=(h=Ki(t).length)&&!l)return!1;for(var c=s;c--;){var f=a[c];if(!(l?f in t:Ie.call(t,f)))return!1}var d=u.get(e),h=u.get(t);if(d&&h)return d==t&&h==e;var p=!0;u.set(e,t),u.set(t,e);for(var v=l;++c<s;){var _,g=e[f=a[c]],m=t[f];if(!((_=r?l?r(m,g,f,t,e,u):r(g,m,f,e,t,u):_)===o?g===m||i(g,m,n,r,u):_)){p=!1;break}v=v||"constructor"==f}return p&&!v&&((d=e.constructor)!=(h=t.constructor)&&"constructor"in e&&"constructor"in t&&!("function"==typeof d&&d instanceof d&&"function"==typeof h&&h instanceof h)&&(p=!1)),u.delete(e),u.delete(t),p}(e,t,n,r,i,u=u||new Vn):i(f=f?e.value():e,a=a?t.value():t,n,r,u=u||new Vn)}(e,t,n,r,Ar,i))}function wr(e,t,n,r){var i=n.length,u=i,l=!r;if(null==e)return!u;for(e=ye(e);i--;){var a=n[i];if(l&&a[2]?a[1]!==e[a[0]]:!(a[0]in e))return!1}for(;++i<u;){var s=(a=n[i])[0],c=e[s],f=a[1];if(l&&a[2]){if(c===o&&!(s in e))return!1}else{var d,h=new Vn;if(!((d=r?r(c,f,s,e,t,h):d)===o?Ar(f,c,3,r,h):d))return!1}}return!0}function Rr(e){return!(!$u(e)||(t=e,ke&&ke in t))&&(Gu(e)?Me:he).test(Po(e));var t}function Ir(e){return"function"==typeof e?e:null==e?$l:"object"==typeof e?Uu(e)?Dr(e[0],e[1]):xr(e):Xl(e)}function Or(e){if(!_o(e))return sn(e);var t,n=[];for(t in ye(e))Ie.call(e,t)&&"constructor"!=t&&n.push(t);return n}function kr(e,t){return e<t}function Pr(e,t){var r=-1,i=Fu(e)?n(e.length):[];return or(e,(function(e,n,o){i[++r]=t(e,n,o)})),i}function xr(e){var t=no(e);return 1==t.length&&t[0][2]?mo(t[0][0],t[0][1]):function(n){return n===e||wr(n,e,t)}}function Dr(e,t){return ho(e)&&go(t)?mo(ko(e),t):function(n){var r=yl(n,e);return r===o&&r===t?bl(n,e):Ar(t,r,3)}}function Mr(e,t,n,r,i){e!==t&&fr(t,(function(u,l){var a,s,c,f,d,h,p,v,_,g,m,y,b;i=i||new Vn,$u(u)?(s=t,f=n,d=Mr,h=r,p=i,m=Co(a=e,c=l),y=Co(s,c),(b=p.get(y))?$n(a,c,b):((_=(v=h?h(m,y,c+"",a,s,p):o)===o)&&(b=!(g=Uu(y))&&Hu(y),s=!g&&!b&&nl(y),v=y,g||b||s?v=Uu(m)?m:qu(m)?Ci(m):b?vi(y,!(_=!1)):s?gi(y,!(_=!1)):[]:Xu(y)||Lu(y)?Lu(v=m)?v=cl(m):$u(m)&&!Gu(m)||(v=ao(y)):_=!1),_&&(p.set(y,v),d(v,y,f,h,p),p.delete(y)),$n(a,c,v))):(v=r?r(Co(e,l),u,l+"",e,t,i):o,$n(e,l,v=v===o?u:v))}),Al)}function Nr(e,t){var n=e.length;if(n)return co(t+=t<0?n:0,n)?e[t]:o}function Lr(e,t,n){t=t.length?pt(t,(function(e){return Uu(e)?function(t){return _r(t,1===e.length?e[0]:e)}:e})):[$l];var r=-1;return t=pt(t,xt(eo())),function(e,t){var n=e.length;for(e.sort(t);n--;)e[n]=e[n].value;return e}(Pr(e,(function(e,n,i){return{criteria:pt(t,(function(t){return t(e)})),index:++r,value:e}})),(function(e,t){return function(e,t,n){for(var r=-1,i=e.criteria,o=t.criteria,u=i.length,l=n.length;++r<u;){var a=mi(i[r],o[r]);if(a)return l<=r?a:a*("desc"==n[r]?-1:1)}return e.index-t.index}(e,t,n)}))}function Ur(e,t,n){for(var r=-1,i=t.length,o={};++r<i;){var u=t[r],l=_r(e,u);n(l,u)&&Br(o,fi(u,e),l)}return o}function jr(e,t,n,r){var i=r?Tt:St,o=-1,u=t.length,l=e;for(e===t&&(t=Ci(t)),n&&(l=pt(e,xt(n)));++o<u;)for(var a=0,s=t[o],c=n?n(s):s;-1<(a=i(l,c,a,r));)l!==e&&yt.call(l,a,1),yt.call(e,a,1);return e}function Fr(e,t){for(var n=e?t.length:0,r=n-1;n--;){var i,o=t[n];n!=r&&o===i||(co(i=o)?yt.call(e,o,1):ri(e,o))}return e}function qr(e,t){return e+rn(pn()*(t-e+1))}function Hr(e,t){var n="";if(!e||t<1||c<t)return n;for(;t%2&&(n+=e),(t=rn(t/2))&&(e+=e),t;);return n}function Vr(e,t){return Eo(yo(e,t,$l),e+"")}function Wr(e){return Gn(Dl(e))}function Gr(e,t){return Ro(e=Dl(e),er(t,0,e.length))}function Br(e,t,n,r){if(!$u(e))return e;for(var i=-1,u=(t=fi(t,e)).length,l=u-1,a=e;null!=a&&++i<u;){var s,c=ko(t[i]),f=n;if("__proto__"===c||"constructor"===c||"prototype"===c)return e;i!=l&&(s=a[c],(f=r?r(s,c,a):o)===o&&(f=$u(s)?s:co(t[i+1])?[]:{})),Jn(a,c,f),a=a[c]}return e}var zr=Sn?function(e,t){return Sn.set(e,t),e}:$l,$r=Qt?function(e,t){return Qt(e,"toString",{configurable:!0,enumerable:!1,value:zl(t),writable:!0})}:$l;function Jr(e){return Ro(Dl(e))}function Kr(e,t,r){var i=-1,o=e.length;(r=o<r?o:r)<0&&(r+=o),o=r<(t=t<0?o<-t?0:o+t:t)?0:r-t>>>0,t>>>=0;for(var u=n(o);++i<o;)u[i]=e[i+t];return u}function Yr(e,t){var n;return or(e,(function(e,r,i){return!(n=t(e,r,i))})),!!n}function Xr(e,t,n){var r=0,i=null==e?r:e.length;if("number"==typeof t&&t==t&&i<=2147483647){for(;r<i;){var o=r+i>>>1,u=e[o];null!==u&&!tl(u)&&(n?u<=t:u<t)?r=1+o:i=o}return i}return Qr(e,t,$l,n)}function Qr(e,t,n,r){var i=0,u=null==e?0:e.length;if(0===u)return 0;for(var l=(t=n(t))!=t,a=null===t,s=tl(t),c=t===o;i<u;){var f,d=rn((i+u)/2),h=(f=n(e[d]))!==o,p=null===f,v=f==f,_=tl(f);(f=l?r||v:c?v&&(r||h):a?v&&h&&(r||!p):s?v&&h&&!p&&(r||!_):!p&&!_&&(r?f<=t:f<t))?i=d+1:u=d}return fn(u,4294967294)}function Zr(e,t){for(var n=-1,r=e.length,i=0,o=[];++n<r;){var u,l=e[n],a=t?t(l):l;n&&Du(a,u)||(u=a,o[i++]=0===l?0:l)}return o}function ei(e){return"number"==typeof e?e:tl(e)?NaN:+e}function ti(e){if("string"==typeof e)return e;if(Uu(e))return pt(e,ti)+"";if(tl(e))return Pn?Pn.call(e):"";var t=e+"";return"0"==t&&1/e==-1/0?"-0":t}function ni(e,t,n){var r=-1,i=dt,o=e.length,u=!0,l=[],a=l;if(n)u=!1,i=ht;else if(200<=o){var s=t?null:Hi(e);if(s)return Gt(s);u=!1,i=Mt,a=new Hn}else a=t?[]:l;e:for(;++r<o;){var c=e[r],f=t?t(c):c;c=n||0!==c?c:0;if(u&&f==f){for(var d=a.length;d--;)if(a[d]===f)continue e;t&&a.push(f),l.push(c)}else i(a,f,n)||(a!==l&&a.push(f),l.push(c))}return l}function ri(e,t){return null==(e=bo(e,t=fi(t,e)))||delete e[ko(Wo(t))]}function ii(e,t,n,r){return Br(e,t,n(_r(e,t)),r)}function oi(e,t,n,r){for(var i=e.length,o=r?i:-1;(r?o--:++o<i)&&t(e[o],o,e););return n?Kr(e,r?0:o,r?o+1:i):Kr(e,r?o+1:0,r?i:o)}function ui(e,t){var n=e;return _t(t,(function(e,t){return t.func.apply(t.thisArg,vt([e],t.args))}),n=e instanceof Un?e.value():n)}function li(e,t,r){var i=e.length;if(i<2)return i?ni(e[0]):[];for(var o=-1,u=n(i);++o<i;)for(var l=e[o],a=-1;++a<i;)a!=o&&(u[o]=ir(u[o]||l,e[a],t,r));return ni(cr(u,1),t,r)}function ai(e,t,n){for(var r=-1,i=e.length,u=t.length,l={};++r<i;){var a=r<u?t[r]:o;n(l,e[r],a)}return l}function si(e){return qu(e)?e:[]}function ci(e){return"function"==typeof e?e:$l}function fi(e,t){return Uu(e)?e:ho(e,t)?[e]:Oo(fl(e))}var di=Vr;function hi(e,t,n){var r=e.length;return n=n===o?r:n,!t&&r<=n?e:Kr(e,t,n)}var pi=Zt||function(e){return Ye.clearTimeout(e)};function vi(e,t){return t?e.slice():(t=e.length,t=Je?Je(t):new e.constructor(t),e.copy(t),t)}function _i(e){var t=new e.constructor(e.byteLength);return new Be(t).set(new Be(e)),t}function gi(e,t){return t=t?_i(e.buffer):e.buffer,new e.constructor(t,e.byteOffset,e.length)}function mi(e,t){if(e!==t){var n=e!==o,r=null===e,i=e==e,u=tl(e),l=t!==o,a=null===t,s=t==t,c=tl(t);if(!a&&!c&&!u&&t<e||u&&l&&s&&!a&&!c||r&&l&&s||!n&&s||!i)return 1;if(!r&&!u&&!c&&e<t||c&&n&&i&&!r&&!u||a&&n&&i||!l&&i||!s)return-1}return 0}function yi(e,t,r,i){for(var o=-1,u=e.length,l=r.length,a=-1,s=t.length,c=cn(u-l,0),f=n(s+c),d=!i;++a<s;)f[a]=t[a];for(;++o<l;)(d||o<u)&&(f[r[o]]=e[o]);for(;c--;)f[a++]=e[o++];return f}function bi(e,t,r,i){for(var o=-1,u=e.length,l=-1,a=r.length,s=-1,c=t.length,f=cn(u-a,0),d=n(f+c),h=!i;++o<f;)d[o]=e[o];for(var p=o;++s<c;)d[p+s]=t[s];for(;++l<a;)(h||o<u)&&(d[p+r[l]]=e[o++]);return d}function Ci(e,t){var r=-1,i=e.length;for(t=t||n(i);++r<i;)t[r]=e[r];return t}function Si(e,t,n,r){var i=!n;n=n||{};for(var u=-1,l=t.length;++u<l;){var a=t[u],s=r?r(n[a],e[a],a,n,e):o;(i?Qn:Jn)(n,a,s=s===o?e[a]:s)}return n}function Ti(e,t){return function(n,r){var i=Uu(n)?lt:Yn,o=t?t():{};return i(n,e,eo(r,2),o)}}function Ei(e){return Vr((function(t,n){var r=-1,i=n.length,u=1<i?n[i-1]:o,l=2<i?n[2]:o;u=3<e.length&&"function"==typeof u?(i--,u):o;for(l&&fo(n[0],n[1],l)&&(u=i<3?o:u,i=1),t=ye(t);++r<i;){var a=n[r];a&&e(t,a,r,u)}return t}))}function Ai(e,t){return function(n,r){if(null==n)return n;if(!Fu(n))return e(n,r);for(var i=n.length,o=t?i:-1,u=ye(n);(t?o--:++o<i)&&!1!==r(u[o],o,u););return n}}function wi(e){return function(t,n,r){for(var i=-1,o=ye(t),u=r(t),l=u.length;l--;){var a=u[e?l:++i];if(!1===n(o[a],a,o))break}return t}}function Ri(e){return function(t){var n=qt(t=fl(t))?zt(t):o,r=n?n[0]:t.charAt(0);t=n?hi(n,1).join(""):t.slice(1);return r[e]()+t}}function Ii(e){return function(t){return _t(Wl(Ll(t).replace(Ne,"")),e,"")}}function Oi(e){return function(){var t=arguments;switch(t.length){case 0:return new e;case 1:return new e(t[0]);case 2:return new e(t[0],t[1]);case 3:return new e(t[0],t[1],t[2]);case 4:return new e(t[0],t[1],t[2],t[3]);case 5:return new e(t[0],t[1],t[2],t[3],t[4]);case 6:return new e(t[0],t[1],t[2],t[3],t[4],t[5]);case 7:return new e(t[0],t[1],t[2],t[3],t[4],t[5],t[6])}var n=Dn(e.prototype),r=e.apply(n,t);return $u(r)?r:n}}function ki(e){return function(t,n,r){var i,u=ye(t);return Fu(t)||(i=eo(n,3),t=El(t),n=function(e){return i(u[e],e,u)}),-1<(r=e(t,n,r))?u[i?t[r]:r]:o}}function Pi(e){return Ji((function(t){var n=t.length,r=n,i=Ln.prototype.thru;for(e&&t.reverse();r--;){var u=t[r];if("function"!=typeof u)throw new Se(l);i&&!c&&"wrapper"==Qi(u)&&(c=new Ln([],!0))}for(r=c?r:n;++r<n;)var a=Qi(u=t[r]),s="wrapper"==a?Xi(u):o,c=s&&po(s[0])&&424==s[1]&&!s[4].length&&1==s[9]?c[Qi(s[0])].apply(c,s[3]):1==u.length&&po(u)?c[a]():c.thru(u);return function(){var e=arguments,r=e[0];if(c&&1==e.length&&Uu(r))return c.plant(r).value();for(var i=0,o=n?t[i].apply(this,e):r;++i<n;)o=t[i].call(this,o);return o}}))}function xi(e,t,r,i,u,l,a,s,c,f){var d=128&t,h=1&t,p=2&t,v=24&t,_=512&t,g=p?o:Oi(e);return function m(){for(var y,b=n(E=arguments.length),C=E;C--;)b[C]=arguments[C];if(v&&(y=function(e,t){for(var n=e.length,r=0;n--;)e[n]===t&&++r;return r}(b,T=Zi(m))),i&&(b=yi(b,i,u,v)),l&&(b=bi(b,l,a,v)),E-=y,v&&E<f){var S=Wt(b,T);return Fi(e,t,xi,m.placeholder,r,b,S,s,c,f-E)}var T=h?r:this,E=(S=p?T[e]:e,b.length);return s?b=function(e,t){for(var n=e.length,r=fn(t.length,n),i=Ci(e);r--;){var u=t[r];e[r]=co(u,n)?i[u]:o}return e}(b,s):_&&1<E&&b.reverse(),d&&c<E&&(b.length=c),(S=this&&this!==Ye&&this instanceof m?g||Oi(S):S).apply(T,b)}}function Di(e,t){return function(n,r){return n=n,i=e,o=t(r),u={},hr(n,(function(e,t,n){i(u,o(e),t,n)})),u;var i,o,u}}function Mi(e,t){return function(n,r){var i;if(n===o&&r===o)return t;if(n!==o&&(i=n),r!==o){if(i===o)return r;r="string"==typeof n||"string"==typeof r?(n=ti(n),ti(r)):(n=ei(n),ei(r)),i=e(n,r)}return i}}function Ni(e){return Ji((function(t){return t=pt(t,xt(eo())),Vr((function(n){var r=this;return e(t,(function(e){return ut(e,r,n)}))}))}))}function Li(e,t){var n=(t=t===o?" ":ti(t)).length;return n<2?n?Hr(t,e):t:(n=Hr(t,nn(e/Bt(t))),qt(t)?hi(zt(n),0,e).join(""):n.slice(0,e))}function Ui(e){return function(t,r,i){return i&&"number"!=typeof i&&fo(t,r,i)&&(r=i=o),t=ul(t),r===o?(r=t,t=0):r=ul(r),function(e,t,r,i){for(var o=-1,u=cn(nn((t-e)/(r||1)),0),l=n(u);u--;)l[i?u:++o]=e,e+=r;return l}(t,r,i=i===o?t<r?1:-1:ul(i),e)}}function ji(e){return function(t,n){return"string"==typeof t&&"string"==typeof n||(t=sl(t),n=sl(n)),e(t,n)}}function Fi(e,t,n,r,i,u,l,a,s,c){var f=8&t;return t|=f?32:64,4&(t&=~(f?64:32))||(t&=-4),c=[e,t,i,f?u:o,f?l:o,f?o:u,f?o:l,a,s,c],n=n.apply(o,c),po(e)&&So(n,c),n.placeholder=r,Ao(n,e,t)}function qi(e){var t=ne[e];return function(e,n){if(e=sl(e),(n=null==n?0:fn(ll(n),292))&&ln(e)){var r=(fl(e)+"e").split("e");return+((r=(fl(t(r[0]+"e"+(+r[1]+n)))+"e").split("e"))[0]+"e"+(+r[1]-n))}return t(e)}}var Hi=yn&&1/Gt(new yn([,-0]))[1]==1/0?function(e){return new yn(e)}:Yl;function Vi(e){return function(t){var n,r,i,o=uo(t);return o==b?Ht(t):o==A?(o=t,n=-1,r=Array(o.size),o.forEach((function(e){r[++n]=[e,e]})),r):pt(e(i=t),(function(e){return[e,i[e]]}))}}function Wi(e,t,r,i,u,a,c,f){var d=2&t;if(!d&&"function"!=typeof e)throw new Se(l);var h,p,v=i?i.length:0;v||(t&=-97,i=u=o),c=c===o?c:cn(ll(c),0),f=f===o?f:ll(f),v-=u?u.length:0,64&t&&(h=i,p=u,i=u=o);var _,g,m,y,b=d?o:Xi(e);c=[e,t,r,i,u,h,p,a,c,f];return b&&function(e,t){var n,r=e[1],i=t[1],o=r|i,u=o<131,l=128==i&&8==r||128==i&&256==r&&e[7].length<=t[8]||384==i&&t[7].length<=t[8]&&8==r;(u||l)&&(1&i&&(e[2]=t[2],o|=1&r?0:4),(r=t[3])&&(n=e[3],e[3]=n?yi(n,r,t[4]):r,e[4]=n?Wt(e[3],s):t[4]),(r=t[5])&&(n=e[5],e[5]=n?bi(n,r,t[6]):r,e[6]=n?Wt(e[5],s):t[6]),(r=t[7])&&(e[7]=r),128&i&&(e[8]=null==e[8]?t[8]:fn(e[8],t[8])),null==e[9]&&(e[9]=t[9]),e[0]=t[0],e[1]=o)}(c,b),e=c[0],t=c[1],r=c[2],i=c[3],u=c[4],!(f=c[9]=c[9]===o?d?0:e.length:cn(c[9]-v,0))&&24&t&&(t&=-25),r=t&&1!=t?8==t||16==t?function(e,t,r){var i=Oi(e);return function u(){for(var l=arguments.length,a=n(l),s=l,c=Zi(u);s--;)a[s]=arguments[s];return(l-=(c=l<3&&a[0]!==c&&a[l-1]!==c?[]:Wt(a,c)).length)<r?Fi(e,t,xi,u.placeholder,o,a,c,o,o,r-l):ut(this&&this!==Ye&&this instanceof u?i:e,this,a)}}(e,t,f):32!=t&&33!=t||u.length?xi.apply(o,c):function(e,t,r,i){var o=1&t,u=Oi(e);return function t(){for(var l=-1,a=arguments.length,s=-1,c=i.length,f=n(c+a),d=this&&this!==Ye&&this instanceof t?u:e;++s<c;)f[s]=i[s];for(;a--;)f[s++]=arguments[++l];return ut(d,o?r:this,f)}}(e,t,r,i):(g=r,m=1&t,y=Oi(_=e),function e(){return(this&&this!==Ye&&this instanceof e?y:_).apply(m?g:this,arguments)}),Ao((b?zr:So)(r,c),e,t)}function Gi(e,t,n,r){return e===o||Du(e,Ae[n])&&!Ie.call(r,n)?t:e}function Bi(e,t,n,r,i,u){return $u(e)&&$u(t)&&(u.set(t,e),Mr(e,t,o,Bi,u),u.delete(t)),e}function zi(e){return Xu(e)?o:e}function $i(e,t,n,r,i,u){var l=1&n,a=e.length;if(a!=(c=t.length)&&!(l&&a<c))return!1;var s=u.get(e),c=u.get(t);if(s&&c)return s==t&&c==e;var f=-1,d=!0,h=2&n?new Hn:o;for(u.set(e,t),u.set(t,e);++f<a;){var p,v=e[f],_=t[f];if((p=r?l?r(_,v,f,t,e,u):r(v,_,f,e,t,u):p)!==o){if(p)continue;d=!1;break}if(h){if(!mt(t,(function(e,t){return!Mt(h,t)&&(v===e||i(v,e,n,r,u))&&h.push(t)}))){d=!1;break}}else if(v!==_&&!i(v,_,n,r,u)){d=!1;break}}return u.delete(e),u.delete(t),d}function Ji(e){return Eo(yo(e,o,jo),e+"")}function Ki(e){return gr(e,El,io)}function Yi(e){return gr(e,Al,oo)}var Xi=Sn?function(e){return Sn.get(e)}:Yl;function Qi(e){for(var t=e.name+"",n=Tn[t],r=Ie.call(Tn,t)?n.length:0;r--;){var i=n[r],o=i.func;if(null==o||o==e)return i.name}return t}function Zi(e){return(Ie.call(xn,"placeholder")?xn:e).placeholder}function eo(){var e=(e=xn.iteratee||Jl)===Jl?Ir:e;return arguments.length?e(arguments[0],arguments[1]):e}function to(e,t){var n,r=e.__data__;return("string"==(e=typeof(n=t))||"number"==e||"symbol"==e||"boolean"==e?"__proto__"!==n:null===n)?r["string"==typeof t?"string":"hash"]:r.map}function no(e){for(var t=El(e),n=t.length;n--;){var r=t[n],i=e[r];t[n]=[r,i,go(i)]}return t}function ro(e,t){return t=t,Rr(t=null==(e=e)?o:e[t])?t:o}var io=on?function(e){return null==e?[]:(e=ye(e),ft(on(e),(function(t){return Ze.call(e,t)})))}:Ql,oo=on?function(e){for(var t=[];e;)vt(t,io(e)),e=Ke(e);return t}:Ql,uo=mr;function lo(e,t,n){for(var r=-1,i=(t=fi(t,e)).length,o=!1;++r<i;){var u=ko(t[r]);if(!(o=null!=e&&n(e,u)))break;e=e[u]}return o||++r!=i?o:!!(i=null==e?0:e.length)&&zu(i)&&co(u,i)&&(Uu(e)||Lu(e))}function ao(e){return"function"!=typeof e.constructor||_o(e)?{}:Dn(Ke(e))}function so(e){return Uu(e)||Lu(e)||!!(Rt&&e&&e[Rt])}function co(e,t){var n=typeof e;return!!(t=null==t?c:t)&&("number"==n||"symbol"!=n&&ve.test(e))&&-1<e&&e%1==0&&e<t}function fo(e,t,n){if($u(n)){var r=typeof t;return("number"==r?Fu(n)&&co(t,n.length):"string"==r&&t in n)&&Du(n[t],e)}}function ho(e,t){if(!Uu(e)){var n=typeof e;return"number"==n||"symbol"==n||"boolean"==n||null==e||tl(e)||X.test(e)||!Y.test(e)||null!=t&&e in ye(t)}}function po(e){var t=Qi(e),n=xn[t];if("function"==typeof n&&t in Un.prototype)return e===n?1:(n=Xi(n))&&e===n[0]}(_n&&uo(new _n(new ArrayBuffer(1)))!=k||gn&&uo(new gn)!=b||mn&&uo(mn.resolve())!=T||yn&&uo(new yn)!=A||bn&&uo(new bn)!=I)&&(uo=function(e){var t=mr(e);if(e=(e=t==S?e.constructor:o)?Po(e):"")switch(e){case En:return k;case An:return b;case wn:return T;case Rn:return A;case In:return I}return t});var vo=we?Gu:Zl;function _o(e){var t=e&&e.constructor;return e===("function"==typeof t&&t.prototype||Ae)}function go(e){return e==e&&!$u(e)}function mo(e,t){return function(n){return null!=n&&n[e]===t&&(t!==o||e in ye(n))}}function yo(e,t,r){return t=cn(t===o?e.length-1:t,0),function(){for(var i=arguments,o=-1,u=cn(i.length-t,0),l=n(u);++o<u;)l[o]=i[t+o];o=-1;for(var a=n(t+1);++o<t;)a[o]=i[o];return a[t]=r(l),ut(e,this,a)}}function bo(e,t){return t.length<2?e:_r(e,Kr(t,0,-1))}function Co(e,t){if(("constructor"!==t||"function"!=typeof e[t])&&"__proto__"!=t)return e[t]}var So=wo(zr),To=tn||function(e,t){return Ye.setTimeout(e,t)},Eo=wo($r);function Ao(e,t,n){var r,i;return Eo(e,function(e,t){var n=t.length;if(!n)return e;var r=n-1;return t[r]=(1<n?"& ":"")+t[r],t=t.join(2<n?", ":" "),e.replace(re,"{\n/* [wrapped with "+t+"] */\n")}(t=t+"",(r=(t=(t=t).match(ie))?t[1].split(oe):[],i=n,at(d,(function(e){var t="_."+e[0];i&e[1]&&!dt(r,t)&&r.push(t)})),r.sort())))}function wo(e){var t=0,n=0;return function(){var r=dn(),i=16-(r-n);if(n=r,0<i){if(800<=++t)return arguments[0]}else t=0;return e.apply(o,arguments)}}function Ro(e,t){var n=-1,r=e.length,i=r-1;for(t=t===o?r:t;++n<t;){var u=qr(n,i),l=e[u];e[u]=e[n],e[n]=l}return e.length=t,e}var Io,Oo=(Io=(ta=Ru(ta=function(e){var t=[];return 46===e.charCodeAt(0)&&t.push(""),e.replace(Q,(function(e,n,r,i){t.push(r?i.replace(ae,"$1"):n||e)})),t},(function(e){return 500===Io.size&&Io.clear(),e}))).cache,ta);function ko(e){if("string"==typeof e||tl(e))return e;var t=e+"";return"0"==t&&1/e==-1/0?"-0":t}function Po(e){if(null!=e){try{return Re.call(e)}catch(e){}try{return e+""}catch(e){}}return""}function xo(e){if(e instanceof Un)return e.clone();var t=new Ln(e.__wrapped__,e.__chain__);return t.__actions__=Ci(e.__actions__),t.__index__=e.__index__,t.__values__=e.__values__,t}var Do=Vr((function(e,t){return qu(e)?ir(e,cr(t,1,qu,!0)):[]})),Mo=Vr((function(e,t){var n=Wo(t);return qu(n)&&(n=o),qu(e)?ir(e,cr(t,1,qu,!0),eo(n,2)):[]})),No=Vr((function(e,t){var n=Wo(t);return qu(n)&&(n=o),qu(e)?ir(e,cr(t,1,qu,!0),o,n):[]}));function Lo(e,t,n){var r=null==e?0:e.length;return r?((n=null==n?0:ll(n))<0&&(n=cn(r+n,0)),Ct(e,eo(t,3),n)):-1}function Uo(e,t,n){var r=null==e?0:e.length;if(!r)return-1;var i=r-1;return n!==o&&(i=ll(n),i=n<0?cn(r+i,0):fn(i,r-1)),Ct(e,eo(t,3),i,!0)}function jo(e){return null!=e&&e.length?cr(e,1):[]}function Fo(e){return e&&e.length?e[0]:o}var qo=Vr((function(e){var t=pt(e,si);return t.length&&t[0]===e[0]?Sr(t):[]})),Ho=Vr((function(e){var t=Wo(e),n=pt(e,si);return t===Wo(n)?t=o:n.pop(),n.length&&n[0]===e[0]?Sr(n,eo(t,2)):[]})),Vo=Vr((function(e){var t=Wo(e),n=pt(e,si);return(t="function"==typeof t?t:o)&&n.pop(),n.length&&n[0]===e[0]?Sr(n,o,t):[]}));function Wo(e){var t=null==e?0:e.length;return t?e[t-1]:o}var Go=Vr(Bo);function Bo(e,t){return e&&e.length&&t&&t.length?jr(e,t):e}var zo=Ji((function(e,t){var n=null==e?0:e.length,r=Zn(e,t);return Fr(e,pt(t,(function(e){return co(e,n)?+e:e})).sort(mi)),r}));function $o(e){return null==e?e:vn.call(e)}var Jo=Vr((function(e){return ni(cr(e,1,qu,!0))})),Ko=Vr((function(e){var t=Wo(e);return qu(t)&&(t=o),ni(cr(e,1,qu,!0),eo(t,2))})),Yo=Vr((function(e){var t="function"==typeof(t=Wo(e))?t:o;return ni(cr(e,1,qu,!0),o,t)}));function Xo(e){if(!e||!e.length)return[];var t=0;return e=ft(e,(function(e){return qu(e)&&(t=cn(e.length,t),1)})),kt(t,(function(t){return pt(e,wt(t))}))}function Qo(e,t){return e&&e.length?(e=Xo(e),null==t?e:pt(e,(function(e){return ut(t,o,e)}))):[]}var Zo=Vr((function(e,t){return qu(e)?ir(e,t):[]})),eu=Vr((function(e){return li(ft(e,qu))})),tu=Vr((function(e){var t=Wo(e);return qu(t)&&(t=o),li(ft(e,qu),eo(t,2))})),nu=Vr((function(e){var t="function"==typeof(t=Wo(e))?t:o;return li(ft(e,qu),o,t)})),ru=Vr(Xo),iu=Vr((function(e){var t="function"==typeof(t=1<(t=e.length)?e[t-1]:o)?(e.pop(),t):o;return Qo(e,t)}));function ou(e){return(e=xn(e)).__chain__=!0,e}function uu(e,t){return t(e)}var lu=Ji((function(e){function t(t){return Zn(t,e)}var n=e.length,r=n?e[0]:0,i=this.__wrapped__;return!(1<n||this.__actions__.length)&&i instanceof Un&&co(r)?((i=i.slice(r,+r+(n?1:0))).__actions__.push({func:uu,args:[t],thisArg:o}),new Ln(i,this.__chain__).thru((function(e){return n&&!e.length&&e.push(o),e}))):this.thru(t)})),au=Ti((function(e,t,n){Ie.call(e,n)?++e[n]:Qn(e,n,1)})),su=ki(Lo),cu=ki(Uo);function fu(e,t){return(Uu(e)?at:or)(e,eo(t,3))}function du(e,t){return(Uu(e)?st:ur)(e,eo(t,3))}var hu=Ti((function(e,t,n){Ie.call(e,n)?e[n].push(t):Qn(e,n,[t])})),pu=Vr((function(e,t,r){var i=-1,o="function"==typeof t,u=Fu(e)?n(e.length):[];return or(e,(function(e){u[++i]=o?ut(t,e,r):Tr(e,t,r)})),u})),vu=Ti((function(e,t,n){Qn(e,n,t)}));function _u(e,t){return(Uu(e)?pt:Pr)(e,eo(t,3))}var gu=Ti((function(e,t,n){e[n?0:1].push(t)}),(function(){return[[],[]]})),mu=Vr((function(e,t){if(null==e)return[];var n=t.length;return 1<n&&fo(e,t[0],t[1])?t=[]:2<n&&fo(t[0],t[1],t[2])&&(t=[t[0]]),Lr(e,cr(t,1),[])})),yu=en||function(){return Ye.Date.now()};function bu(e,t,n){return t=n?o:t,t=e&&null==t?e.length:t,Wi(e,128,o,o,o,o,t)}function Cu(e,t){var n;if("function"!=typeof t)throw new Se(l);return e=ll(e),function(){return 0<--e&&(n=t.apply(this,arguments)),e<=1&&(t=o),n}}var Su=Vr((function(e,t,n){var r,i=1;return n.length&&(r=Wt(n,Zi(Su)),i|=32),Wi(e,i,t,n,r)})),Tu=Vr((function(e,t,n){var r,i=3;return n.length&&(r=Wt(n,Zi(Tu)),i|=32),Wi(t,i,e,n,r)}));function Eu(e,t,n){var r,i,u,a,s,c,f=0,d=!1,h=!1,p=!0;if("function"!=typeof e)throw new Se(l);function v(t){var n=r,u=i;return r=i=o,f=t,a=e.apply(u,n)}function _(e){var n=e-c;return c===o||t<=n||n<0||h&&u<=e-f}function g(){var e,n=yu();if(_(n))return m(n);s=To(g,(n=t-((e=n)-c),h?fn(n,u-(e-f)):n))}function m(e){return s=o,p&&r?v(e):(r=i=o,a)}function y(){var e=yu(),n=_(e);if(r=arguments,i=this,c=e,n){if(s===o)return f=n=c,s=To(g,t),d?v(n):a;if(h)return pi(s),s=To(g,t),v(c)}return s===o&&(s=To(g,t)),a}return t=sl(t)||0,$u(n)&&(d=!!n.leading,u=(h="maxWait"in n)?cn(sl(n.maxWait)||0,t):u,p="trailing"in n?!!n.trailing:p),y.cancel=function(){s!==o&&pi(s),f=0,r=c=i=s=o},y.flush=function(){return s===o?a:m(yu())},y}var Au=Vr((function(e,t){return rr(e,1,t)})),wu=Vr((function(e,t,n){return rr(e,sl(t)||0,n)}));function Ru(e,t){if("function"!=typeof e||null!=t&&"function"!=typeof t)throw new Se(l);function n(){var r=arguments,i=t?t.apply(this,r):r[0],o=n.cache;return o.has(i)?o.get(i):(r=e.apply(this,r),n.cache=o.set(i,r)||o,r)}return n.cache=new(Ru.Cache||qn),n}function Iu(e){if("function"!=typeof e)throw new Se(l);return function(){var t=arguments;switch(t.length){case 0:return!e.call(this);case 1:return!e.call(this,t[0]);case 2:return!e.call(this,t[0],t[1]);case 3:return!e.call(this,t[0],t[1],t[2])}return!e.apply(this,t)}}Ru.Cache=qn;var Ou=di((function(e,t){var n=(t=1==t.length&&Uu(t[0])?pt(t[0],xt(eo())):pt(cr(t,1),xt(eo()))).length;return Vr((function(r){for(var i=-1,o=fn(r.length,n);++i<o;)r[i]=t[i].call(this,r[i]);return ut(e,this,r)}))})),ku=Vr((function(e,t){var n=Wt(t,Zi(ku));return Wi(e,32,o,t,n)})),Pu=Vr((function(e,t){var n=Wt(t,Zi(Pu));return Wi(e,64,o,t,n)})),xu=Ji((function(e,t){return Wi(e,256,o,o,o,t)}));function Du(e,t){return e===t||e!=e&&t!=t}var Mu=ji(yr),Nu=ji((function(e,t){return t<=e})),Lu=Er(function(){return arguments}())?Er:function(e){return Ju(e)&&Ie.call(e,"callee")&&!Ze.call(e,"callee")},Uu=n.isArray,ju=et?xt(et):function(e){return Ju(e)&&mr(e)==O};function Fu(e){return null!=e&&zu(e.length)&&!Gu(e)}function qu(e){return Ju(e)&&Fu(e)}var Hu=un||Zl,Vu=tt?xt(tt):function(e){return Ju(e)&&mr(e)==_};function Wu(e){if(!Ju(e))return!1;var t=mr(e);return t==g||"[object DOMException]"==t||"string"==typeof e.message&&"string"==typeof e.name&&!Xu(e)}function Gu(e){return!!$u(e)&&((e=mr(e))==m||e==y||"[object AsyncFunction]"==e||"[object Proxy]"==e)}function Bu(e){return"number"==typeof e&&e==ll(e)}function zu(e){return"number"==typeof e&&-1<e&&e%1==0&&e<=c}function $u(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}function Ju(e){return null!=e&&"object"==typeof e}var Ku=nt?xt(nt):function(e){return Ju(e)&&uo(e)==b};function Yu(e){return"number"==typeof e||Ju(e)&&mr(e)==C}function Xu(e){return!(!Ju(e)||mr(e)!=S)&&(null===(e=Ke(e))||"function"==typeof(e=Ie.call(e,"constructor")&&e.constructor)&&e instanceof e&&Re.call(e)==xe)}var Qu=rt?xt(rt):function(e){return Ju(e)&&mr(e)==E},Zu=it?xt(it):function(e){return Ju(e)&&uo(e)==A};function el(e){return"string"==typeof e||!Uu(e)&&Ju(e)&&mr(e)==w}function tl(e){return"symbol"==typeof e||Ju(e)&&mr(e)==R}var nl=ot?xt(ot):function(e){return Ju(e)&&zu(e.length)&&!!We[mr(e)]},rl=ji(kr),il=ji((function(e,t){return e<=t}));function ol(e){if(!e)return[];if(Fu(e))return(el(e)?zt:Ci)(e);if(Yt&&e[Yt])return function(e){for(var t,n=[];!(t=e.next()).done;)n.push(t.value);return n}(e[Yt]());var t=uo(e);return(t==b?Ht:t==A?Gt:Dl)(e)}function ul(e){return e?(e=sl(e))!==1/0&&e!==-1/0?e==e?e:0:17976931348623157e292*(e<0?-1:1):0===e?e:0}function ll(e){var t=ul(e);e=t%1;return t==t?e?t-e:t:0}function al(e){return e?er(ll(e),0,f):0}function sl(e){if("number"==typeof e)return e;if(tl(e))return NaN;if("string"!=typeof(e=$u(e)?$u(t="function"==typeof e.valueOf?e.valueOf():e)?t+"":t:e))return 0===e?e:+e;e=Pt(e);var t=de.test(e);return t||pe.test(e)?$e(e.slice(2),t?2:8):fe.test(e)?NaN:+e}function cl(e){return Si(e,Al(e))}function fl(e){return null==e?"":ti(e)}var dl=Ei((function(e,t){if(_o(t)||Fu(t))Si(t,El(t),e);else for(var n in t)Ie.call(t,n)&&Jn(e,n,t[n])})),hl=Ei((function(e,t){Si(t,Al(t),e)})),pl=Ei((function(e,t,n,r){Si(t,Al(t),e,r)})),vl=Ei((function(e,t,n,r){Si(t,El(t),e,r)})),_l=Ji(Zn),gl=Vr((function(e,t){e=ye(e);var n=-1,r=t.length,i=2<r?t[2]:o;for(i&&fo(t[0],t[1],i)&&(r=1);++n<r;)for(var u=t[n],l=Al(u),a=-1,s=l.length;++a<s;){var c=l[a],f=e[c];(f===o||Du(f,Ae[c])&&!Ie.call(e,c))&&(e[c]=u[c])}return e})),ml=Vr((function(e){return e.push(o,Bi),ut(Rl,o,e)}));function yl(e,t,n){return(t=null==e?o:_r(e,t))===o?n:t}function bl(e,t){return null!=e&&lo(e,t,Cr)}var Cl=Di((function(e,t,n){e[t=null!=t&&"function"!=typeof t.toString?Pe.call(t):t]=n}),zl($l)),Sl=Di((function(e,t,n){null!=t&&"function"!=typeof t.toString&&(t=Pe.call(t)),Ie.call(e,t)?e[t].push(n):e[t]=[n]}),eo),Tl=Vr(Tr);function El(e){return(Fu(e)?Wn:Or)(e)}function Al(e){return Fu(e)?Wn(e,!0):function(e){if(!$u(e))return function(e){var t=[];if(null!=e)for(var n in ye(e))t.push(n);return t}(e);var t,n=_o(e),r=[];for(t in e)("constructor"!=t||!n&&Ie.call(e,t))&&r.push(t);return r}(e)}var wl=Ei((function(e,t,n){Mr(e,t,n)})),Rl=Ei((function(e,t,n,r){Mr(e,t,n,r)})),Il=Ji((function(e,t){var n={};if(null==e)return n;var r=!1;t=pt(t,(function(t){return t=fi(t,e),r=r||1<t.length,t})),Si(e,Yi(e),n),r&&(n=tr(n,7,zi));for(var i=t.length;i--;)ri(n,t[i]);return n})),Ol=Ji((function(e,t){return null==e?{}:Ur(n=e,t,(function(e,t){return bl(n,t)}));var n}));function kl(e,t){if(null==e)return{};var n=pt(Yi(e),(function(e){return[e]}));return t=eo(t),Ur(e,n,(function(e,n){return t(e,n[0])}))}var Pl=Vi(El),xl=Vi(Al);function Dl(e){return null==e?[]:Dt(e,El(e))}var Ml=Ii((function(e,t,n){return t=t.toLowerCase(),e+(n?Nl(t):t)}));function Nl(e){return Vl(fl(e).toLowerCase())}function Ll(e){return(e=fl(e))&&e.replace(_e,Ut).replace(Le,"")}var Ul=Ii((function(e,t,n){return e+(n?"-":"")+t.toLowerCase()})),jl=Ii((function(e,t,n){return e+(n?" ":"")+t.toLowerCase()})),Fl=Ri("toLowerCase"),ql=Ii((function(e,t,n){return e+(n?"_":"")+t.toLowerCase()})),Hl=Ii((function(e,t,n){return e+(n?" ":"")+Vl(t)})),Vl=(Ee=Ii((function(e,t,n){return e+(n?" ":"")+t.toUpperCase()})),Ri("toUpperCase"));function Wl(e,t,n){return e=fl(e),(t=n?o:t)===o?(n=e,qe.test(n)?e.match(je)||[]:e.match(ue)||[]):e.match(t)||[]}var Gl=Vr((function(e,t){try{return ut(e,o,t)}catch(e){return Wu(e)?e:new i(e)}})),Bl=Ji((function(e,t){return at(t,(function(t){t=ko(t),Qn(e,t,Su(e[t],e))})),e}));function zl(e){return function(){return e}}function $l(e){return e}function Jl(e){return Ir("function"==typeof e?e:tr(e,1))}function Kl(e,t,n){var r=El(t),i=vr(t,r);null!=n||$u(t)&&(i.length||!r.length)||(n=t,t=e,e=this,i=vr(t,El(t)));var o=!($u(n)&&"chain"in n&&!n.chain),u=Gu(e);return at(i,(function(n){var r=t[n];e[n]=r,u&&(e.prototype[n]=function(){var t=this.__chain__;if(o||t){var n=e(this.__wrapped__);return(n.__actions__=Ci(this.__actions__)).push({func:r,args:arguments,thisArg:e}),n.__chain__=t,n}return r.apply(e,vt([this.value()],arguments))})})),e}function Yl(){}function Xl(e){return ho(e)?wt(ko(e)):(t=e,function(e){return _r(e,t)});var t}function Ql(){return[]}function Zl(){return!1}Ue=Pi(),r=Pi(!0),t=Vr((function(e,t){return function(n){return Tr(n,e,t)}})),Fe=Vr((function(e,t){return function(n){return Tr(e,n,t)}})),On=Ni(pt),Zt=Ni(ct),_n=Ni(mt),mn=Ui(),bn=Ui(!0);we=Mi((function(e,t){return e+t}),0),tn=qi("ceil"),$r=Mi((function(e,t){return e/t}),1);var ea,ta=qi("floor");en=Mi((function(e,t){return e*t}),1),di=qi("round"),un=Mi((function(e,t){return e-t}),0);return xn.after=function(e,t){if("function"!=typeof t)throw new Se(l);return e=ll(e),function(){if(--e<1)return t.apply(this,arguments)}},xn.ary=bu,xn.assign=dl,xn.assignIn=hl,xn.assignInWith=pl,xn.assignWith=vl,xn.at=_l,xn.before=Cu,xn.bind=Su,xn.bindAll=Bl,xn.bindKey=Tu,xn.castArray=function(){if(!arguments.length)return[];var e=arguments[0];return Uu(e)?e:[e]},xn.chain=ou,xn.chunk=function(e,t,r){t=(r?fo(e,t,r):t===o)?1:cn(ll(t),0);var i=null==e?0:e.length;if(!i||t<1)return[];for(var u=0,l=0,a=n(nn(i/t));u<i;)a[l++]=Kr(e,u,u+=t);return a},xn.compact=function(e){for(var t=-1,n=null==e?0:e.length,r=0,i=[];++t<n;){var o=e[t];o&&(i[r++]=o)}return i},xn.concat=function(){var e=arguments.length;if(!e)return[];for(var t=n(e-1),r=arguments[0],i=e;i--;)t[i-1]=arguments[i];return vt(Uu(r)?Ci(r):[r],cr(t,1))},xn.cond=function(e){var t=null==e?0:e.length,n=eo();return e=t?pt(e,(function(e){if("function"!=typeof e[1])throw new Se(l);return[n(e[0]),e[1]]})):[],Vr((function(n){for(var r=-1;++r<t;){var i=e[r];if(ut(i[0],this,n))return ut(i[1],this,n)}}))},xn.conforms=function(e){return t=tr(e,1),n=El(t),function(e){return nr(e,t,n)};var t,n},xn.constant=zl,xn.countBy=au,xn.create=function(e,t){return e=Dn(e),null==t?e:Xn(e,t)},xn.curry=function e(t,n,r){return(n=Wi(t,8,o,o,o,o,o,n=r?o:n)).placeholder=e.placeholder,n},xn.curryRight=function e(t,n,r){return(n=Wi(t,16,o,o,o,o,o,n=r?o:n)).placeholder=e.placeholder,n},xn.debounce=Eu,xn.defaults=gl,xn.defaultsDeep=ml,xn.defer=Au,xn.delay=wu,xn.difference=Do,xn.differenceBy=Mo,xn.differenceWith=No,xn.drop=function(e,t,n){var r=null==e?0:e.length;return r?Kr(e,(t=n||t===o?1:ll(t))<0?0:t,r):[]},xn.dropRight=function(e,t,n){var r=null==e?0:e.length;return r?Kr(e,0,(t=r-(t=n||t===o?1:ll(t)))<0?0:t):[]},xn.dropRightWhile=function(e,t){return e&&e.length?oi(e,eo(t,3),!0,!0):[]},xn.dropWhile=function(e,t){return e&&e.length?oi(e,eo(t,3),!0):[]},xn.fill=function(e,t,n,r){var i=null==e?0:e.length;return i?(n&&"number"!=typeof n&&fo(e,t,n)&&(n=0,r=i),function(e,t,n,r){var i=e.length;for((n=ll(n))<0&&(n=i<-n?0:i+n),(r=r===o||i<r?i:ll(r))<0&&(r+=i),r=r<n?0:al(r);n<r;)e[n++]=t;return e}(e,t,n,r)):[]},xn.filter=function(e,t){return(Uu(e)?ft:sr)(e,eo(t,3))},xn.flatMap=function(e,t){return cr(_u(e,t),1)},xn.flatMapDeep=function(e,t){return cr(_u(e,t),1/0)},xn.flatMapDepth=function(e,t,n){return n=n===o?1:ll(n),cr(_u(e,t),n)},xn.flatten=jo,xn.flattenDeep=function(e){return null!=e&&e.length?cr(e,1/0):[]},xn.flattenDepth=function(e,t){return null!=e&&e.length?cr(e,t=t===o?1:ll(t)):[]},xn.flip=function(e){return Wi(e,512)},xn.flow=Ue,xn.flowRight=r,xn.fromPairs=function(e){for(var t=-1,n=null==e?0:e.length,r={};++t<n;){var i=e[t];r[i[0]]=i[1]}return r},xn.functions=function(e){return null==e?[]:vr(e,El(e))},xn.functionsIn=function(e){return null==e?[]:vr(e,Al(e))},xn.groupBy=hu,xn.initial=function(e){return null!=e&&e.length?Kr(e,0,-1):[]},xn.intersection=qo,xn.intersectionBy=Ho,xn.intersectionWith=Vo,xn.invert=Cl,xn.invertBy=Sl,xn.invokeMap=pu,xn.iteratee=Jl,xn.keyBy=vu,xn.keys=El,xn.keysIn=Al,xn.map=_u,xn.mapKeys=function(e,t){var n={};return t=eo(t,3),hr(e,(function(e,r,i){Qn(n,t(e,r,i),e)})),n},xn.mapValues=function(e,t){var n={};return t=eo(t,3),hr(e,(function(e,r,i){Qn(n,r,t(e,r,i))})),n},xn.matches=function(e){return xr(tr(e,1))},xn.matchesProperty=function(e,t){return Dr(e,tr(t,1))},xn.memoize=Ru,xn.merge=wl,xn.mergeWith=Rl,xn.method=t,xn.methodOf=Fe,xn.mixin=Kl,xn.negate=Iu,xn.nthArg=function(e){return e=ll(e),Vr((function(t){return Nr(t,e)}))},xn.omit=Il,xn.omitBy=function(e,t){return kl(e,Iu(eo(t)))},xn.once=function(e){return Cu(2,e)},xn.orderBy=function(e,t,n,r){return null==e?[]:Lr(e,t=Uu(t)?t:null==t?[]:[t],n=Uu(n=r?o:n)?n:null==n?[]:[n])},xn.over=On,xn.overArgs=Ou,xn.overEvery=Zt,xn.overSome=_n,xn.partial=ku,xn.partialRight=Pu,xn.partition=gu,xn.pick=Ol,xn.pickBy=kl,xn.property=Xl,xn.propertyOf=function(e){return function(t){return null==e?o:_r(e,t)}},xn.pull=Go,xn.pullAll=Bo,xn.pullAllBy=function(e,t,n){return e&&e.length&&t&&t.length?jr(e,t,eo(n,2)):e},xn.pullAllWith=function(e,t,n){return e&&e.length&&t&&t.length?jr(e,t,o,n):e},xn.pullAt=zo,xn.range=mn,xn.rangeRight=bn,xn.rearg=xu,xn.reject=function(e,t){return(Uu(e)?ft:sr)(e,Iu(eo(t,3)))},xn.remove=function(e,t){var n=[];if(!e||!e.length)return n;var r=-1,i=[],o=e.length;for(t=eo(t,3);++r<o;){var u=e[r];t(u,r,e)&&(n.push(u),i.push(r))}return Fr(e,i),n},xn.rest=function(e,t){if("function"!=typeof e)throw new Se(l);return Vr(e,t=t===o?t:ll(t))},xn.reverse=$o,xn.sampleSize=function(e,t,n){return t=(n?fo(e,t,n):t===o)?1:ll(t),(Uu(e)?Bn:Gr)(e,t)},xn.set=function(e,t,n){return null==e?e:Br(e,t,n)},xn.setWith=function(e,t,n,r){return r="function"==typeof r?r:o,null==e?e:Br(e,t,n,r)},xn.shuffle=function(e){return(Uu(e)?zn:Jr)(e)},xn.slice=function(e,t,n){var r=null==e?0:e.length;return r?(n=n&&"number"!=typeof n&&fo(e,t,n)?(t=0,r):(t=null==t?0:ll(t),n===o?r:ll(n)),Kr(e,t,n)):[]},xn.sortBy=mu,xn.sortedUniq=function(e){return e&&e.length?Zr(e):[]},xn.sortedUniqBy=function(e,t){return e&&e.length?Zr(e,eo(t,2)):[]},xn.split=function(e,t,n){return n&&"number"!=typeof n&&fo(e,t,n)&&(t=n=o),(n=n===o?f:n>>>0)?(e=fl(e))&&("string"==typeof t||null!=t&&!Qu(t))&&!(t=ti(t))&&qt(e)?hi(zt(e),0,n):e.split(t,n):[]},xn.spread=function(e,t){if("function"!=typeof e)throw new Se(l);return t=null==t?0:cn(ll(t),0),Vr((function(n){var r=n[t];n=hi(n,0,t);return r&&vt(n,r),ut(e,this,n)}))},xn.tail=function(e){var t=null==e?0:e.length;return t?Kr(e,1,t):[]},xn.take=function(e,t,n){return e&&e.length?Kr(e,0,(t=n||t===o?1:ll(t))<0?0:t):[]},xn.takeRight=function(e,t,n){var r=null==e?0:e.length;return r?Kr(e,(t=r-(t=n||t===o?1:ll(t)))<0?0:t,r):[]},xn.takeRightWhile=function(e,t){return e&&e.length?oi(e,eo(t,3),!1,!0):[]},xn.takeWhile=function(e,t){return e&&e.length?oi(e,eo(t,3)):[]},xn.tap=function(e,t){return t(e),e},xn.throttle=function(e,t,n){var r=!0,i=!0;if("function"!=typeof e)throw new Se(l);return $u(n)&&(r="leading"in n?!!n.leading:r,i="trailing"in n?!!n.trailing:i),Eu(e,t,{leading:r,maxWait:t,trailing:i})},xn.thru=uu,xn.toArray=ol,xn.toPairs=Pl,xn.toPairsIn=xl,xn.toPath=function(e){return Uu(e)?pt(e,ko):tl(e)?[e]:Ci(Oo(fl(e)))},xn.toPlainObject=cl,xn.transform=function(e,t,n){var r,i=Uu(e),o=i||Hu(e)||nl(e);return t=eo(t,4),null==n&&(r=e&&e.constructor,n=o?i?new r:[]:$u(e)&&Gu(r)?Dn(Ke(e)):{}),(o?at:hr)(e,(function(e,r,i){return t(n,e,r,i)})),n},xn.unary=function(e){return bu(e,1)},xn.union=Jo,xn.unionBy=Ko,xn.unionWith=Yo,xn.uniq=function(e){return e&&e.length?ni(e):[]},xn.uniqBy=function(e,t){return e&&e.length?ni(e,eo(t,2)):[]},xn.uniqWith=function(e,t){return t="function"==typeof t?t:o,e&&e.length?ni(e,o,t):[]},xn.unset=function(e,t){return null==e||ri(e,t)},xn.unzip=Xo,xn.unzipWith=Qo,xn.update=function(e,t,n){return null==e?e:ii(e,t,ci(n))},xn.updateWith=function(e,t,n,r){return r="function"==typeof r?r:o,null==e?e:ii(e,t,ci(n),r)},xn.values=Dl,xn.valuesIn=function(e){return null==e?[]:Dt(e,Al(e))},xn.without=Zo,xn.words=Wl,xn.wrap=function(e,t){return ku(ci(t),e)},xn.xor=eu,xn.xorBy=tu,xn.xorWith=nu,xn.zip=ru,xn.zipObject=function(e,t){return ai(e||[],t||[],Jn)},xn.zipObjectDeep=function(e,t){return ai(e||[],t||[],Br)},xn.zipWith=iu,xn.entries=Pl,xn.entriesIn=xl,xn.extend=hl,xn.extendWith=pl,Kl(xn,xn),xn.add=we,xn.attempt=Gl,xn.camelCase=Ml,xn.capitalize=Nl,xn.ceil=tn,xn.clamp=function(e,t,n){return n===o&&(n=t,t=o),n!==o&&(n=(n=sl(n))==n?n:0),t!==o&&(t=(t=sl(t))==t?t:0),er(sl(e),t,n)},xn.clone=function(e){return tr(e,4)},xn.cloneDeep=function(e){return tr(e,5)},xn.cloneDeepWith=function(e,t){return tr(e,5,t="function"==typeof t?t:o)},xn.cloneWith=function(e,t){return tr(e,4,t="function"==typeof t?t:o)},xn.conformsTo=function(e,t){return null==t||nr(e,t,El(t))},xn.deburr=Ll,xn.defaultTo=function(e,t){return null==e||e!=e?t:e},xn.divide=$r,xn.endsWith=function(e,t,n){e=fl(e),t=ti(t);var r=e.length;r=n=n===o?r:er(ll(n),0,r);return 0<=(n-=t.length)&&e.slice(n,r)==t},xn.eq=Du,xn.escape=function(e){return(e=fl(e))&&z.test(e)?e.replace(G,jt):e},xn.escapeRegExp=function(e){return(e=fl(e))&&ee.test(e)?e.replace(Z,"\\$&"):e},xn.every=function(e,t,n){return(Uu(e)?ct:lr)(e,eo(t=n&&fo(e,t,n)?o:t,3))},xn.find=su,xn.findIndex=Lo,xn.findKey=function(e,t){return bt(e,eo(t,3),hr)},xn.findLast=cu,xn.findLastIndex=Uo,xn.findLastKey=function(e,t){return bt(e,eo(t,3),pr)},xn.floor=ta,xn.forEach=fu,xn.forEachRight=du,xn.forIn=function(e,t){return null==e?e:fr(e,eo(t,3),Al)},xn.forInRight=function(e,t){return null==e?e:dr(e,eo(t,3),Al)},xn.forOwn=function(e,t){return e&&hr(e,eo(t,3))},xn.forOwnRight=function(e,t){return e&&pr(e,eo(t,3))},xn.get=yl,xn.gt=Mu,xn.gte=Nu,xn.has=function(e,t){return null!=e&&lo(e,t,br)},xn.hasIn=bl,xn.head=Fo,xn.identity=$l,xn.includes=function(e,t,n,r){return e=Fu(e)?e:Dl(e),n=n&&!r?ll(n):0,r=e.length,n<0&&(n=cn(r+n,0)),el(e)?n<=r&&-1<e.indexOf(t,n):!!r&&-1<St(e,t,n)},xn.indexOf=function(e,t,n){var r=null==e?0:e.length;return r?St(e,t,n=(n=null==n?0:ll(n))<0?cn(r+n,0):n):-1},xn.inRange=function(e,t,n){return t=ul(t),n===o?(n=t,t=0):n=ul(n),(e=e=sl(e))>=fn(t=t,n=n)&&e<cn(t,n)},xn.invoke=Tl,xn.isArguments=Lu,xn.isArray=Uu,xn.isArrayBuffer=ju,xn.isArrayLike=Fu,xn.isArrayLikeObject=qu,xn.isBoolean=function(e){return!0===e||!1===e||Ju(e)&&mr(e)==v},xn.isBuffer=Hu,xn.isDate=Vu,xn.isElement=function(e){return Ju(e)&&1===e.nodeType&&!Xu(e)},xn.isEmpty=function(e){if(null==e)return!0;if(Fu(e)&&(Uu(e)||"string"==typeof e||"function"==typeof e.splice||Hu(e)||nl(e)||Lu(e)))return!e.length;var t,n=uo(e);if(n==b||n==A)return!e.size;if(_o(e))return!Or(e).length;for(t in e)if(Ie.call(e,t))return!1;return!0},xn.isEqual=function(e,t){return Ar(e,t)},xn.isEqualWith=function(e,t,n){var r=(n="function"==typeof n?n:o)?n(e,t):o;return r===o?Ar(e,t,o,n):!!r},xn.isError=Wu,xn.isFinite=function(e){return"number"==typeof e&&ln(e)},xn.isFunction=Gu,xn.isInteger=Bu,xn.isLength=zu,xn.isMap=Ku,xn.isMatch=function(e,t){return e===t||wr(e,t,no(t))},xn.isMatchWith=function(e,t,n){return n="function"==typeof n?n:o,wr(e,t,no(t),n)},xn.isNaN=function(e){return Yu(e)&&e!=+e},xn.isNative=function(e){if(vo(e))throw new i("Unsupported core-js use. Try https://npms.io/search?q=ponyfill.");return Rr(e)},xn.isNil=function(e){return null==e},xn.isNull=function(e){return null===e},xn.isNumber=Yu,xn.isObject=$u,xn.isObjectLike=Ju,xn.isPlainObject=Xu,xn.isRegExp=Qu,xn.isSafeInteger=function(e){return Bu(e)&&-c<=e&&e<=c},xn.isSet=Zu,xn.isString=el,xn.isSymbol=tl,xn.isTypedArray=nl,xn.isUndefined=function(e){return e===o},xn.isWeakMap=function(e){return Ju(e)&&uo(e)==I},xn.isWeakSet=function(e){return Ju(e)&&"[object WeakSet]"==mr(e)},xn.join=function(e,t){return null==e?"":an.call(e,t)},xn.kebabCase=Ul,xn.last=Wo,xn.lastIndexOf=function(e,t,n){var r=null==e?0:e.length;if(!r)return-1;var i=r;return n!==o&&(i=(i=ll(n))<0?cn(r+i,0):fn(i,r-1)),t==t?function(e,t,n){for(var r=n+1;r--;)if(e[r]===t)return r;return r}(e,t,i):Ct(e,Et,i,!0)},xn.lowerCase=jl,xn.lowerFirst=Fl,xn.lt=rl,xn.lte=il,xn.max=function(e){return e&&e.length?ar(e,$l,yr):o},xn.maxBy=function(e,t){return e&&e.length?ar(e,eo(t,2),yr):o},xn.mean=function(e){return At(e,$l)},xn.meanBy=function(e,t){return At(e,eo(t,2))},xn.min=function(e){return e&&e.length?ar(e,$l,kr):o},xn.minBy=function(e,t){return e&&e.length?ar(e,eo(t,2),kr):o},xn.stubArray=Ql,xn.stubFalse=Zl,xn.stubObject=function(){return{}},xn.stubString=function(){return""},xn.stubTrue=function(){return!0},xn.multiply=en,xn.nth=function(e,t){return e&&e.length?Nr(e,ll(t)):o},xn.noConflict=function(){return Ye._===this&&(Ye._=De),this},xn.noop=Yl,xn.now=yu,xn.pad=function(e,t,n){e=fl(e);var r=(t=ll(t))?Bt(e):0;return!t||t<=r?e:Li(rn(r=(t-r)/2),n)+e+Li(nn(r),n)},xn.padEnd=function(e,t,n){e=fl(e);var r=(t=ll(t))?Bt(e):0;return t&&r<t?e+Li(t-r,n):e},xn.padStart=function(e,t,n){e=fl(e);var r=(t=ll(t))?Bt(e):0;return t&&r<t?Li(t-r,n)+e:e},xn.parseInt=function(e,t,n){return t=n||null==t?0:t&&+t,hn(fl(e).replace(te,""),t||0)},xn.random=function(e,t,n){var r;return n&&"boolean"!=typeof n&&fo(e,t,n)&&(t=n=o),n===o&&("boolean"==typeof t?(n=t,t=o):"boolean"==typeof e&&(n=e,e=o)),e===o&&t===o?(e=0,t=1):(e=ul(e),t===o?(t=e,e=0):t=ul(t)),t<e&&(r=e,e=t,t=r),n||e%1||t%1?(n=pn(),fn(e+n*(t-e+ze("1e-"+((n+"").length-1))),t)):qr(e,t)},xn.reduce=function(e,t,n){var r=Uu(e)?_t:It,i=arguments.length<3;return r(e,eo(t,4),n,i,or)},xn.reduceRight=function(e,t,n){var r=Uu(e)?gt:It,i=arguments.length<3;return r(e,eo(t,4),n,i,ur)},xn.repeat=function(e,t,n){return t=(n?fo(e,t,n):t===o)?1:ll(t),Hr(fl(e),t)},xn.replace=function(){var e=arguments,t=fl(e[0]);return e.length<3?t:t.replace(e[1],e[2])},xn.result=function(e,t,n){var r=-1,i=(t=fi(t,e)).length;for(i||(i=1,e=o);++r<i;){var u=null==e?o:e[ko(t[r])];u===o&&(r=i,u=n),e=Gu(u)?u.call(e):u}return e},xn.round=di,xn.runInContext=e,xn.sample=function(e){return(Uu(e)?Gn:Wr)(e)},xn.size=function(e){if(null==e)return 0;if(Fu(e))return el(e)?Bt(e):e.length;var t=uo(e);return t==b||t==A?e.size:Or(e).length},xn.snakeCase=ql,xn.some=function(e,t,n){return(Uu(e)?mt:Yr)(e,eo(t=n&&fo(e,t,n)?o:t,3))},xn.sortedIndex=function(e,t){return Xr(e,t)},xn.sortedIndexBy=function(e,t,n){return Qr(e,t,eo(n,2))},xn.sortedIndexOf=function(e,t){var n=null==e?0:e.length;if(n){var r=Xr(e,t);if(r<n&&Du(e[r],t))return r}return-1},xn.sortedLastIndex=function(e,t){return Xr(e,t,!0)},xn.sortedLastIndexBy=function(e,t,n){return Qr(e,t,eo(n,2),!0)},xn.sortedLastIndexOf=function(e,t){if(null!=e&&e.length){var n=Xr(e,t,!0)-1;if(Du(e[n],t))return n}return-1},xn.startCase=Hl,xn.startsWith=function(e,t,n){return e=fl(e),n=null==n?0:er(ll(n),0,e.length),t=ti(t),e.slice(n,n+t.length)==t},xn.subtract=un,xn.sum=function(e){return e&&e.length?Ot(e,$l):0},xn.sumBy=function(e,t){return e&&e.length?Ot(e,eo(t,2)):0},xn.template=function(e,t,n){var r=xn.templateSettings;n&&fo(e,t,n)&&(t=o),e=fl(e),t=pl({},t,r,Gi);var l,a,s=El(r=pl({},t.imports,r.imports,Gi)),c=Dt(r,s),f=0,d=(r=t.interpolate||ge,"__p += '"),h=(r=be((t.escape||ge).source+"|"+r.source+"|"+(r===K?se:ge).source+"|"+(t.evaluate||ge).source+"|$","g"),"//# sourceURL="+(Ie.call(t,"sourceURL")?(t.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++Ve+"]")+"\n");if(e.replace(r,(function(t,n,r,i,o,u){return r=r||i,d+=e.slice(f,u).replace(me,Ft),n&&(l=!0,d+="' +\n__e("+n+") +\n'"),o&&(a=!0,d+="';\n"+o+";\n__p += '"),r&&(d+="' +\n((__t = ("+r+")) == null ? '' : __t) +\n'"),f=u+t.length,t})),d+="';\n",t=Ie.call(t,"variable")&&t.variable){if(le.test(t))throw new i("Invalid `variable` option passed into `_.template`")}else d="with (obj) {\n"+d+"\n}\n";if(d=(a?d.replace(q,""):d).replace(H,"$1").replace(V,"$1;"),d="function("+(t||"obj")+") {\n"+(t?"":"obj || (obj = {});\n")+"var __t, __p = ''"+(l?", __e = _.escape":"")+(a?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":";\n")+d+"return __p\n}",(t=Gl((function(){return u(s,h+"return "+d).apply(o,c)}))).source=d,Wu(t))throw t;return t},xn.times=function(e,t){if((e=ll(e))<1||c<e)return[];var n=f,r=fn(e,f);for(t=eo(t),e-=f,r=kt(r,t);++n<e;)t(n);return r},xn.toFinite=ul,xn.toInteger=ll,xn.toLength=al,xn.toLower=function(e){return fl(e).toLowerCase()},xn.toNumber=sl,xn.toSafeInteger=function(e){return e?er(ll(e),-c,c):0===e?e:0},xn.toString=fl,xn.toUpper=function(e){return fl(e).toUpperCase()},xn.trim=function(e,t,n){return(e=fl(e))&&(n||t===o)?Pt(e):e&&(t=ti(t))?hi(e=zt(e),Nt(e,t=zt(t)),Lt(e,t)+1).join(""):e},xn.trimEnd=function(e,t,n){return(e=fl(e))&&(n||t===o)?e.slice(0,$t(e)+1):e&&(t=ti(t))?hi(e=zt(e),0,Lt(e,zt(t))+1).join(""):e},xn.trimStart=function(e,t,n){return(e=fl(e))&&(n||t===o)?e.replace(te,""):e&&(t=ti(t))?hi(e=zt(e),Nt(e,zt(t))).join(""):e},xn.truncate=function(e,t){var n,r=30,i="...";$u(t)&&(n="separator"in t?t.separator:n,r="length"in t?ll(t.length):r,i="omission"in t?ti(t.omission):i);var u;t=(e=fl(e)).length;if((t=qt(e)?(u=zt(e)).length:t)<=r)return e;if((t=r-Bt(i))<1)return i;if(r=u?hi(u,0,t).join(""):e.slice(0,t),n===o)return r+i;if(u&&(t+=r.length-t),Qu(n)){if(e.slice(t).search(n)){var l,a=r;for((n=n.global?n:be(n.source,fl(ce.exec(n))+"g")).lastIndex=0;l=n.exec(a);)var s=l.index;r=r.slice(0,s===o?t:s)}}else e.indexOf(ti(n),t)==t||-1<(t=r.lastIndexOf(n))&&(r=r.slice(0,t));return r+i},xn.unescape=function(e){return(e=fl(e))&&B.test(e)?e.replace(W,Jt):e},xn.uniqueId=function(e){var t=++Oe;return fl(e)+t},xn.upperCase=Ee,xn.upperFirst=Vl,xn.each=fu,xn.eachRight=du,xn.first=Fo,Kl(xn,(ea={},hr(xn,(function(e,t){Ie.call(xn.prototype,t)||(ea[t]=e)})),ea),{chain:!1}),xn.VERSION="4.17.21",at(["bind","bindKey","curry","curryRight","partial","partialRight"],(function(e){xn[e].placeholder=xn})),at(["drop","take"],(function(e,t){Un.prototype[e]=function(n){n=n===o?1:cn(ll(n),0);var r=this.__filtered__&&!t?new Un(this):this.clone();return r.__filtered__?r.__takeCount__=fn(n,r.__takeCount__):r.__views__.push({size:fn(n,f),type:e+(r.__dir__<0?"Right":"")}),r},Un.prototype[e+"Right"]=function(t){return this.reverse()[e](t).reverse()}})),at(["filter","map","takeWhile"],(function(e,t){var n=t+1,r=1==n||3==n;Un.prototype[e]=function(e){var t=this.clone();return t.__iteratees__.push({iteratee:eo(e,3),type:n}),t.__filtered__=t.__filtered__||r,t}})),at(["head","last"],(function(e,t){var n="take"+(t?"Right":"");Un.prototype[e]=function(){return this[n](1).value()[0]}})),at(["initial","tail"],(function(e,t){var n="drop"+(t?"":"Right");Un.prototype[e]=function(){return this.__filtered__?new Un(this):this[n](1)}})),Un.prototype.compact=function(){return this.filter($l)},Un.prototype.find=function(e){return this.filter(e).head()},Un.prototype.findLast=function(e){return this.reverse().find(e)},Un.prototype.invokeMap=Vr((function(e,t){return"function"==typeof e?new Un(this):this.map((function(n){return Tr(n,e,t)}))})),Un.prototype.reject=function(e){return this.filter(Iu(eo(e)))},Un.prototype.slice=function(e,t){e=ll(e);var n=this;return n.__filtered__&&(0<e||t<0)?new Un(n):(e<0?n=n.takeRight(-e):e&&(n=n.drop(e)),t!==o?(t=ll(t))<0?n.dropRight(-t):n.take(t-e):n)},Un.prototype.takeRightWhile=function(e){return this.reverse().takeWhile(e).reverse()},Un.prototype.toArray=function(){return this.take(f)},hr(Un.prototype,(function(e,t){var n=/^(?:filter|find|map|reject)|While$/.test(t),r=/^(?:head|last)$/.test(t),i=xn[r?"take"+("last"==t?"Right":""):t],u=r||/^find/.test(t);i&&(xn.prototype[t]=function(){function t(e){return e=i.apply(xn,vt([e],a)),r&&d?e[0]:e}var l=this.__wrapped__,a=r?[1]:arguments,s=l instanceof Un,c=a[0],f=s||Uu(l);f&&n&&"function"==typeof c&&1!=c.length&&(s=f=!1);var d=this.__chain__,h=!!this.__actions__.length;c=u&&!d,h=s&&!h;if(u||!f)return c&&h?e.apply(this,a):(p=this.thru(t),c?r?p.value()[0]:p.value():p);l=h?l:new Un(this);var p=e.apply(l,a);return p.__actions__.push({func:uu,args:[t],thisArg:o}),new Ln(p,d)})})),at(["pop","push","shift","sort","splice","unshift"],(function(e){var t=Te[e],n=/^(?:push|sort|unshift)$/.test(e)?"tap":"thru",r=/^(?:pop|shift)$/.test(e);xn.prototype[e]=function(){var e=arguments;if(!r||this.__chain__)return this[n]((function(n){return t.apply(Uu(n)?n:[],e)}));var i=this.value();return t.apply(Uu(i)?i:[],e)}})),hr(Un.prototype,(function(e,t){var n,r=xn[t];r&&(n=r.name+"",Ie.call(Tn,n)||(Tn[n]=[]),Tn[n].push({name:t,func:r}))})),Tn[xi(o,2).name]=[{name:"wrapper",func:o}],Un.prototype.clone=function(){var e=new Un(this.__wrapped__);return e.__actions__=Ci(this.__actions__),e.__dir__=this.__dir__,e.__filtered__=this.__filtered__,e.__iteratees__=Ci(this.__iteratees__),e.__takeCount__=this.__takeCount__,e.__views__=Ci(this.__views__),e},Un.prototype.reverse=function(){var e;return this.__filtered__?((e=new Un(this)).__dir__=-1,e.__filtered__=!0):(e=this.clone()).__dir__*=-1,e},Un.prototype.value=function(){var e=this.__wrapped__.value(),t=this.__dir__,n=Uu(e),r=t<0,i=n?e.length:0,o=function(e,t,n){for(var r=-1,i=n.length;++r<i;){var o=n[r],u=o.size;switch(o.type){case"drop":e+=u;break;case"dropRight":t-=u;break;case"take":t=fn(t,e+u);break;case"takeRight":e=cn(e,t-u)}}return{start:e,end:t}}(0,i,this.__views__),u=o.start,l=(o=o.end)-u,a=r?o:u-1,s=this.__iteratees__,c=s.length,f=0,d=fn(l,this.__takeCount__);if(!n||!r&&i==l&&d==l)return ui(e,this.__actions__);var h=[];e:for(;l--&&f<d;){for(var p=-1,v=e[a+=t];++p<c;){var _=(g=s[p]).iteratee,g=g.type;_=_(v);if(2==g)v=_;else if(!_){if(1==g)continue e;break e}}h[f++]=v}return h},xn.prototype.at=lu,xn.prototype.chain=function(){return ou(this)},xn.prototype.commit=function(){return new Ln(this.value(),this.__chain__)},xn.prototype.next=function(){this.__values__===o&&(this.__values__=ol(this.value()));var e=this.__index__>=this.__values__.length;return{done:e,value:e?o:this.__values__[this.__index__++]}},xn.prototype.plant=function(e){for(var t,n=this;n instanceof Nn;){var r=xo(n);r.__index__=0,r.__values__=o,t?i.__wrapped__=r:t=r;var i=r;n=n.__wrapped__}return i.__wrapped__=e,t},xn.prototype.reverse=function(){var e=this.__wrapped__;return e instanceof Un?(e=e,(e=(e=this.__actions__.length?new Un(this):e).reverse()).__actions__.push({func:uu,args:[$o],thisArg:o}),new Ln(e,this.__chain__)):this.thru($o)},xn.prototype.toJSON=xn.prototype.valueOf=xn.prototype.value=function(){return ui(this.__wrapped__,this.__actions__)},xn.prototype.first=xn.prototype.head,Yt&&(xn.prototype[Yt]=function(){return this}),xn}();Ye._=Kt,(i=function(){return Kt}.call(t,n,t,r))===o||(r.exports=i)}).call(this)}).call(this,n(81),n(387)(e))},function(e,t,n){e.exports=!n(8)&&!n(3)((function(){return 7!=Object.defineProperty(n(82)("div"),"a",{get:function(){return 7}}).a}))},function(e,t,n){t.f=n(6)},function(e,t,n){var r=n(20),i=n(21),o=n(66)(!1),u=n(84)("IE_PROTO");e.exports=function(e,t){var n,l=i(e),a=0,s=[];for(n in l)n!=u&&r(l,n)&&s.push(n);for(;t.length>a;)r(l,n=t[a++])&&(~o(s,n)||s.push(n));return s}},function(e,t,n){var r=n(11),i=n(1),o=n(43);e.exports=n(8)?Object.defineProperties:function(e,t){i(e);for(var n,u=o(t),l=u.length,a=0;a<l;)r.f(e,n=u[a++],t[n]);return e}},function(e,t,n){var r=n(21),i=n(46).f,o={}.toString,u="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[];e.exports.f=function(e){return u&&"[object Window]"==o.call(e)?function(e){try{return i(e)}catch(e){return u.slice()}}(e):i(r(e))}},function(e,t,n){"use strict";var r=n(8),i=n(43),o=n(67),u=n(62),l=n(12),a=n(61),s=Object.assign;e.exports=!s||n(3)((function(){var e={},t={},n=Symbol(),r="abcdefghijklmnopqrst";return e[n]=7,r.split("").forEach((function(e){t[e]=e})),7!=s({},e)[n]||Object.keys(s({},t)).join("")!=r}))?function(e,t){for(var n=l(e),s=arguments.length,c=1,f=o.f,d=u.f;c<s;)for(var h,p=a(arguments[c++]),v=f?i(p).concat(f(p)):i(p),_=v.length,g=0;g<_;)h=v[g++],r&&!d.call(p,h)||(n[h]=p[h]);return n}:s},function(e,t){e.exports=Object.is||function(e,t){return e===t?0!==e||1/e==1/t:e!=e&&t!=t}},function(e,t,n){"use strict";var r=n(15),i=n(4),o=n(123),u=[].slice,l={};e.exports=Function.bind||function(e){var t=r(this),n=u.call(arguments,1),a=function(){var r=n.concat(u.call(arguments));return this instanceof a?function(e,t,n){if(!(t in l)){for(var r=[],i=0;i<t;i++)r[i]="a["+i+"]";l[t]=Function("F,a","return new F("+r.join(",")+")")}return l[t](e,n)}(t,r.length,r):o(t,r,e)};return i(t.prototype)&&(a.prototype=t.prototype),a}},function(e,t){e.exports=function(e,t,n){var r=void 0===n;switch(t.length){case 0:return r?e():e.call(n);case 1:return r?e(t[0]):e.call(n,t[0]);case 2:return r?e(t[0],t[1]):e.call(n,t[0],t[1]);case 3:return r?e(t[0],t[1],t[2]):e.call(n,t[0],t[1],t[2]);case 4:return r?e(t[0],t[1],t[2],t[3]):e.call(n,t[0],t[1],t[2],t[3])}return e.apply(n,t)}},function(e,t,n){var r=n(2).parseInt,i=n(58).trim,o=(n=n(88),/^[-+]?0[xX]/);e.exports=8!==r(n+"08")||22!==r(n+"0x16")?function(e,t){return e=i(String(e),3),r(e,t>>>0||(o.test(e)?16:10))}:r},function(e,t,n){var r=n(2).parseFloat,i=n(58).trim;e.exports=1/r(n(88)+"-0")!=-1/0?function(e){var t=i(String(e),3);return 0===(e=r(t))&&"-"==t.charAt(0)?-0:e}:r},function(e,t,n){var r=n(26);e.exports=function(e,t){if("number"!=typeof e&&"Number"!=r(e))throw TypeError(t);return+e}},function(e,t,n){var r=n(4),i=Math.floor;e.exports=function(e){return!r(e)&&isFinite(e)&&i(e)===e}},function(e,t){e.exports=Math.log1p||function(e){return-1e-8<(e=+e)&&e<1e-8?e-e*e/2:Math.log(1+e)}},function(e,t,n){var r=n(91),i=(n=Math.pow)(2,-52),o=n(2,-23),u=n(2,127)*(2-o),l=n(2,-126);e.exports=Math.fround||function(e){var t=Math.abs(e),n=r(e);return t<l?n*(t/l/o+1/i-1/i)*l*o:u<(t=(e=(1+o/i)*t)-(e-t))||t!=t?n*(1/0):n*t}},function(e,t,n){var r=n(1);e.exports=function(e,t,n,i){try{return i?t(r(n)[0],n[1]):t(n)}catch(t){throw void 0!==(n=e.return)&&r(n.call(e)),t}}},function(e,t,n){var r=n(15),i=n(12),o=n(61),u=n(7);e.exports=function(e,t,n,l,a){r(t);var s=i(e),c=o(s),f=u(s.length),d=a?f-1:0,h=a?-1:1;if(n<2)for(;;){if(d in c){l=c[d],d+=h;break}if(d+=h,a?d<0:f<=d)throw TypeError("Reduce of empty array with no initial value")}for(;a?0<=d:d<f;d+=h)d in c&&(l=t(l,c[d],d,s));return l}},function(e,t,n){"use strict";var r=n(12),i=n(44),o=n(7);e.exports=[].copyWithin||function(e,t){var n=r(this),u=o(n.length),l=i(e,u),a=i(t,u),s=(t=2<arguments.length?arguments[2]:void 0,Math.min((void 0===t?u:i(t,u))-a,u-l)),c=1;for(a<l&&l<a+s&&(c=-1,a+=s-1,l+=s-1);0<s--;)a in n?n[l]=n[a]:delete n[l],l+=c,a+=c;return n}},function(e,t){e.exports=function(e,t){return{value:t,done:!!e}}},function(e,t,n){"use strict";var r=n(103);n(0)({target:"RegExp",proto:!0,forced:r!==/./.exec},{exec:r})},function(e,t,n){n(8)&&"g"!=/./g.flags&&n(11).f(RegExp.prototype,"flags",{configurable:!0,get:n(63)})},function(e,t){e.exports=function(e){try{return{e:!1,v:e()}}catch(e){return{e:!0,v:e}}}},function(e,t,n){var r=n(1),i=n(4),o=n(107);e.exports=function(e,t){return r(e),i(t)&&t.constructor===e?t:((0,(e=o.f(e)).resolve)(t),e.promise)}},function(e,t,n){"use strict";var r=n(139),i=n(51);e.exports=n(75)("Map",(function(e){return function(){return e(this,0<arguments.length?arguments[0]:void 0)}}),{get:function(e){return(e=r.getEntry(i(this,"Map"),e))&&e.v},set:function(e,t){return r.def(i(this,"Map"),0===e?0:e,t)}},r,!0)},function(e,t,n){"use strict";function r(e,t){var n,r=p(t);if("F"!==r)return e._i[r];for(n=e._f;n;n=n.n)if(n.k==t)return n}var i=n(11).f,o=n(45),u=n(50),l=n(25),a=n(48),s=n(49),c=n(93),f=n(133),d=n(47),h=n(8),p=n(38).fastKey,v=n(51),_=h?"_s":"size";e.exports={getConstructor:function(e,t,n,c){var f=e((function(e,r){a(e,f,t,"_i"),e._t=t,e._i=o(null),e._f=void 0,e._l=void 0,e[_]=0,null!=r&&s(r,n,e[c],e)}));return u(f.prototype,{clear:function(){for(var e=v(this,t),n=e._i,r=e._f;r;r=r.n)r.r=!0,r.p&&(r.p=r.p.n=void 0),delete n[r.i];e._f=e._l=void 0,e[_]=0},delete:function(e){var n,i=v(this,t),o=r(i,e);return o&&(n=o.n,e=o.p,delete i._i[o.i],o.r=!0,e&&(e.n=n),n&&(n.p=e),i._f==o&&(i._f=n),i._l==o&&(i._l=e),i[_]--),!!o},forEach:function(e){v(this,t);for(var n,r=l(e,1<arguments.length?arguments[1]:void 0,3);n=n?n.n:this._f;)for(r(n.v,n.k,this);n&&n.r;)n=n.p},has:function(e){return!!r(v(this,t),e)}}),h&&i(f.prototype,"size",{get:function(){return v(this,t)[_]}}),f},def:function(e,t,n){var i,o=r(e,t);return o?o.v=n:(e._l=o={i:i=p(t,!0),k:t,v:n,p:n=e._l,n:void 0,r:!1},e._f||(e._f=o),n&&(n.n=o),e[_]++,"F"!==i&&(e._i[i]=o)),e},getEntry:r,setStrong:function(e,t,n){c(e,t,(function(e,n){this._t=v(e,t),this._k=n,this._l=void 0}),(function(){for(var e=this._k,t=this._l;t&&t.r;)t=t.p;return this._t&&(this._l=t=t?t.n:this._t._f)?f(0,"keys"==e?t.k:"values"==e?t.v:[t.k,t.v]):(this._t=void 0,f(1))}),n?"entries":"values",!n,!0),d(t)}}},function(e,t,n){"use strict";var r=n(139),i=n(51);e.exports=n(75)("Set",(function(e){return function(){return e(this,0<arguments.length?arguments[0]:void 0)}}),{add:function(e){return r.def(i(this,"Set"),e=0===e?0:e,e)}},r)},function(e,t,n){"use strict";function r(e){return function(){return e(this,0<arguments.length?arguments[0]:void 0)}}var i,o=n(2),u=n(32)(0),l=n(18),a=n(38),s=n(120),c=n(142),f=n(4),d=n(51),h=n(51),p=!o.ActiveXObject&&"ActiveXObject"in o,v="WeakMap",_=a.getWeak,g=Object.isExtensible,m=c.ufstore,y=(o={get:function(e){if(f(e)){var t=_(e);return!0===t?m(d(this,v)).get(e):t?t[this._i]:void 0}},set:function(e,t){return c.def(d(this,v),e,t)}},e.exports=n(75)(v,r,o,c,!0,!0));h&&p&&(s((i=c.getConstructor(r,v)).prototype,o),a.NEED=!0,u(["delete","has","get","set"],(function(e){var t=y.prototype,n=t[e];l(t,e,(function(t,r){return!f(t)||g(t)?n.call(this,t,r):(this._f||(this._f=new i),r=this._f[e](t,r),"set"==e?this:r)}))})))},function(e,t,n){"use strict";function r(e){return e._l||(e._l=new i)}function i(){this.a=[]}function o(e,t){return v(e.a,(function(e){return e[0]===t}))}var u=n(50),l=n(38).getWeak,a=n(1),s=n(4),c=n(48),f=n(49),d=n(32),h=n(20),p=n(51),v=d(5),_=d(6),g=0;i.prototype={get:function(e){if(e=o(this,e))return e[1]},has:function(e){return!!o(this,e)},set:function(e,t){var n=o(this,e);n?n[1]=t:this.a.push([e,t])},delete:function(e){var t=_(this.a,(function(t){return t[0]===e}));return~t&&this.a.splice(t,1),!!~t}},e.exports={getConstructor:function(e,t,n,i){var o=e((function(e,r){c(e,o,t,"_i"),e._t=t,e._i=g++,e._l=void 0,null!=r&&f(r,n,e[i],e)}));return u(o.prototype,{delete:function(e){if(!s(e))return!1;var n=l(e);return!0===n?r(p(this,t)).delete(e):n&&h(n,this._i)&&delete n[this._i]},has:function(e){if(!s(e))return!1;var n=l(e);return!0===n?r(p(this,t)).has(e):n&&h(n,this._i)}}),o},def:function(e,t,n){var i=l(a(t),!0);return!0===i?r(e).set(t,n):i[e._i]=n,e},ufstore:r}},function(e,t,n){var r=n(27),i=n(7);e.exports=function(e){if(void 0===e)return 0;var t=r(e);if(t!==(e=i(t)))throw RangeError("Wrong length!");return e}},function(e,t,n){var r=n(46),i=n(67),o=n(1);n=n(2).Reflect;e.exports=n&&n.ownKeys||function(e){var t=r.f(o(e)),n=i.f;return n?t.concat(n(e)):t}},function(e,t,n){"use strict";var r=n(68),i=n(4),o=n(7),u=n(25),l=n(6)("isConcatSpreadable");e.exports=function e(t,n,a,s,c,f,d,h){for(var p,v,_=c,g=0,m=!!d&&u(d,h,3);g<s;){if(g in a){if(p=m?m(a[g],g,n):a[g],v=!1,(v=i(p)?void 0!==(v=p[l])?!!v:r(p):v)&&0<f)_=e(t,n,p,o(p.length),_,f-1)-1;else{if(9007199254740991<=_)throw TypeError();t[_]=p}_++}g++}return _}},function(e,t,n){var r=n(7),i=n(90),o=n(30);e.exports=function(e,t,n,u){var l=String(o(e));e=l.length,n=void 0===n?" ":String(n);return(t=r(t))<=e||""==n?l:(e=t-e,(n=i.call(n,Math.ceil(e/n.length))).length>e&&(n=n.slice(0,e)),u?n+l:l+n)}},function(e,t,n){var r=n(8),i=n(43),o=n(21),u=n(62).f;e.exports=function(e){return function(t){for(var n,l=o(t),a=i(l),s=a.length,c=0,f=[];c<s;)n=a[c++],r&&!u.call(l,n)||f.push(e?[n,l[n]]:l[n]);return f}}},function(e,t,n){var r=n(57),i=n(149);e.exports=function(e){return function(){if(r(this)!=e)throw TypeError(e+"#toJSON isn't generic");return i(this)}}},function(e,t,n){var r=n(49);e.exports=function(e,t){var n=[];return r(e,!1,n.push,n,t),n}},function(e,t){e.exports=Math.scale||function(e,t,n,r,i){return 0===arguments.length||e!=e||t!=t||n!=n||r!=r||i!=i?NaN:e===1/0||e===-1/0?e:(e-t)*(i-r)/(n-t)+r}},function(e,t){var n=e.exports={v:[{name:"version",reg:/^(\d*)$/}],o:[{name:"origin",reg:/^(\S*) (\d*) (\d*) (\S*) IP(\d) (\S*)/,names:["username","sessionId","sessionVersion","netType","ipVer","address"],format:"%s %s %d %s IP%d %s"}],s:[{name:"name"}],i:[{name:"description"}],u:[{name:"uri"}],e:[{name:"email"}],p:[{name:"phone"}],z:[{name:"timezones"}],r:[{name:"repeats"}],t:[{name:"timing",reg:/^(\d*) (\d*)/,names:["start","stop"],format:"%d %d"}],c:[{name:"connection",reg:/^IN IP(\d) (\S*)/,names:["version","ip"],format:"IN IP%d %s"}],b:[{push:"bandwidth",reg:/^(TIAS|AS|CT|RR|RS):(\d*)/,names:["type","limit"],format:"%s:%s"}],m:[{reg:/^(\w*) (\d*) ([\w/]*)(?: (.*))?/,names:["type","port","protocol","payloads"],format:"%s %d %s %s"}],a:[{push:"rtp",reg:/^rtpmap:(\d*) ([\w\-.]*)(?:\s*\/(\d*)(?:\s*\/(\S*))?)?/,names:["payload","codec","rate","encoding"],format:function(e){return e.encoding?"rtpmap:%d %s/%s/%s":e.rate?"rtpmap:%d %s/%s":"rtpmap:%d %s"}},{push:"fmtp",reg:/^fmtp:(\d*) ([\S| ]*)/,names:["payload","config"],format:"fmtp:%d %s"},{name:"control",reg:/^control:(.*)/,format:"control:%s"},{name:"rtcp",reg:/^rtcp:(\d*)(?: (\S*) IP(\d) (\S*))?/,names:["port","netType","ipVer","address"],format:function(e){return null!=e.address?"rtcp:%d %s IP%d %s":"rtcp:%d"}},{push:"rtcpFbTrrInt",reg:/^rtcp-fb:(\*|\d*) trr-int (\d*)/,names:["payload","value"],format:"rtcp-fb:%s trr-int %d"},{push:"rtcpFb",reg:/^rtcp-fb:(\*|\d*) ([\w-_]*)(?: ([\w-_]*))?/,names:["payload","type","subtype"],format:function(e){return null!=e.subtype?"rtcp-fb:%s %s %s":"rtcp-fb:%s %s"}},{push:"ext",reg:/^extmap:(\d+)(?:\/(\w+))?(?: (urn:ietf:params:rtp-hdrext:encrypt))? (\S*)(?: (\S*))?/,names:["value","direction","encrypt-uri","uri","config"],format:function(e){return"extmap:%d"+(e.direction?"/%s":"%v")+(e["encrypt-uri"]?" %s":"%v")+" %s"+(e.config?" %s":"")}},{name:"extmapAllowMixed",reg:/^(extmap-allow-mixed)/},{push:"crypto",reg:/^crypto:(\d*) ([\w_]*) (\S*)(?: (\S*))?/,names:["id","suite","config","sessionConfig"],format:function(e){return null!=e.sessionConfig?"crypto:%d %s %s %s":"crypto:%d %s %s"}},{name:"setup",reg:/^setup:(\w*)/,format:"setup:%s"},{name:"connectionType",reg:/^connection:(new|existing)/,format:"connection:%s"},{name:"mid",reg:/^mid:([^\s]*)/,format:"mid:%s"},{name:"msid",reg:/^msid:(.*)/,format:"msid:%s"},{name:"ptime",reg:/^ptime:(\d*(?:\.\d*)*)/,format:"ptime:%d"},{name:"maxptime",reg:/^maxptime:(\d*(?:\.\d*)*)/,format:"maxptime:%d"},{name:"direction",reg:/^(sendrecv|recvonly|sendonly|inactive)/},{name:"icelite",reg:/^(ice-lite)/},{name:"iceUfrag",reg:/^ice-ufrag:(\S*)/,format:"ice-ufrag:%s"},{name:"icePwd",reg:/^ice-pwd:(\S*)/,format:"ice-pwd:%s"},{name:"fingerprint",reg:/^fingerprint:(\S*) (\S*)/,names:["type","hash"],format:"fingerprint:%s %s"},{push:"candidates",reg:/^candidate:(\S*) (\d*) (\S*) (\d*) (\S*) (\d*) typ (\S*)(?: raddr (\S*) rport (\d*))?(?: tcptype (\S*))?(?: generation (\d*))?(?: network-id (\d*))?(?: network-cost (\d*))?/,names:["foundation","component","transport","priority","ip","port","type","raddr","rport","tcptype","generation","network-id","network-cost"],format:function(e){var t="candidate:%s %d %s %d %s %d typ %s";return t+=null!=e.raddr?" raddr %s rport %d":"%v%v",t+=null!=e.tcptype?" tcptype %s":"%v",null!=e.generation&&(t+=" generation %d"),(t+=null!=e["network-id"]?" network-id %d":"%v")+(null!=e["network-cost"]?" network-cost %d":"%v")}},{name:"endOfCandidates",reg:/^(end-of-candidates)/},{name:"remoteCandidates",reg:/^remote-candidates:(.*)/,format:"remote-candidates:%s"},{name:"iceOptions",reg:/^ice-options:(\S*)/,format:"ice-options:%s"},{push:"ssrcs",reg:/^ssrc:(\d*) ([\w_-]*)(?::(.*))?/,names:["id","attribute","value"],format:function(e){var t="ssrc:%d";return null!=e.attribute&&(t+=" %s",null!=e.value&&(t+=":%s")),t}},{push:"ssrcGroups",reg:/^ssrc-group:([\x21\x23\x24\x25\x26\x27\x2A\x2B\x2D\x2E\w]*) (.*)/,names:["semantics","ssrcs"],format:"ssrc-group:%s %s"},{name:"msidSemantic",reg:/^msid-semantic:\s?(\w*) (\S*)/,names:["semantic","token"],format:"msid-semantic: %s %s"},{push:"groups",reg:/^group:(\w*) (.*)/,names:["type","mids"],format:"group:%s %s"},{name:"rtcpMux",reg:/^(rtcp-mux)/},{name:"rtcpRsize",reg:/^(rtcp-rsize)/},{name:"sctpmap",reg:/^sctpmap:([\w_/]*) (\S*)(?: (\S*))?/,names:["sctpmapNumber","app","maxMessageSize"],format:function(e){return null!=e.maxMessageSize?"sctpmap:%s %s %s":"sctpmap:%s %s"}},{name:"xGoogleFlag",reg:/^x-google-flag:([^\s]*)/,format:"x-google-flag:%s"},{push:"rids",reg:/^rid:([\d\w]+) (\w+)(?: ([\S| ]*))?/,names:["id","direction","params"],format:function(e){return e.params?"rid:%s %s %s":"rid:%s %s"}},{push:"imageattrs",reg:new RegExp("^imageattr:(\\d+|\\*)[\\s\\t]+(send|recv)[\\s\\t]+(\\*|\\[\\S+\\](?:[\\s\\t]+\\[\\S+\\])*)(?:[\\s\\t]+(recv|send)[\\s\\t]+(\\*|\\[\\S+\\](?:[\\s\\t]+\\[\\S+\\])*))?"),names:["pt","dir1","attrs1","dir2","attrs2"],format:function(e){return"imageattr:%s %s %s"+(e.dir2?" %s %s":"")}},{name:"simulcast",reg:new RegExp("^simulcast:(send|recv) ([a-zA-Z0-9\\-_~;,]+)(?:\\s?(send|recv) ([a-zA-Z0-9\\-_~;,]+))?$"),names:["dir1","list1","dir2","list2"],format:function(e){return"simulcast:%s %s"+(e.dir2?" %s %s":"")}},{name:"simulcast_03",reg:/^simulcast:[\s\t]+([\S+\s\t]+)$/,names:["value"],format:"simulcast: %s"},{name:"framerate",reg:/^framerate:(\d+(?:$|\.\d+))/,format:"framerate:%s"},{name:"sourceFilter",reg:/^source-filter: *(excl|incl) (\S*) (IP4|IP6|\*) (\S*) (.*)/,names:["filterMode","netType","addressTypes","destAddress","srcList"],format:"source-filter: %s %s %s %s %s"},{name:"bundleOnly",reg:/^(bundle-only)/},{name:"label",reg:/^label:(.+)/,format:"label:%s"},{name:"sctpPort",reg:/^sctp-port:(\d+)$/,format:"sctp-port:%s"},{name:"maxMessageSize",reg:/^max-message-size:(\d+)$/,format:"max-message-size:%s"},{push:"tsRefClocks",reg:/^ts-refclk:([^\s=]*)(?:=(\S*))?/,names:["clksrc","clksrcExt"],format:function(e){return"ts-refclk:%s"+(null!=e.clksrcExt?"=%s":"")}},{name:"mediaClk",reg:/^mediaclk:(?:id=(\S*))? *([^\s=]*)(?:=(\S*))?(?: *rate=(\d+)\/(\d+))?/,names:["id","mediaClockName","mediaClockValue","rateNumerator","rateDenominator"],format:function(e){var t="mediaclk:";return t+=null!=e.id?"id=%s %s":"%v%s",t+=null!=e.mediaClockValue?"=%s":"",(t+=null!=e.rateNumerator?" rate=%s":"")+(null!=e.rateDenominator?"/%s":"")}},{name:"keywords",reg:/^keywds:(.+)$/,format:"keywds:%s"},{name:"content",reg:/^content:(.+)/,format:"content:%s"},{name:"bfcpFloorCtrl",reg:/^floorctrl:(c-only|s-only|c-s)/,format:"floorctrl:%s"},{name:"bfcpConfId",reg:/^confid:(\d+)/,format:"confid:%s"},{name:"bfcpUserId",reg:/^userid:(\d+)/,format:"userid:%s"},{name:"bfcpFloorId",reg:/^floorid:(.+) (?:m-stream|mstrm):(.+)/,names:["id","mStream"],format:"floorid:%s mstrm:%s"},{push:"invalid",names:["value"]}]};Object.keys(n).forEach((function(e){n[e].forEach((function(e){e.reg||(e.reg=/(.*)/),e.format||(e.format="%s")}))}))},function(e,t){var n,r;e=e.exports={};function i(){throw new Error("setTimeout has not been defined")}function o(){throw new Error("clearTimeout has not been defined")}function u(e){if(n===setTimeout)return setTimeout(e,0);if((n===i||!n)&&setTimeout)return n=setTimeout,setTimeout(e,0);try{return n(e,0)}catch(t){try{return n.call(null,e,0)}catch(t){return n.call(this,e,0)}}}!function(){try{n="function"==typeof setTimeout?setTimeout:i}catch(e){n=i}try{r="function"==typeof clearTimeout?clearTimeout:o}catch(e){r=o}}();var l,a=[],s=!1,c=-1;function f(){s&&l&&(s=!1,l.length?a=l.concat(a):c=-1,a.length&&d())}function d(){if(!s){var e=u(f);s=!0;for(var t=a.length;t;){for(l=a,a=[];++c<t;)l&&l[c].run();c=-1,t=a.length}l=null,s=!1,function(e){if(r===clearTimeout)return clearTimeout(e);if((r===o||!r)&&clearTimeout)return r=clearTimeout,clearTimeout(e);try{r(e)}catch(t){try{return r.call(null,e)}catch(t){return r.call(this,e)}}}(e)}}function h(e,t){this.fun=e,this.array=t}function p(){}e.nextTick=function(e){var t=new Array(arguments.length-1);if(1<arguments.length)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];a.push(new h(e,t)),1!==a.length||s||u(d)},h.prototype.run=function(){this.fun.apply(null,this.array)},e.title="browser",e.browser=!0,e.env={},e.argv=[],e.version="",e.versions={},e.on=p,e.addListener=p,e.once=p,e.off=p,e.removeListener=p,e.removeAllListeners=p,e.emit=p,e.prependListener=p,e.prependOnceListener=p,e.listeners=function(e){return[]},e.binding=function(e){throw new Error("process.binding is not supported")},e.cwd=function(){return"/"},e.chdir=function(e){throw new Error("process.chdir is not supported")},e.umask=function(){return 0}},function(e,t,n){"use strict";function r(e){return function(e){if(Array.isArray(e))return i(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return i(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Map"===(n="Object"===n&&e.constructor?e.constructor.name:n)||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?i(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function i(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function u(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function l(e,t,n){return t&&u(e.prototype,t),n&&u(e,n),e}var a=n(368),s=n(111),c=function(){function e(t){o(this,e),this.buffer=[],this.currPos=0,this.size=t}return l(e,[{key:"push",value:function(e){this.buffer.length===this.size?this.buffer[this.currPos]=e:this.buffer.push(e),this.currPos=(this.currPos+1)%this.size}},{key:"gerOrderedData",value:function(){var e=this.buffer.slice(this.currPos),t=this.buffer.slice(0,this.currPos);return[].concat(r(e),r(t))}},{key:"reset",value:function(){this.buffer=[],this.currPos=0}}]),e}();n=new(function(){function e(){o(this,e),s.enable("*"),this.logSettings={console:{enable:!1},blob:{enable:!1,emptyAfterRetrieval:!0}},this.logData=new c(5e3)}return l(e,[{key:"info",value:function(){for(var e=(new Date).toISOString(),t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];this._storeToBlob(n,e),this._isConsoleEnabled()&&(n[0]=this._appendDateTime(n[0],e),console.info.apply(this,n))}},{key:"warn",value:function(){for(var e=(new Date).toISOString(),t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];this._storeToBlob(n,e),this._isConsoleEnabled()&&(n[0]=this._appendDateTime(n[0],e),console.warn.apply(this,n))}},{key:"error",value:function(){for(var e=(new Date).toISOString(),t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];this._storeToBlob(n,e),this._isConsoleEnabled()&&(n[0]=this._appendDateTime(n[0],e),console.error.apply(this,n))}},{key:"updateLogSettings",value:function(e){this.logSettings=e}},{key:"getLogs",value:function(){var e=this.logData.gerOrderedData();return this.logSettings.blob.emptyAfterRetrieval&&this.clearLogs(),e}},{key:"clearLogs",value:function(){this.logData.reset()}},{key:"_appendDateTime",value:function(e,t){if(void 0!==e)return"".concat(t," ").concat(e)}},{key:"_storeToBlob",value:function(e,t){try{var n,r,i,o;this.logSettings.blob.enable&&(n=e.filter((function(e){return"string"!=typeof e||!e.startsWith("color: ")})),i="string"==typeof(r=e[0])?r.replace(/%c/g,"").replace(/%O/g,"%j").replace(/%o/g,"%j"):r,n[0]=i,o=a.format.apply(null,n),this.logData.push("".concat(t," ").concat(o)))}catch(e){console.log("got err",e)}}},{key:"_isConsoleEnabled",value:function(){return this.logSettings.console.enable}}]),e}());e.exports=n},function(e,t,n){"use strict";e.exports={T1:500,T2:4e3,T4:5e3,TIMER_B:32e3,TIMER_D:0,TIMER_F:32e3,TIMER_H:32e3,TIMER_I:0,TIMER_J:0,TIMER_K:0,TIMER_L:32e3,TIMER_M:32e3,PROVISIONAL_RESPONSE_INTERVAL:6e4}},function(e,t,n){"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return o(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Map"===(n="Object"===n&&e.constructor?e.constructor.name:n)||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?o(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0;return{s:t=function(){},n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:t}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,u=!0,l=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return u=e.done,e},e:function(e){l=!0,i=e},f:function(){try{u||null==n.return||n.return()}finally{if(l)throw i}}}}function o(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function u(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function l(e,t){return(l=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function a(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=s(e);return function(e,t){if(t&&("object"===r(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0!==e)return e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(e)}(this,t?(n=s(this).constructor,Reflect.construct(i,arguments,n)):i.apply(this,arguments))}}function s(e){return(s=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var c=n(34).EventEmitter,f=n(10),d=n(13),h=n(52),p=n(65),v=n(16),_=n(154),g=n(40),m=n(372),y=n(80),b=n(374),C=n(375),S=n(376),T=n(377),E=n(53),A=new(n=n(14))("JsSIP:RTCSession").debug,w=new n("JsSIP:RTCSession").error,R={STATUS_NULL:0,STATUS_INVITE_SENT:1,STATUS_1XX_RECEIVED:2,STATUS_INVITE_RECEIVED:3,STATUS_WAITING_FOR_ANSWER:4,STATUS_ANSWERED:5,STATUS_WAITING_FOR_ACK:6,STATUS_CANCELED:7,STATUS_TERMINATED:8,STATUS_CONFIRMED:9},I=["audio","video"];e.exports=function(){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&l(e,t)}(o,c);var e,t,n,r=a(o);function o(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),A("new"),(t=r.call(this))._id=null,t._ua=e,t._status=R.STATUS_NULL,t._dialog=null,t._earlyDialogs={},t._contact=null,t._from_tag=null,t._to_tag=null,t._connection=null,t._connectionPromiseQueue=Promise.resolve(),t._request=null,t._is_canceled=!1,t._cancel_reason="",t._is_confirmed=!1,t._late_sdp=!1,t._rtcOfferConstraints=null,t._rtcAnswerConstraints=null,t._localMediaStream=null,t._localMediaStreamLocallyGenerated=!1,t._rtcReady=!0,t._timers={ackTimer:null,expiresTimer:null,invite2xxTimer:null,userNoAnswerTimer:null},t._direction=null,t._local_identity=null,t._remote_identity=null,t._start_time=null,t._end_time=null,t._tones=null,t._audioMuted=!1,t._videoMuted=!1,t._localHold=!1,t._remoteHold=!1,t._sessionTimers={enabled:t._ua.configuration.session_timers,refreshMethod:t._ua.configuration.session_timers_refresh_method,defaultExpires:d.SESSION_EXPIRES,currentExpires:null,running:!1,refresher:!1,timer:null},t._referSubscribers={},t._data={},t}return e=o,n=[{key:"C",get:function(){return R}}],(t=[{key:"C",get:function(){return R}},{key:"causes",get:function(){return d.causes}},{key:"id",get:function(){return this._id}},{key:"connection",get:function(){return this._connection}},{key:"contact",get:function(){return this._contact}},{key:"direction",get:function(){return this._direction}},{key:"local_identity",get:function(){return this._local_identity}},{key:"remote_identity",get:function(){return this._remote_identity}},{key:"start_time",get:function(){return this._start_time}},{key:"end_time",get:function(){return this._end_time}},{key:"data",get:function(){return this._data},set:function(e){this._data=e}},{key:"status",get:function(){return this._status}},{key:"isInProgress",value:function(){switch(this._status){case R.STATUS_NULL:case R.STATUS_INVITE_SENT:case R.STATUS_1XX_RECEIVED:case R.STATUS_INVITE_RECEIVED:case R.STATUS_WAITING_FOR_ANSWER:return!0;default:return!1}}},{key:"isEstablished",value:function(){switch(this._status){case R.STATUS_ANSWERED:case R.STATUS_WAITING_FOR_ACK:case R.STATUS_CONFIRMED:return!0;default:return!1}}},{key:"isEnded",value:function(){switch(this._status){case R.STATUS_CANCELED:case R.STATUS_TERMINATED:return!0;default:return!1}}},{key:"isMuted",value:function(){return{audio:this._audioMuted,video:this._videoMuted}}},{key:"isOnHold",value:function(){return{local:this._localHold,remote:this._remoteHold}}},{key:"connect",value:function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},n=2<arguments.length?arguments[2]:void 0;A("connect()");var r,i=e,o=v.cloneObject(t.eventHandlers),u=v.cloneArray(t.extraHeaders),l=v.cloneObject(t.mediaConstraints,{audio:!0,video:!0}),a=t.mediaStream||null,s=v.cloneObject(t.pcConfig,{iceServers:[]}),c=t.rtcConstraints||null,f=t.rtcOfferConstraints||null;if(this._rtcOfferConstraints=f,this._rtcAnswerConstraints=t.rtcAnswerConstraints||null,this._data=t.data||this._data,void 0===e)throw new TypeError("Not enough arguments");if(this._status!==R.STATUS_NULL)throw new h.InvalidStateError(this._status);if(!window.RTCPeerConnection)throw new h.NotSupportedError("WebRTC not supported");if(!(e=this._ua.normalizeTarget(e)))throw new TypeError("Invalid target: ".concat(i));for(r in this._sessionTimers.enabled&&v.isDecimal(t.sessionTimersExpires)&&(t.sessionTimersExpires>=d.MIN_SESSION_EXPIRES?this._sessionTimers.defaultExpires=t.sessionTimersExpires:this._sessionTimers.defaultExpires=d.SESSION_EXPIRES),o)Object.prototype.hasOwnProperty.call(o,r)&&this.on(r,o[r]);this._from_tag=v.newTag();var p=t.anonymous||!1;i={from_tag:this._from_tag};this._contact=this._ua.contact.toString({anonymous:p,outbound:!0}),p?(i.from_display_name="Anonymous",i.from_uri=new E("sip","anonymous","anonymous.invalid"),u.push("P-Preferred-Identity: ".concat(this._ua.configuration.uri.toString())),u.push("Privacy: id")):t.fromUserName&&(i.from_uri=new E("sip",t.fromUserName,this._ua.configuration.uri.host),u.push("P-Preferred-Identity: ".concat(this._ua.configuration.uri.toString()))),t.fromDisplayName&&(i.from_display_name=t.fromDisplayName),u.push("Contact: ".concat(this._contact)),u.push("Content-Type: application/sdp"),this._sessionTimers.enabled&&u.push("Session-Expires: ".concat(this._sessionTimers.defaultExpires).concat(this._ua.configuration.session_timers_force_refresher?";refresher=uac":"")),this._request=new g.InitialOutgoingInviteRequest(e,this._ua,i,u),this._id=this._request.call_id+this._from_tag,this._createRTCConnection(s,c),this._direction="outgoing",this._local_identity=this._request.from,this._remote_identity=this._request.to,n&&n(this),this._newRTCSession("local",this._request,t.isRefer),this._sendInitialRequest(l,f,a)}},{key:"init_incoming",value:function(e,t){var n,r=this;A("init_incoming()");var i=e.hasHeader("Content-Type")?e.getHeader("Content-Type").toLowerCase():void 0;e.body&&"application/sdp"!==i?e.reply(415):(this._status=R.STATUS_INVITE_RECEIVED,this._from_tag=e.from_tag,this._id=e.call_id+this._from_tag,this._request=e,this._contact=this._ua.contact.toString(),e.hasHeader("expires")&&(n=1e3*e.getHeader("expires")),e.to_tag=v.newTag(),this._createDialog(e,"UAS",!0)?(e.body?this._late_sdp=!1:this._late_sdp=!0,this._status=R.STATUS_WAITING_FOR_ANSWER,this._timers.userNoAnswerTimer=setTimeout((function(){e.reply(408),r._failed("local",null,d.causes.NO_ANSWER)}),this._ua.configuration.no_answer_timeout),n&&(this._timers.expiresTimer=setTimeout((function(){r._status===R.STATUS_WAITING_FOR_ANSWER&&(e.reply(487),r._failed("system",null,d.causes.EXPIRES))}),n)),this._direction="incoming",this._local_identity=e.to,this._remote_identity=e.from,t&&t(this),this._newRTCSession("remote",e),this._status!==R.STATUS_TERMINATED&&(e.reply(180,null,["Contact: ".concat(this._contact)]),this._progress("local",null))):e.reply(500,"Missing Contact header field"))}},{key:"answer",value:function(){var e=this,t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};A("answer()");var n=this._request,r=v.cloneArray(t.extraHeaders),o=v.cloneObject(t.mediaConstraints),u=t.mediaStream||null,l=v.cloneObject(t.pcConfig,{iceServers:[]}),a=t.rtcConstraints||null,s=t.rtcAnswerConstraints||null,c=v.cloneObject(t.rtcOfferConstraints),f=!1,p=!1,_=!1,g=!1;if(this._rtcAnswerConstraints=s,this._rtcOfferConstraints=t.rtcOfferConstraints||null,this._data=t.data||this._data,"incoming"!==this._direction)throw new h.NotSupportedError('"answer" not supported for outgoing RTCSession');if(this._status!==R.STATUS_WAITING_FOR_ANSWER)throw new h.InvalidStateError(this._status);if(this._sessionTimers.enabled&&v.isDecimal(t.sessionTimersExpires)&&(t.sessionTimersExpires>=d.MIN_SESSION_EXPIRES?this._sessionTimers.defaultExpires=t.sessionTimersExpires:this._sessionTimers.defaultExpires=d.SESSION_EXPIRES),this._status=R.STATUS_ANSWERED,this._createDialog(n,"UAS")){clearTimeout(this._timers.userNoAnswerTimer),r.unshift("Contact: ".concat(this._contact)),t=n.parseSDP(),Array.isArray(t.media)||(t.media=[t.media]);var m,y=i(t.media);try{for(y.s();!(m=y.n()).done;){var b=m.value;"audio"===b.type&&(f=!0,b.direction&&"sendrecv"!==b.direction||(_=!0)),"video"===b.type&&(p=!0,b.direction&&"sendrecv"!==b.direction||(g=!0))}}catch(t){y.e(t)}finally{y.f()}if(u&&!1===o.audio){var C,S=i(u.getAudioTracks());try{for(S.s();!(C=S.n()).done;){var T=C.value;u.removeTrack(T)}}catch(t){S.e(t)}finally{S.f()}}if(u&&!1===o.video){var E,I=i(u.getVideoTracks());try{for(I.s();!(E=I.n()).done;){var O=E.value;u.removeTrack(O)}}catch(t){I.e(t)}finally{I.f()}}u||void 0!==o.audio||(o.audio=_),u||void 0!==o.video||(o.video=g),u||f||c.offerToReceiveAudio||(o.audio=!1),u||p||c.offerToReceiveVideo||(o.video=!1),this._createRTCConnection(l,a),Promise.resolve().then((function(){return u||(o.audio||o.video?(e._localMediaStreamLocallyGenerated=!0,navigator.mediaDevices.getUserMedia(o).catch((function(t){if(e._status===R.STATUS_TERMINATED)throw new Error("terminated");throw n.reply(480),e._failed("local",null,d.causes.USER_DENIED_MEDIA_ACCESS),w('emit "getusermediafailed" [error:%o]',t),e.emit("getusermediafailed",t),new Error("getUserMedia() failed")}))):void 0)})).then((function(t){if(e._status===R.STATUS_TERMINATED)throw new Error("terminated");(e._localMediaStream=t)&&(e._connection.addTrack?t.getTracks().forEach((function(n){e._connection.addTrack(n,t)})):e._connection.addStream(t),e.emit("localstream",{stream:t}))})).then((function(){if(!e._late_sdp){var t={originator:"remote",type:"offer",sdp:n.body};A('emit "sdp" from answer'),e.emit("sdp",t);var r=new RTCSessionDescription({type:"offer",sdp:t.sdp});return e._connectionPromiseQueue=e._connectionPromiseQueue.then((function(){return e._connection.setRemoteDescription(r)})).catch((function(t){throw n.reply(488),e._failed("system",null,d.causes.WEBRTC_ERROR),w('emit "peerconnection:setremotedescriptionfailed" [error:%o]',t),e.emit("peerconnection:setremotedescriptionfailed",t),new Error("peerconnection.setRemoteDescription() failed")})),e._connectionPromiseQueue}})).then((function(){if(e._status===R.STATUS_TERMINATED)throw new Error("terminated");return e._connecting(n),(e._late_sdp?e._createLocalDescription("offer",e._rtcOfferConstraints):e._createLocalDescription("answer",s)).catch((function(){throw n.reply(500),new Error("_createLocalDescription() failed")}))})).then((function(t){if(e._status===R.STATUS_TERMINATED)throw new Error("terminated");e._handleSessionTimersInIncomingRequest(n,r),n.reply(200,null,r,t,(function(){e._status=R.STATUS_WAITING_FOR_ACK,e._setInvite2xxTimer(n,t),e._setACKTimer(),e._accepted("local")}),(function(){e._failed("system",null,d.causes.CONNECTION_ERROR)}))})).catch((function(t){e._status!==R.STATUS_TERMINATED&&w(t)}))}else n.reply(500,"Error creating dialog")}},{key:"terminate",value:function(){var e=this,t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};A("terminate()");var n,r,i=t.cause||d.causes.BYE,o=v.cloneArray(t.extraHeaders),u=t.body,l=t.status_code,a=t.reason_phrase;if(this._status===R.STATUS_TERMINATED)throw new h.InvalidStateError(this._status);switch(this._status){case R.STATUS_NULL:case R.STATUS_INVITE_SENT:case R.STATUS_1XX_RECEIVED:if(A("canceling session"),l&&(l<200||700<=l))throw new TypeError("Invalid status_code: ".concat(l));l&&(a=a||d.REASON_PHRASE[l]||"",n="SIP ;cause=".concat(l,' ;text="').concat(a,'"')),this._status===R.STATUS_NULL||this._status===R.STATUS_INVITE_SENT?(this._is_canceled=!0,this._cancel_reason=n):this._status===R.STATUS_1XX_RECEIVED&&this._request.cancel(n),this._status=R.STATUS_CANCELED,this._failed("local",null,d.causes.CANCELED);break;case R.STATUS_WAITING_FOR_ANSWER:case R.STATUS_ANSWERED:if(A("rejecting session"),(l=l||480)<300||700<=l)throw new TypeError("Invalid status_code: ".concat(l));this._request.reply(l,a,o,u),this._failed("local",null,d.causes.REJECTED);break;case R.STATUS_WAITING_FOR_ACK:case R.STATUS_CONFIRMED:if(A("terminating session"),a=t.reason_phrase||d.REASON_PHRASE[l]||"",l&&(l<200||700<=l))throw new TypeError("Invalid status_code: ".concat(l));l&&o.push("Reason: SIP ;cause=".concat(l,'; text="').concat(a,'"')),this._status===R.STATUS_WAITING_FOR_ACK&&"incoming"===this._direction&&this._request.server_transaction.state!==p.C.STATUS_TERMINATED?(r=this._dialog,this.receiveRequest=function(t){t.method===d.ACK&&(e.sendRequest(d.BYE,{extraHeaders:o,body:u}),r.terminate())},this._request.server_transaction.on("stateChanged",(function(){e._request.server_transaction.state===p.C.STATUS_TERMINATED&&(e.sendRequest(d.BYE,{extraHeaders:o,body:u}),r.terminate())})),this._ended("local",null,i),this._dialog=r,this._ua.newDialog(r)):(this.sendRequest(d.BYE,{extraHeaders:o,body:u}),this._ended("local",null,i))}}},{key:"sendDTMF",value:function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};A("sendDTMF() | tones: %s",e);var n=0,r=t.duration||null,i=t.interToneGap||null,o=t.transportType||d.DTMF_TRANSPORT.INFO;if(void 0===e)throw new TypeError("Not enough arguments");if(this._status!==R.STATUS_CONFIRMED&&this._status!==R.STATUS_WAITING_FOR_ACK)throw new h.InvalidStateError(this._status);if(o!==d.DTMF_TRANSPORT.INFO&&o!==d.DTMF_TRANSPORT.RFC2833)throw new TypeError("invalid transportType: ".concat(o));if(!(e="number"==typeof e?e.toString():e)||"string"!=typeof e||!e.match(/^[0-9A-DR#*,]+$/i))throw new TypeError("Invalid tones: ".concat(e));if(r&&!v.isDecimal(r))throw new TypeError("Invalid tone duration: ".concat(r));if(r=r?r<b.C.MIN_DURATION?(A('"duration" value is lower than the minimum allowed, setting it to '.concat(b.C.MIN_DURATION," milliseconds")),b.C.MIN_DURATION):r>b.C.MAX_DURATION?(A('"duration" value is greater than the maximum allowed, setting it to '.concat(b.C.MAX_DURATION," milliseconds")),b.C.MAX_DURATION):Math.abs(r):b.C.DEFAULT_DURATION,t.duration=r,i&&!v.isDecimal(i))throw new TypeError("Invalid interToneGap: ".concat(i));function u(){var e,o,l=this;this._status===R.STATUS_TERMINATED||!this._tones||n>=this._tones.length?this._tones=null:(e=this._tones[n],n+=1,e=","===e?2e3:(o=new b(this),t.eventHandlers={onFailed:function(){l._tones=null}},o.send(e,t),r+i),setTimeout(u.bind(this),e))}i=i?i<b.C.MIN_INTER_TONE_GAP?(A('"interToneGap" value is lower than the minimum allowed, setting it to '.concat(b.C.MIN_INTER_TONE_GAP," milliseconds")),b.C.MIN_INTER_TONE_GAP):Math.abs(i):b.C.DEFAULT_INTER_TONE_GAP,o!==d.DTMF_TRANSPORT.RFC2833?this._tones?this._tones+=e:(this._tones=e,u.call(this)):(o=this._getDTMFRTPSender())?(e=o.toneBuffer+e,o.insertDTMF(e,r,i)):(A("Sending dtmf using sendDtmfTone"),this._connection.sendDtmfTone(e,r,i))}},{key:"sendInfo",value:function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{};if(A("sendInfo()"),this._status!==R.STATUS_CONFIRMED&&this._status!==R.STATUS_WAITING_FOR_ACK)throw new h.InvalidStateError(this._status);new C(this).send(e,t,n)}},{key:"mute",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{audio:!0,video:!1};A("mute()");var t=!1,n=!1;!1===this._audioMuted&&e.audio&&(this._audioMuted=t=!0,this._toggleMuteAudio(!0)),e.video&&(this._videoMuted=n=!0,this._toggleMuteVideo(!0)),!0!==t&&!0!==n||this._onmute({audio:t,video:n})}},{key:"unmute",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{audio:!0,video:!0};A("unmute()");var t=!1,n=!1;!0===this._audioMuted&&e.audio&&(this._audioMuted=!(t=!0))===this._localHold&&this._toggleMuteAudio(!1),e.video&&(this._videoMuted=!(n=!0))===this._localHold&&this._toggleMuteVideo(!1),!0!==t&&!0!==n||this._onunmute({audio:t,video:n})}},{key:"hold",value:function(){var e=this,t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},n=1<arguments.length?arguments[1]:void 0;if(A("hold()"),this._status!==R.STATUS_WAITING_FOR_ACK&&this._status!==R.STATUS_CONFIRMED)return!1;if(!0===this._localHold)return!1;if(!this._isReadyToReOffer())return!1;this._localHold=!0,this._onhold("local");var r={succeeded:function(){n&&n()},failed:function(){e.terminate({cause:d.causes.WEBRTC_ERROR,status_code:500,reason_phrase:"Hold Failed"})}};return t.useUpdate?this._sendUpdate({sdpOffer:!0,eventHandlers:r,extraHeaders:t.extraHeaders}):this._sendReinvite({eventHandlers:r,extraHeaders:t.extraHeaders}),!0}},{key:"unhold",value:function(){var e=this,t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},n=1<arguments.length?arguments[1]:void 0;if(A("unhold()"),this._status!==R.STATUS_WAITING_FOR_ACK&&this._status!==R.STATUS_CONFIRMED)return!1;if(!1===this._localHold)return!1;if(!this._isReadyToReOffer())return!1;this._localHold=!1,this._onunhold("local");var r={succeeded:function(){n&&n()},failed:function(){e.terminate({cause:d.causes.WEBRTC_ERROR,status_code:500,reason_phrase:"Unhold Failed"})}};return t.useUpdate?this._sendUpdate({sdpOffer:!0,eventHandlers:r,extraHeaders:t.extraHeaders}):this._sendReinvite({eventHandlers:r,extraHeaders:t.extraHeaders}),!0}},{key:"renegotiate",value:function(){var e=this,t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},n=1<arguments.length?arguments[1]:void 0;A("renegotiate()");var r=t.rtcOfferConstraints||null;if(this._status!==R.STATUS_WAITING_FOR_ACK&&this._status!==R.STATUS_CONFIRMED)return!1;if(!this._isReadyToReOffer())return!1;var i={succeeded:function(){n&&n()},failed:function(){e.terminate({cause:d.causes.WEBRTC_ERROR,status_code:500,reason_phrase:"Media Renegotiation Failed"})}};return t.useUpdate?this._sendUpdate({sdpOffer:!0,eventHandlers:i,rtcOfferConstraints:r,extraHeaders:t.extraHeaders}):this._sendReinvite({eventHandlers:i,rtcOfferConstraints:r,extraHeaders:t.extraHeaders}),!0}},{key:"refer",value:function(e,t){var n=this;A("refer()");var r=e;if(this._status!==R.STATUS_WAITING_FOR_ACK&&this._status!==R.STATUS_CONFIRMED)return!1;if(!(e=this._ua.normalizeTarget(e)))throw new TypeError("Invalid target: ".concat(r));(r=new T(this)).sendRefer(e,t);var i=r.id;return(this._referSubscribers[i]=r).on("requestFailed",(function(){delete n._referSubscribers[i]})),r.on("accepted",(function(){delete n._referSubscribers[i]})),r.on("failed",(function(){delete n._referSubscribers[i]})),r}},{key:"sendRequest",value:function(e,t){return A("sendRequest()"),this._dialog.sendRequest(e,t)}},{key:"receiveRequest",value:function(e){var t=this;if(A("receiveRequest()"),e.method===d.CANCEL)this._status!==R.STATUS_WAITING_FOR_ANSWER&&this._status!==R.STATUS_ANSWERED||(this._status=R.STATUS_CANCELED,this._request.reply(487),this._failed("remote",e,d.causes.CANCELED));else switch(e.method){case d.ACK:if(this._status!==R.STATUS_WAITING_FOR_ACK)return;if(this._status=R.STATUS_CONFIRMED,clearTimeout(this._timers.ackTimer),clearTimeout(this._timers.invite2xxTimer),this._late_sdp){if(!e.body){this.terminate({cause:d.causes.MISSING_SDP,status_code:400});break}var n={originator:"remote",type:"answer",sdp:e.body};A('emit "sdp" from receiveRequest'),this.emit("sdp",n);var r=new RTCSessionDescription({type:"answer",sdp:n.sdp});this._connectionPromiseQueue=this._connectionPromiseQueue.then((function(){return t._connection.setRemoteDescription(r)})).then((function(){t._is_confirmed||t._confirmed("remote",e)})).catch((function(e){t.terminate({cause:d.causes.BAD_MEDIA_DESCRIPTION,status_code:488}),w('emit "peerconnection:setremotedescriptionfailed" [error:%o]',e),t.emit("peerconnection:setremotedescriptionfailed",e)}))}else this._is_confirmed||this._confirmed("remote",e);break;case d.BYE:this._status===R.STATUS_CONFIRMED||this._status===R.STATUS_WAITING_FOR_ACK?(e.reply(200),this._ended("remote",e,d.causes.BYE)):this._status===R.STATUS_INVITE_RECEIVED||this._status===R.STATUS_WAITING_FOR_ANSWER?(e.reply(200),this._request.reply(487,"BYE Received"),this._ended("remote",e,d.causes.BYE)):e.reply(403,"Wrong Status");break;case d.INVITE:this._status===R.STATUS_CONFIRMED?e.hasHeader("replaces")?this._receiveReplaces(e):this._receiveReinvite(e):e.reply(403,"Wrong Status");break;case d.INFO:this._status===R.STATUS_1XX_RECEIVED||this._status===R.STATUS_WAITING_FOR_ANSWER||this._status===R.STATUS_ANSWERED||this._status===R.STATUS_WAITING_FOR_ACK||this._status===R.STATUS_CONFIRMED?(n=e.hasHeader("Content-Type")?e.getHeader("Content-Type").toLowerCase():void 0)&&n.match(/^application\/dtmf-relay/i)?new b(this).init_incoming(e):void 0!==n?new C(this).init_incoming(e):e.reply(415):e.reply(403,"Wrong Status");break;case d.UPDATE:this._status===R.STATUS_CONFIRMED?this._receiveUpdate(e):e.reply(403,"Wrong Status");break;case d.REFER:this._status===R.STATUS_CONFIRMED?this._receiveRefer(e):e.reply(403,"Wrong Status");break;case d.NOTIFY:this._status===R.STATUS_CONFIRMED?this._receiveNotify(e):e.reply(403,"Wrong Status");break;default:e.reply(501)}}},{key:"onTransportError",value:function(){w("onTransportError()"),this._status!==R.STATUS_TERMINATED&&this.terminate({status_code:500,reason_phrase:d.causes.CONNECTION_ERROR,cause:d.causes.CONNECTION_ERROR})}},{key:"onRequestTimeout",value:function(){w("onRequestTimeout()"),this._status!==R.STATUS_TERMINATED&&this.terminate({status_code:408,reason_phrase:d.causes.REQUEST_TIMEOUT,cause:d.causes.REQUEST_TIMEOUT})}},{key:"onDialogError",value:function(){w("onDialogError()"),this._status!==R.STATUS_TERMINATED&&this.terminate({status_code:500,reason_phrase:d.causes.DIALOG_ERROR,cause:d.causes.DIALOG_ERROR})}},{key:"newDTMF",value:function(e){A("newDTMF()"),this.emit("newDTMF",e)}},{key:"newInfo",value:function(e){A("newInfo()"),this.emit("newInfo",e)}},{key:"_isReadyToReOffer",value:function(){return this._rtcReady?this._dialog?!0!==this._dialog.uac_pending_reply&&!0!==this._dialog.uas_pending_reply||(A("_isReadyToReOffer() | there is another INVITE/UPDATE transaction in progress"),!1):(A("_isReadyToReOffer() | session not established yet"),!1):(A("_isReadyToReOffer() | internal WebRTC status not ready"),!1)}},{key:"_close",value:function(){if(A("close()"),this._localMediaStream&&this._localMediaStreamLocallyGenerated&&(A("close() | closing local MediaStream"),v.closeMediaStream(this._localMediaStream)),this._status!==R.STATUS_TERMINATED){if(this._status=R.STATUS_TERMINATED,this._connection)try{this._connection.close()}catch(e){w("close() | error closing the RTCPeerConnection: %o",e)}for(var e in this._timers)Object.prototype.hasOwnProperty.call(this._timers,e)&&clearTimeout(this._timers[e]);for(var t in clearTimeout(this._sessionTimers.timer),this._dialog&&(this._dialog.terminate(),delete this._dialog),this._earlyDialogs)Object.prototype.hasOwnProperty.call(this._earlyDialogs,t)&&(this._earlyDialogs[t].terminate(),delete this._earlyDialogs[t]);for(var n in this._referSubscribers)Object.prototype.hasOwnProperty.call(this._referSubscribers,n)&&delete this._referSubscribers[n];this._ua.destroyRTCSession(this)}}},{key:"_setInvite2xxTimer",value:function(e,t){var n=_.T1;this._timers.invite2xxTimer=setTimeout(function r(){this._status===R.STATUS_WAITING_FOR_ACK&&(e.reply(200,null,["Contact: ".concat(this._contact)],t),n<_.T2&&(n*=2)>_.T2&&(n=_.T2),this._timers.invite2xxTimer=setTimeout(r.bind(this),n))}.bind(this),n)}},{key:"_setACKTimer",value:function(){var e=this;this._timers.ackTimer=setTimeout((function(){e._status===R.STATUS_WAITING_FOR_ACK&&(A("no ACK received, terminating the session"),clearTimeout(e._timers.invite2xxTimer),e.sendRequest(d.BYE),e._ended("remote",null,d.causes.NO_ACK))}),_.TIMER_H)}},{key:"_createRTCConnection",value:function(e,t){var n=this;this._connection=new RTCPeerConnection(e,t),this._connection.addEventListener("iceconnectionstatechange",(function(){"failed"===n._connection.iceConnectionState&&n.terminate({cause:d.causes.RTP_TIMEOUT,status_code:408,reason_phrase:d.causes.RTP_TIMEOUT})})),A('emit "peerconnection"'),this.emit("peerconnection",{peerconnection:this._connection})}},{key:"_createLocalDescription",value:function(e,t){var n=this;if(A("createLocalDescription()"),"offer"!==e&&"answer"!==e)throw new Error('createLocalDescription() | invalid type "'.concat(e,'"'));var r=this._connection;return this._rtcReady=!1,Promise.resolve().then((function(){return"offer"===e?(A("In offer, constraints %o",t),r.createOffer(t).catch((function(e){return w('emit "peerconnection:createofferfailed" [error:%o]',e),n.emit("peerconnection:createofferfailed",e),Promise.reject(e)}))):(A("In answer, constraints %o",t),r.createAnswer(t).catch((function(e){return w('emit "peerconnection:createanswerfailed" [error:%o]',e),n.emit("peerconnection:createanswerfailed",e),Promise.reject(e)})))})).then((function(e){return A("Got local description %o",e),r.setLocalDescription(e).catch((function(e){return n._rtcReady=!0,w('emit "peerconnection:setlocaldescriptionfailed" [error:%o]',e),n.emit("peerconnection:setlocaldescriptionfailed",e),Promise.reject(e)}))})).then((function(){if(A("local description set successfully ICE Gathering state",r.iceGatheringState),"complete"!==r.iceGatheringState||t)return new Promise((function(t){A("Register pc.onicencandidate");var i,o,u=!1;setTimeout((function(){try{"complete"===r.iceGatheringState&&(A("ICE gathering state is completed, no need to wait further... "),l())}catch(e){A("Error in pc.onicecandidate reason: peerconnection is closed")}}),1e3);var l=function(){r.removeEventListener("icecandidate",i),r.removeEventListener("icegatheringstatechange",o),u=!0,n._rtcReady=!0;var l={originator:"local",type:e,sdp:r.localDescription.sdp};A('emit "sdp" from ready function'),n.emit("sdp",l),t(l.sdp)};r.addEventListener("icecandidate",i=function(e){(e=e.candidate)?n.emit("icecandidate",{candidate:e,ready:l}):u||l()}),r.addEventListener("icegatheringstatechange",o=function(){A("icegatheringstatechange %s",r.iceGatheringState),"complete"!==r.iceGatheringState||u||l()})}));n._rtcReady=!0;var i={originator:"local",type:e,sdp:r.localDescription.sdp};return A('emit "sdp" immediately constraints %o',t),n.emit("sdp",i),Promise.resolve(i.sdp)}))}},{key:"_createDialog",value:function(e,t,n){var r="UAS"===t?e.to_tag:e.from_tag,i="UAS"===t?e.from_tag:e.to_tag;r=e.call_id+r+i,i=this._earlyDialogs[r];return n?!!i||((i=new m(this,e,t,m.C.STATUS_EARLY)).error?(A(i.error),this._failed("remote",e,d.causes.INTERNAL_ERROR),!1):(this._earlyDialogs[r]=i,!0)):(this._from_tag=e.from_tag,this._to_tag=e.to_tag,i?(i.update(e,t),this._dialog=i,delete this._earlyDialogs[r],!0):(t=new m(this,e,t)).error?(A(t.error),this._failed("remote",e,d.causes.INTERNAL_ERROR),!1):(this._dialog=t,!0))}},{key:"_receiveReinvite",value:function(e){var t=this;A("receiveReinvite()");var n=e.hasHeader("Content-Type")?e.getHeader("Content-Type").toLowerCase():void 0,r={request:e,callback:void 0,reject:function(){i=!0;var t=(r=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{}).status_code||403,n=r.reason_phrase||"",r=v.cloneArray(r.extraHeaders);if(this._status!==R.STATUS_CONFIRMED)return!1;if(t<300||700<=t)throw new TypeError("Invalid status_code: ".concat(t));e.reply(t,n,r)}.bind(this)},i=!1;if(this.emit("reinvite",r),!i)return this._late_sdp=!1,e.body?"application/sdp"!==n?(A("invalid Content-Type"),void e.reply(415)):void this._processInDialogSdpOffer(e).then((function(e){t._status!==R.STATUS_TERMINATED&&o.call(t,e)})).catch((function(e){w(e)})):(this._late_sdp=!0,this._remoteHold&&(this._remoteHold=!1,this._onunhold("remote")),void(this._connectionPromiseQueue=this._connectionPromiseQueue.then((function(){return t._createLocalDescription("offer",t._rtcOfferConstraints)})).then((function(e){o.call(t,e)})).catch((function(){e.reply(500)}))));function o(t){var n=this,i=["Contact: ".concat(this._contact)];this._handleSessionTimersInIncomingRequest(e,i),this._late_sdp&&(t=this._mangleOffer(t)),e.reply(200,null,i,t,(function(){n._status=R.STATUS_WAITING_FOR_ACK,n._setInvite2xxTimer(e,t),n._setACKTimer()})),"function"==typeof r.callback&&r.callback()}}},{key:"_receiveUpdate",value:function(e){var t=this;A("receiveUpdate()");var n=e.hasHeader("Content-Type")?e.getHeader("Content-Type").toLowerCase():void 0,r={request:e,callback:void 0,reject:function(){i=!0;var t=(r=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{}).status_code||403,n=r.reason_phrase||"",r=v.cloneArray(r.extraHeaders);if(this._status!==R.STATUS_CONFIRMED)return!1;if(t<300||700<=t)throw new TypeError("Invalid status_code: ".concat(t));e.reply(t,n,r)}.bind(this)},i=!1;if(this.emit("update",r),!i){if(e.body)return"application/sdp"!==n?(A("invalid Content-Type"),void e.reply(415)):void this._processInDialogSdpOffer(e).then((function(e){t._status!==R.STATUS_TERMINATED&&o.call(t,e)})).catch((function(e){w(e)}));o.call(this,null)}function o(t){var n=["Contact: ".concat(this._contact)];this._handleSessionTimersInIncomingRequest(e,n),e.reply(200,null,n,t),"function"==typeof r.callback&&r.callback()}}},{key:"_processInDialogSdpOffer",value:function(e){var t=this;if(A("_processInDialogSdpOffer()"),!this._connection.addTrack)return this._processInDialogSdpOfferStreamBased(e);var n,r=this._ua.rtcUtils,o=e.parseSDP(),u=!1,l=i(o.media);try{for(l.s();!(n=l.n()).done;){var a=n.value;if(-1!==I.indexOf(a.type)){var s=a.direction||o.direction||"sendrecv";if("sendonly"!==s&&"inactive"!==s){u=!1;break}u=!0}}}catch(n){l.e(n)}finally{l.f()}var c={originator:"remote",type:"offer",sdp:e.body};A('emit "sdp" from _receiveUpdate'),this.emit("sdp",c);var f=new RTCSessionDescription({type:"offer",sdp:c.sdp}),h=(c=this.connection.getTransceivers()).find((function(e){var t,n;return"audio"===(null==e||null===(t=e.sender)||void 0===t||null===(n=t.track)||void 0===n?void 0:n.kind)}));A("transceivers are %o",c);var p=c.find((function(e){return e.mid!==h.mid}));A("localVideoTransceiver is %o",p);var v="sendrecv"===(null==p?void 0:p.direction)||"recvonly"===(null==p?void 0:p.direction);A("isLocalHasVideo : %s localvideoDirection",v,null==p?void 0:p.direction);var _=!1;return this._connectionPromiseQueue=this._connectionPromiseQueue.then((function(){if(t._status===R.STATUS_TERMINATED)throw new Error("terminated")})).then((function(){var n=!1,l=!1;Array.isArray(o.media)||(o.media=[o.media]);var a,s=i(o.media);try{for(s.s();!(a=s.n()).done;){var c=a.value;"video"===c.type&&(n=!0,"sendrecv"===c.direction&&(l=!0))}}catch(n){s.e(n)}finally{s.f()}if(A("peerHasVideoLine %s peerOffersFullVideo %s",n,l),!0===t._remoteHold&&!1===u)t._remoteHold=!1,t._onunhold("remote");else{if(!1!==t._remoteHold||!0!==u){if(!v||l)return Promise.resolve().then((function(){var e=null!=r&&null!==(e=r._updatedMediaConstraints)&&void 0!==e&&e.video?{video:r._updatedMediaConstraints.video}:{video:!0};return A("Try media access from user with constraints %o",e),t._localMediaStreamLocallyGenerated=!0,navigator.mediaDevices.getUserMedia(e)})).then((function(n){if(t._status===R.STATUS_TERMINATED)throw new Error("terminated");return t._connection.setRemoteDescription(f).catch((function(n){throw e.reply(488),w('emit "peerconnection:setremotedescriptionfailed" [error:%o]',n),t.emit("peerconnection:setremotedescriptionfailed",n),n})).then((function(){var e,r,i,o;_=!0,p&&"sendrecv"===p.direction?-1<window.navigator.userAgent.toLowerCase().indexOf("firefox")?(e=p.sender,r=n.getVideoTracks(),!1===p.stopped?(e.replaceTrack(r[0]),p.direction="sendrecv"):(A("adding the track"),t._connection.addTrack(r[0])),r=new MediaStream([h.sender.track,r[0]]),t.emit("localvideoadded",{stream:r})):A("Video is already available"):!p||"inactive"!=p.direction&&"recvonly"!=p.direction?(t._localMediaStream=t._connection.getLocalStreams()[0],n&&(A("got stream in renegotiate 2"),t.connection.addTrack?(A("this.connection.addTrack"),A("1 localstream media tracks %o",t._localMediaStream.getVideoTracks().length),i=n.getVideoTracks()[0],t._localMediaStream.addTrack(i),t.connection.addTrack(i,t._localMediaStream),o=new MediaStream([h.sender.track,i]),t.emit("localvideoadded",{stream:o}),A("2 localstream media tracks %o",t._localMediaStream.getVideoTracks().length)):t.connection.addStream(n)),A("stream, end")):(r=window.navigator.userAgent.toLowerCase(),A("local video transiver direction is %s",p.direction),i=p.sender,o=n.getVideoTracks(),A("local video transiver is %s",p),-1<r.indexOf("firefox")&&!1!==p.stopped?(A("adding the track"),t._connection.addTrack(o[0])):(i.replaceTrack(o[0]),p.direction="sendrecv"),o=new MediaStream([h.sender.track,o[0]]),t.emit("localvideoadded",{stream:o}))}))})).catch((function(n){return _=!1,w("Media access denied in upgrade [error: %o]",n),t.emit("upgradevideoaccessdenied",{originator:"local",message:null,cause:d.causes.USER_DENIED_MEDIA_ACCESS}),t._connection.setRemoteDescription(f).catch((function(n){throw e.reply(488),w('emit "peerconnection:setremotedescriptionfailed" [error:%o]',n),t.emit("peerconnection:setremotedescriptionfailed",n),n}))}));if(A("Its video downgrade... handle via track events in sdk"),t._status===R.STATUS_TERMINATED)throw new Error("terminated");return t._connection.setRemoteDescription(f).catch((function(n){throw e.reply(488),w('emit "peerconnection:setremotedescriptionfailed" [error:%o]',n),t.emit("peerconnection:setremotedescriptionfailed",n),n}))}t._remoteHold=!0,t._onhold("remote")}})).then((function(){if(A("In then after user media isMediaAccessSuccessful : %s",_),t._status===R.STATUS_TERMINATED)throw new Error("terminated");return t._createLocalDescription("answer",{offerToReceiveAudio:1,offerToReceiveVideo:_?1:0}).catch((function(t){throw e.reply(500),w('emit "peerconnection:createtelocaldescriptionfailed" [error:%o]',t),t}))})).catch((function(e){w("_processInDialogSdpOffer() failed [error: %o]",e)})),this._connectionPromiseQueue}},{key:"_receiveRefer",value:function(e){var t=this;if(A("receiveRefer()"),!e.refer_to)return A("no Refer-To header field present in REFER"),void e.reply(400);if(e.refer_to.uri.scheme!==d.SIP)return A("Refer-To header field points to a non-SIP URI scheme"),void e.reply(416);e.reply(202);var n=new S(this,e.cseq);A('emit "refer"'),this.emit("refer",{request:e,accept:function(r,i){(function(t){var r=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};if(t="function"==typeof t?t:null,this._status!==R.STATUS_WAITING_FOR_ACK&&this._status!==R.STATUS_CONFIRMED)return!1;var i=new o(this._ua);i.on("progress",(function(e){e=e.response,n.notify(e.status_code,e.reason_phrase)})),i.on("accepted",(function(e){e=e.response,n.notify(e.status_code,e.reason_phrase)})),i.on("_failed",(function(e){var t=e.message;e=e.cause;t?n.notify(t.status_code,t.reason_phrase):n.notify(487,e)})),r.isRefer=!0,i.connect(e.refer_to.uri.toAor(),r,t)}).call(t,r,i)},reject:function(){(function(){n.notify(603)}).call(t)}})}},{key:"_processInDialogSdpOfferStreamBased",value:function(e){var t=this;A("_processInDialogSdpOfferStreamBased()");var n,r=e.parseSDP(),o=!1,u=i(r.media);try{for(u.s();!(n=u.n()).done;){var l=n.value;if(-1!==I.indexOf(l.type)){var a=l.direction||r.direction||"sendrecv";if("sendonly"!==a&&"inactive"!==a){o=!1;break}o=!0}}}catch(n){u.e(n)}finally{u.f()}var s={originator:"remote",type:"offer",sdp:e.body};A('emit "sdp" from _receiveUpdate'),this.emit("sdp",s);var c=this.connection.currentLocalDescription;A("localSdp",c);c=f.parse(c.sdp);var h,p=!1;Array.isArray(c.media)||(c.media=[c.media]);var v,_=i(c.media);try{for(_.s();!(v=_.n()).done;){var g=v.value;"video"===g.type&&(h=g.direction,g.direction&&"sendrecv"!==g.direction||(p=!0))}}catch(n){_.e(n)}finally{_.f()}var m=new RTCSessionDescription({type:"offer",sdp:s.sdp});A("isLocalHasVideo : ",p);var y=!1;return this._connectionPromiseQueue=this._connectionPromiseQueue.then((function(){if(t._status===R.STATUS_TERMINATED)throw new Error("terminated")})).then((function(){var n=!1,u=!1;Array.isArray(r.media)||(r.media=[r.media]);var l,a=i(r.media);try{for(a.s();!(l=a.n()).done;){var s=l.value;"video"===s.type&&(n=!0,s.direction&&"sendrecv"!==s.direction||(u=!0))}}catch(n){a.e(n)}finally{a.f()}if(A("peerHasVideoLine %s peerOffersFullVideo %s",n,u),!0===t._remoteHold&&!1===o)t._remoteHold=!1,t._onunhold("remote");else{if(!1!==t._remoteHold||!0!==o){if(!p||u)return Promise.resolve().then((function(){var e={video:!0};return A("Try media access from user with constraints %o",e),t._localMediaStreamLocallyGenerated=!0,navigator.mediaDevices.getUserMedia(e)})).then((function(n){if(t._status===R.STATUS_TERMINATED)throw new Error("terminated");return t._connection.setRemoteDescription(m).catch((function(n){throw e.reply(488),w('emit "peerconnection:setremotedescriptionfailed" [error:%o]',n),t.emit("peerconnection:setremotedescriptionfailed",n),n})).then((function(){if(y=!0,p)A("Video is already available");else{var e=t.connection.getLocalStreams()[0].getAudioTracks()[0],r=n.getVideoTracks();if(h&&("inactive"==h||"recvonly"==h)){A("local video transiver direction is %s",h),t.connection.removeStream(t.connection.getLocalStreams()[0]);var i=new MediaStream([e,r[0]]);return t.connection.addStream(i),void t.emit("localvideoadded",{stream:i})}n&&(A("react got stream in renegotiate 2"),t.connection.removeStream(t.connection.getLocalStreams()[0]),r=new MediaStream([e,r[0]]),t.connection.addStream(r),t.emit("localvideoadded",{stream:r})),A("stream, end")}}))})).catch((function(n){return y=!1,w("Media access denied in upgrade [error: %o]",n),t.emit("upgradevideoaccessdenied",{originator:"local",message:null,cause:d.causes.USER_DENIED_MEDIA_ACCESS}),t._connection.setRemoteDescription(m).catch((function(n){throw e.reply(488),w('emit "peerconnection:setremotedescriptionfailed" [error:%o]',n),t.emit("peerconnection:setremotedescriptionfailed",n),n}))}));if(A("Its video downgrade... handle via track events in sdk"),t._status===R.STATUS_TERMINATED)throw new Error("terminated");return t._connection.setRemoteDescription(m).catch((function(n){throw e.reply(488),w('emit "peerconnection:setremotedescriptionfailed" [error:%o]',n),t.emit("peerconnection:setremotedescriptionfailed",n),n}))}t._remoteHold=!0,t._onhold("remote")}})).then((function(){if(A("In then after user media isMediaAccessSuccessful : %s",y),t._status===R.STATUS_TERMINATED)throw new Error("terminated");return t._createLocalDescription("answer",{offerToReceiveAudio:1,offerToReceiveVideo:y?1:0}).catch((function(t){throw e.reply(500),w('emit "peerconnection:createtelocaldescriptionfailed" [error:%o]',t),t}))})).catch((function(e){w("_processInDialogSdpOffer() failed [error: %o]",e)})),this._connectionPromiseQueue}},{key:"_receiveNotify",value:function(e){if(A("receiveNotify()"),e.event||e.reply(400),"refer"===e.event.event){var t;if(e.event.params&&e.event.params.id)t=e.event.params.id,t=this._referSubscribers[t];else{if(1!==Object.keys(this._referSubscribers).length)return void e.reply(400,"Missing event id parameter");t=this._referSubscribers[Object.keys(this._referSubscribers)[0]]}t?(t.receiveNotify(e),e.reply(200)):e.reply(481,"Subscription does not exist")}else e.reply(489)}},{key:"_receiveReplaces",value:function(e){var t=this;A("receiveReplaces()"),this.emit("replaces",{request:e,accept:function(n){(function(t){var n=this;if(this._status!==R.STATUS_WAITING_FOR_ACK&&this._status!==R.STATUS_CONFIRMED)return!1;var r=new o(this._ua);r.on("confirmed",(function(){n.terminate()})),r.init_incoming(e,t)}).call(t,n)},reject:function(){(function(){A("Replaced INVITE rejected by the user"),e.reply(486)}).call(t)}})}},{key:"_sendInitialRequest",value:function(e,t,n){var r=this,i=new y(this._ua,this._request,{onRequestTimeout:function(){r.onRequestTimeout()},onTransportError:function(){r.onTransportError()},onAuthenticated:function(e){r._request=e},onReceiveResponse:function(e){r._receiveInviteResponse(e)}});Promise.resolve().then((function(){return n||(e.audio||e.video?(r._localMediaStreamLocallyGenerated=!0,navigator.mediaDevices.getUserMedia(e).catch((function(e){if(r._status===R.STATUS_TERMINATED)throw new Error("terminated");throw r._failed("local",null,d.causes.USER_DENIED_MEDIA_ACCESS),w('emit "getusermediafailed" [error:%o]',e),r.emit("getusermediafailed",e),e}))):void 0)})).then((function(e){if(r._status===R.STATUS_TERMINATED)throw new Error("terminated");return(r._localMediaStream=e)&&(r._connection.addTrack?e.getTracks().forEach((function(t){r._connection.addTrack(t,e)})):r._connection.addStream(e),r.emit("localstream",{stream:e})),r._connecting(r._request),r._createLocalDescription("offer",t).catch((function(e){throw r._failed("local",null,d.causes.WEBRTC_ERROR),e}))})).then((function(e){if(r._is_canceled||r._status===R.STATUS_TERMINATED)throw new Error("terminated");r._request.body=e,r._status=R.STATUS_INVITE_SENT,A('emit "sending" [request:%o]',r._request),r.emit("sending",{request:r._request}),i.send()})).catch((function(e){r._status!==R.STATUS_TERMINATED&&w(e)}))}},{key:"_getDTMFRTPSender",value:function(){if(this._connection.getSenders){var e=this._connection.getSenders().find((function(e){return e.track&&"audio"===e.track.kind}));if(e&&e.dtmf)return e.dtmf;w("sendDTMF() | no local audio track to send DTMF with")}}},{key:"_receiveInviteResponse",value:function(e){var t=this;if(A("receiveInviteResponse()"),this._dialog&&200<=e.status_code&&e.status_code<=299){if(this._dialog.id.call_id===e.call_id&&this._dialog.id.local_tag===e.from_tag&&this._dialog.id.remote_tag===e.to_tag)return void this.sendRequest(d.ACK);var n=new m(this,e,"UAC");return void 0!==n.error?void A(n.error):(this.sendRequest(d.ACK),void this.sendRequest(d.BYE))}if(this._is_canceled)100<=e.status_code&&e.status_code<200?this._request.cancel(this._cancel_reason):200<=e.status_code&&e.status_code<299&&(A("_acceptAndTerminate 1"),this._acceptAndTerminate(e));else if(this._status===R.STATUS_INVITE_SENT||this._status===R.STATUS_1XX_RECEIVED)switch(!0){case/^100$/.test(e.status_code):this._status=R.STATUS_1XX_RECEIVED;break;case/^1[0-9]{2}$/.test(e.status_code):if(!e.to_tag){A("1xx response received without to tag");break}if(e.hasHeader("contact")&&!this._createDialog(e,"UAC",!0))break;if(this._status=R.STATUS_1XX_RECEIVED,!e.body){this._progress("remote",e);break}var r={originator:"remote",type:"answer",sdp:e.body};A('emit "sdp" from _receiveInviteResponse 1'),this.emit("sdp",r);var i=new RTCSessionDescription({type:"answer",sdp:r.sdp});this._connectionPromiseQueue=this._connectionPromiseQueue.then((function(){return t._connection.setRemoteDescription(i)})).then((function(){return t._progress("remote",e)})).catch((function(e){w('emit "peerconnection:setremotedescriptionfailed" [error:%o]',e),t.emit("peerconnection:setremotedescriptionfailed",e)}));break;case/^2[0-9]{2}$/.test(e.status_code):if(this._status=R.STATUS_CONFIRMED,!e.body){A("_acceptAndTerminate 2"),this._acceptAndTerminate(e,400,d.causes.MISSING_SDP),this._failed("remote",e,d.causes.BAD_MEDIA_DESCRIPTION);break}if(!this._createDialog(e,"UAC"))break;var o={originator:"remote",type:"answer",sdp:e.body};A('emit "sdp" from _receiveInviteResponse 2'),this.emit("sdp",o);var u=new RTCSessionDescription({type:"answer",sdp:o.sdp});this._connectionPromiseQueue=this._connectionPromiseQueue.then((function(){if(A("Signaling state %s",t._connection.signalingState),"stable"===t._connection.signalingState)return t._connection.createOffer(t._rtcOfferConstraints).then((function(e){return t._connection.setLocalDescription(e)})).catch((function(n){t._acceptAndTerminate(e,500,n.toString()),t._failed("local",e,d.causes.WEBRTC_ERROR)}))})).then((function(){t._connection.setRemoteDescription(u).then((function(){t._handleSessionTimersInIncomingResponse(e),t._accepted("remote",e),t.sendRequest(d.ACK),t._confirmed("local",null)})).catch((function(n){t._acceptAndTerminate(e,488,"Not Acceptable Here"),t._failed("remote",e,d.causes.BAD_MEDIA_DESCRIPTION),w('emit "peerconnection:setremotedescriptionfailed" [error:%o]',n),t.emit("peerconnection:setremotedescriptionfailed",n)}))}));break;default:o=v.sipErrorCause(e.status_code),this._failed("remote",e,o)}}},{key:"_sendReinvite",value:function(){var e=this,t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};A("sendReinvite()");var n=v.cloneArray(t.extraHeaders),r=v.cloneObject(t.eventHandlers),i=t.rtcOfferConstraints||this._rtcOfferConstraints||null,o=!1;function u(e){A("failed",e),r.failed&&r.failed(e)}n.push("Contact: ".concat(this._contact)),n.push("Content-Type: application/sdp"),this._sessionTimers.running&&n.push("Session-Expires: ".concat(this._sessionTimers.currentExpires,";refresher=").concat(this._sessionTimers.refresher?"uac":"uas")),this._connectionPromiseQueue=this._connectionPromiseQueue.then((function(){return e._createLocalDescription("offer",i)})).then((function(t){var i={originator:"local",type:"offer",sdp:t=e._mangleOffer(t)};A('emit "sdp" from _sendReinvite 1'),e.emit("sdp",i),e.sendRequest(d.INVITE,{extraHeaders:n,body:t,eventHandlers:{onSuccessResponse:function(t){(function(e){var t,n,i=this;this._status!==R.STATUS_TERMINATED&&(this.sendRequest(d.ACK),o||(this._handleSessionTimersInIncomingResponse(e),e.body&&e.hasHeader("Content-Type")&&"application/sdp"===e.getHeader("Content-Type").toLowerCase()?(t={originator:"remote",type:"answer",sdp:e.body},A('emit "sdp" _sendReinvite 2'),this.emit("sdp",t),n=new RTCSessionDescription({type:"answer",sdp:t.sdp}),this._connectionPromiseQueue=this._connectionPromiseQueue.then((function(){return i._connection.setRemoteDescription(n)})).then((function(){r.succeeded&&r.succeeded(e)})).catch((function(e){u.call(i),w('emit "peerconnection:setremotedescriptionfailed" [error:%o]',e),i.emit("peerconnection:setremotedescriptionfailed",e)}))):u.call(this)))}).call(e,t),o=!0},onErrorResponse:function(t){u.call(e,t)},onTransportError:function(){e.onTransportError()},onRequestTimeout:function(){e.onRequestTimeout()},onDialogError:function(){e.onDialogError()}}})})).catch((function(){u()}))}},{key:"_sendUpdate",value:function(){var e=this,t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};A("sendUpdate()");var n=v.cloneArray(t.extraHeaders),r=v.cloneObject(t.eventHandlers),i=t.rtcOfferConstraints||this._rtcOfferConstraints||null,o=t.sdpOffer||!1,u=!1;function l(e){var t,n,i=this;this._status!==R.STATUS_TERMINATED&&(u||(this._handleSessionTimersInIncomingResponse(e),o?e.body&&e.hasHeader("Content-Type")&&"application/sdp"===e.getHeader("Content-Type").toLowerCase()?(t={originator:"remote",type:"answer",sdp:e.body},A('emit "sdp" from _sendUpdate 2'),this.emit("sdp",t),n=new RTCSessionDescription({type:"answer",sdp:t.sdp}),this._connectionPromiseQueue=this._connectionPromiseQueue.then((function(){return i._connection.setRemoteDescription(n)})).then((function(){r.succeeded&&r.succeeded(e)})).catch((function(e){a.call(i),w('emit "peerconnection:setremotedescriptionfailed" [error:%o]',e),i.emit("peerconnection:setremotedescriptionfailed",e)}))):a.call(this):r.succeeded&&r.succeeded(e)))}function a(e){r.failed&&r.failed(e)}n.push("Contact: ".concat(this._contact)),this._sessionTimers.running&&n.push("Session-Expires: ".concat(this._sessionTimers.currentExpires,";refresher=").concat(this._sessionTimers.refresher?"uac":"uas")),o?(n.push("Content-Type: application/sdp"),this._connectionPromiseQueue=this._connectionPromiseQueue.then((function(){return e._createLocalDescription("offer",i)})).then((function(t){var r={originator:"local",type:"offer",sdp:t=e._mangleOffer(t)};A('emit "sdp" from _sendUpdate 1'),e.emit("sdp",r),e.sendRequest(d.UPDATE,{extraHeaders:n,body:t,eventHandlers:{onSuccessResponse:function(t){l.call(e,t),u=!0},onErrorResponse:function(t){a.call(e,t)},onTransportError:function(){e.onTransportError()},onRequestTimeout:function(){e.onRequestTimeout()},onDialogError:function(){e.onDialogError()}}})})).catch((function(){a.call(e)}))):this.sendRequest(d.UPDATE,{extraHeaders:n,eventHandlers:{onSuccessResponse:function(t){l.call(e,t)},onErrorResponse:function(t){a.call(e,t)},onTransportError:function(){e.onTransportError()},onRequestTimeout:function(){e.onRequestTimeout()},onDialogError:function(){e.onDialogError()}}})}},{key:"_acceptAndTerminate",value:function(e,t,n){A("acceptAndTerminate()");var r=[];t&&(n=n||d.REASON_PHRASE[t]||"",r.push("Reason: SIP ;cause=".concat(t,'; text="').concat(n,'"'))),(this._dialog||this._createDialog(e,"UAC"))&&(this.sendRequest(d.ACK),this.sendRequest(d.BYE,{extraHeaders:r})),this._status=R.STATUS_TERMINATED}},{key:"_mangleOffer",value:function(e){if(!this._localHold&&!this._remoteHold)return e;if(e=f.parse(e),this._localHold&&!this._remoteHold){A("mangleOffer() | me on hold, mangling offer");var t,n=i(e.media);try{for(n.s();!(t=n.n()).done;){var r=t.value;-1!==I.indexOf(r.type)&&(r.direction&&"sendrecv"!==r.direction?"recvonly"===r.direction&&(r.direction="inactive"):r.direction="sendonly")}}catch(e){n.e(e)}finally{n.f()}}else if(this._localHold&&this._remoteHold){A("mangleOffer() | both on hold, mangling offer");var o,u=i(e.media);try{for(u.s();!(o=u.n()).done;){var l=o.value;-1!==I.indexOf(l.type)&&(l.direction="inactive")}}catch(e){u.e(e)}finally{u.f()}}else if(this._remoteHold){A("mangleOffer() | remote on hold, mangling offer");var a,s=i(e.media);try{for(s.s();!(a=s.n()).done;){var c=a.value;-1!==I.indexOf(c.type)&&(c.direction&&"sendrecv"!==c.direction?"recvonly"===c.direction&&(c.direction="inactive"):c.direction="recvonly")}}catch(e){s.e(e)}finally{s.f()}}return f.write(e)}},{key:"_setLocalMediaStatus",value:function(){var e=!0,t=!0;(this._localHold||this._remoteHold)&&(t=e=!1),this._audioMuted&&(e=!1),this._videoMuted&&(t=!1),this._toggleMuteAudio(!e),this._toggleMuteVideo(!t)}},{key:"_handleSessionTimersInIncomingRequest",value:function(e,t){this._sessionTimers.enabled&&(e=e.session_expires&&e.session_expires>=d.MIN_SESSION_EXPIRES?(this._sessionTimers.currentExpires=e.session_expires,e.session_expires_refresher||"uas"):(this._sessionTimers.currentExpires=this._sessionTimers.defaultExpires,"uas"),t.push("Session-Expires: ".concat(this._sessionTimers.currentExpires,";refresher=").concat(e)),this._sessionTimers.refresher="uas"===e,this._runSessionTimer())}},{key:"_handleSessionTimersInIncomingResponse",value:function(e){this._sessionTimers.enabled&&(e=e.session_expires&&e.session_expires>=d.MIN_SESSION_EXPIRES?(this._sessionTimers.currentExpires=e.session_expires,e.session_expires_refresher||"uac"):(this._sessionTimers.currentExpires=this._sessionTimers.defaultExpires,"uac"),this._sessionTimers.refresher="uac"===e,this._runSessionTimer())}},{key:"_runSessionTimer",value:function(){var e=this,t=this._sessionTimers.currentExpires;this._sessionTimers.running=!0,clearTimeout(this._sessionTimers.timer),this._sessionTimers.refresher?this._sessionTimers.timer=setTimeout((function(){e._status!==R.STATUS_TERMINATED&&(A("runSessionTimer() | sending session refresh request"),e._sessionTimers.refreshMethod===d.UPDATE?e._sendUpdate():e._sendReinvite())}),500*t):this._sessionTimers.timer=setTimeout((function(){e._status!==R.STATUS_TERMINATED&&(w("runSessionTimer() | timer expired, terminating the session"),e.terminate({cause:d.causes.REQUEST_TIMEOUT,status_code:408,reason_phrase:"Session Timer Expired"}))}),1100*t)}},{key:"_toggleMuteAudio",value:function(e){if(this._connection.getSenders){var t,n=i(this._connection.getSenders().filter((function(e){return e.track&&"audio"===e.track.kind})));try{for(n.s();!(t=n.n()).done;)t.value.track.enabled=!e}catch(t){n.e(t)}finally{n.f()}}else{var r;A("_toggleMuteAudio getSenders API is not supported, using localstream"),(r=null==(r=this._connection.getLocalStreams()[0])?void 0:r.getAudioTracks())&&r.forEach((function(t){return t.enabled=!e}))}}},{key:"_toggleMuteVideo",value:function(e){if(this._connection.getSenders){var t,n=i(this._connection.getSenders().filter((function(e){return e.track&&"video"===e.track.kind})));try{for(n.s();!(t=n.n()).done;)t.value.track.enabled=!e}catch(t){n.e(t)}finally{n.f()}}else{var r;A("_toggleMuteVideo getSenders API is not supported, using localstream"),(r=null==(r=this._connection.getLocalStreams()[0])?void 0:r.getVideoTracks())&&r.forEach((function(t){return t.enabled=!e}))}}},{key:"_newRTCSession",value:function(e,t){var n=2<arguments.length&&void 0!==arguments[2]&&arguments[2];A("newRTCSession()"),this._ua.newRTCSession(this,{originator:e,session:this,request:t,isRefer:n})}},{key:"_connecting",value:function(e){A("session connecting"),A('emit "connecting"'),this.emit("connecting",{request:e})}},{key:"_progress",value:function(e,t){A("session progress"),A('emit "progress"'),this.emit("progress",{originator:e,response:t||null})}},{key:"_accepted",value:function(e,t){A("session accepted"),this._start_time=new Date,A('emit "accepted"'),this.emit("accepted",{originator:e,response:t||null})}},{key:"_confirmed",value:function(e,t){A("session confirmed"),this._is_confirmed=!0,A('emit "confirmed"'),this.emit("confirmed",{originator:e,ack:t||null})}},{key:"_ended",value:function(e,t,n){A("session ended"),this._end_time=new Date,this._close(),A('emit "ended"'),this.emit("ended",{originator:e,message:t||null,cause:n,sessionid:this.id})}},{key:"_failed",value:function(e,t,n){A("session failed"),A('emit "_failed"'),this.emit("_failed",{originator:e,message:t||null,cause:n,sessionid:this.id}),this._close(),A('emit "failed"'),this.emit("failed",{originator:e,message:t||null,cause:n})}},{key:"_onhold",value:function(e){A("session onhold"),this._setLocalMediaStatus(),A('emit "hold"'),this.emit("hold",{originator:e})}},{key:"_onunhold",value:function(e){A("session onunhold"),this._setLocalMediaStatus(),A('emit "unhold"'),this.emit("unhold",{originator:e})}},{key:"_onmute",value:function(e){var t=e.audio;e=e.video;A("session onmute"),this._setLocalMediaStatus(),A('emit "muted"'),this.emit("muted",{audio:t,video:e})}},{key:"_onunmute",value:function(e){var t=e.audio;e=e.video;A("session onunmute"),this._setLocalMediaStatus(),A('emit "unmuted"'),this.emit("unmuted",{audio:t,video:e})}}])&&u(e.prototype,t),n&&u(e,n),o}()},function(e,t,n){"use strict";var r=n(16),i=n(33),o=new(n(14))("JsSIP:Socket").error;t.isSocket=function(e){if(Array.isArray(e))return!1;if(void 0===e)return o("undefined JsSIP.Socket instance"),!1;try{if(!r.isString(e.url))throw o("missing or invalid JsSIP.Socket url property"),new Error;if(!r.isString(e.via_transport))throw o("missing or invalid JsSIP.Socket via_transport property"),new Error;if(-1===i.parse(e.sip_uri,"SIP_URI"))throw o("missing or invalid JsSIP.Socket sip_uri property"),new Error}catch(e){return!1}try{["connect","disconnect","send"].forEach((function(t){if(!r.isFunction(e[t]))throw o("missing or invalid JsSIP.Socket method: ".concat(t)),new Error}))}catch(e){return!1}return!0}},function(e){e.exports=JSON.parse('{"name":"EngageDigital","version":"webrtc-sip-sdk_13.01.000_19","description":"Engage Digital Client","scripts":{"start":"webpack serve","build":"npm run lint && webpack","dev":"webpack","lint":"npm run lint:src && npm run lint:test","lint:src":"eslint ./src --cache && echo \\"Complete linting at src\\"","lint:test":"eslint ./test --cache && echo \\"Complete linting at test\\"","test":"jest && npm run test:coverage","test:coverage":"jest --coverage","prepare":"npm run build","trypublish":"npm publish || true","generate-docs":"npx jsdoc --configure .jsdoc.json --verbose"},"repository":{"type":"git","url":""},"author":"Radisys","license":"","keywords":["library","engage-Digital-rtc","engage-Digital"],"dependencies":{"@cdep/jssip":"^3.7.5","clean-jsdoc-theme":"^3.2.7","debug":"^4.3.1","dotenv":"^9.0.2","lodash":"^4.17.21","mini-css-extract-plugin":"^0.11.3","sdp-transform":"^2.14.1","webrtc-adapter":"^8.0.0","whatwg-fetch":"^3.6.2"},"devDependencies":{"@babel/cli":"7.14.3","@babel/core":"7.14.3","@babel/plugin-proposal-class-properties":"7.13.0","@babel/polyfill":"7.12.1","@babel/preset-env":"7.14.2","@types/jest":"^26.0.23","babel-core":"6.26.3","babel-eslint":"10.1.0","babel-loader":"8.2.2","babel-polyfill":"6.26.0","babel-preset-es2015":"6.24.1","babel-preset-minify":"0.5.1","babel-preset-stage-0":"6.24.1","clean-webpack-plugin":"4.0.0-alpha.0","dotenv-webpack":"^7.0.2","eslint":"^7.27.0","eslint-loader":"^4.0.2","eslint-plugin-react":"^7.26.0","file-loader":"^6.2.0","html-webpack-plugin":"^5.3.1","jest":"^26.6.3","jsdoc":"^3.6.7","prettier":"^2.3.0","prettier-webpack-plugin":"^1.2.0","uglifyjs-webpack-plugin":"^2.2.0","webpack":"^4.43.0","webpack-cli":"^3.3.11","webpack-dev-server":"^3.11.0"},"jest":{"automock":false,"setupFiles":["./setupJestMock.js"]}}')},function(e,t,n){n(159),e.exports=n(361)},function(e,t,n){"use strict";(function(e){if(n(160),n(357),n(358),e._babelPolyfill)throw new Error("only one instance of babel-polyfill is allowed");function t(e,t,n){e[t]||Object.defineProperty(e,t,{writable:!0,configurable:!0,value:n})}e._babelPolyfill=!0,t(String.prototype,"padLeft","".padStart),t(String.prototype,"padRight","".padEnd),"pop,reverse,shift,keys,values,entries,indexOf,every,some,forEach,map,filter,find,findIndex,includes,join,slice,concat,push,splice,unshift,sort,lastIndexOf,reduce,reduceRight,copyWithin,fill".split(",").forEach((function(e){[][e]&&t(Array,e,Function.call.bind([][e]))}))}).call(this,n(81))},function(e,t,n){n(161),n(164),n(165),n(166),n(167),n(168),n(169),n(170),n(171),n(172),n(173),n(174),n(175),n(176),n(177),n(178),n(179),n(180),n(181),n(182),n(183),n(184),n(185),n(186),n(187),n(188),n(189),n(190),n(191),n(192),n(193),n(194),n(195),n(196),n(197),n(198),n(199),n(200),n(201),n(202),n(203),n(204),n(205),n(206),n(207),n(208),n(209),n(210),n(211),n(212),n(213),n(214),n(215),n(216),n(217),n(218),n(219),n(220),n(221),n(222),n(223),n(224),n(225),n(226),n(227),n(228),n(229),n(230),n(231),n(232),n(233),n(234),n(235),n(236),n(237),n(238),n(239),n(241),n(242),n(244),n(245),n(246),n(247),n(248),n(249),n(250),n(252),n(253),n(254),n(255),n(256),n(257),n(258),n(259),n(260),n(261),n(262),n(263),n(264),n(102),n(265),n(134),n(266),n(135),n(267),n(268),n(269),n(270),n(271),n(138),n(140),n(141),n(272),n(273),n(274),n(275),n(276),n(277),n(278),n(279),n(280),n(281),n(282),n(283),n(284),n(285),n(286),n(287),n(288),n(289),n(290),n(291),n(292),n(293),n(294),n(295),n(296),n(297),n(298),n(299),n(300),n(301),n(302),n(303),n(304),n(305),n(306),n(307),n(308),n(309),n(310),n(311),n(312),n(313),n(314),n(315),n(316),n(317),n(318),n(319),n(320),n(321),n(322),n(323),n(324),n(325),n(326),n(327),n(328),n(329),n(330),n(331),n(332),n(333),n(334),n(335),n(336),n(337),n(338),n(339),n(340),n(341),n(342),n(343),n(344),n(345),n(346),n(347),n(348),n(349),n(350),n(351),n(352),n(353),n(354),n(355),n(356),e.exports=n(24)},function(e,t,n){"use strict";function r(e){var t=$[e]=k(F[V]);return t._k=e,t}function i(e,t){E(e);for(var n,r=S(t=R(t)),i=0,o=r.length;i<o;)ee(e,n=r[i++],t[n]);return e}function o(e){var t=B.call(this,e=I(e,!0));return!(this===K&&c($,e)&&!c(J,e))&&(!(t||!c(this,e)||!c($,e)||c(this,W)&&this[W][e])||t)}function u(e,t){if(e=R(e),t=I(t,!0),e!==K||!c($,t)||c(J,t)){var n=L(e,t);return!n||!c($,t)||c(e,W)&&e[W][t]||(n.enumerable=!0),n}}function l(e){for(var t,n=j(R(e)),r=[],i=0;n.length>i;)c($,t=n[i++])||t==W||t==p||r.push(t);return r}function a(e){for(var t,n=e===K,r=j(n?J:R(e)),i=[],o=0;r.length>o;)!c($,t=r[o++])||n&&!c(K,t)||i.push($[t]);return i}var s=n(2),c=n(20),f=n(8),d=n(0),h=n(18),p=n(38).KEY,v=n(3),_=n(60),g=n(56),m=n(42),y=n(6),b=n(116),C=n(83),S=n(163),T=n(68),E=n(1),A=n(4),w=n(12),R=n(21),I=n(29),O=n(41),k=n(45),P=n(119),x=n(22),D=n(67),M=n(11),N=n(43),L=x.f,U=M.f,j=P.f,F=s.Symbol,q=s.JSON,H=q&&q.stringify,V="prototype",W=y("_hidden"),G=y("toPrimitive"),B={}.propertyIsEnumerable,z=_("symbol-registry"),$=_("symbols"),J=_("op-symbols"),K=Object[V],Y="function"==typeof F&&!!D.f,X=!(_=s.QObject)||!_[V]||!_[V].findChild,Q=f&&v((function(){return 7!=k(U({},"a",{get:function(){return U(this,"a",{value:7}).a}})).a}))?function(e,t,n){var r=L(K,t);r&&delete K[t],U(e,t,n),r&&e!==K&&U(K,t,r)}:U,Z=Y&&"symbol"==typeof F.iterator?function(e){return"symbol"==typeof e}:function(e){return e instanceof F},ee=function(e,t,n){return e===K&&ee(J,t,n),E(e),t=I(t,!0),E(n),c($,t)?(n.enumerable?(c(e,W)&&e[W][t]&&(e[W][t]=!1),n=k(n,{enumerable:O(0,!1)})):(c(e,W)||U(e,W,O(1,{})),e[W][t]=!0),Q(e,t,n)):U(e,t,n)};Y||(h((F=function(){if(this instanceof F)throw TypeError("Symbol is not a constructor!");var e=m(0<arguments.length?arguments[0]:void 0),t=function(n){this===K&&t.call(J,n),c(this,W)&&c(this[W],e)&&(this[W][e]=!1),Q(this,e,O(1,n))};return f&&X&&Q(K,e,{configurable:!0,set:t}),r(e)})[V],"toString",(function(){return this._k})),x.f=u,M.f=ee,n(46).f=P.f=l,n(62).f=o,D.f=a,f&&!n(37)&&h(K,"propertyIsEnumerable",o,!0),b.f=function(e){return r(y(e))}),d(d.G+d.W+d.F*!Y,{Symbol:F});for(var te="hasInstance,isConcatSpreadable,iterator,match,replace,search,species,split,toPrimitive,toStringTag,unscopables".split(","),ne=0;te.length>ne;)y(te[ne++]);for(var re=N(y.store),ie=0;re.length>ie;)C(re[ie++]);d(d.S+d.F*!Y,"Symbol",{for:function(e){return c(z,e+="")?z[e]:z[e]=F(e)},keyFor:function(e){if(!Z(e))throw TypeError(e+" is not a symbol!");for(var t in z)if(z[t]===e)return t},useSetter:function(){X=!0},useSimple:function(){X=!1}}),d(d.S+d.F*!Y,"Object",{create:function(e,t){return void 0===t?k(e):i(k(e),t)},defineProperty:ee,defineProperties:i,getOwnPropertyDescriptor:u,getOwnPropertyNames:l,getOwnPropertySymbols:a}),N=v((function(){D.f(1)})),d(d.S+d.F*N,"Object",{getOwnPropertySymbols:function(e){return D.f(w(e))}}),q&&d(d.S+d.F*(!Y||v((function(){var e=F();return"[null]"!=H([e])||"{}"!=H({a:e})||"{}"!=H(Object(e))}))),"JSON",{stringify:function(e){for(var t,n,r=[e],i=1;i<arguments.length;)r.push(arguments[i++]);if(n=t=r[1],(A(t)||void 0!==e)&&!Z(e))return T(t)||(t=function(e,t){if("function"==typeof n&&(t=n.call(this,e,t)),!Z(t))return t}),r[1]=t,H.apply(q,r)}}),F[V][G]||n(17)(F[V],G,F[V].valueOf),g(F,"Symbol"),g(Math,"Math",!0),g(s.JSON,"JSON",!0)},function(e,t,n){e.exports=n(60)("native-function-to-string",Function.toString)},function(e,t,n){var r=n(43),i=n(67),o=n(62);e.exports=function(e){var t=r(e),n=i.f;if(n)for(var u,l=n(e),a=o.f,s=0;l.length>s;)a.call(e,u=l[s++])&&t.push(u);return t}},function(e,t,n){var r=n(0);r(r.S,"Object",{create:n(45)})},function(e,t,n){var r=n(0);r(r.S+r.F*!n(8),"Object",{defineProperty:n(11).f})},function(e,t,n){var r=n(0);r(r.S+r.F*!n(8),"Object",{defineProperties:n(118)})},function(e,t,n){var r=n(21),i=n(22).f;n(31)("getOwnPropertyDescriptor",(function(){return function(e,t){return i(r(e),t)}}))},function(e,t,n){var r=n(12),i=n(23);n(31)("getPrototypeOf",(function(){return function(e){return i(r(e))}}))},function(e,t,n){var r=n(12),i=n(43);n(31)("keys",(function(){return function(e){return i(r(e))}}))},function(e,t,n){n(31)("getOwnPropertyNames",(function(){return n(119).f}))},function(e,t,n){var r=n(4),i=n(38).onFreeze;n(31)("freeze",(function(e){return function(t){return e&&r(t)?e(i(t)):t}}))},function(e,t,n){var r=n(4),i=n(38).onFreeze;n(31)("seal",(function(e){return function(t){return e&&r(t)?e(i(t)):t}}))},function(e,t,n){var r=n(4),i=n(38).onFreeze;n(31)("preventExtensions",(function(e){return function(t){return e&&r(t)?e(i(t)):t}}))},function(e,t,n){var r=n(4);n(31)("isFrozen",(function(e){return function(t){return!r(t)||!!e&&e(t)}}))},function(e,t,n){var r=n(4);n(31)("isSealed",(function(e){return function(t){return!r(t)||!!e&&e(t)}}))},function(e,t,n){var r=n(4);n(31)("isExtensible",(function(e){return function(t){return!!r(t)&&(!e||e(t))}}))},function(e,t,n){var r=n(0);r(r.S+r.F,"Object",{assign:n(120)})},function(e,t,n){var r=n(0);r(r.S,"Object",{is:n(121)})},function(e,t,n){var r=n(0);r(r.S,"Object",{setPrototypeOf:n(87).set})},function(e,t,n){"use strict";var r=n(57),i={};i[n(6)("toStringTag")]="z",i+""!="[object z]"&&n(18)(Object.prototype,"toString",(function(){return"[object "+r(this)+"]"}),!0)},function(e,t,n){var r=n(0);r(r.P,"Function",{bind:n(122)})},function(e,t,n){var r=n(11).f,i=Function.prototype,o=/^\s*function ([^ (]*)/;"name"in i||n(8)&&r(i,"name",{configurable:!0,get:function(){try{return(""+this).match(o)[1]}catch(e){return""}}})},function(e,t,n){"use strict";var r=n(4),i=n(23),o=n(6)("hasInstance"),u=Function.prototype;o in u||n(11).f(u,o,{value:function(e){if("function"!=typeof this||!r(e))return!1;if(!r(this.prototype))return e instanceof this;for(;e=i(e);)if(this.prototype===e)return!0;return!1}})},function(e,t,n){var r=n(0);n=n(124);r(r.G+r.F*(parseInt!=n),{parseInt:n})},function(e,t,n){var r=n(0);n=n(125);r(r.G+r.F*(parseFloat!=n),{parseFloat:n})},function(e,t,n){"use strict";function r(e){if("string"==typeof(t=a(e,!1))&&2<t.length){var t,n,r,i=(t=m?t.trim():h(t,3)).charCodeAt(0);if(43===i||45===i){if(88===(e=t.charCodeAt(2))||120===e)return NaN}else if(48===i){switch(t.charCodeAt(1)){case 66:case 98:n=2,r=49;break;case 79:case 111:n=8,r=55;break;default:return+t}for(var o,u=t.slice(2),l=0,s=u.length;l<s;l++)if((o=u.charCodeAt(l))<48||r<o)return NaN;return parseInt(u,n)}}return+t}var i=n(2),o=n(20),u=n(26),l=n(89),a=n(29),s=n(3),c=n(46).f,f=n(22).f,d=n(11).f,h=n(58).trim,p="Number",v=b=i[p],_=b.prototype,g=u(n(45)(_))==p,m="trim"in String.prototype;if(!b(" 0o1")||!b("0b1")||b("+0x1")){for(var y,b=function(e){e=arguments.length<1?0:e;var t=this;return t instanceof b&&(g?s((function(){_.valueOf.call(t)})):u(t)!=p)?l(new v(r(e)),t,b):r(e)},C=n(8)?c(v):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger".split(","),S=0;C.length>S;S++)o(v,y=C[S])&&!o(b,y)&&d(b,y,f(v,y));(b.prototype=_).constructor=b,n(18)(i,p,b)}},function(e,t,n){"use strict";function r(e,t){for(var n=-1,r=t;++n<6;)r+=e*h[n],h[n]=r%1e7,r=d(r/1e7)}function i(e){for(var t=6,n=0;0<=--t;)n+=h[t],h[t]=d(n/e),n=n%e*1e7}function o(){for(var e,t=6,n="";0<=--t;)""===n&&0!==t&&0===h[t]||(e=String(h[t]),n=""===n?e:n+c.call("0",7-e.length)+e);return n}function u(e,t,n){return 0===t?n:t%2==1?u(e,t-1,n*e):u(e*e,t/2,n)}var l=n(0),a=n(27),s=n(126),c=n(90),f=1..toFixed,d=Math.floor,h=[0,0,0,0,0,0],p="Number.toFixed: incorrect invocation!";l(l.P+l.F*(!!f&&("0.000"!==8e-5.toFixed(3)||"1"!==.9.toFixed(0)||"1.25"!==1.255.toFixed(2)||"1000000000000000128"!==(0xde0b6b3a7640080).toFixed(0))||!n(3)((function(){f.call({})}))),"Number",{toFixed:function(e){var t,n,l=s(this,p),f=a(e),d="";e="0";if(f<0||20<f)throw RangeError(p);if(l!=l)return"NaN";if(l<=-1e21||1e21<=l)return String(l);if(l<0&&(d="-",l=-l),1e-21<l)if(l=(n=function(e){for(var t=0,n=e;4096<=n;)t+=12,n/=4096;for(;2<=n;)t+=1,n/=2;return t}(l*u(2,69,1))-69)<0?l*u(2,-n,1):l/u(2,n,1),l*=4503599627370496,0<(n=52-n)){for(r(0,l),t=f;7<=t;)r(1e7,0),t-=7;for(r(u(10,t,1),0),t=n-1;23<=t;)i(1<<23),t-=23;i(1<<t),r(1,1),i(2),e=o()}else r(0,l),r(1<<-n,0),e=o()+c.call("0",f);return 0<f?d+((n=e.length)<=f?"0."+c.call("0",f-n)+e:e.slice(0,n-f)+"."+e.slice(n-f)):d+e}})},function(e,t,n){"use strict";var r=n(0),i=n(3),o=n(126),u=1..toPrecision;r(r.P+r.F*(i((function(){return"1"!==u.call(1,void 0)}))||!i((function(){u.call({})}))),"Number",{toPrecision:function(e){var t=o(this,"Number#toPrecision: incorrect invocation!");return void 0===e?u.call(t):u.call(t,e)}})},function(e,t,n){(n=n(0))(n.S,"Number",{EPSILON:Math.pow(2,-52)})},function(e,t,n){var r=n(0),i=n(2).isFinite;r(r.S,"Number",{isFinite:function(e){return"number"==typeof e&&i(e)}})},function(e,t,n){var r=n(0);r(r.S,"Number",{isInteger:n(127)})},function(e,t,n){(n=n(0))(n.S,"Number",{isNaN:function(e){return e!=e}})},function(e,t,n){var r=n(0),i=n(127),o=Math.abs;r(r.S,"Number",{isSafeInteger:function(e){return i(e)&&o(e)<=9007199254740991}})},function(e,t,n){(n=n(0))(n.S,"Number",{MAX_SAFE_INTEGER:9007199254740991})},function(e,t,n){(n=n(0))(n.S,"Number",{MIN_SAFE_INTEGER:-9007199254740991})},function(e,t,n){var r=n(0);n=n(125);r(r.S+r.F*(Number.parseFloat!=n),"Number",{parseFloat:n})},function(e,t,n){var r=n(0);n=n(124);r(r.S+r.F*(Number.parseInt!=n),"Number",{parseInt:n})},function(e,t,n){var r=n(0),i=n(128),o=Math.sqrt;n=Math.acosh;r(r.S+r.F*!(n&&710==Math.floor(n(Number.MAX_VALUE))&&n(1/0)==1/0),"Math",{acosh:function(e){return(e=+e)<1?NaN:94906265.62425156<e?Math.log(e)+Math.LN2:i(e-1+o(e-1)*o(e+1))}})},function(e,t,n){var r=n(0);n=Math.asinh;r(r.S+r.F*!(n&&0<1/n(0)),"Math",{asinh:function e(t){return isFinite(t=+t)&&0!=t?t<0?-e(-t):Math.log(t+Math.sqrt(t*t+1)):t}})},function(e,t,n){var r=n(0);n=Math.atanh;r(r.S+r.F*!(n&&1/n(-0)<0),"Math",{atanh:function(e){return 0==(e=+e)?e:Math.log((1+e)/(1-e))/2}})},function(e,t,n){var r=n(0),i=n(91);r(r.S,"Math",{cbrt:function(e){return i(e=+e)*Math.pow(Math.abs(e),1/3)}})},function(e,t,n){(n=n(0))(n.S,"Math",{clz32:function(e){return(e>>>=0)?31-Math.floor(Math.log(e+.5)*Math.LOG2E):32}})},function(e,t,n){n=n(0);var r=Math.exp;n(n.S,"Math",{cosh:function(e){return(r(e=+e)+r(-e))/2}})},function(e,t,n){var r=n(0);n=n(92);r(r.S+r.F*(n!=Math.expm1),"Math",{expm1:n})},function(e,t,n){var r=n(0);r(r.S,"Math",{fround:n(129)})},function(e,t,n){n=n(0);var r=Math.abs;n(n.S,"Math",{hypot:function(e,t){for(var n,i,o=0,u=0,l=arguments.length,a=0;u<l;)a<(n=r(arguments[u++]))?(o=o*(i=a/n)*i+1,a=n):o+=0<n?(i=n/a)*i:n;return a===1/0?1/0:a*Math.sqrt(o)}})},function(e,t,n){var r=n(0),i=Math.imul;r(r.S+r.F*n(3)((function(){return-5!=i(4294967295,5)||2!=i.length})),"Math",{imul:function(e,t){var n=+e,r=+t;return 0|(e=65535&n)*(t=65535&r)+((65535&n>>>16)*t+e*(65535&r>>>16)<<16>>>0)}})},function(e,t,n){(n=n(0))(n.S,"Math",{log10:function(e){return Math.log(e)*Math.LOG10E}})},function(e,t,n){var r=n(0);r(r.S,"Math",{log1p:n(128)})},function(e,t,n){(n=n(0))(n.S,"Math",{log2:function(e){return Math.log(e)/Math.LN2}})},function(e,t,n){var r=n(0);r(r.S,"Math",{sign:n(91)})},function(e,t,n){var r=n(0),i=n(92),o=Math.exp;r(r.S+r.F*n(3)((function(){return-2e-17!=!Math.sinh(-2e-17)})),"Math",{sinh:function(e){return Math.abs(e=+e)<1?(i(e)-i(-e))/2:(o(e-1)-o(-e-1))*(Math.E/2)}})},function(e,t,n){var r=n(0),i=n(92),o=Math.exp;r(r.S,"Math",{tanh:function(e){var t=i(e=+e),n=i(-e);return t==1/0?1:n==1/0?-1:(t-n)/(o(e)+o(-e))}})},function(e,t,n){(n=n(0))(n.S,"Math",{trunc:function(e){return(0<e?Math.floor:Math.ceil)(e)}})},function(e,t,n){var r=n(0),i=n(44),o=String.fromCharCode;n=String.fromCodePoint;r(r.S+r.F*(!!n&&1!=n.length),"String",{fromCodePoint:function(e){for(var t,n=[],r=arguments.length,u=0;u<r;){if(t=+arguments[u++],i(t,1114111)!==t)throw RangeError(t+" is not a valid code point");n.push(t<65536?o(t):o(55296+((t-=65536)>>10),t%1024+56320))}return n.join("")}})},function(e,t,n){var r=n(0),i=n(21),o=n(7);r(r.S,"String",{raw:function(e){for(var t=i(e.raw),n=o(t.length),r=arguments.length,u=[],l=0;l<n;)u.push(String(t[l++])),l<r&&u.push(String(arguments[l]));return u.join("")}})},function(e,t,n){"use strict";n(58)("trim",(function(e){return function(){return e(this,3)}}))},function(e,t,n){"use strict";var r=n(69)(!0);n(93)(String,"String",(function(e){this._t=String(e),this._i=0}),(function(){var e=this._t,t=this._i;return t>=e.length?{value:void 0,done:!0}:(t=r(e,t),this._i+=t.length,{value:t,done:!1})}))},function(e,t,n){"use strict";var r=n(0),i=n(69)(!1);r(r.P,"String",{codePointAt:function(e){return i(this,e)}})},function(e,t,n){"use strict";var r=n(0),i=n(7),o=n(95),u="endsWith",l=""[u];r(r.P+r.F*n(96)(u),"String",{endsWith:function(e){var t=o(this,e,u),n=1<arguments.length?arguments[1]:void 0,r=i(t.length);r=void 0===n?r:Math.min(i(n),r),e=String(e);return l?l.call(t,e,r):t.slice(r-e.length,r)===e}})},function(e,t,n){"use strict";var r=n(0),i=n(95);r(r.P+r.F*n(96)("includes"),"String",{includes:function(e){return!!~i(this,e,"includes").indexOf(e,1<arguments.length?arguments[1]:void 0)}})},function(e,t,n){var r=n(0);r(r.P,"String",{repeat:n(90)})},function(e,t,n){"use strict";var r=n(0),i=n(7),o=n(95),u="startsWith",l=""[u];r(r.P+r.F*n(96)(u),"String",{startsWith:function(e){var t=o(this,e,u),n=i(Math.min(1<arguments.length?arguments[1]:void 0,t.length));e=String(e);return l?l.call(t,e,n):t.slice(n,n+e.length)===e}})},function(e,t,n){"use strict";n(19)("anchor",(function(e){return function(t){return e(this,"a","name",t)}}))},function(e,t,n){"use strict";n(19)("big",(function(e){return function(){return e(this,"big","","")}}))},function(e,t,n){"use strict";n(19)("blink",(function(e){return function(){return e(this,"blink","","")}}))},function(e,t,n){"use strict";n(19)("bold",(function(e){return function(){return e(this,"b","","")}}))},function(e,t,n){"use strict";n(19)("fixed",(function(e){return function(){return e(this,"tt","","")}}))},function(e,t,n){"use strict";n(19)("fontcolor",(function(e){return function(t){return e(this,"font","color",t)}}))},function(e,t,n){"use strict";n(19)("fontsize",(function(e){return function(t){return e(this,"font","size",t)}}))},function(e,t,n){"use strict";n(19)("italics",(function(e){return function(){return e(this,"i","","")}}))},function(e,t,n){"use strict";n(19)("link",(function(e){return function(t){return e(this,"a","href",t)}}))},function(e,t,n){"use strict";n(19)("small",(function(e){return function(){return e(this,"small","","")}}))},function(e,t,n){"use strict";n(19)("strike",(function(e){return function(){return e(this,"strike","","")}}))},function(e,t,n){"use strict";n(19)("sub",(function(e){return function(){return e(this,"sub","","")}}))},function(e,t,n){"use strict";n(19)("sup",(function(e){return function(){return e(this,"sup","","")}}))},function(e,t,n){(n=n(0))(n.S,"Date",{now:function(){return(new Date).getTime()}})},function(e,t,n){"use strict";var r=n(0),i=n(12),o=n(29);r(r.P+r.F*n(3)((function(){return null!==new Date(NaN).toJSON()||1!==Date.prototype.toJSON.call({toISOString:function(){return 1}})})),"Date",{toJSON:function(e){var t=i(this),n=o(t);return"number"!=typeof n||isFinite(n)?t.toISOString():null}})},function(e,t,n){var r=n(0);n=n(240);r(r.P+r.F*(Date.prototype.toISOString!==n),"Date",{toISOString:n})},function(e,t,n){"use strict";function r(e){return 9<e?e:"0"+e}n=n(3);var i=Date.prototype.getTime,o=Date.prototype.toISOString;e.exports=n((function(){return"0385-07-25T07:06:39.999Z"!=o.call(new Date(-50000000000001))}))||!n((function(){o.call(new Date(NaN))}))?function(){if(!isFinite(i.call(this)))throw RangeError("Invalid time value");var e=this.getUTCFullYear(),t=this.getUTCMilliseconds(),n=e<0?"-":9999<e?"+":"";return n+("00000"+Math.abs(e)).slice(n?-6:-4)+"-"+r(this.getUTCMonth()+1)+"-"+r(this.getUTCDate())+"T"+r(this.getUTCHours())+":"+r(this.getUTCMinutes())+":"+r(this.getUTCSeconds())+"."+(99<t?t:"0"+r(t))+"Z"}:o},function(e,t,n){var r=Date.prototype,i="Invalid Date",o=r.toString,u=r.getTime;new Date(NaN)+""!=i&&n(18)(r,"toString",(function(){var e=u.call(this);return e==e?o.call(this):i}))},function(e,t,n){var r=n(6)("toPrimitive"),i=Date.prototype;r in i||n(17)(i,r,n(243))},function(e,t,n){"use strict";var r=n(1),i=n(29);e.exports=function(e){if("string"!==e&&"number"!==e&&"default"!==e)throw TypeError("Incorrect hint");return i(r(this),"number"!=e)}},function(e,t,n){var r=n(0);r(r.S,"Array",{isArray:n(68)})},function(e,t,n){"use strict";var r=n(25),i=n(0),o=n(12),u=n(130),l=n(97),a=n(7),s=n(98),c=n(99);i(i.S+i.F*!n(71)((function(e){Array.from(e)})),"Array",{from:function(e){var t,n,i,f,d=o(e),h="function"==typeof this?this:Array,p=arguments.length,v=1<p?arguments[1]:void 0,_=void 0!==v,g=0;e=c(d);if(_&&(v=r(v,2<p?arguments[2]:void 0,2)),null==e||h==Array&&l(e))for(n=new h(t=a(d.length));g<t;g++)s(n,g,_?v(d[g],g):d[g]);else for(f=e.call(d),n=new h;!(i=f.next()).done;g++)s(n,g,_?u(f,v,[i.value,g],!0):i.value);return n.length=g,n}})},function(e,t,n){"use strict";var r=n(0),i=n(98);r(r.S+r.F*n(3)((function(){function e(){}return!(Array.of.call(e)instanceof e)})),"Array",{of:function(){for(var e=0,t=arguments.length,n=new("function"==typeof this?this:Array)(t);e<t;)i(n,e,arguments[e++]);return n.length=t,n}})},function(e,t,n){"use strict";var r=n(0),i=n(21),o=[].join;r(r.P+r.F*(n(61)!=Object||!n(28)(o)),"Array",{join:function(e){return o.call(i(this),void 0===e?",":e)}})},function(e,t,n){"use strict";var r=n(0),i=n(86),o=n(26),u=n(44),l=n(7),a=[].slice;r(r.P+r.F*n(3)((function(){i&&a.call(i)})),"Array",{slice:function(e,t){var n=l(this.length),r=o(this);if(t=void 0===t?n:t,"Array"==r)return a.call(this,e,t);for(var i=u(e,n),s=(n=u(t,n),l(n-i)),c=new Array(s),f=0;f<s;f++)c[f]="String"==r?this.charAt(i+f):this[i+f];return c}})},function(e,t,n){"use strict";var r=n(0),i=n(15),o=n(12),u=n(3),l=[].sort,a=[1,2,3];r(r.P+r.F*(u((function(){a.sort(void 0)}))||!u((function(){a.sort(null)}))||!n(28)(l)),"Array",{sort:function(e){return void 0===e?l.call(o(this)):l.call(o(this),i(e))}})},function(e,t,n){"use strict";var r=n(0),i=n(32)(0);n=n(28)([].forEach,!0);r(r.P+r.F*!n,"Array",{forEach:function(e){return i(this,e,arguments[1])}})},function(e,t,n){var r=n(4),i=n(68),o=n(6)("species");e.exports=function(e){var t;return i(e)&&("function"!=typeof(t=e.constructor)||t!==Array&&!i(t.prototype)||(t=void 0),r(t)&&null===(t=t[o])&&(t=void 0)),void 0===t?Array:t}},function(e,t,n){"use strict";var r=n(0),i=n(32)(1);r(r.P+r.F*!n(28)([].map,!0),"Array",{map:function(e){return i(this,e,arguments[1])}})},function(e,t,n){"use strict";var r=n(0),i=n(32)(2);r(r.P+r.F*!n(28)([].filter,!0),"Array",{filter:function(e){return i(this,e,arguments[1])}})},function(e,t,n){"use strict";var r=n(0),i=n(32)(3);r(r.P+r.F*!n(28)([].some,!0),"Array",{some:function(e){return i(this,e,arguments[1])}})},function(e,t,n){"use strict";var r=n(0),i=n(32)(4);r(r.P+r.F*!n(28)([].every,!0),"Array",{every:function(e){return i(this,e,arguments[1])}})},function(e,t,n){"use strict";var r=n(0),i=n(131);r(r.P+r.F*!n(28)([].reduce,!0),"Array",{reduce:function(e){return i(this,e,arguments.length,arguments[1],!1)}})},function(e,t,n){"use strict";var r=n(0),i=n(131);r(r.P+r.F*!n(28)([].reduceRight,!0),"Array",{reduceRight:function(e){return i(this,e,arguments.length,arguments[1],!0)}})},function(e,t,n){"use strict";var r=n(0),i=n(66)(!1),o=[].indexOf,u=!!o&&1/[1].indexOf(1,-0)<0;r(r.P+r.F*(u||!n(28)(o)),"Array",{indexOf:function(e){return u?o.apply(this,arguments)||0:i(this,e,arguments[1])}})},function(e,t,n){"use strict";var r=n(0),i=n(21),o=n(27),u=n(7),l=[].lastIndexOf,a=!!l&&1/[1].lastIndexOf(1,-0)<0;r(r.P+r.F*(a||!n(28)(l)),"Array",{lastIndexOf:function(e){if(a)return l.apply(this,arguments)||0;var t=i(this),n=u(t.length),r=n-1;for((r=1<arguments.length?Math.min(r,o(arguments[1])):r)<0&&(r=n+r);0<=r;r--)if(r in t&&t[r]===e)return r||0;return-1}})},function(e,t,n){var r=n(0);r(r.P,"Array",{copyWithin:n(132)}),n(39)("copyWithin")},function(e,t,n){var r=n(0);r(r.P,"Array",{fill:n(101)}),n(39)("fill")},function(e,t,n){"use strict";var r=n(0),i=n(32)(5),o=!0;"find"in[]&&Array(1).find((function(){o=!1})),r(r.P+r.F*o,"Array",{find:function(e){return i(this,e,1<arguments.length?arguments[1]:void 0)}}),n(39)("find")},function(e,t,n){"use strict";var r=n(0),i=n(32)(6),o="findIndex",u=!0;o in[]&&Array(1)[o]((function(){u=!1})),r(r.P+r.F*u,"Array",{findIndex:function(e){return i(this,e,1<arguments.length?arguments[1]:void 0)}}),n(39)(o)},function(e,t,n){n(47)("Array")},function(e,t,n){var r=n(2),i=n(89),o=n(11).f,u=n(46).f,l=n(70),a=n(63),s=p=r.RegExp,c=p.prototype,f=/a/g,d=/a/g,h=new p(f)!==f;if(n(8)&&(!h||n(3)((function(){return d[n(6)("match")]=!1,p(f)!=f||p(d)==d||"/a/i"!=p(f,"i")})))){for(var p=function(e,t){var n=this instanceof p,r=l(e),o=void 0===t;return!n&&r&&e.constructor===p&&o?e:i(h?new s(r&&!o?e.source:e,t):s((r=e instanceof p)?e.source:e,r&&o?a.call(e):t),n?this:c,p)},v=u(s),_=0;v.length>_;)!function(e){e in p||o(p,e,{configurable:!0,get:function(){return s[e]},set:function(t){s[e]=t}})}(v[_++]);(c.constructor=p).prototype=c,n(18)(r,"RegExp",p)}n(47)("RegExp")},function(e,t,n){"use strict";function r(e){n(18)(RegExp.prototype,l,e,!0)}n(135);var i=n(1),o=n(63),u=n(8),l="toString",a=/./[l];n(3)((function(){return"/a/b"!=a.call({source:"a",flags:"b"})}))?r((function(){var e=i(this);return"/".concat(e.source,"/","flags"in e?e.flags:!u&&e instanceof RegExp?o.call(e):void 0)})):a.name!=l&&r((function(){return a.call(this)}))},function(e,t,n){"use strict";var r=n(1),i=n(7),o=n(104),u=n(72);n(73)("match",1,(function(e,t,n,l){return[function(n){var r=e(this),i=null==n?void 0:n[t];return void 0!==i?i.call(n,r):new RegExp(n)[t](String(r))},function(e){var t=l(n,e,this);if(t.done)return t.value;var a=r(e),s=String(this);if(!a.global)return u(a,s);for(var c=a.unicode,f=[],d=a.lastIndex=0;null!==(h=u(a,s));){var h=String(h[0]);""===(f[d]=h)&&(a.lastIndex=o(s,i(a.lastIndex),c)),d++}return 0===d?null:f}]}))},function(e,t,n){"use strict";var r=n(1),i=n(12),o=n(7),u=n(27),l=n(104),a=n(72),s=Math.max,c=Math.min,f=Math.floor,d=/\$([$&`']|\d\d?|<[^>]*>)/g,h=/\$([$&`']|\d\d?)/g;n(73)("replace",2,(function(e,t,n,p){return[function(r,i){var o=e(this),u=null==r?void 0:r[t];return void 0!==u?u.call(r,o,i):n.call(String(o),r,i)},function(e,t){var v=p(n,e,this,t);if(v.done)return v.value;var _=r(e),g=String(this),m="function"==typeof t;m||(t=String(t));var y,b=_.global;b&&(y=_.unicode,_.lastIndex=0);for(var C=[];null!==(w=a(_,g))&&(C.push(w),b);)""===String(w[0])&&(_.lastIndex=l(g,o(_.lastIndex),y));for(var S,T="",E=0,A=0;A<C.length;A++){for(var w=C[A],R=String(w[0]),I=s(c(u(w.index),g.length),0),O=[],k=1;k<w.length;k++)O.push(void 0===(S=w[k])?S:String(S));var P,x=w.groups;x=m?(P=[R].concat(O,I,g),void 0!==x&&P.push(x),String(t.apply(void 0,P))):function(e,t,r,o,u,l){var a=r+e.length,s=o.length,c=h;return void 0!==u&&(u=i(u),c=d),n.call(l,c,(function(n,i){var l;switch(i.charAt(0)){case"$":return"$";case"&":return e;case"`":return t.slice(0,r);case"'":return t.slice(a);case"<":l=u[i.slice(1,-1)];break;default:var c=+i;if(0==c)return n;if(s<c){var d=f(c/10);return 0===d?n:d<=s?void 0===o[d-1]?i.charAt(1):o[d-1]+i.charAt(1):n}l=o[c-1]}return void 0===l?"":l}))}(R,g,I,O,x,t);E<=I&&(T+=g.slice(E,I)+x,E=I+R.length)}return T+g.slice(E)}]}))},function(e,t,n){"use strict";var r=n(1),i=n(121),o=n(72);n(73)("search",1,(function(e,t,n,u){return[function(n){var r=e(this),i=null==n?void 0:n[t];return void 0!==i?i.call(n,r):new RegExp(n)[t](String(r))},function(e){if((l=u(n,e,this)).done)return l.value;var t=r(e),l=String(this);e=t.lastIndex;return i(e,0)||(t.lastIndex=0),l=o(t,l),i(t.lastIndex,e)||(t.lastIndex=e),null===l?-1:l.index}]}))},function(e,t,n){"use strict";var r=n(70),i=n(1),o=n(64),u=n(104),l=n(7),a=n(72),s=n(103),c=n(3),f=Math.min,d=[].push,h="split",p="length",v="lastIndex",_=4294967295,g=!c((function(){RegExp(_,"y")}));n(73)("split",2,(function(e,t,n,c){var m="c"=="abbc"[h](/(b)*/)[1]||4!="test"[h](/(?:)/,-1)[p]||2!="ab"[h](/(?:ab)*/)[p]||4!="."[h](/(.?)(.?)/)[p]||1<"."[h](/()()/)[p]||""[h](/.?/)[p]?function(e,t){var i=String(this);if(void 0===e&&0===t)return[];if(!r(e))return n.call(i,e,t);for(var o,u,l,a=[],c=(e.ignoreCase?"i":"")+(e.multiline?"m":"")+(e.unicode?"u":"")+(e.sticky?"y":""),f=0,h=void 0===t?_:t>>>0,g=new RegExp(e.source,c+"g");(o=s.call(g,i))&&!(f<(u=g[v])&&(a.push(i.slice(f,o.index)),1<o[p]&&o.index<i[p]&&d.apply(a,o.slice(1)),l=o[0][p],f=u,a[p]>=h));)g[v]===o.index&&g[v]++;return f===i[p]?!l&&g.test("")||a.push(""):a.push(i.slice(f)),a[p]>h?a.slice(0,h):a}:"0"[h](void 0,0)[p]?function(e,t){return void 0===e&&0===t?[]:n.call(this,e,t)}:n;return[function(n,r){var i=e(this),o=null==n?void 0:n[t];return void 0!==o?o.call(n,i,r):m.call(String(i),n,r)},function(e,t){if((d=c(m,e,this,t,m!==n)).done)return d.value;var r=i(e),s=String(this),d=o(r,RegExp),h=r.unicode,p=(e=(r.ignoreCase?"i":"")+(r.multiline?"m":"")+(r.unicode?"u":"")+(g?"y":"g"),new d(g?r:"^(?:"+r.source+")",e)),v=void 0===t?_:t>>>0;if(0==v)return[];if(0===s.length)return null===a(p,s)?[s]:[];for(var y=0,b=0,C=[];b<s.length;){p.lastIndex=g?b:0;var S,T=a(p,g?s:s.slice(b));if(null===T||(S=f(l(p.lastIndex+(g?0:b)),s.length))===y)b=u(s,b,h);else{if(C.push(s.slice(y,b)),C.length===v)return C;for(var E=1;E<=T.length-1;E++)if(C.push(T[E]),C.length===v)return C;b=y=S}}return C.push(s.slice(y)),C}]}))},function(e,t,n){"use strict";function r(){}var i,o,u,l,a=n(37),s=n(2),c=n(25),f=n(57),d=n(0),h=n(4),p=n(15),v=n(48),_=n(49),g=n(64),m=n(105).set,y=n(106)(),b=n(107),C=n(136),S=n(74),T=n(137),E="Promise",A=s.TypeError,w=s.process,R=w&&w.versions,I=R&&R.v8||"",O=s[E],k="process"==f(w),P=o=b.f,x=(f=!!function(){try{var e=O.resolve(1),t=(e.constructor={})[n(6)("species")]=function(e){e(r,r)};return(k||"function"==typeof PromiseRejectionEvent)&&e.then(r)instanceof t&&0!==I.indexOf("6.6")&&-1===S.indexOf("Chrome/66")}catch(e){}}(),function(e){var t;return!(!h(e)||"function"!=typeof(t=e.then))&&t}),D=function(e,t){var n;e._n||(e._n=!0,n=e._c,y((function(){for(var r,i=e._v,o=1==e._s,u=0,l=function(t){var n,r,u,l,a=o?t.ok:t.fail,c=t.resolve,f=t.reject,d=t.domain;try{a?(o||(2==e._h&&(l=e,m.call(s,(function(){var e;k?w.emit("rejectionHandled",l):(e=s.onrejectionhandled)&&e({promise:l,reason:l._v})}))),e._h=1),!0===a?n=i:(d&&d.enter(),n=a(i),d&&(d.exit(),u=!0)),n===t.promise?f(A("Promise-chain cycle")):(r=x(n))?r.call(n,c,f):c(n)):f(i)}catch(t){d&&!u&&d.exit(),f(t)}};n.length>u;)l(n[u++]);e._c=[],e._n=!1,t&&!e._h&&(r=e,m.call(s,(function(){var e,t,n=r._v,i=M(r);if(i&&(e=C((function(){k?w.emit("unhandledRejection",n,r):(t=s.onunhandledrejection)?t({promise:r,reason:n}):(t=s.console)&&t.error&&t.error("Unhandled promise rejection",n)})),r._h=k||M(r)?2:1),r._a=void 0,i&&e.e)throw e.v})))})))},M=function(e){return 1!==e._h&&0===(e._a||e._c).length},N=function(e){var t=this;t._d||(t._d=!0,(t=t._w||t)._v=e,t._s=2,t._a||(t._a=t._c.slice()),D(t,!0))},L=function(e){var t,n=this;if(!n._d){n._d=!0,n=n._w||n;try{if(n===e)throw A("Promise can't be resolved itself");(t=x(e))?y((function(){var r={_w:n,_d:!1};try{t.call(e,c(L,r,1),c(N,r,1))}catch(e){N.call(r,e)}})):(n._v=e,n._s=1,D(n,!1))}catch(e){N.call({_w:n,_d:!1},e)}}};f||(O=function(e){v(this,O,E,"_h"),p(e),i.call(this);try{e(c(L,this,1),c(N,this,1))}catch(e){N.call(this,e)}},(i=function(e){this._c=[],this._a=void 0,this._s=0,this._d=!1,this._v=void 0,this._h=0,this._n=!1}).prototype=n(50)(O.prototype,{then:function(e,t){var n=P(g(this,O));return n.ok="function"!=typeof e||e,n.fail="function"==typeof t&&t,n.domain=k?w.domain:void 0,this._c.push(n),this._a&&this._a.push(n),this._s&&D(this,!1),n.promise},catch:function(e){return this.then(void 0,e)}}),u=function(){var e=new i;this.promise=e,this.resolve=c(L,e,1),this.reject=c(N,e,1)},b.f=P=function(e){return e===O||e===l?new u:o(e)}),d(d.G+d.W+d.F*!f,{Promise:O}),n(56)(O,E),n(47)(E),l=n(24)[E],d(d.S+d.F*!f,E,{reject:function(e){var t=P(this);return(0,t.reject)(e),t.promise}}),d(d.S+d.F*(a||!f),E,{resolve:function(e){return T(a&&this===l?O:this,e)}}),d(d.S+d.F*!(f&&n(71)((function(e){O.all(e).catch(r)}))),E,{all:function(e){var t=this,n=P(t),r=n.resolve,i=n.reject,o=C((function(){var n=[],o=0,u=1;_(e,!1,(function(e){var l=o++,a=!1;n.push(void 0),u++,t.resolve(e).then((function(e){a||(a=!0,n[l]=e,--u||r(n))}),i)})),--u||r(n)}));return o.e&&i(o.v),n.promise},race:function(e){var t=this,n=P(t),r=n.reject,i=C((function(){_(e,!1,(function(e){t.resolve(e).then(n.resolve,r)}))}));return i.e&&r(i.v),n.promise}})},function(e,t,n){"use strict";var r=n(142),i=n(51);n(75)("WeakSet",(function(e){return function(){return e(this,0<arguments.length?arguments[0]:void 0)}}),{add:function(e){return r.def(i(this,"WeakSet"),e,!0)}},r,!1,!0)},function(e,t,n){"use strict";var r=n(0),i=n(76),o=n(108),u=n(1),l=n(44),a=n(7),s=n(4),c=n(2).ArrayBuffer,f=n(64),d=o.ArrayBuffer,h=o.DataView,p=i.ABV&&c.isView,v=d.prototype.slice,_=i.VIEW;o="ArrayBuffer";r(r.G+r.W+r.F*(c!==d),{ArrayBuffer:d}),r(r.S+r.F*!i.CONSTR,o,{isView:function(e){return p&&p(e)||s(e)&&_ in e}}),r(r.P+r.U+r.F*n(3)((function(){return!new d(2).slice(1,void 0).byteLength})),o,{slice:function(e,t){if(void 0!==v&&void 0===t)return v.call(u(this),e);for(var n=u(this).byteLength,r=l(e,n),i=l(void 0===t?n:t,n),o=(n=new(f(this,d))(a(i-r)),new h(this)),s=new h(n),c=0;r<i;)s.setUint8(c++,o.getUint8(r++));return n}}),n(47)(o)},function(e,t,n){var r=n(0);r(r.G+r.W+r.F*!n(76).ABV,{DataView:n(108).DataView})},function(e,t,n){n(35)("Int8",1,(function(e){return function(t,n,r){return e(this,t,n,r)}}))},function(e,t,n){n(35)("Uint8",1,(function(e){return function(t,n,r){return e(this,t,n,r)}}))},function(e,t,n){n(35)("Uint8",1,(function(e){return function(t,n,r){return e(this,t,n,r)}}),!0)},function(e,t,n){n(35)("Int16",2,(function(e){return function(t,n,r){return e(this,t,n,r)}}))},function(e,t,n){n(35)("Uint16",2,(function(e){return function(t,n,r){return e(this,t,n,r)}}))},function(e,t,n){n(35)("Int32",4,(function(e){return function(t,n,r){return e(this,t,n,r)}}))},function(e,t,n){n(35)("Uint32",4,(function(e){return function(t,n,r){return e(this,t,n,r)}}))},function(e,t,n){n(35)("Float32",4,(function(e){return function(t,n,r){return e(this,t,n,r)}}))},function(e,t,n){n(35)("Float64",8,(function(e){return function(t,n,r){return e(this,t,n,r)}}))},function(e,t,n){var r=n(0),i=n(15),o=n(1),u=(n(2).Reflect||{}).apply,l=Function.apply;r(r.S+r.F*!n(3)((function(){u((function(){}))})),"Reflect",{apply:function(e,t,n){return e=i(e),n=o(n),u?u(e,t,n):l.call(e,t,n)}})},function(e,t,n){var r=n(0),i=n(45),o=n(15),u=n(1),l=n(4),a=n(3),s=n(122),c=(n(2).Reflect||{}).construct,f=a((function(){function e(){}return!(c((function(){}),[],e)instanceof e)})),d=!a((function(){c((function(){}))}));r(r.S+r.F*(f||d),"Reflect",{construct:function(e,t){o(e),u(t);var n=arguments.length<3?e:o(arguments[2]);if(d&&!f)return c(e,t,n);if(e==n){switch(t.length){case 0:return new e;case 1:return new e(t[0]);case 2:return new e(t[0],t[1]);case 3:return new e(t[0],t[1],t[2]);case 4:return new e(t[0],t[1],t[2],t[3])}var r=[null];return r.push.apply(r,t),new(s.apply(e,r))}return r=n.prototype,n=i(l(r)?r:Object.prototype),r=Function.apply.call(e,n,t),l(r)?r:n}})},function(e,t,n){var r=n(11),i=n(0),o=n(1),u=n(29);i(i.S+i.F*n(3)((function(){Reflect.defineProperty(r.f({},1,{value:1}),1,{value:2})})),"Reflect",{defineProperty:function(e,t,n){o(e),t=u(t,!0),o(n);try{return r.f(e,t,n),!0}catch(e){return!1}}})},function(e,t,n){var r=n(0),i=n(22).f,o=n(1);r(r.S,"Reflect",{deleteProperty:function(e,t){var n=i(o(e),t);return!(n&&!n.configurable)&&delete e[t]}})},function(e,t,n){"use strict";function r(e){this._t=o(e),this._i=0;var t,n=this._k=[];for(t in e)n.push(t)}var i=n(0),o=n(1);n(94)(r,"Object",(function(){var e,t=this._k;do{if(this._i>=t.length)return{value:void 0,done:!0}}while(!((e=t[this._i++])in this._t));return{value:e,done:!1}})),i(i.S,"Reflect",{enumerate:function(e){return new r(e)}})},function(e,t,n){var r=n(22),i=n(23),o=n(20),u=n(0),l=n(4),a=n(1);u(u.S,"Reflect",{get:function e(t,n){var u,s=arguments.length<3?t:arguments[2];return a(t)===s?t[n]:(u=r.f(t,n))?o(u,"value")?u.value:void 0!==u.get?u.get.call(s):void 0:l(u=i(t))?e(u,n,s):void 0}})},function(e,t,n){var r=n(22),i=n(0),o=n(1);i(i.S,"Reflect",{getOwnPropertyDescriptor:function(e,t){return r.f(o(e),t)}})},function(e,t,n){var r=n(0),i=n(23),o=n(1);r(r.S,"Reflect",{getPrototypeOf:function(e){return i(o(e))}})},function(e,t,n){(n=n(0))(n.S,"Reflect",{has:function(e,t){return t in e}})},function(e,t,n){var r=n(0),i=n(1),o=Object.isExtensible;r(r.S,"Reflect",{isExtensible:function(e){return i(e),!o||o(e)}})},function(e,t,n){var r=n(0);r(r.S,"Reflect",{ownKeys:n(144)})},function(e,t,n){var r=n(0),i=n(1),o=Object.preventExtensions;r(r.S,"Reflect",{preventExtensions:function(e){i(e);try{return o&&o(e),!0}catch(e){return!1}}})},function(e,t,n){var r=n(11),i=n(22),o=n(23),u=n(20),l=n(0),a=n(41),s=n(1),c=n(4);l(l.S,"Reflect",{set:function e(t,n,l){var f,d=arguments.length<4?t:arguments[3],h=i.f(s(t),n);if(!h){if(c(f=o(t)))return e(f,n,l,d);h=a(0)}if(u(h,"value")){if(!1===h.writable||!c(d))return!1;if(f=i.f(d,n)){if(f.get||f.set||!1===f.writable)return!1;f.value=l,r.f(d,n,f)}else r.f(d,n,a(0,l));return!0}return void 0!==h.set&&(h.set.call(d,l),!0)}})},function(e,t,n){var r=n(0),i=n(87);i&&r(r.S,"Reflect",{setPrototypeOf:function(e,t){i.check(e,t);try{return i.set(e,t),!0}catch(e){return!1}}})},function(e,t,n){"use strict";var r=n(0),i=n(66)(!0);r(r.P,"Array",{includes:function(e){return i(this,e,1<arguments.length?arguments[1]:void 0)}}),n(39)("includes")},function(e,t,n){"use strict";var r=n(0),i=n(145),o=n(12),u=n(7),l=n(15),a=n(100);r(r.P,"Array",{flatMap:function(e){var t,n,r=o(this);return l(e),t=u(r.length),n=a(r,0),i(n,r,r,t,0,1,e,arguments[1]),n}}),n(39)("flatMap")},function(e,t,n){"use strict";var r=n(0),i=n(145),o=n(12),u=n(7),l=n(27),a=n(100);r(r.P,"Array",{flatten:function(){var e=arguments[0],t=o(this),n=u(t.length),r=a(t,0);return i(r,t,t,n,0,void 0===e?1:l(e)),r}}),n(39)("flatten")},function(e,t,n){"use strict";var r=n(0),i=n(69)(!0);n=n(3)((function(){return"𠮷"!=="𠮷".at(0)}));r(r.P+r.F*n,"String",{at:function(e){return i(this,e)}})},function(e,t,n){"use strict";var r=n(0),i=n(146);n=n(74),n=/Version\/10\.\d+(\.\d+)?( Mobile\/\w+)? Safari\//.test(n);r(r.P+r.F*n,"String",{padStart:function(e){return i(this,e,1<arguments.length?arguments[1]:void 0,!0)}})},function(e,t,n){"use strict";var r=n(0),i=n(146);n=n(74),n=/Version\/10\.\d+(\.\d+)?( Mobile\/\w+)? Safari\//.test(n);r(r.P+r.F*n,"String",{padEnd:function(e){return i(this,e,1<arguments.length?arguments[1]:void 0,!1)}})},function(e,t,n){"use strict";n(58)("trimLeft",(function(e){return function(){return e(this,1)}}),"trimStart")},function(e,t,n){"use strict";n(58)("trimRight",(function(e){return function(){return e(this,2)}}),"trimEnd")},function(e,t,n){"use strict";function r(e,t){this._r=e,this._s=t}var i=n(0),o=n(30),u=n(7),l=n(70),a=n(63),s=RegExp.prototype;n(94)(r,"RegExp String",(function(){var e=this._r.exec(this._s);return{value:e,done:null===e}})),i(i.P,"String",{matchAll:function(e){if(o(this),!l(e))throw TypeError(e+" is not a regexp!");var t=String(this),n="flags"in s?String(e.flags):a.call(e);return(n=new RegExp(e.source,~n.indexOf("g")?n:"g"+n)).lastIndex=u(e.lastIndex),new r(n,t)}})},function(e,t,n){n(83)("asyncIterator")},function(e,t,n){n(83)("observable")},function(e,t,n){var r=n(0),i=n(144),o=n(21),u=n(22),l=n(98);r(r.S,"Object",{getOwnPropertyDescriptors:function(e){for(var t,n,r=o(e),a=u.f,s=i(r),c={},f=0;s.length>f;)void 0!==(n=a(r,t=s[f++]))&&l(c,t,n);return c}})},function(e,t,n){var r=n(0),i=n(147)(!1);r(r.S,"Object",{values:function(e){return i(e)}})},function(e,t,n){var r=n(0),i=n(147)(!0);r(r.S,"Object",{entries:function(e){return i(e)}})},function(e,t,n){"use strict";var r=n(0),i=n(12),o=n(15),u=n(11);n(8)&&r(r.P+n(77),"Object",{__defineGetter__:function(e,t){u.f(i(this),e,{get:o(t),enumerable:!0,configurable:!0})}})},function(e,t,n){"use strict";var r=n(0),i=n(12),o=n(15),u=n(11);n(8)&&r(r.P+n(77),"Object",{__defineSetter__:function(e,t){u.f(i(this),e,{set:o(t),enumerable:!0,configurable:!0})}})},function(e,t,n){"use strict";var r=n(0),i=n(12),o=n(29),u=n(23),l=n(22).f;n(8)&&r(r.P+n(77),"Object",{__lookupGetter__:function(e){var t,n=i(this),r=o(e,!0);do{if(t=l(n,r))return t.get}while(n=u(n))}})},function(e,t,n){"use strict";var r=n(0),i=n(12),o=n(29),u=n(23),l=n(22).f;n(8)&&r(r.P+n(77),"Object",{__lookupSetter__:function(e){var t,n=i(this),r=o(e,!0);do{if(t=l(n,r))return t.set}while(n=u(n))}})},function(e,t,n){var r=n(0);r(r.P+r.R,"Map",{toJSON:n(148)("Map")})},function(e,t,n){var r=n(0);r(r.P+r.R,"Set",{toJSON:n(148)("Set")})},function(e,t,n){n(78)("Map")},function(e,t,n){n(78)("Set")},function(e,t,n){n(78)("WeakMap")},function(e,t,n){n(78)("WeakSet")},function(e,t,n){n(79)("Map")},function(e,t,n){n(79)("Set")},function(e,t,n){n(79)("WeakMap")},function(e,t,n){n(79)("WeakSet")},function(e,t,n){var r=n(0);r(r.G,{global:n(2)})},function(e,t,n){var r=n(0);r(r.S,"System",{global:n(2)})},function(e,t,n){var r=n(0),i=n(26);r(r.S,"Error",{isError:function(e){return"Error"===i(e)}})},function(e,t,n){(n=n(0))(n.S,"Math",{clamp:function(e,t,n){return Math.min(n,Math.max(t,e))}})},function(e,t,n){(n=n(0))(n.S,"Math",{DEG_PER_RAD:Math.PI/180})},function(e,t,n){n=n(0);var r=180/Math.PI;n(n.S,"Math",{degrees:function(e){return e*r}})},function(e,t,n){var r=n(0),i=n(150),o=n(129);r(r.S,"Math",{fscale:function(e,t,n,r,u){return o(i(e,t,n,r,u))}})},function(e,t,n){(n=n(0))(n.S,"Math",{iaddh:function(e,t,n,r){return(t>>>0)+(r>>>0)+(((e>>>=0)&(n>>>=0)|(e|n)&~(e+n>>>0))>>>31)|0}})},function(e,t,n){(n=n(0))(n.S,"Math",{isubh:function(e,t,n,r){return(t>>>0)-(r>>>0)-((~(e>>>=0)&(n>>>=0)|~(e^n)&e-n>>>0)>>>31)|0}})},function(e,t,n){(n=n(0))(n.S,"Math",{imulh:function(e,t){var n,r;e=65535&(n=+e),t=65535&(r=+t);return(n=n>>16)*(r=r>>16)+((t=(n*t>>>0)+(e*t>>>16))>>16)+((e*r>>>0)+(65535&t)>>16)}})},function(e,t,n){(n=n(0))(n.S,"Math",{RAD_PER_DEG:180/Math.PI})},function(e,t,n){n=n(0);var r=Math.PI/180;n(n.S,"Math",{radians:function(e){return e*r}})},function(e,t,n){var r=n(0);r(r.S,"Math",{scale:n(150)})},function(e,t,n){(n=n(0))(n.S,"Math",{umulh:function(e,t){var n,r;e=65535&(n=+e),t=65535&(r=+t);return(n=n>>>16)*(r=r>>>16)+((t=(n*t>>>0)+(e*t>>>16))>>>16)+((e*r>>>0)+(65535&t)>>>16)}})},function(e,t,n){(n=n(0))(n.S,"Math",{signbit:function(e){return(e=+e)!=e?e:0==e?1/e==1/0:0<e}})},function(e,t,n){"use strict";var r=n(0),i=n(24),o=n(2),u=n(64),l=n(137);r(r.P+r.R,"Promise",{finally:function(e){var t=u(this,i.Promise||o.Promise),n="function"==typeof e;return this.then(n?function(n){return l(t,e()).then((function(){return n}))}:e,n?function(n){return l(t,e()).then((function(){throw n}))}:e)}})},function(e,t,n){"use strict";var r=n(0),i=n(107),o=n(136);r(r.S,"Promise",{try:function(e){var t=i.f(this);return((e=o(e)).e?t.reject:t.resolve)(e.v),t.promise}})},function(e,t,n){var r=n(36),i=n(1),o=r.key,u=r.set;r.exp({defineMetadata:function(e,t,n,r){u(e,t,i(n),o(r))}})},function(e,t,n){var r=n(36),i=n(1),o=r.key,u=r.map,l=r.store;r.exp({deleteMetadata:function(e,t){var n=arguments.length<3?void 0:o(arguments[2]),r=u(i(t),n,!1);return!(void 0===r||!r.delete(e))&&(!!r.size||((r=l.get(t)).delete(n),!!r.size||l.delete(t)))}})},function(e,t,n){function r(e,t,n){return l(e,t,n)?a(e,t,n):null!==(t=u(t))?r(e,t,n):void 0}var i=n(36),o=n(1),u=n(23),l=i.has,a=i.get,s=i.key;i.exp({getMetadata:function(e,t){return r(e,o(t),arguments.length<3?void 0:s(arguments[2]))}})},function(e,t,n){function r(e,t){var n=s(e,t);return null!==(e=a(e))&&(t=r(e,t)).length?n.length?o(new i(n.concat(t))):t:n}var i=n(140),o=n(149),u=n(36),l=n(1),a=n(23),s=u.keys,c=u.key;u.exp({getMetadataKeys:function(e){return r(l(e),arguments.length<2?void 0:c(arguments[1]))}})},function(e,t,n){var r=n(36),i=n(1),o=r.get,u=r.key;r.exp({getOwnMetadata:function(e,t){return o(e,i(t),arguments.length<3?void 0:u(arguments[2]))}})},function(e,t,n){var r=n(36),i=n(1),o=r.keys,u=r.key;r.exp({getOwnMetadataKeys:function(e){return o(i(e),arguments.length<2?void 0:u(arguments[1]))}})},function(e,t,n){function r(e,t,n){return!!l(e,t,n)||null!==(t=u(t))&&r(e,t,n)}var i=n(36),o=n(1),u=n(23),l=i.has,a=i.key;i.exp({hasMetadata:function(e,t){return r(e,o(t),arguments.length<3?void 0:a(arguments[2]))}})},function(e,t,n){var r=n(36),i=n(1),o=r.has,u=r.key;r.exp({hasOwnMetadata:function(e,t){return o(e,i(t),arguments.length<3?void 0:u(arguments[2]))}})},function(e,t,n){var r=n(36),i=n(1),o=n(15),u=r.key,l=r.set;r.exp({metadata:function(e,t){return function(n,r){l(e,t,(void 0!==r?i:o)(n),u(r))}}})},function(e,t,n){var r=n(0),i=n(106)(),o=n(2).process,u="process"==n(26)(o);r(r.G,{asap:function(e){var t=u&&o.domain;i(t?t.bind(e):e)}})},function(e,t,n){"use strict";function r(e){return null==e?void 0:h(e)}function i(e){var t=e._c;t&&(e._c=void 0,t())}function o(e){return void 0===e._o}function u(e){o(e)||(e._o=void 0,i(e))}function l(e,t){p(e),this._c=void 0,this._o=e,e=new b(this);try{var n=t(e),r=n;null!=n&&("function"==typeof n.unsubscribe?n=function(){r.unsubscribe()}:h(n),this._c=n)}catch(t){return void e.error(t)}o(this)&&i(this)}var a=n(0),s=n(2),c=n(24),f=n(106)(),d=n(6)("observable"),h=n(15),p=n(1),v=n(48),_=n(50),g=n(17),m=n(49),y=m.RETURN;l.prototype=_({},{unsubscribe:function(){u(this)}});var b=function(e){this._s=e};b.prototype=_({},{next:function(e){var t=this._s;if(!o(t)){var n=t._o;try{var i=r(n.next);if(i)return i.call(n,e)}catch(e){try{u(t)}finally{throw e}}}},error:function(e){var t=this._s;if(o(t))throw e;var n=t._o;t._o=void 0;try{var u=r(n.error);if(!u)throw e;e=u.call(n,e)}catch(e){try{i(t)}finally{throw e}}return i(t),e},complete:function(e){var t=this._s;if(!o(t)){var n=t._o;t._o=void 0;try{var u=r(n.complete);e=u?u.call(n,e):void 0}catch(e){try{i(t)}finally{throw e}}return i(t),e}}});var C=function(e){v(this,C,"Observable","_f")._f=h(e)};_(C.prototype,{subscribe:function(e){return new l(e,this._f)},forEach:function(e){var t=this;return new(c.Promise||s.Promise)((function(n,r){h(e);var i=t.subscribe({next:function(t){try{return e(t)}catch(t){r(t),i.unsubscribe()}},error:r,complete:n})}))}}),_(C,{from:function(e){var t="function"==typeof this?this:C,n=r(p(e)[d]);if(n){var i=p(n.call(e));return i.constructor===t?i:new t((function(e){return i.subscribe(e)}))}return new t((function(t){var n=!1;return f((function(){if(!n){try{if(m(e,!1,(function(e){if(t.next(e),n)return y}))===y)return}catch(e){if(n)throw e;return void t.error(e)}t.complete()}})),function(){n=!0}}))},of:function(){for(var e=0,t=arguments.length,n=new Array(t);e<t;)n[e]=arguments[e++];return new("function"==typeof this?this:C)((function(e){var t=!1;return f((function(){if(!t){for(var r=0;r<n.length;++r)if(e.next(n[r]),t)return;e.complete()}})),function(){t=!0}}))}}),g(C.prototype,d,(function(){return this})),a(a.G,{Observable:C}),n(47)("Observable")},function(e,t,n){function r(e){return function(t,n){var r=2<arguments.length,i=r&&u.call(arguments,2);return e(r?function(){("function"==typeof t?t:Function(t)).apply(this,i)}:t,n)}}var i=n(2),o=n(0),u=(n=n(74),[].slice);n=/MSIE .\./.test(n);o(o.G+o.B+o.F*n,{setTimeout:r(i.setTimeout),setInterval:r(i.setInterval)})},function(e,t,n){var r=n(0);n=n(105);r(r.G+r.B,{setImmediate:n.set,clearImmediate:n.clear})},function(e,t,n){for(var r=n(102),i=n(43),o=n(18),u=n(2),l=n(17),a=n(59),s=(n=n(6))("iterator"),c=n("toStringTag"),f=a.Array,d={CSSRuleList:!0,CSSStyleDeclaration:!1,CSSValueList:!1,ClientRectList:!1,DOMRectList:!1,DOMStringList:!1,DOMTokenList:!0,DataTransferItemList:!1,FileList:!1,HTMLAllCollection:!1,HTMLCollection:!1,HTMLFormElement:!1,HTMLSelectElement:!1,MediaList:!0,MimeTypeArray:!1,NamedNodeMap:!1,NodeList:!0,PaintRequestList:!1,Plugin:!1,PluginArray:!1,SVGLengthList:!1,SVGNumberList:!1,SVGPathSegList:!1,SVGPointList:!1,SVGStringList:!1,SVGTransformList:!1,SourceBufferList:!1,StyleSheetList:!0,TextTrackCueList:!1,TextTrackList:!1,TouchList:!1},h=i(d),p=0;p<h.length;p++){var v,_=h[p],g=d[_],m=u[_],y=m&&m.prototype;if(y&&(y[s]||l(y,s,f),y[c]||l(y,c,_),a[_]=f,g))for(v in r)y[v]||o(y,v,r[v],!0)}},function(e,t,n){(function(t){!function(t){"use strict";var n,r,i,o,u,l,a,s=Object.prototype,c=s.hasOwnProperty,f="function"==typeof Symbol?Symbol:{},d=f.iterator||"@@iterator",h=f.asyncIterator||"@@asyncIterator",p=f.toStringTag||"@@toStringTag",v="object"==typeof e,_=t.regeneratorRuntime;function g(e,t,a,s){var c,f,d,h;t=t&&t.prototype instanceof y?t:y,t=Object.create(t.prototype),s=new w(s||[]);return t._invoke=(c=e,f=a,d=s,h=r,function(e,t){if(h===o)throw new Error("Generator is already running");if(h===u){if("throw"===e)throw t;return I()}for(d.method=e,d.arg=t;;){var a=d.delegate;if(a){var s=function e(t,r){var i;if((i=t.iterator[r.method])===n){if(r.delegate=null,"throw"===r.method){if(t.iterator.return&&(r.method="return",r.arg=n,e(t,r),"throw"===r.method))return l;r.method="throw",r.arg=new TypeError("The iterator does not provide a 'throw' method")}return l}return"throw"===(i=m(i,t.iterator,r.arg)).type?(r.method="throw",r.arg=i.arg,r.delegate=null,l):(i=i.arg)?i.done?(r[t.resultName]=i.value,r.next=t.nextLoc,"return"!==r.method&&(r.method="next",r.arg=n),r.delegate=null,l):i:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,l)}(a,d);if(s){if(s===l)continue;return s}}if("next"===d.method)d.sent=d._sent=d.arg;else if("throw"===d.method){if(h===r)throw h=u,d.arg;d.dispatchException(d.arg)}else"return"===d.method&&d.abrupt("return",d.arg);if(h=o,"normal"===(s=m(c,f,d)).type){if(h=d.done?u:i,s.arg!==l)return{value:s.arg,done:d.done}}else"throw"===s.type&&(h=u,d.method="throw",d.arg=s.arg)}}),t}function m(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}function y(){}function b(){}function C(){}function S(e){["next","throw","return"].forEach((function(t){e[t]=function(e){return this._invoke(t,e)}}))}function T(e){function n(t,r,i,o){if("throw"!==(t=m(e[t],e,r)).type){var u=t.arg;return(r=u.value)&&"object"==typeof r&&c.call(r,"__await")?Promise.resolve(r.__await).then((function(e){n("next",e,i,o)}),(function(e){n("throw",e,i,o)})):Promise.resolve(r).then((function(e){u.value=e,i(u)}),o)}o(t.arg)}var r;"object"==typeof t.process&&t.process.domain&&(n=t.process.domain.bind(n)),this._invoke=function(e,t){function i(){return new Promise((function(r,i){n(e,t,r,i)}))}return r=r?r.then(i,i):i()}}function E(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function A(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function w(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(E,this),this.reset(!0)}function R(e){if(e){if(t=e[d])return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var t,r=-1;return(t=function t(){for(;++r<e.length;)if(c.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=n,t.done=!0,t}).next=t}}return{next:I}}function I(){return{value:n,done:!0}}_?v&&(e.exports=_):((_=t.regeneratorRuntime=v?e.exports:{}).wrap=g,r="suspendedStart",i="suspendedYield",o="executing",u="completed",l={},(f={})[d]=function(){return this},(v=(v=Object.getPrototypeOf)&&v(v(R([]))))&&v!==s&&c.call(v,d)&&(f=v),a=C.prototype=y.prototype=Object.create(f),(b.prototype=a.constructor=C).constructor=b,C[p]=b.displayName="GeneratorFunction",_.isGeneratorFunction=function(e){return!!(e="function"==typeof e&&e.constructor)&&(e===b||"GeneratorFunction"===(e.displayName||e.name))},_.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,C):(e.__proto__=C,p in e||(e[p]="GeneratorFunction")),e.prototype=Object.create(a),e},_.awrap=function(e){return{__await:e}},S(T.prototype),T.prototype[h]=function(){return this},_.AsyncIterator=T,_.async=function(e,t,n,r){var i=new T(g(e,t,n,r));return _.isGeneratorFunction(t)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},S(a),a[p]="Generator",a[d]=function(){return this},a.toString=function(){return"[object Generator]"},_.keys=function(e){var t,n=[];for(t in e)n.push(t);return n.reverse(),function t(){for(;n.length;){var r=n.pop();if(r in e)return t.value=r,t.done=!1,t}return t.done=!0,t}},_.values=R,w.prototype={constructor:w,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=n,this.done=!1,this.delegate=null,this.method="next",this.arg=n,this.tryEntries.forEach(A),!e)for(var t in this)"t"===t.charAt(0)&&c.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=n)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function r(r,i){return u.type="throw",u.arg=e,t.next=r,i&&(t.method="next",t.arg=n),!!i}for(var i=this.tryEntries.length-1;0<=i;--i){var o=this.tryEntries[i],u=o.completion;if("root"===o.tryLoc)return r("end");if(o.tryLoc<=this.prev){var l=c.call(o,"catchLoc"),a=c.call(o,"finallyLoc");if(l&&a){if(this.prev<o.catchLoc)return r(o.catchLoc,!0);if(this.prev<o.finallyLoc)return r(o.finallyLoc)}else if(l){if(this.prev<o.catchLoc)return r(o.catchLoc,!0)}else{if(!a)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return r(o.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;0<=n;--n){var r=this.tryEntries[n];if(r.tryLoc<=this.prev&&c.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var i=r;break}}var o=(i=i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc?null:i)?i.completion:{};return o.type=e,o.arg=t,i?(this.method="next",this.next=i.finallyLoc,l):this.complete(o)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),l},finish:function(e){for(var t=this.tryEntries.length-1;0<=t;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),A(n),l}},catch:function(e){for(var t=this.tryEntries.length-1;0<=t;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r,i=n.completion;return"throw"===i.type&&(r=i.arg,A(n)),r}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,r){return this.delegate={iterator:R(e),resultName:t,nextLoc:r},"next"===this.method&&(this.arg=n),l}})}("object"==typeof t?t:"object"==typeof window?window:"object"==typeof self?self:this)}).call(this,n(81))},function(e,t,n){n(359),e.exports=n(24).RegExp.escape},function(e,t,n){var r=n(0),i=n(360)(/[\\^$*+?.()|[\]{}]/g,"\\$&");r(r.S,"RegExp",{escape:function(e){return i(e)}})},function(e,t){e.exports=function(e,t){var n=t===Object(t)?function(e){return t[e]}:t;return function(t){return String(t).replace(e,n)}}},function(e,t,n){e.exports=n(388)},function(e,t,n){"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function o(e,t){return(o=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function u(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=a(e);return function(e,t){if(t&&("object"===r(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return l(e)}(this,t?(n=a(this).constructor,Reflect.construct(i,arguments,n)):i.apply(this,arguments))}}function l(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function a(e){return(a=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var s=n(34).EventEmitter,c=n(13),f=n(363),d=n(155),h=n(378),p=n(65),v=n(379),_=n(16),g=n(52),m=n(53),y=n(380),b=n(40),C=n(381),S=n(382),T=new(n=n(14))("JsSIP:UA").debug,E=new n("JsSIP:UA").error,A={STATUS_INIT:0,STATUS_READY:1,STATUS_USER_CLOSED:2,STATUS_NOT_READY:3,CONFIGURATION_ERROR:1,NETWORK_ERROR:2};e.exports=function(){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&o(e,t)}(a,s);var e,t,n,r=u(a);function a(e){var t;if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),T("new() [configuration:%o]",e),(t=r.call(this))._cache={credentials:{}},t._configuration=Object.assign({},S.settings),t._dynConfiguration={},t._dialogs={},t._applicants={},t._sessions={},t._transport=null,t._contact=null,t._status=A.STATUS_INIT,t._error=null,t._transactions={nist:{},nict:{},ist:{},ict:{}},t._data={},t._closeTimer=null,void 0===e)throw new TypeError("Not enough arguments");try{t._loadConfig(e)}catch(e){throw t._status=A.STATUS_NOT_READY,t._error=A.CONFIGURATION_ERROR,e}return t._registrator=new f(l(t)),t}return e=a,n=[{key:"C",get:function(){return A}}],(t=[{key:"C",get:function(){return A}},{key:"status",get:function(){return this._status}},{key:"contact",get:function(){return this._contact}},{key:"configuration",get:function(){return this._configuration}},{key:"transport",get:function(){return this._transport}},{key:"start",value:function(){T("start()"),this._status===A.STATUS_INIT?this._transport.connect():this._status===A.STATUS_USER_CLOSED?(T("restarting UA"),null!==this._closeTimer&&(clearTimeout(this._closeTimer),this._closeTimer=null,this._transport.disconnect()),this._status=A.STATUS_INIT,this._transport.connect()):this._status===A.STATUS_READY?T("UA is in READY status, not restarted"):T("ERROR: connection is down, Auto-Recovery system is trying to reconnect"),this._dynConfiguration.register=this._configuration.register}},{key:"register",value:function(){T("register()"),this._dynConfiguration.register=!0,this._registrator.register()}},{key:"unregister",value:function(e){T("unregister()"),this._dynConfiguration.register=!1,this._registrator.unregister(e)}},{key:"registrator",value:function(){return this._registrator}},{key:"isRegistered",value:function(){return this._registrator.registered}},{key:"isConnected",value:function(){return this._transport.isConnected()}},{key:"call",value:function(e,t){T("call()");var n=new d(this);return n.connect(e,t),n}},{key:"sendMessage",value:function(e,t,n){T("sendMessage()");var r=new h(this);return r.send(e,t,n),r}},{key:"terminateSessions",value:function(e){for(var t in T("terminateSessions()"),this._sessions)this._sessions[t].isEnded()||this._sessions[t].terminate(e)}},{key:"stop",value:function(){var e=this;if(T("stop()"),this._dynConfiguration={},this._status!==A.STATUS_USER_CLOSED){this._registrator.close();var t,n,r=Object.keys(this._sessions).length;for(t in this._sessions)if(Object.prototype.hasOwnProperty.call(this._sessions,t)){T("closing session ".concat(t));try{this._sessions[t].terminate()}catch(e){}}for(n in this._applicants)if(Object.prototype.hasOwnProperty.call(this._applicants,n))try{this._applicants[n].close()}catch(e){}this._status=A.STATUS_USER_CLOSED,0===Object.keys(this._transactions.nict).length+Object.keys(this._transactions.nist).length+Object.keys(this._transactions.ict).length+Object.keys(this._transactions.ist).length&&0===r?this._transport.disconnect():this._closeTimer=setTimeout((function(){e._closeTimer=null,e._transport.disconnect()}),2e3)}else T("UA already closed")}},{key:"normalizeTarget",value:function(e){return _.normalizeTarget(e,this._configuration.hostport_params)}},{key:"get",value:function(e){switch(e){case"authorization_user":return this._configuration.authorization_user;case"realm":return this._configuration.realm;case"ha1":return this._configuration.ha1;case"authorization_jwt":return this._configuration.authorization_jwt;default:return void E('get() | cannot get "%s" parameter in runtime',e)}}},{key:"set",value:function(e,t){switch(e){case"authorization_user":this._configuration.authorization_user=String(t);break;case"password":this._configuration.password=String(t);break;case"realm":this._configuration.realm=String(t);break;case"ha1":this._configuration.ha1=String(t),this._configuration.password=null;break;case"authorization_jwt":this._configuration.authorization_jwt=String(t);break;case"display_name":this._configuration.display_name=t;break;default:return E('set() | cannot set "%s" parameter in runtime',e),!1}return!0}},{key:"newTransaction",value:function(e){this._transactions[e.type][e.id]=e,this.emit("newTransaction",{transaction:e})}},{key:"destroyTransaction",value:function(e){delete this._transactions[e.type][e.id],this.emit("transactionDestroyed",{transaction:e})}},{key:"newDialog",value:function(e){this._dialogs[e.id]=e}},{key:"destroyDialog",value:function(e){delete this._dialogs[e.id]}},{key:"newMessage",value:function(e,t){this._applicants[e]=e,this.emit("newMessage",t)}},{key:"destroyMessage",value:function(e){delete this._applicants[e]}},{key:"newRTCSession",value:function(e,t){this._sessions[e.id]=e,this.emit("newRTCSession",t)}},{key:"destroyRTCSession",value:function(e){delete this._sessions[e.id]}},{key:"registered",value:function(e){this.emit("registered",e)}},{key:"unregistered",value:function(e){this.emit("unregistered",e)}},{key:"registrationFailed",value:function(e){this.emit("registrationFailed",e)}},{key:"receiveRequest",value:function(e){var t,n,r,i=e.method;if(e.ruri.user!==this._configuration.uri.user&&e.ruri.user!==this._contact.uri.user)return T("Request-URI does not point to us"),void(e.method!==c.ACK&&e.reply_sl(404));if(e.ruri.scheme!==c.SIPS){if(!p.checkTransaction(this,e)){if(i===c.INVITE?new p.InviteServerTransaction(this,this._transport,e):i!==c.ACK&&i!==c.CANCEL&&new p.NonInviteServerTransaction(this,this._transport,e),i===c.OPTIONS)e.reply(200);else if(i===c.MESSAGE){if(0===this.listeners("newMessage").length)return void e.reply(405);new h(this).init_incoming(e)}else if(i===c.INVITE&&!e.to_tag&&0===this.listeners("newRTCSession").length)return void e.reply(405);if(e.to_tag)(r=this._findDialog(e.call_id,e.from_tag,e.to_tag))?r.receiveRequest(e):i===c.NOTIFY?(t=this._findSession(e))?t.receiveRequest(e):(T("received NOTIFY request for a non existent subscription"),e.reply(481,"Subscription does not exist")):i!==c.ACK&&e.reply(481);else switch(i){case c.INVITE:window.RTCPeerConnection?e.hasHeader("replaces")?(n=e.replaces,(r=this._findDialog(n.call_id,n.from_tag,n.to_tag))?(t=r.owner).isEnded()?e.reply(603):t.receiveRequest(e):e.reply(481)):(t=new d(this)).init_incoming(e):(E("INVITE received but WebRTC is not supported"),e.reply(488));break;case c.BYE:e.reply(481);break;case c.CANCEL:(t=this._findSession(e))?t.receiveRequest(e):T("received CANCEL request for a non existent session");break;case c.ACK:break;case c.NOTIFY:this.emit("sipEvent",{event:e.event,request:e}),e.reply(200);break;default:e.reply(405)}}}else e.reply_sl(416)}},{key:"_findSession",value:function(e){var t=e.call_id,n=e.from_tag;e=e.to_tag,n=this._sessions[t+n],e=this._sessions[t+e];return n||e||null}},{key:"_findDialog",value:function(e,t,n){var r=this._dialogs[e+t+n];return(r=r||this._dialogs[e+n+t])||null}},{key:"_loadConfig",value:function(e){try{S.load(this._configuration,e)}catch(e){throw e}0===this._configuration.display_name&&(this._configuration.display_name="0"),this._configuration.instance_id||(this._configuration.instance_id=_.newUUID()),this._configuration.jssip_id=_.createRandomToken(5),(e=this._configuration.uri.clone()).user=null,this._configuration.hostport_params=e.toString().replace(/^sip:/i,"");try{this._transport=new v(this._configuration.sockets,{max_interval:this._configuration.connection_recovery_max_interval,min_interval:this._configuration.connection_recovery_min_interval}),this._transport.onconnecting=function(e){this.emit("connecting",e)}.bind(this),this._transport.onconnect=function(e){this._status!==A.STATUS_USER_CLOSED&&(this._status=A.STATUS_READY,this._error=null,this.emit("connected",e),this._dynConfiguration.register&&this._registrator.register())}.bind(this),this._transport.ondisconnect=function(e){for(var t=0,n=["nict","ict","nist","ist"];t<n.length;t++){var r,i=n[t];for(r in this._transactions[i])Object.prototype.hasOwnProperty.call(this._transactions[i],r)&&this._transactions[i][r].onTransportError()}this.emit("disconnected",e),this._registrator.onTransportClosed(),this._status!==A.STATUS_USER_CLOSED&&(this._status=A.STATUS_NOT_READY,this._error=A.NETWORK_ERROR)}.bind(this),this._transport.ondata=function(e){var t,n=e.transport,r=e.message;if((r=y.parseMessage(r,this))&&!(this._status===A.STATUS_USER_CLOSED&&r instanceof b.IncomingRequest)&&C(r,this,n))if(r instanceof b.IncomingRequest)r.transport=n,this.receiveRequest(r);else if(r instanceof b.IncomingResponse)switch(r.method){case c.INVITE:(t=this._transactions.ict[r.via_branch])&&t.receiveResponse(r);break;case c.ACK:break;default:(t=this._transactions.nict[r.via_branch])&&t.receiveResponse(r)}}.bind(this)}catch(e){throw E(e),new g.ConfigurationError("sockets",this._configuration.sockets)}delete this._configuration.sockets,this._configuration.authorization_user||(this._configuration.authorization_user=this._configuration.uri.user),this._configuration.registrar_server||((e=this._configuration.uri.clone()).user=null,e.clearParams(),e.clearHeaders(),this._configuration.registrar_server=e),this._configuration.no_answer_timeout*=1e3,this._configuration.contact_uri?this._configuration.via_host=this._configuration.contact_uri.host:this._configuration.contact_uri=new m("sip",_.createRandomToken(8),this._configuration.via_host,null,{transport:"ws"}),this._contact={pub_gruu:null,temp_gruu:null,uri:this._configuration.contact_uri,toString:function(){var e=(n=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{}).anonymous||null,t=n.outbound||null,n="<";return n+=e?this.temp_gruu||"sip:anonymous@anonymous.invalid;transport=ws":this.pub_gruu||this.uri.toString(),!t||(e?this.temp_gruu:this.pub_gruu)||(n+=";ob"),n+">"}};var t,n,r=["authorization_user","password","realm","ha1","authorization_jwt","display_name","register"];for(t in this._configuration)Object.prototype.hasOwnProperty.call(this._configuration,t)&&(-1!==r.indexOf(t)?Object.defineProperty(this._configuration,t,{writable:!0,configurable:!1}):Object.defineProperty(this._configuration,t,{writable:!1,configurable:!1}));for(n in T("configuration parameters after validation:"),this._configuration)if(Object.prototype.hasOwnProperty.call(S.settings,n))switch(n){case"uri":case"registrar_server":T("- ".concat(n,": ").concat(this._configuration[n]));break;case"password":case"ha1":case"authorization_jwt":T("- ".concat(n,": NOT SHOWN"));break;default:T("- ".concat(n,": ").concat(JSON.stringify(this._configuration[n])))}}}])&&i(e.prototype,t),n&&i(e,n),a}()},function(e,t,n){"use strict";function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var i=n(16),o=n(13),u=n(40),l=n(80),a=new(n(14))("JsSIP:Registrator").debug;e.exports=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._ua=t,this._transport=n,this._registrar=t.configuration.registrar_server,this._expires=t.configuration.register_expires,this._call_id=i.createRandomToken(22),this._cseq=0,this._to_uri=t.configuration.uri,this._registrationTimer=null,this._registering=!1,this._registered=!1,this._contact=this._ua.contact.toString(),this._contact+=";+sip.ice",this._extraHeaders=[],this._extraContactParams="",this._contact+=";reg-id=".concat(1),this._contact+=';+sip.instance="<urn:uuid:'.concat(this._ua.configuration.instance_id,'>"')}var t,n;return t=e,(n=[{key:"registered",get:function(){return this._registered}},{key:"setExtraHeaders",value:function(e){Array.isArray(e)||(e=[]),this._extraHeaders=e.slice()}},{key:"setExtraContactParams",value:function(e){for(var t in e instanceof Object||(e={}),this._extraContactParams="",e){var n;Object.prototype.hasOwnProperty.call(e,t)&&(n=e[t],this._extraContactParams+=";".concat(t),n&&(this._extraContactParams+="=".concat(n)))}}},{key:"register",value:function(){var e,t=this;this._registering?a("Register request in progress..."):((e=this._extraHeaders.slice()).push("Contact: ".concat(this._contact,";expires=").concat(this._expires).concat(this._extraContactParams)),e.push("Expires: ".concat(this._expires)),e=new u.OutgoingRequest(o.REGISTER,this._registrar,this._ua,{to_uri:this._to_uri,call_id:this._call_id,cseq:this._cseq+=1},e),e=new l(this._ua,e,{onRequestTimeout:function(){t._registrationFailure(null,o.causes.REQUEST_TIMEOUT)},onTransportError:function(){t._registrationFailure(null,o.causes.CONNECTION_ERROR)},onAuthenticated:function(){t._cseq+=1},onReceiveResponse:function(e){if(e.cseq===t._cseq)switch(null!==t._registrationTimer&&(clearTimeout(t._registrationTimer),t._registrationTimer=null),!0){case/^1[0-9]{2}$/.test(e.status_code):break;case/^2[0-9]{2}$/.test(e.status_code):if(t._registering=!1,!e.hasHeader("Contact")){a("no Contact header in response to REGISTER, response ignored");break}var n=e.headers.Contact.reduce((function(e,t){return e.concat(t.parsed)}),[]).find((function(e){return e.uri.user===t._ua.contact.uri.user}));if(!n){a("no Contact header pointing to us, response ignored");break}var r=(r=!(r=n.getParam("expires"))&&e.hasHeader("expires")?e.getHeader("expires"):r)||t._expires;r=64<(r=(r=Number(r))<10?10:r)?1e3*r/2+Math.floor(1e3*(r/2-32)*Math.random()):1e3*r-5e3;t._registrationTimer=setTimeout((function(){t._registrationTimer=null,0===t._ua.listeners("registrationExpiring").length?t.register():t._ua.emit("registrationExpiring")}),r),n.hasParam("temp-gruu")&&(t._ua.contact.temp_gruu=n.getParam("temp-gruu").replace(/"/g,"")),n.hasParam("pub-gruu")&&(t._ua.contact.pub_gruu=n.getParam("pub-gruu").replace(/"/g,"")),t._registered||(t._registered=!0,t._ua.registered({response:e}));break;case/^423$/.test(e.status_code):e.hasHeader("min-expires")?(t._expires=Number(e.getHeader("min-expires")),t._expires<10&&(t._expires=10),t.register()):(a("423 response received for REGISTER without Min-Expires"),t._registrationFailure(e,o.causes.SIP_FAILURE_CODE));break;default:n=i.sipErrorCause(e.status_code),t._registrationFailure(e,n)}}}),this._registering=!0,e.send())}},{key:"unregister",value:function(){var e,t=this,n=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};this._registered?(this._registered=!1,null!==this._registrationTimer&&(clearTimeout(this._registrationTimer),this._registrationTimer=null),e=this._extraHeaders.slice(),n.all?e.push("Contact: *".concat(this._extraContactParams)):e.push("Contact: ".concat(this._contact,";expires=0").concat(this._extraContactParams)),e.push("Expires: 0"),e=new u.OutgoingRequest(o.REGISTER,this._registrar,this._ua,{to_uri:this._to_uri,call_id:this._call_id,cseq:this._cseq+=1},e),new l(this._ua,e,{onRequestTimeout:function(){t._unregistered(null,o.causes.REQUEST_TIMEOUT)},onTransportError:function(){t._unregistered(null,o.causes.CONNECTION_ERROR)},onAuthenticated:function(){t._cseq+=1},onReceiveResponse:function(e){switch(!0){case/^1[0-9]{2}$/.test(e.status_code):break;case/^2[0-9]{2}$/.test(e.status_code):t._unregistered(e);break;default:var n=i.sipErrorCause(e.status_code);t._unregistered(e,n)}}}).send()):a("already unregistered")}},{key:"close",value:function(){this._registered&&this.unregister()}},{key:"onTransportClosed",value:function(){this._registering=!1,null!==this._registrationTimer&&(clearTimeout(this._registrationTimer),this._registrationTimer=null),this._registered&&(this._registered=!1,this._ua.unregistered({}))}},{key:"_registrationFailure",value:function(e,t){this._registering=!1,this._ua.registrationFailed({response:e||null,cause:t}),this._registered&&(this._registered=!1,this._ua.unregistered({response:e||null,cause:t}))}},{key:"_unregistered",value:function(e,t){this._registering=!1,this._registered=!1,this._ua.unregistered({response:e||null,cause:t||null})}}])&&r(t.prototype,n),e}()},function(e,t,n){function r(e,t,n){var r=e.name&&e.names;e.push&&!t[e.push]?t[e.push]=[]:r&&!t[e.name]&&(t[e.name]={}),r=e.push?{}:r?t[e.name]:t,function(e,t,n,r){if(r&&!n)t[r]=i(e[1]);else for(var o=0;o<n.length;o+=1)null!=e[o+1]&&(t[n[o]]=i(e[o+1]))}(n.match(e.reg),r,e.names,e.name),e.push&&t[e.push].push(r)}var i=function(e){return String(Number(e))===e?Number(e):e},o=n(151),u=RegExp.prototype.test.bind(/^([a-z])=(.*)/);function l(e,t){var n=t.split(/=(.+)/,2);return 2===n.length?e[n[0]]=i(n[1]):1===n.length&&1<t.length&&(e[n[0]]=void 0),e}t.parse=function(e){var t={},n=[],i=t;return e.split(/(\r\n|\r|\n)/).filter(u).forEach((function(e){var t=e[0],u=e.slice(2);"m"===t&&(n.push({rtp:[],fmtp:[]}),i=n[n.length-1]);for(var l=0;l<(o[t]||[]).length;l+=1){var a=o[t][l];if(a.reg.test(u))return r(a,i,u)}})),t.media=n,t},t.parseParams=function(e){return e.split(/;\s?/).reduce(l,{})},t.parseFmtpConfig=t.parseParams,t.parsePayloads=function(e){return e.toString().split(" ").map(Number)},t.parseRemoteCandidates=function(e){for(var t=[],n=e.split(" ").map(i),r=0;r<n.length;r+=3)t.push({component:n[r],ip:n[r+1],port:n[r+2]});return t},t.parseImageAttributes=function(e){return e.split(" ").map((function(e){return e.substring(1,e.length-1).split(",").reduce(l,{})}))},t.parseSimulcastStreamList=function(e){return e.split(";").map((function(e){return e.split(",").map((function(e){var t,n=!1;return"~"!==e[0]?t=i(e):(t=i(e.substring(1,e.length)),n=!0),{scid:t,paused:n}}))}))}},function(e,t,n){function r(e,t,n){var r=[e+"="+(t.format instanceof Function?t.format(t.push?n:n[t.name]):t.format)];if(t.names)for(var i=0;i<t.names.length;i+=1){var u=t.names[i];t.name?r.push(n[t.name][u]):r.push(n[t.names[i]])}else r.push(n[t.name]);return function(e){var t=1,n=arguments,r=n.length;return e.replace(o,(function(e){if(r<=t)return e;var i=n[t];switch(t+=1,e){case"%%":return"%";case"%s":return String(i);case"%d":return Number(i);case"%v":return""}}))}.apply(null,r)}var i=n(151),o=/%[sdv%]/g,u=["v","o","s","i","u","e","p","c","b","t","r","z","a"],l=["i","c","b","a"];e.exports=function(e,t){t=t||{},null==e.version&&(e.version=0),null==e.name&&(e.name=" "),e.media.forEach((function(e){null==e.payloads&&(e.payloads="")}));var n=t.outerOrder||u,o=t.innerOrder||l,a=[];return n.forEach((function(t){i[t].forEach((function(n){n.name in e&&null!=e[n.name]?a.push(r(t,n,e)):n.push in e&&null!=e[n.push]&&e[n.push].forEach((function(e){a.push(r(t,n,e))}))}))})),e.media.forEach((function(e){a.push(r("m",i.m[0],e)),o.forEach((function(t){i[t].forEach((function(n){n.name in e&&null!=e[n.name]?a.push(r(t,n,e)):n.push in e&&null!=e[n.push]&&e[n.push].forEach((function(e){a.push(r(t,n,e))}))}))}))})),a.join("\r\n")+"\r\n"}},function(e,t,n){e.exports=function(e){function t(e){let n,i,o,u=null;function l(...e){if(l.enabled){const o=l;var r=Number(new Date),i=r-(n||r);o.diff=i,o.prev=n,o.curr=r,n=r,e[0]=t.coerce(e[0]),"string"!=typeof e[0]&&e.unshift("%O");let u=0;e[0]=e[0].replace(/%([a-zA-Z%])/g,(n,r)=>{if("%%"===n)return"%";u++;const i=t.formatters[r];return"function"==typeof i&&(r=e[u],n=i.call(o,r),e.splice(u,1),u--),n}),t.formatArgs.call(o,e);(o.log||t.log).apply(o,e)}}return l.namespace=e,l.useColors=t.useColors(),l.color=t.selectColor(e),l.extend=r,l.destroy=t.destroy,Object.defineProperty(l,"enabled",{enumerable:!0,configurable:!1,get:()=>null!==u?u:(i!==t.namespaces&&(i=t.namespaces,o=t.enabled(e)),o),set:e=>{u=e}}),"function"==typeof t.init&&t.init(l),l}function r(e,n){const r=t(this.namespace+(void 0===n?":":n)+e);return r.log=this.log,r}function i(e){return e.toString().substring(2,e.toString().length-2).replace(/\.\*\?$/,"*")}return((t.debug=t).default=t).coerce=function(e){return e instanceof Error?e.stack||e.message:e},t.disable=function(){var e=[...t.names.map(i),...t.skips.map(i).map(e=>"-"+e)].join(",");return t.enable(""),e},t.enable=function(e){let n;t.save(e),t.namespaces=e,t.names=[],t.skips=[];const r=("string"==typeof e?e:"").split(/[\s,]+/),i=r.length;for(n=0;n<i;n++)r[n]&&("-"===(e=r[n].replace(/\*/g,".*?"))[0]?t.skips.push(new RegExp("^"+e.substr(1)+"$")):t.names.push(new RegExp("^"+e+"$")))},t.enabled=function(e){if("*"===e[e.length-1])return!0;let n,r;for(n=0,r=t.skips.length;n<r;n++)if(t.skips[n].test(e))return!1;for(n=0,r=t.names.length;n<r;n++)if(t.names[n].test(e))return!0;return!1},t.humanize=n(367),t.destroy=function(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")},Object.keys(e).forEach(n=>{t[n]=e[n]}),t.names=[],t.skips=[],t.formatters={},t.selectColor=function(e){let n=0;for(let t=0;t<e.length;t++)n=(n<<5)-n+e.charCodeAt(t),n|=0;return t.colors[Math.abs(n)%t.colors.length]},t.enable(t.load()),t}},function(e,t){var n=864e5;function r(e,t,n,r){return t=1.5*n<=t,Math.round(e/n)+" "+r+(t?"s":"")}e.exports=function(e,t){t=t||{};var i=typeof e;if("string"==i&&0<e.length)return function(e){if(!(100<(e=String(e)).length)&&(e=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(e))){var t=parseFloat(e[1]);switch((e[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return 315576e5*t;case"weeks":case"week":case"w":return 6048e5*t;case"days":case"day":case"d":return t*n;case"hours":case"hour":case"hrs":case"hr":case"h":return 36e5*t;case"minutes":case"minute":case"mins":case"min":case"m":return 6e4*t;case"seconds":case"second":case"secs":case"sec":case"s":return 1e3*t;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return t;default:return}}}(e);if("number"==i&&isFinite(e))return(t.long?function(e){var t=Math.abs(e);return n<=t?r(e,t,n,"day"):36e5<=t?r(e,t,36e5,"hour"):6e4<=t?r(e,t,6e4,"minute"):1e3<=t?r(e,t,1e3,"second"):e+" ms"}:function(e){var t=Math.abs(e);return n<=t?Math.round(e/n)+"d":36e5<=t?Math.round(e/36e5)+"h":6e4<=t?Math.round(e/6e4)+"m":1e3<=t?Math.round(e/1e3)+"s":e+"ms"})(e);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(e))}},function(e,t,n){(function(e){var r=Object.getOwnPropertyDescriptors||function(e){for(var t=Object.keys(e),n={},r=0;r<t.length;r++)n[t[r]]=Object.getOwnPropertyDescriptor(e,t[r]);return n},i=/%[sdj%]/g;t.format=function(e){if(!g(e)){for(var t=[],n=0;n<arguments.length;n++)t.push(l(arguments[n]));return t.join(" ")}n=1;for(var r=arguments,o=r.length,u=String(e).replace(i,(function(e){if("%%"===e)return"%";if(o<=n)return e;switch(e){case"%s":return String(r[n++]);case"%d":return Number(r[n++]);case"%j":try{return JSON.stringify(r[n++])}catch(e){return"[Circular]"}default:return e}})),a=r[n];n<o;a=r[++n])v(a)||!b(a)?u+=" "+a:u+=" "+l(a);return u},t.deprecate=function(n,r){if(void 0!==e&&!0===e.noDeprecation)return n;if(void 0===e)return function(){return t.deprecate(n,r).apply(this,arguments)};var i=!1;return function(){if(!i){if(e.throwDeprecation)throw new Error(r);e.traceDeprecation?console.trace(r):console.error(r),i=!0}return n.apply(this,arguments)}};var o,u={};function l(e,n){var r={seen:[],stylize:s};return 3<=arguments.length&&(r.depth=arguments[2]),4<=arguments.length&&(r.colors=arguments[3]),p(n)?r.showHidden=n:n&&t._extend(r,n),m(r.showHidden)&&(r.showHidden=!1),m(r.depth)&&(r.depth=2),m(r.colors)&&(r.colors=!1),m(r.customInspect)&&(r.customInspect=!0),r.colors&&(r.stylize=a),c(r,e,r.depth)}function a(e,t){return(t=l.styles[t])?"["+l.colors[t][0]+"m"+e+"["+l.colors[t][1]+"m":e}function s(e,t){return e}function c(e,n,r){if(e.customInspect&&n&&T(n.inspect)&&n.inspect!==t.inspect&&(!n.constructor||n.constructor.prototype!==n))return g(o=n.inspect(r,e))?o:c(e,o,r);if(a=function(e,t){if(m(t))return e.stylize("undefined","undefined");if(g(t)){var n="'"+JSON.stringify(t).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return e.stylize(n,"string")}return _(t)?e.stylize(""+t,"number"):p(t)?e.stylize(""+t,"boolean"):v(t)?e.stylize("null","null"):void 0}(e,n))return a;var i,o=Object.keys(n),u=(i={},o.forEach((function(e,t){i[e]=!0})),i);if(e.showHidden&&(o=Object.getOwnPropertyNames(n)),S(n)&&(0<=o.indexOf("message")||0<=o.indexOf("description")))return f(n);if(0===o.length){if(T(n)){var l=n.name?": "+n.name:"";return e.stylize("[Function"+l+"]","special")}if(y(n))return e.stylize(RegExp.prototype.toString.call(n),"regexp");if(C(n))return e.stylize(Date.prototype.toString.call(n),"date");if(S(n))return f(n)}var a="",s=!1;l=["{","}"];return h(n)&&(s=!0,l=["[","]"]),T(n)&&(a=" [Function"+(n.name?": "+n.name:"")+"]"),y(n)&&(a=" "+RegExp.prototype.toString.call(n)),C(n)&&(a=" "+Date.prototype.toUTCString.call(n)),S(n)&&(a=" "+f(n)),0!==o.length||s&&0!=n.length?r<0?y(n)?e.stylize(RegExp.prototype.toString.call(n),"regexp"):e.stylize("[Object]","special"):(e.seen.push(n),o=s?function(e,t,n,r,i){for(var o=[],u=0,l=t.length;u<l;++u)R(t,String(u))?o.push(d(e,t,n,r,String(u),!0)):o.push("");return i.forEach((function(i){i.match(/^\d+$/)||o.push(d(e,t,n,r,i,!0))})),o}(e,n,r,u,o):o.map((function(t){return d(e,n,r,u,t,s)})),e.seen.pop(),function(e,t,n){return 60<e.reduce((function(e,t){return t.indexOf("\n"),e+t.replace(/\u001b\[\d\d?m/g,"").length+1}),0)?n[0]+(""===t?"":t+"\n ")+" "+e.join(",\n  ")+" "+n[1]:n[0]+t+" "+e.join(", ")+" "+n[1]}(o,a,l)):l[0]+a+l[1]}function f(e){return"["+Error.prototype.toString.call(e)+"]"}function d(e,t,n,r,i,o){var u,l;if((t=Object.getOwnPropertyDescriptor(t,i)||{value:t[i]}).get?l=t.set?e.stylize("[Getter/Setter]","special"):e.stylize("[Getter]","special"):t.set&&(l=e.stylize("[Setter]","special")),R(r,i)||(u="["+i+"]"),l||(e.seen.indexOf(t.value)<0?-1<(l=v(n)?c(e,t.value,null):c(e,t.value,n-1)).indexOf("\n")&&(l=o?l.split("\n").map((function(e){return"  "+e})).join("\n").substr(2):"\n"+l.split("\n").map((function(e){return"   "+e})).join("\n")):l=e.stylize("[Circular]","special")),m(u)){if(o&&i.match(/^\d+$/))return l;u=(u=JSON.stringify(""+i)).match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(u=u.substr(1,u.length-2),e.stylize(u,"name")):(u=u.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),e.stylize(u,"string"))}return u+": "+l}function h(e){return Array.isArray(e)}function p(e){return"boolean"==typeof e}function v(e){return null===e}function _(e){return"number"==typeof e}function g(e){return"string"==typeof e}function m(e){return void 0===e}function y(e){return b(e)&&"[object RegExp]"===E(e)}function b(e){return"object"==typeof e&&null!==e}function C(e){return b(e)&&"[object Date]"===E(e)}function S(e){return b(e)&&("[object Error]"===E(e)||e instanceof Error)}function T(e){return"function"==typeof e}function E(e){return Object.prototype.toString.call(e)}function A(e){return e<10?"0"+e.toString(10):e.toString(10)}t.debuglog=function(n){var r;return m(o)&&(o=e.env.NODE_DEBUG||""),n=n.toUpperCase(),u[n]||(new RegExp("\\b"+n+"\\b","i").test(o)?(r=e.pid,u[n]=function(){var e=t.format.apply(t,arguments);console.error("%s %d: %s",n,r,e)}):u[n]=function(){}),u[n]},(t.inspect=l).colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},l.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"},t.isArray=h,t.isBoolean=p,t.isNull=v,t.isNullOrUndefined=function(e){return null==e},t.isNumber=_,t.isString=g,t.isSymbol=function(e){return"symbol"==typeof e},t.isUndefined=m,t.isRegExp=y,t.isObject=b,t.isDate=C,t.isError=S,t.isFunction=T,t.isPrimitive=function(e){return null===e||"boolean"==typeof e||"number"==typeof e||"string"==typeof e||"symbol"==typeof e||void 0===e},t.isBuffer=n(369);var w=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function R(e,t){return Object.prototype.hasOwnProperty.call(e,t)}t.log=function(){var e,n;console.log("%s - %s",(n=[A((e=new Date).getHours()),A(e.getMinutes()),A(e.getSeconds())].join(":"),[e.getDate(),w[e.getMonth()],n].join(" ")),t.format.apply(t,arguments))},t.inherits=n(370),t._extend=function(e,t){if(!t||!b(t))return e;for(var n=Object.keys(t),r=n.length;r--;)e[n[r]]=t[n[r]];return e};var I="undefined"!=typeof Symbol?Symbol("util.promisify.custom"):void 0;function O(e,t){var n;return e||((n=new Error("Promise was rejected with a falsy value")).reason=e,e=n),t(e)}t.promisify=function(e){if("function"!=typeof e)throw new TypeError('The "original" argument must be of type Function');if(I&&e[I]){var t;if("function"!=typeof(t=e[I]))throw new TypeError('The "util.promisify.custom" argument must be of type Function');return Object.defineProperty(t,I,{value:t,enumerable:!1,writable:!1,configurable:!0}),t}function t(){for(var t,n,r=new Promise((function(e,r){t=e,n=r})),i=[],o=0;o<arguments.length;o++)i.push(arguments[o]);i.push((function(e,r){e?n(e):t(r)}));try{e.apply(this,i)}catch(r){n(r)}return r}return Object.setPrototypeOf(t,Object.getPrototypeOf(e)),I&&Object.defineProperty(t,I,{value:t,enumerable:!1,writable:!1,configurable:!0}),Object.defineProperties(t,r(e))},t.promisify.custom=I,t.callbackify=function(t){if("function"!=typeof t)throw new TypeError('The "original" argument must be of type Function');function n(){for(var n=[],r=0;r<arguments.length;r++)n.push(arguments[r]);var i=n.pop();if("function"!=typeof i)throw new TypeError("The last argument must be of type Function");function o(){return i.apply(u,arguments)}var u=this;t.apply(this,n).then((function(t){e.nextTick(o,null,t)}),(function(t){e.nextTick(O,t,o)}))}return Object.setPrototypeOf(n,Object.getPrototypeOf(t)),Object.defineProperties(n,r(t)),n}}).call(this,n(152))},function(e,t){e.exports=function(e){return e&&"object"==typeof e&&"function"==typeof e.copy&&"function"==typeof e.fill&&"function"==typeof e.readUInt8}},function(e,t){"function"==typeof Object.create?e.exports=function(e,t){e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}})}:e.exports=function(e,t){function n(){}e.super_=t,n.prototype=t.prototype,e.prototype=new n,e.prototype.constructor=e}},function(e,t,n){"use strict";function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var i=n(16),o=new(n=n(14))("JsSIP:DigestAuthentication").debug,u=new n("JsSIP:DigestAuthentication").error;e.exports=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._credentials=t,this._cnonce=null,this._nc=0,this._ncHex="00000000",this._algorithm=null,this._realm=null,this._nonce=null,this._opaque=null,this._stale=null,this._qop=null,this._method=null,this._uri=null,this._ha1=null,this._response=null}var t,n;return t=e,(n=[{key:"get",value:function(e){switch(e){case"realm":return this._realm;case"ha1":return this._ha1;default:return void u('get() | cannot get "%s" parameter',e)}}},{key:"authenticate",value:function(e,t){var n=e.method,r=e.ruri,l=e.body;e=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(this._algorithm=t.algorithm,this._realm=t.realm,this._nonce=t.nonce,this._opaque=t.opaque,this._stale=t.stale,this._algorithm){if("MD5"!==this._algorithm)return u('authenticate() | challenge with Digest algorithm different than "MD5", authentication aborted'),!1}else this._algorithm="MD5";if(!this._nonce)return u("authenticate() | challenge without Digest nonce, authentication aborted"),!1;if(!this._realm)return u("authenticate() | challenge without Digest realm, authentication aborted"),!1;if(!this._credentials.password){if(!this._credentials.ha1)return u("authenticate() | no plain SIP password nor ha1 provided, authentication aborted"),!1;if(this._credentials.realm!==this._realm)return u('authenticate() | no plain SIP password, and stored `realm` does not match the given `realm`, cannot authenticate [stored:"%s", given:"%s"]',this._credentials.realm,this._realm),!1}if(t.qop)if(-1<t.qop.indexOf("auth-int"))this._qop="auth-int";else{if(!(-1<t.qop.indexOf("auth")))return u('authenticate() | challenge without Digest qop different than "auth" or "auth-int", authentication aborted'),!1;this._qop="auth"}else this._qop=null;this._method=n,this._uri=r,this._cnonce=e||i.createRandomToken(12),this._nc+=1;var a,s;e=Number(this._nc).toString(16);return this._ncHex="00000000".substr(0,8-e.length)+e,4294967296===this._nc&&(this._nc=1,this._ncHex="00000001"),this._credentials.password?this._ha1=i.calculateMD5("".concat(this._credentials.username,":").concat(this._realm,":").concat(this._credentials.password)):this._ha1=this._credentials.ha1,"auth"===this._qop?(a="".concat(this._method,":").concat(this._uri),s=i.calculateMD5(a),o('authenticate() | using qop=auth [a2:"%s"]',a),this._response=i.calculateMD5("".concat(this._ha1,":").concat(this._nonce,":").concat(this._ncHex,":").concat(this._cnonce,":auth:").concat(s))):"auth-int"===this._qop?(a="".concat(this._method,":").concat(this._uri,":").concat(i.calculateMD5(l||"")),s=i.calculateMD5(a),o('authenticate() | using qop=auth-int [a2:"%s"]',a),this._response=i.calculateMD5("".concat(this._ha1,":").concat(this._nonce,":").concat(this._ncHex,":").concat(this._cnonce,":auth-int:").concat(s))):null===this._qop&&(a="".concat(this._method,":").concat(this._uri),s=i.calculateMD5(a),o('authenticate() | using qop=null [a2:"%s"]',a),this._response=i.calculateMD5("".concat(this._ha1,":").concat(this._nonce,":").concat(s))),o("authenticate() | response generated"),!0}},{key:"toString",value:function(){var e=[];if(!this._response)throw new Error("response field does not exist, cannot generate Authorization header");return e.push("algorithm=".concat(this._algorithm)),e.push('username="'.concat(this._credentials.username,'"')),e.push('realm="'.concat(this._realm,'"')),e.push('nonce="'.concat(this._nonce,'"')),e.push('uri="'.concat(this._uri,'"')),e.push('response="'.concat(this._response,'"')),this._opaque&&e.push('opaque="'.concat(this._opaque,'"')),this._qop&&(e.push("qop=".concat(this._qop)),e.push('cnonce="'.concat(this._cnonce,'"')),e.push("nc=".concat(this._ncHex))),"Digest ".concat(e.join(", "))}}])&&r(t.prototype,n),e}()},function(e,t,n){"use strict";function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var i=n(40),o=n(13),u=n(65),l=n(373),a=n(16),s=new(n(14))("JsSIP:Dialog").debug,c={STATUS_EARLY:1,STATUS_CONFIRMED:2};e.exports=function(){function e(t,n,r){var o=3<arguments.length&&void 0!==arguments[3]?arguments[3]:c.STATUS_CONFIRMED;if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._owner=t,this._ua=t._ua,this._uac_pending_reply=!1,this._uas_pending_reply=!1,!n.hasHeader("contact"))return{error:"unable to create a Dialog without Contact header field"};n instanceof i.IncomingResponse&&(o=n.status_code<200?c.STATUS_EARLY:c.STATUS_CONFIRMED),t=n.parseHeader("contact"),"UAS"===r?(this._id={call_id:n.call_id,local_tag:n.to_tag,remote_tag:n.from_tag,toString:function(){return this.call_id+this.local_tag+this.remote_tag}},this._state=o,this._remote_seqnum=n.cseq,this._local_uri=n.parseHeader("to").uri,this._remote_uri=n.parseHeader("from").uri,this._remote_target=t.uri,this._route_set=n.getHeaders("record-route"),this._ack_seqnum=this._remote_seqnum):"UAC"===r&&(this._id={call_id:n.call_id,local_tag:n.from_tag,remote_tag:n.to_tag,toString:function(){return this.call_id+this.local_tag+this.remote_tag}},this._state=o,this._local_seqnum=n.cseq,this._local_uri=n.parseHeader("from").uri,this._remote_uri=n.parseHeader("to").uri,this._remote_target=t.uri,this._route_set=n.getHeaders("record-route").reverse(),this._ack_seqnum=null),this._ua.newDialog(this),s("new ".concat(r," dialog created with status ").concat(this._state===c.STATUS_EARLY?"EARLY":"CONFIRMED"))}var t,n,f;return t=e,f=[{key:"C",get:function(){return c}}],(n=[{key:"id",get:function(){return this._id}},{key:"local_seqnum",get:function(){return this._local_seqnum},set:function(e){this._local_seqnum=e}},{key:"owner",get:function(){return this._owner}},{key:"uac_pending_reply",get:function(){return this._uac_pending_reply},set:function(e){this._uac_pending_reply=e}},{key:"uas_pending_reply",get:function(){return this._uas_pending_reply}},{key:"update",value:function(e,t){this._state=c.STATUS_CONFIRMED,s("dialog ".concat(this._id.toString(),"  changed to CONFIRMED state")),"UAC"===t&&(this._route_set=e.getHeaders("record-route").reverse())}},{key:"terminate",value:function(){s("dialog ".concat(this._id.toString()," deleted")),this._ua.destroyDialog(this)}},{key:"sendRequest",value:function(e){var t=this,n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},r=a.cloneArray(n.extraHeaders),i=a.cloneObject(n.eventHandlers);n=n.body||null,n=this._createRequest(e,r,n);return i.onAuthenticated=function(){t._local_seqnum+=1},new l(this,n,i).send(),n}},{key:"receiveRequest",value:function(e){this._checkInDialogRequest(e)&&(e.method===o.ACK&&null!==this._ack_seqnum?this._ack_seqnum=null:e.method===o.INVITE&&(this._ack_seqnum=e.cseq),this._owner.receiveRequest(e))}},{key:"_createRequest",value:function(e,t,n){t=a.cloneArray(t),this._local_seqnum||(this._local_seqnum=Math.floor(1e4*Math.random()));var r=e===o.CANCEL||e===o.ACK?this._local_seqnum:this._local_seqnum+=1;return new i.OutgoingRequest(e,this._remote_target,this._ua,{cseq:r,call_id:this._id.call_id,from_uri:this._local_uri,from_tag:this._id.local_tag,to_uri:this._remote_uri,to_tag:this._id.remote_tag,route_set:this._route_set},t,n)}},{key:"_checkInDialogRequest",value:function(e){var t=this;if(this._remote_seqnum)if(e.cseq<this._remote_seqnum){if(e.method!==o.ACK)return e.reply(500),!1;if(null===this._ack_seqnum||e.cseq!==this._ack_seqnum)return!1}else e.cseq>this._remote_seqnum&&(this._remote_seqnum=e.cseq);else this._remote_seqnum=e.cseq;if(e.method===o.INVITE||e.method===o.UPDATE&&e.body){if(!0===this._uac_pending_reply)e.reply(491);else{if(!0===this._uas_pending_reply){var n=1+(10*Math.random()|0);return e.reply(500,null,["Retry-After:".concat(n)]),!1}this._uas_pending_reply=!0,e.server_transaction.on("stateChanged",(function n(){e.server_transaction.state!==u.C.STATUS_ACCEPTED&&e.server_transaction.state!==u.C.STATUS_COMPLETED&&e.server_transaction.state!==u.C.STATUS_TERMINATED||(e.server_transaction.removeListener("stateChanged",n),t._uas_pending_reply=!1)}))}e.hasHeader("contact")&&e.server_transaction.on("stateChanged",(function(){e.server_transaction.state===u.C.STATUS_ACCEPTED&&(t._remote_target=e.parseHeader("contact").uri)}))}else e.method===o.NOTIFY&&e.hasHeader("contact")&&e.server_transaction.on("stateChanged",(function(){e.server_transaction.state===u.C.STATUS_COMPLETED&&(t._remote_target=e.parseHeader("contact").uri)}));return!0}}])&&r(t.prototype,n),f&&r(t,f),e}()},function(e,t,n){"use strict";function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var i=n(13),o=n(65),u=n(155),l=n(80),a={onRequestTimeout:function(){},onTransportError:function(){},onSuccessResponse:function(){},onErrorResponse:function(){},onAuthenticated:function(){},onDialogError:function(){}};e.exports=function(){function e(t,n,r){for(var i in function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._dialog=t,this._ua=t._ua,this._request=n,this._eventHandlers=r,this._reattempt=!1,this._reattemptTimer=null,a)Object.prototype.hasOwnProperty.call(a,i)&&(this._eventHandlers[i]||(this._eventHandlers[i]=a[i]))}var t,n;return t=e,(n=[{key:"request",get:function(){return this._request}},{key:"send",value:function(){var e=this,t=new l(this._ua,this._request,{onRequestTimeout:function(){e._eventHandlers.onRequestTimeout()},onTransportError:function(){e._eventHandlers.onTransportError()},onAuthenticated:function(t){e._eventHandlers.onAuthenticated(t)},onReceiveResponse:function(t){e._receiveResponse(t)}});t.send(),(this._request.method===i.INVITE||this._request.method===i.UPDATE&&this._request.body)&&t.clientTransaction.state!==o.C.STATUS_TERMINATED&&(this._dialog.uac_pending_reply=!0,t.clientTransaction.on("stateChanged",(function n(){t.clientTransaction.state!==o.C.STATUS_ACCEPTED&&t.clientTransaction.state!==o.C.STATUS_COMPLETED&&t.clientTransaction.state!==o.C.STATUS_TERMINATED||(t.clientTransaction.removeListener("stateChanged",n),e._dialog.uac_pending_reply=!1)})))}},{key:"_receiveResponse",value:function(e){var t=this;408===e.status_code||481===e.status_code?this._eventHandlers.onDialogError(e):e.method!==i.INVITE||491!==e.status_code||this._reattempt?200<=e.status_code&&e.status_code<300?this._eventHandlers.onSuccessResponse(e):300<=e.status_code&&this._eventHandlers.onErrorResponse(e):(this._request.cseq=this._dialog.local_seqnum+=1,this._reattemptTimer=setTimeout((function(){t._dialog.owner.status!==u.C.STATUS_TERMINATED&&(t._reattempt=!0,t._request_sender.send())}),1e3))}}])&&r(t.prototype,n),e}()},function(e,t,n){"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function o(e,t){return(o=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function u(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=l(e);return function(e,t){if(t&&("object"===r(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0!==e)return e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(e)}(this,t?(n=l(this).constructor,Reflect.construct(i,arguments,n)):i.apply(this,arguments))}}function l(e){return(l=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var a=n(34).EventEmitter,s=n(13),c=n(52),f=n(16),d=new(n(14))("JsSIP:RTCSession:DTMF").debug,h={MIN_DURATION:70,MAX_DURATION:6e3,DEFAULT_DURATION:100,MIN_INTER_TONE_GAP:50,DEFAULT_INTER_TONE_GAP:500};e.exports=function(){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&o(e,t)}(r,a);var e,t,n=u(r);function r(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,r),(t=n.call(this))._session=e,t._direction=null,t._tone=null,t._duration=null,t._request=null,t}return e=r,(t=[{key:"tone",get:function(){return this._tone}},{key:"duration",get:function(){return this._duration}},{key:"send",value:function(e){var t=this,n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};if(void 0===e)throw new TypeError("Not enough arguments");if(this._direction="outgoing",this._session.status!==this._session.C.STATUS_CONFIRMED&&this._session.status!==this._session.C.STATUS_WAITING_FOR_ACK)throw new c.InvalidStateError(this._session.status);var r=f.cloneArray(n.extraHeaders);if(this.eventHandlers=f.cloneObject(n.eventHandlers),"string"==typeof e)e=e.toUpperCase();else{if("number"!=typeof e)throw new TypeError("Invalid tone: ".concat(e));e=e.toString()}if(!e.match(/^[0-9A-DR#*]$/))throw new TypeError("Invalid tone: ".concat(e));this._tone=e,this._duration=n.duration,r.push("Content-Type: application/dtmf-relay"),n="Signal=".concat(this._tone,"\r\n"),n+="Duration=".concat(this._duration),this._session.newDTMF({originator:"local",dtmf:this,request:this._request}),this._session.sendRequest(s.INFO,{extraHeaders:r,eventHandlers:{onSuccessResponse:function(e){t.emit("succeeded",{originator:"remote",response:e})},onErrorResponse:function(e){t.eventHandlers.onFailed&&t.eventHandlers.onFailed(),t.emit("failed",{originator:"remote",response:e})},onRequestTimeout:function(){t._session.onRequestTimeout()},onTransportError:function(){t._session.onTransportError()},onDialogError:function(){t._session.onDialogError()}},body:n})}},{key:"init_incoming",value:function(e){var t,n=/^(Signal\s*?=\s*?)([0-9A-D#*]{1})(\s)?.*/,r=/^(Duration\s?=\s?)([0-9]{1,4})(\s)?.*/;this._direction="incoming",(this._request=e).reply(200),e.body&&(1<=(t=e.body.split("\n")).length&&n.test(t[0])&&(this._tone=t[0].replace(n,"$2")),2<=t.length&&r.test(t[1])&&(this._duration=parseInt(t[1].replace(r,"$2"),10))),this._duration||(this._duration=h.DEFAULT_DURATION),this._tone?this._session.newDTMF({originator:"remote",dtmf:this,request:e}):d("invalid INFO DTMF received, discarded")}}])&&i(e.prototype,t),r}(),e.exports.C=h},function(e,t,n){"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function o(e,t){return(o=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function u(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=l(e);return function(e,t){if(t&&("object"===r(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0!==e)return e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(e)}(this,t?(n=l(this).constructor,Reflect.construct(i,arguments,n)):i.apply(this,arguments))}}function l(e){return(l=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var a=n(34).EventEmitter,s=n(13),c=n(52),f=n(16);e.exports=function(){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&o(e,t)}(r,a);var e,t,n=u(r);function r(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,r),(t=n.call(this))._session=e,t._direction=null,t._contentType=null,t._body=null,t}return e=r,(t=[{key:"contentType",get:function(){return this._contentType}},{key:"body",get:function(){return this._body}},{key:"send",value:function(e,t){var n=this,r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{};if(this._direction="outgoing",void 0===e)throw new TypeError("Not enough arguments");if(this._session.status!==this._session.C.STATUS_CONFIRMED&&this._session.status!==this._session.C.STATUS_WAITING_FOR_ACK)throw new c.InvalidStateError(this._session.status);this._contentType=e,this._body=t,(r=f.cloneArray(r.extraHeaders)).push("Content-Type: ".concat(e)),this._session.newInfo({originator:"local",info:this,request:this.request}),this._session.sendRequest(s.INFO,{extraHeaders:r,eventHandlers:{onSuccessResponse:function(e){n.emit("succeeded",{originator:"remote",response:e})},onErrorResponse:function(e){n.emit("failed",{originator:"remote",response:e})},onTransportError:function(){n._session.onTransportError()},onRequestTimeout:function(){n._session.onRequestTimeout()},onDialogError:function(){n._session.onDialogError()}},body:t})}},{key:"init_incoming",value:function(e){this._direction="incoming",(this.request=e).reply(200),this._contentType=e.hasHeader("Content-Type")?e.getHeader("Content-Type").toLowerCase():void 0,this._body=e.body,this._session.newInfo({originator:"remote",info:this,request:e})}}])&&i(e.prototype,t),r}()},function(e,t,n){"use strict";function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var i=n(13),o=new(n(14))("JsSIP:RTCSession:ReferNotifier").debug;e.exports=function(){function e(t,n,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._session=t,this._id=n,this._expires=r||300,this._active=!0,this.notify(100)}var t,n;return t=e,(n=[{key:"notify",value:function(e,t){if(o("notify()"),!1!==this._active){var n;t=t||i.REASON_PHRASE[e]||"",n=200<=e?"terminated;reason=noresource":"active;expires=".concat(this._expires);try{this._session.sendRequest(i.NOTIFY,{extraHeaders:["Event: ".concat("refer",";id=").concat(this._id),"Subscription-State: ".concat(n),"Content-Type: ".concat("message/sipfrag;version=2.0")],body:"SIP/2.0 ".concat(e," ").concat(t),eventHandlers:{onErrorResponse:function(){this._active=!1}}})}catch(e){o("Dropping NOTIFY message as session is already closed")}}}}])&&r(t.prototype,n),e}()},function(e,t,n){"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function o(e,t){return(o=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function u(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=l(e);return function(e,t){if(t&&("object"===r(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0!==e)return e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(e)}(this,t?(n=l(this).constructor,Reflect.construct(i,arguments,n)):i.apply(this,arguments))}}function l(e){return(l=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var a=n(34).EventEmitter,s=n(13),c=n(33),f=n(16),d=new(n(14))("JsSIP:RTCSession:ReferSubscriber").debug;e.exports=function(){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&o(e,t)}(r,a);var e,t,n=u(r);function r(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,r),(t=n.call(this))._id=null,t._session=e,t}return e=r,(t=[{key:"id",get:function(){return this._id}},{key:"sendRefer",value:function(e){var t=this,n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};d("sendRefer()");var r,i=f.cloneArray(n.extraHeaders),o=f.cloneObject(n.eventHandlers);for(r in o)Object.prototype.hasOwnProperty.call(o,r)&&this.on(r,o[r]);var u=null;n.replaces&&(u=n.replaces._request.call_id,u+=";to-tag=".concat(n.replaces._to_tag),u+=";from-tag=".concat(n.replaces._from_tag),u=encodeURIComponent(u)),u="Refer-To: <".concat(e).concat(u?"?Replaces=".concat(u):"",">"),i.push(u),u="Referred-By: <".concat(this._session._ua._configuration.uri._scheme,":").concat(this._session._ua._configuration.uri._user,"@").concat(this._session._ua._configuration.uri._host,">"),i.push(u),i.push("Contact: ".concat(this._session.contact)),i=this._session.sendRequest(s.REFER,{extraHeaders:i,eventHandlers:{onSuccessResponse:function(e){t._requestSucceeded(e)},onErrorResponse:function(e){t._requestFailed(e,s.causes.REJECTED)},onTransportError:function(){t._requestFailed(null,s.causes.CONNECTION_ERROR)},onRequestTimeout:function(){t._requestFailed(null,s.causes.REQUEST_TIMEOUT)},onDialogError:function(){t._requestFailed(null,s.causes.DIALOG_ERROR)}}}),this._id=i.cseq}},{key:"receiveNotify",value:function(e){if(d("receiveNotify()"),e.body){var t=c.parse(e.body.trim(),"Status_Line");if(-1!==t)switch(!0){case/^100$/.test(t.status_code):this.emit("trying",{request:e,status_line:t});break;case/^1[0-9]{2}$/.test(t.status_code):this.emit("progress",{request:e,status_line:t});break;case/^2[0-9]{2}$/.test(t.status_code):this.emit("accepted",{request:e,status_line:t});break;default:this.emit("failed",{request:e,status_line:t})}else d('receiveNotify() | error parsing NOTIFY body: "'.concat(e.body,'"'))}}},{key:"_requestSucceeded",value:function(e){d("REFER succeeded"),d('emit "requestSucceeded"'),this.emit("requestSucceeded",{response:e})}},{key:"_requestFailed",value:function(e,t){d("REFER failed"),d('emit "requestFailed"'),this.emit("requestFailed",{response:e||null,cause:t})}}])&&i(e.prototype,t),r}()},function(e,t,n){"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function o(e,t){return(o=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function u(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=l(e);return function(e,t){if(t&&("object"===r(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0!==e)return e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(e)}(this,t?(n=l(this).constructor,Reflect.construct(i,arguments,n)):i.apply(this,arguments))}}function l(e){return(l=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var a=n(34).EventEmitter,s=n(13),c=n(40),f=n(16),d=n(80),h=n(52),p=new(n(14))("JsSIP:Message").debug;e.exports=function(){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&o(e,t)}(r,a);var e,t,n=u(r);function r(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,r),(t=n.call(this))._ua=e,t._request=null,t._closed=!1,t._direction=null,t._local_identity=null,t._remote_identity=null,t._is_replied=!1,t._data={},t}return e=r,(t=[{key:"direction",get:function(){return this._direction}},{key:"local_identity",get:function(){return this._local_identity}},{key:"remote_identity",get:function(){return this._remote_identity}},{key:"send",value:function(e,t){var n=this,r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{},i=e;if(void 0===e||void 0===t)throw new TypeError("Not enough arguments");if(!(e=this._ua.normalizeTarget(e)))throw new TypeError("Invalid target: ".concat(i));i=f.cloneArray(r.extraHeaders);var o,u=f.cloneObject(r.eventHandlers);r=r.contentType||"text/plain";for(o in u)Object.prototype.hasOwnProperty.call(u,o)&&this.on(o,u[o]);i.push("Content-Type: ".concat(r)),this._request=new c.OutgoingRequest(s.MESSAGE,e,this._ua,null,i),t&&(this._request.body=t),t=new d(this._ua,this._request,{onRequestTimeout:function(){n._onRequestTimeout()},onTransportError:function(){n._onTransportError()},onReceiveResponse:function(e){n._receiveResponse(e)}}),this._newMessage("local",this._request),t.send()}},{key:"init_incoming",value:function(e){this._request=e,this._newMessage("remote",e),this._is_replied||(this._is_replied=!0,e.reply(200)),this._close()}},{key:"accept",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},t=f.cloneArray(e.extraHeaders);e=e.body;if("incoming"!==this._direction)throw new h.NotSupportedError('"accept" not supported for outgoing Message');if(this._is_replied)throw new Error("incoming Message already replied");this._is_replied=!0,this._request.reply(200,null,t,e)}},{key:"reject",value:function(){var e=(r=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{}).status_code||480,t=r.reason_phrase,n=f.cloneArray(r.extraHeaders),r=r.body;if("incoming"!==this._direction)throw new h.NotSupportedError('"reject" not supported for outgoing Message');if(this._is_replied)throw new Error("incoming Message already replied");if(e<300||700<=e)throw new TypeError("Invalid status_code: ".concat(e));this._is_replied=!0,this._request.reply(e,t,n,r)}},{key:"_receiveResponse",value:function(e){if(!this._closed)switch(!0){case/^1[0-9]{2}$/.test(e.status_code):break;case/^2[0-9]{2}$/.test(e.status_code):this._succeeded("remote",e);break;default:var t=f.sipErrorCause(e.status_code);this._failed("remote",e,t)}}},{key:"_onRequestTimeout",value:function(){this._closed||this._failed("system",null,s.causes.REQUEST_TIMEOUT)}},{key:"_onTransportError",value:function(){this._closed||this._failed("system",null,s.causes.CONNECTION_ERROR)}},{key:"_close",value:function(){this._closed=!0,this._ua.destroyMessage(this)}},{key:"_newMessage",value:function(e,t){"remote"===e?(this._direction="incoming",this._local_identity=t.to,this._remote_identity=t.from):"local"===e&&(this._direction="outgoing",this._local_identity=t.from,this._remote_identity=t.to),this._ua.newMessage(this,{originator:e,message:this,request:t})}},{key:"_failed",value:function(e,t,n){p("MESSAGE failed"),this._close(),p('emit "failed"'),this.emit("failed",{originator:e,response:t||null,cause:n})}},{key:"_succeeded",value:function(e,t){p("MESSAGE succeeded"),this._close(),p('emit "succeeded"'),this.emit("succeeded",{originator:e,response:t})}}])&&i(e.prototype,t),r}()},function(e,t,n){"use strict";function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var i=n(156),o=n(14),u=new o("JsSIP:Transport").debug,l=new o("JsSIP:Transport").error,a={STATUS_CONNECTED:0,STATUS_CONNECTING:1,STATUS_DISCONNECTED:2,SOCKET_STATUS_READY:0,SOCKET_STATUS_ERROR:1,recovery_options:{min_interval:(n=n(13)).CONNECTION_RECOVERY_MIN_INTERVAL,max_interval:n.CONNECTION_RECOVERY_MAX_INTERVAL}};e.exports=function(){function e(t){var n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:a.recovery_options;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),u("new()"),this.status=a.STATUS_DISCONNECTED,this.socket=null,this.sockets=[],this.recovery_options=n,this.recover_attempts=0,this.recovery_timer=null,this.close_requested=!1;try{this.textDecoder=new TextDecoder("utf8")}catch(t){l("cannot use TextDecoder: ".concat(t))}if(void 0===t)throw new TypeError("Invalid argument. undefined 'sockets' argument");(t=t instanceof Array?t:[t]).forEach((function(e){if(!i.isSocket(e.socket))throw new TypeError("Invalid argument. invalid 'JsSIP.Socket' instance");if(e.weight&&!Number(e.weight))throw new TypeError("Invalid argument. 'weight' attribute is not a number");this.sockets.push({socket:e.socket,weight:e.weight||0,status:a.SOCKET_STATUS_READY})}),this),this._getSocket()}var t,n;return t=e,(n=[{key:"via_transport",get:function(){return this.socket.via_transport}},{key:"url",get:function(){return this.socket.url}},{key:"sip_uri",get:function(){return this.socket.sip_uri}},{key:"connect",value:function(){u("connect()"),this.isConnected()?u("Transport is already connected"):this.isConnecting()?u("Transport is connecting"):(this.close_requested=!1,this.status=a.STATUS_CONNECTING,this.onconnecting({socket:this.socket,attempts:this.recover_attempts}),this.close_requested||(this.socket.onconnect=this._onConnect.bind(this),this.socket.ondisconnect=this._onDisconnect.bind(this),this.socket.ondata=this._onData.bind(this),this.socket.connect()))}},{key:"disconnect",value:function(){u("close()"),this.close_requested=!0,this.recover_attempts=0,this.status=a.STATUS_DISCONNECTED,null!==this.recovery_timer&&(clearTimeout(this.recovery_timer),this.recovery_timer=null),this.socket.onconnect=function(){},this.socket.ondisconnect=function(){},this.socket.ondata=function(){},this.socket.disconnect(),this.ondisconnect({socket:this.socket,error:!1})}},{key:"send",value:function(e){return u("send()"),this.isConnected()?(e=e.toString(),u("sending message:\n\n".concat(e,"\n")),this.socket.send(e)):(l("unable to send message, transport is not connected"),!1)}},{key:"isConnected",value:function(){return this.status===a.STATUS_CONNECTED}},{key:"isConnecting",value:function(){return this.status===a.STATUS_CONNECTING}},{key:"_reconnect",value:function(){var e=this;this.recover_attempts+=1;var t=Math.floor(Math.random()*Math.pow(2,this.recover_attempts)+1);t<this.recovery_options.min_interval?t=this.recovery_options.min_interval:t>this.recovery_options.max_interval&&(t=this.recovery_options.max_interval),u("reconnection attempt: ".concat(this.recover_attempts,". next connection attempt in ").concat(t," seconds")),this.recovery_timer=setTimeout((function(){e.close_requested||e.isConnected()||e.isConnecting()||(e._getSocket(),e.connect())}),1e3*t)}},{key:"_getSocket",value:function(){var e=[];if(this.sockets.forEach((function(t){t.status===a.SOCKET_STATUS_ERROR||(0===e.length?e.push(t):t.weight>e[0].weight?e=[t]:t.weight===e[0].weight&&e.push(t))})),0===e.length)return this.sockets.forEach((function(e){e.status=a.SOCKET_STATUS_READY})),void this._getSocket();var t=Math.floor(Math.random()*e.length);this.socket=e[t].socket}},{key:"_onConnect",value:function(){this.recover_attempts=0,this.status=a.STATUS_CONNECTED,null!==this.recovery_timer&&(clearTimeout(this.recovery_timer),this.recovery_timer=null),this.onconnect({socket:this})}},{key:"_onDisconnect",value:function(e,t,n){this.status=a.STATUS_DISCONNECTED,this.ondisconnect({socket:this.socket,error:e,code:t,reason:n}),this.close_requested||(this.sockets.forEach((function(e){this.socket===e.socket&&(e.status=a.SOCKET_STATUS_ERROR)}),this),this._reconnect(e))}},{key:"_onData",value:function(e){if("\r\n"!==e){if("string"!=typeof e){try{e=this.textDecoder?this.textDecoder.decode(e):String.fromCharCode.apply(null,new Uint8Array(e))}catch(e){return void u("received binary message failed to be converted into string, message discarded")}u("received binary message:\n\n".concat(e,"\n"))}else u("received text message:\n\n".concat(e,"\n"));this.ondata({transport:this,message:e})}else u("received message with CRLF Keep Alive response")}}])&&r(t.prototype,n),e}()},function(e,t,n){"use strict";function r(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return i(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Map"===(n="Object"===n&&e.constructor?e.constructor.name:n)||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?i(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0;return{s:t=function(){},n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:t}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,u=!0,l=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return u=e.done,e},e:function(e){l=!0,o=e},f:function(){try{u||null==n.return||n.return()}finally{if(l)throw o}}}}function i(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var o=n(33),u=n(40),l=new(n(14))("JsSIP:Parser").error;t.parseMessage=function(e,t){var n,i,a=e.indexOf("\r\n");if(-1!==a){var s=e.substring(0,a),c=o.parse(s,"Request_Response");if(-1!==c){c.status_code?((n=new u.IncomingResponse).status_code=c.status_code,n.reason_phrase=c.reason_phrase):((n=new u.IncomingRequest(t)).method=c.method,n.ruri=c.uri),n.data=e;for(var f=a+2;;){if(-2===(a=function(e,t){var n=t,r=0,i=0;if(e.substring(n,n+2).match(/(^\r\n)/))return-2;for(;0===r;){if(-1===(i=e.indexOf("\r\n",n)))return i;!e.substring(i+2,i+4).match(/(^\r\n)/)&&e.charAt(i+2).match(/(^\s+)/)?n=i+2:r=i}return r}(e,f))){i=f+2;break}if(-1===a)return void l("parseMessage() | malformed message");if(!0!==(c=function(e,t,n,i){var l,a=t.indexOf(":",n),s=t.substring(n,a).trim(),c=t.substring(a+1,i).trim();switch(s.toLowerCase()){case"via":case"v":e.addHeader("via",c),1===e.getHeaders("via").length?(l=e.parseHeader("Via"))&&(e.via=l,e.via_branch=l.branch):l=0;break;case"from":case"f":e.setHeader("from",c),(l=e.parseHeader("from"))&&(e.from=l,e.from_tag=l.getParam("tag"));break;case"to":case"t":e.setHeader("to",c),(l=e.parseHeader("to"))&&(e.to=l,e.to_tag=l.getParam("tag"));break;case"record-route":if(-1===(l=o.parse(c,"Record_Route")))l=void 0;else{var f,d=r(l);try{for(d.s();!(f=d.n()).done;){var h=f.value;e.addHeader("record-route",c.substring(h.possition,h.offset)),e.headers["Record-Route"][e.getHeaders("record-route").length-1].parsed=h.parsed}}catch(e){d.e(e)}finally{d.f()}}break;case"call-id":case"i":e.setHeader("call-id",c),(l=e.parseHeader("call-id"))&&(e.call_id=c);break;case"contact":case"m":if(-1===(l=o.parse(c,"Contact")))l=void 0;else{var p,v=r(l);try{for(v.s();!(p=v.n()).done;){var _=p.value;e.addHeader("contact",c.substring(_.possition,_.offset)),e.headers.Contact[e.getHeaders("contact").length-1].parsed=_.parsed}}catch(e){v.e(e)}finally{v.f()}}break;case"content-length":case"l":e.setHeader("content-length",c),l=e.parseHeader("content-length");break;case"content-type":case"c":e.setHeader("content-type",c),l=e.parseHeader("content-type");break;case"cseq":e.setHeader("cseq",c),(l=e.parseHeader("cseq"))&&(e.cseq=l.value),e instanceof u.IncomingResponse&&(e.method=l.method);break;case"max-forwards":e.setHeader("max-forwards",c),l=e.parseHeader("max-forwards");break;case"www-authenticate":e.setHeader("www-authenticate",c),l=e.parseHeader("www-authenticate");break;case"proxy-authenticate":e.setHeader("proxy-authenticate",c),l=e.parseHeader("proxy-authenticate");break;case"session-expires":case"x":e.setHeader("session-expires",c),(l=e.parseHeader("session-expires"))&&(e.session_expires=l.expires,e.session_expires_refresher=l.refresher);break;case"refer-to":case"r":e.setHeader("refer-to",c),(l=e.parseHeader("refer-to"))&&(e.refer_to=l);break;case"replaces":e.setHeader("replaces",c),(l=e.parseHeader("replaces"))&&(e.replaces=l);break;case"event":case"o":e.setHeader("event",c),(l=e.parseHeader("event"))&&(e.event=l);break;default:e.addHeader(s,c),l=0}return void 0!==l||{error:'error parsing header "'.concat(s,'"')}}(n,e,f,a)))return void l("parseMessage() |",c.error);f=a+2}return n.hasHeader("content-length")?(t=n.getHeader("content-length"),n.body=e.substr(i,t)):n.body=e.substring(i),n}l('parseMessage() | error parsing first line of SIP message: "'.concat(s,'"'))}else l("parseMessage() | no CRLF found, not a SIP message")}},function(e,t,n){"use strict";function r(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return i(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Map"===(n="Object"===n&&e.constructor?e.constructor.name:n)||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?i(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0;return{s:t=function(){},n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:t}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,u=!0,l=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return u=e.done,e},e:function(e){l=!0,o=e},f:function(){try{u||null==n.return||n.return()}finally{if(l)throw o}}}}function i(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var o,u,l,a=n(13),s=n(40),c=n(16),f=new(n(14))("JsSIP:sanityCheck").debug,d=[function(){for(var e=0,t=["from","to","call_id","cseq","via"];e<t.length;e++){var n=t[e];if(!o.hasHeader(n))return f("missing mandatory header field : ".concat(n,", dropping the response")),!1}}],h=[function(){if("sip"!==o.s("to").uri.scheme)return v(416),!1},function(){if(!o.to_tag&&o.call_id.substr(0,5)===u.configuration.jssip_id)return v(482),!1},function(){if(c.str_utf8_length(o.body)<o.getHeader("content-length"))return v(400),!1},function(){var e,t=o.from_tag,n=o.call_id,r=o.cseq;if(!o.to_tag)if(o.method===a.INVITE){if(u._transactions.ist[o.via_branch])return!1;for(var i in u._transactions.ist)if(Object.prototype.hasOwnProperty.call(u._transactions.ist,i)&&(e=u._transactions.ist[i]).request.from_tag===t&&e.request.call_id===n&&e.request.cseq===r)return v(482),!1}else{if(u._transactions.nist[o.via_branch])return!1;for(var l in u._transactions.nist)if(Object.prototype.hasOwnProperty.call(u._transactions.nist,l)&&(e=u._transactions.nist[l]).request.from_tag===t&&e.request.call_id===n&&e.request.cseq===r)return v(482),!1}}],p=[function(){if(1<o.getHeaders("via").length)return f("more than one Via header field present in the response, dropping the response"),!1},function(){if(c.str_utf8_length(o.body)<o.getHeader("content-length"))return f("message body length is lower than the value in Content-Length header field, dropping the response"),!1}];function v(e){var t,n=o.getHeaders("via"),i="SIP/2.0 ".concat(e," ").concat(a.REASON_PHRASE[e],"\r\n"),u=r(n);try{for(u.s();!(t=u.n()).done;){var s=t.value;i+="Via: ".concat(s,"\r\n")}}catch(e){u.e(e)}finally{u.f()}n=o.getHeader("To"),o.to_tag||(n+=";tag=".concat(c.newTag())),i+="To: ".concat(n,"\r\n"),i+="From: ".concat(o.getHeader("From"),"\r\n"),i+="Call-ID: ".concat(o.call_id,"\r\n"),i+="CSeq: ".concat(o.cseq," ").concat(o.method,"\r\n"),l.send(i+="\r\n")}e.exports=function(e,t,n){o=e,u=t,l=n;var i,a=r(d);try{for(a.s();!(i=a.n()).done;)if(!1===(0,i.value)())return!1}catch(e){a.e(e)}finally{a.f()}if(o instanceof s.IncomingRequest){var c,f=r(h);try{for(f.s();!(c=f.n()).done;)if(!1===(0,c.value)())return!1}catch(e){f.e(e)}finally{f.f()}}else if(o instanceof s.IncomingResponse){var v,_=r(p);try{for(_.s();!(v=_.n()).done;)if(!1===(0,v.value)())return!1}catch(e){_.e(e)}finally{_.f()}}return!0}},function(e,t,n){"use strict";function r(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var i=n(16),o=n(13),u=n(33),l=n(53),a=n(156),s=n(52);t.settings={authorization_user:null,password:null,realm:null,ha1:null,authorization_jwt:null,display_name:null,uri:null,contact_uri:null,instance_id:null,use_preloaded_route:!1,session_timers:!0,session_timers_refresh_method:o.UPDATE,session_timers_force_refresher:!1,no_answer_timeout:60,register:!0,register_expires:600,registrar_server:null,sockets:null,connection_recovery_max_interval:o.CONNECTION_RECOVERY_MAX_INTERVAL,connection_recovery_min_interval:o.CONNECTION_RECOVERY_MIN_INTERVAL,via_host:"".concat(i.createRandomToken(12),".invalid")};var c={mandatory:{sockets:function(e){var t=[];if(a.isSocket(e))t.push({socket:e});else{if(!Array.isArray(e)||!e.length)return;var n,i=function(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return r(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Map"===(n="Object"===n&&e.constructor?e.constructor.name:n)||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?r(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var i=0;return{s:t=function(){},n:function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}},e:function(e){throw e},f:t}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,u=!0,l=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return u=e.done,e},e:function(e){l=!0,o=e},f:function(){try{u||null==n.return||n.return()}finally{if(l)throw o}}}}(e);try{for(i.s();!(n=i.n()).done;){var o=n.value;Object.prototype.hasOwnProperty.call(o,"socket")&&a.isSocket(o.socket)?t.push(o):a.isSocket(o)&&t.push({socket:o})}}catch(e){i.e(e)}finally{i.f()}}return t},uri:function(e){if(/^sip:/i.test(e)||(e="".concat(o.SIP,":").concat(e)),(e=l.parse(e))&&e.user)return e}},optional:{authorization_user:function(e){if(-1!==u.parse('"'.concat(e,'"'),"quoted_string"))return e},authorization_jwt:function(e){if("string"==typeof e)return e},user_agent:function(e){if("string"==typeof e)return e},connection_recovery_max_interval:function(e){if(i.isDecimal(e)&&0<(e=Number(e)))return e},connection_recovery_min_interval:function(e){if(i.isDecimal(e)&&0<(e=Number(e)))return e},contact_uri:function(e){if("string"==typeof e&&-1!==(e=u.parse(e,"SIP_URI")))return e},display_name:function(e){return e},instance_id:function(e){if(/^uuid:/i.test(e)&&(e=e.substr(5)),-1!==u.parse(e,"uuid"))return e},no_answer_timeout:function(e){if(i.isDecimal(e)&&0<(e=Number(e)))return e},session_timers:function(e){if("boolean"==typeof e)return e},session_timers_refresh_method:function(e){if("string"==typeof e&&((e=e.toUpperCase())===o.INVITE||e===o.UPDATE))return e},session_timers_force_refresher:function(e){if("boolean"==typeof e)return e},password:function(e){return String(e)},realm:function(e){return String(e)},ha1:function(e){return String(e)},register:function(e){if("boolean"==typeof e)return e},register_expires:function(e){if(i.isDecimal(e)&&0<(e=Number(e)))return e},registrar_server:function(e){if(/^sip:/i.test(e)||(e="".concat(o.SIP,":").concat(e)),(e=l.parse(e))&&!e.user)return e},use_preloaded_route:function(e){if("boolean"==typeof e)return e}}};t.load=function(e,t){for(var n in c.mandatory){if(!t.hasOwnProperty(n))throw new s.ConfigurationError(n);var r=t[n],o=c.mandatory[n](r);if(void 0===o)throw new s.ConfigurationError(n,r);e[n]=o}for(var u in c.optional)if(t.hasOwnProperty(u)){var l=t[u];if(!i.isEmpty(l)){var a=c.optional[u](l);if(void 0===a)throw new s.ConfigurationError(u,l);e[u]=a}}}},function(e,t,n){"use strict";function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var i=n(33),o=new(n=n(14))("JsSIP:WebSocketInterface").debug,u=new n("JsSIP:WebSocketInterface").error;e.exports=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),o('new() [url:"%s"]',t),this._url=t,this._sip_uri=null,this._via_transport=null,this._ws=null,this._heartbeat_timer=null,this._missed_heartbeats=0,this._PING_MSG="\r\n\r\n",this._PONG_MSG="\r\n";var n=i.parse(t,"absoluteURI");if(-1===n)throw u("invalid WebSocket URI: ".concat(t)),new TypeError("Invalid argument: ".concat(t));if("wss"!==n.scheme&&"ws"!==n.scheme)throw u("invalid WebSocket URI scheme: ".concat(n.scheme)),new TypeError("Invalid argument: ".concat(t));this._sip_uri="sip:".concat(n.host).concat(n.port?":".concat(n.port):"",";transport=ws"),this._via_transport=n.scheme.toUpperCase()}var t,n;return t=e,(n=[{key:"via_transport",get:function(){return this._via_transport},set:function(e){this._via_transport=e.toUpperCase()}},{key:"sip_uri",get:function(){return this._sip_uri}},{key:"url",get:function(){return this._url}},{key:"connect",value:function(){if(o("connect()"),this.isConnected())o("WebSocket ".concat(this._url," is already connected"));else if(this.isConnecting())o("WebSocket ".concat(this._url," is connecting"));else{this._ws&&this.disconnect(),o("connecting to WebSocket ".concat(this._url));try{this._ws=new WebSocket(this._url,"sip"),this._ws.binaryType="arraybuffer",this._ws.onopen=this._onOpen.bind(this),this._ws.onclose=this._onClose.bind(this),this._ws.onmessage=this._onMessage.bind(this),this._ws.onerror=this._onError.bind(this)}catch(e){this._onError(e)}}}},{key:"disconnect",value:function(){o("disconnect()"),this._ws&&(this._ws.onopen=function(){},this._ws.onclose=function(){},this._ws.onmessage=function(){},this._ws.onerror=function(){},this._ws.close(),this._ws=null,this._clearHeartbeatTimerInternals())}},{key:"send",value:function(e){return o("send()"),this.isConnected()?(this._ws.send(e),!0):(u("unable to send message, WebSocket is not open"),!1)}},{key:"isConnected",value:function(){return this._ws&&this._ws.readyState===this._ws.OPEN}},{key:"isConnecting",value:function(){return this._ws&&this._ws.readyState===this._ws.CONNECTING}},{key:"_onOpen",value:function(){o("WebSocket ".concat(this._url," connected")),this.onconnect(),this._heartbeat_timer&&this._clearHeartbeatTimerInternals(),o("Starting the heartbeat timer"),this._heartbeat_timer=setInterval(this._heartbeatHandler.bind(this),1e4)}},{key:"_onClose",value:function(e){var t=e.wasClean,n=e.code;e=e.reason;o("WebSocket ".concat(this._url," closed")),!1===t&&o("WebSocket abrupt disconnection"),this._clearHeartbeatTimerInternals(),this.ondisconnect(!t,n,e)}},{key:"_onMessage",value:function(e){(e=e.data)!==this._PONG_MSG?(o("received WebSocket message"),this.ondata(e)):this._missed_heartbeats=0}},{key:"_onError",value:function(e){u("WebSocket ".concat(this._url," error: "),e)}},{key:"_heartbeatHandler",value:function(){try{3<=this._missed_heartbeats?(this._clearHeartbeatTimerInternals(),this.isConnected()&&(o("Disconnecting ws as max retry times exceeded"),this._ws.close())):(this._missed_heartbeats++,this._ws.send(this._PING_MSG))}catch(e){this._clearHeartbeatTimerInternals(),o("Exception in heartbeatHandler %s",e.message)}}},{key:"_clearHeartbeatTimerInternals",value:function(){o("Clearing heartbeat timer"),this._heartbeat_timer&&clearInterval(this._heartbeat_timer),this._heartbeat_timer=null,this._missed_heartbeats=0}}])&&r(t.prototype,n),e}()},function(e,t,n){const r=n(112),i=n(113);e.exports=class e{static parse(e){if(-1!==(e=i.parse(e,"Name_Addr_Header")))return e}constructor(e,t,n){if(!(e&&e instanceof r))throw new TypeError('missing or invalid "uri" parameter');this._uri=e,this._parameters={},this.display_name=t;for(const e in n)Object.prototype.hasOwnProperty.call(n,e)&&this.setParam(e,n[e])}get uri(){return this._uri}get display_name(){return this._display_name}set display_name(e){this._display_name=0===e?"0":e}setParam(e,t){e&&(this._parameters[e.toLowerCase()]=null==t?null:t.toString())}getParam(e){if(e)return this._parameters[e.toLowerCase()]}hasParam(e){if(e)return!!this._parameters.hasOwnProperty(e.toLowerCase())}deleteParam(e){if(e=e.toLowerCase(),this._parameters.hasOwnProperty(e)){var t=this._parameters[e];return delete this._parameters[e],t}}clearParams(){this._parameters={}}clone(){return new e(this._uri.clone(),this._display_name,JSON.parse(JSON.stringify(this._parameters)))}_quote(e){return e.replace(/\\/g,"\\\\").replace(/"/g,'\\"')}toString(){let e=this._display_name?`"${this._quote(this._display_name)}" `:"";e+=`<${this._uri.toString()}>`;for(const t in this._parameters)Object.prototype.hasOwnProperty.call(this._parameters,t)&&(e+=";"+t,null!==this._parameters[t]&&(e+="="+this._parameters[t]));return e}}},function(t,n){if(void 0===e){var r=new Error("Cannot find module 'react-native'");throw r.code="MODULE_NOT_FOUND",r}t.exports=e},function(e,n){e.exports=t},function(e,t){e.exports=function(e){return e.webpackPolyfill||(e.deprecate=function(){},e.paths=[],e.children||(e.children=[]),Object.defineProperty(e,"loaded",{enumerable:!0,get:function(){return e.l}}),Object.defineProperty(e,"id",{enumerable:!0,get:function(){return e.i}}),e.webpackPolyfill=1),e}},function(e,t,n){"use strict";n.r(t),n.d(t,"EngageDigitalClient",(function(){return mn})),n.d(t,"getEngageDigitalVersion",(function(){return bn})),n.d(t,"EngageDigitalSession",(function(){return en})),n.d(t,"isEngageDigitalWebrtcSupported",(function(){return Cn}));var r={};n.r(r),n.d(r,"shimGetUserMedia",(function(){return Y})),n.d(r,"shimGetDisplayMedia",(function(){return X})),n.d(r,"shimMediaStream",(function(){return Q})),n.d(r,"shimOnTrack",(function(){return Z})),n.d(r,"shimGetSendersWithDtmf",(function(){return ee})),n.d(r,"shimGetStats",(function(){return te})),n.d(r,"shimSenderReceiverGetStats",(function(){return ne})),n.d(r,"shimAddTrackRemoveTrackWithNative",(function(){return re})),n.d(r,"shimAddTrackRemoveTrack",(function(){return ie})),n.d(r,"shimPeerConnection",(function(){return oe})),n.d(r,"fixNegotiationNeeded",(function(){return ue}));var i={};n.r(i),n.d(i,"shimGetUserMedia",(function(){return le})),n.d(i,"shimGetDisplayMedia",(function(){return ae})),n.d(i,"shimOnTrack",(function(){return se})),n.d(i,"shimPeerConnection",(function(){return ce})),n.d(i,"shimSenderGetStats",(function(){return fe})),n.d(i,"shimReceiverGetStats",(function(){return de})),n.d(i,"shimRemoveStream",(function(){return he})),n.d(i,"shimRTCDataChannel",(function(){return pe})),n.d(i,"shimAddTransceiver",(function(){return ve})),n.d(i,"shimGetParameters",(function(){return _e})),n.d(i,"shimCreateOffer",(function(){return ge})),n.d(i,"shimCreateAnswer",(function(){return me}));var o={};n.r(o),n.d(o,"shimLocalStreamsAPI",(function(){return ye})),n.d(o,"shimRemoteStreamsAPI",(function(){return be})),n.d(o,"shimCallbacksAPI",(function(){return Ce})),n.d(o,"shimGetUserMedia",(function(){return Se})),n.d(o,"shimConstraints",(function(){return Te})),n.d(o,"shimRTCIceServerUrls",(function(){return Ee})),n.d(o,"shimTrackEventTransceiver",(function(){return Ae})),n.d(o,"shimCreateOfferLegacy",(function(){return we})),n.d(o,"shimAudioContext",(function(){return Re}));var u={};n.r(u),n.d(u,"shimRTCIceCandidate",(function(){return ke})),n.d(u,"shimMaxMessageSize",(function(){return Pe})),n.d(u,"shimSendThrowTypeError",(function(){return xe})),n.d(u,"shimConnectionState",(function(){return De})),n.d(u,"removeExtmapAllowMixed",(function(){return Me})),n.d(u,"shimAddIceCandidateNullOrEmpty",(function(){return Ne})),n.d(u,"shimParameterlessSetLocalDescription",(function(){return Le}));var l=n(5),a={domain:"domain",uri:"userIdentity",connection_recovery_max_interval:"wsConnectionRecoveryMaxInterval",connection_recovery_min_interval:"wsConnectionRecoveryMinInterval",display_name:"userName",contact_uri:"uniqueClientId",no_answer_timeout:"noAnswerTimeout",session_timers:"sessionTimers",session_timers_refresh_method:"sessionTimersRefreshMethod",register:"needRegistration",register_expires:"registerExpires",registrar_server:"registrarServer",user_agent:"userAgent",authorization_jwt:"jwtToken",authorization_user:"jwtUser"},s={mediaConstraints:"mediaConstraints",mediaStream:"mediaStream",pcConfig:"peerConnectionConfig",rtcOfferConstraints:"rtcOfferConstraints",rtcAnswerConstraints:"rtcAnswerConstraints",extraHeaders:"extraHeaders",sessionTimersExpires:"sessionTimerInterval",codecPreferences:"codecPreferences"},c={userName:"display_name"},f="connecting",d="ready",h="connected",p="disconnected",v="newRTCSession",_="reconnecting",g="reconnected",m="failed",y="errorinfo",b={connecting:"connecting",disconnected:"disconnected",peerdisconnected:"peerdisconnected",failed:"failed",errorinfo:"errorinfo",icecandidate:"icecandidate",ringing:"ringing",connected:"connected",peerconnection:"peerconnection",remotestream:"remotestream",localstream:"localstream",localvideoadded:"localvideoadded",remotevideoadded:"remotevideoadded",localvideoremoved:"localvideoremoved",remotevideoremoved:"remotevideoremoved",upgradevideoaccessdenied:"upgradevideoaccessdenied",unmuted:"unmuted",muted:"muted",calltransferinitiated:"calltransferinitiated",calltransfersucceeded:"calltransfersucceeded"},C="init",S="connected",T="disconnected",E="connected",A="ended",w={hasConnected:"Connection is connected state",connectionNotInitiated:"The connection is not initiated",connectionStablishedOnce:"Connection stablished and can not initiated multiple times",invalidLogLevel:"Provided log level is invalid",sessionNotActive:"Session not active",userDeniedMediaAccess:"User Denied Media Access",requestFailed:"requestFailed",configurationError:"CONFIGURATION_ERROR",internalServerError:"Internal Error",notSupportedError:"NotSupportedError",invalidStateError:"InvalidStateError",terminated:"terminated",typeError:"TypeError",invalidEvent:"InvalidEvent",notConnected:"Not_Connected",failedToFetch:"Failed_To_Fetch",alreadyReplied:"AlreadyReplied",physicalDeviceChange:"Physical_Device_Change",connectionError:"Connection Error",registrationFailed:"registrationFailed",error:"error",removevideonotsupported:"removevideonotsupported",addvideonotsupported:"addvideonotsupported",webrtcnotsupported:"WebRTC_Not_Supported",callnotconnected:"callnotconnected"},R={userName:"userName",iceTimeout:"iceTimeout",enableWebRTCStats:"enableWebRTCStats",webRTCStatsInterval:"webRTCStatsInterval",lightOffOnVideoMute:"lightOffOnVideoMute",log:"log"},I={connected:"connected",connecting:"connecting",disconnected:"disconnected",newRTCSession:"newRTCSession",ready:"ready",reconnecting:"reconnecting",reconnected:"reconnected",failed:"failed",errorinfo:"errorinfo"},O={mode1:"packetization-mode=1"},k="audioinput",P={deviceready:"deviceready",devicechange:"devicechange",updatedstream:"updatedstream",audiooutputdevice:"audiooutputdevice",switchcamerastream:"switchcamerastream",mediaaccessdenied:"mediaaccessdenied",failed:"failed",errorinfo:"errorinfo",deviceselected:"deviceselected"},x=["VP8","rtx","VP9","H264","H264-mode1"],D=["OPUS","G722","PCMU","PCMA","telephone-event"],M={values:[void 0,null,"inactive","recvonly"]},N="Engage-Call-Transfer",L={resolution:["HD","SD","LD","QCIF"]},U={HD:{frameWidth:1280,frameHight:720,frameRate:{ideal:30,min:10}},SD:{frameWidth:640,frameHight:480,frameRate:{ideal:30,min:10}},LD:{frameWidth:320,frameHight:240,frameRate:{ideal:30,min:10}},QCIF:{frameWidth:176,frameHight:144,frameRate:{ideal:30,min:10}}},j=n(54);let F=!0,q=!0;function H(e,t,n){return(t=e.match(t))&&t.length>=n&&parseInt(t[n],10)}function V(e,t,n){if(e.RTCPeerConnection){const r=e.RTCPeerConnection.prototype,i=r.addEventListener;r.addEventListener=function(e,r){if(e!==t)return i.apply(this,arguments);var o=e=>{(e=n(e))&&(r.handleEvent?r.handleEvent(e):r(e))};return this._eventMap=this._eventMap||{},this._eventMap[t]||(this._eventMap[t]=new Map),this._eventMap[t].set(r,o),i.apply(this,[e,o])};const o=r.removeEventListener;r.removeEventListener=function(e,n){if(e!==t||!this._eventMap||!this._eventMap[t])return o.apply(this,arguments);if(!this._eventMap[t].has(n))return o.apply(this,arguments);var r=this._eventMap[t].get(n);return this._eventMap[t].delete(n),0===this._eventMap[t].size&&delete this._eventMap[t],0===Object.keys(this._eventMap).length&&delete this._eventMap,o.apply(this,[e,r])},Object.defineProperty(r,"on"+t,{get(){return this["_on"+t]},set(e){this["_on"+t]&&(this.removeEventListener(t,this["_on"+t]),delete this["_on"+t]),e&&this.addEventListener(t,this["_on"+t]=e)},enumerable:!0,configurable:!0})}}function W(e){return"boolean"!=typeof e?new Error("Argument type: "+typeof e+". Please use a boolean."):(F=e)?"adapter.js logging disabled":"adapter.js logging enabled"}function G(e){return"boolean"!=typeof e?new Error("Argument type: "+typeof e+". Please use a boolean."):(q=!e,"adapter.js deprecation warnings "+(e?"disabled":"enabled"))}function B(){"object"==typeof window&&(F||"undefined"!=typeof console&&"function"==typeof console.log&&console.log.apply(console,arguments))}function z(e,t){q&&console.warn(e+" is deprecated, please use "+t+" instead.")}function $(e){return"[object Object]"===Object.prototype.toString.call(e)}function J(e,t,n){const r=n?"outbound-rtp":"inbound-rtp",i=new Map;if(null===t)return i;const o=[];return e.forEach(e=>{"track"===e.type&&e.trackIdentifier===t.id&&o.push(e)}),o.forEach(t=>{e.forEach(n=>{n.type===r&&n.trackId===t.id&&function e(t,n,r){n&&!r.has(n.id)&&(r.set(n.id,n),Object.keys(n).forEach(i=>{i.endsWith("Id")?e(t,t.get(n[i]),r):i.endsWith("Ids")&&n[i].forEach(n=>{e(t,t.get(n),r)})}))}(e,n,i)})}),i}const K=B;function Y(e,t){const n=e&&e.navigator;if(n.mediaDevices){const e=function(e){if("object"!=typeof e||e.mandatory||e.optional)return e;const t={};return Object.keys(e).forEach(n=>{if("require"!==n&&"advanced"!==n&&"mediaSource"!==n){const r="object"==typeof e[n]?e[n]:{ideal:e[n]};void 0!==r.exact&&"number"==typeof r.exact&&(r.min=r.max=r.exact);const i=function(e,t){return e?e+t.charAt(0).toUpperCase()+t.slice(1):"deviceId"===t?"sourceId":t};if(void 0!==r.ideal){t.optional=t.optional||[];let e={};"number"==typeof r.ideal?(e[i("min",n)]=r.ideal,t.optional.push(e),e={},e[i("max",n)]=r.ideal):e[i("",n)]=r.ideal,t.optional.push(e)}void 0!==r.exact&&"number"!=typeof r.exact?(t.mandatory=t.mandatory||{},t.mandatory[i("",n)]=r.exact):["min","max"].forEach(e=>{void 0!==r[e]&&(t.mandatory=t.mandatory||{},t.mandatory[i(e,n)]=r[e])})}}),e.advanced&&(t.optional=(t.optional||[]).concat(e.advanced)),t},r=function(r,i){if(61<=t.version)return i(r);if((r=JSON.parse(JSON.stringify(r)))&&"object"==typeof r.audio&&((o=function(e,t,n){t in e&&!(n in e)&&(e[n]=e[t],delete e[t])})((r=JSON.parse(JSON.stringify(r))).audio,"autoGainControl","googAutoGainControl"),o(r.audio,"noiseSuppression","googNoiseSuppression"),r.audio=e(r.audio)),r&&"object"==typeof r.video){let u=r.video.facingMode;u=u&&("object"==typeof u?u:{ideal:u});var o=t.version<66;if(u&&("user"===u.exact||"environment"===u.exact||"user"===u.ideal||"environment"===u.ideal)&&(!n.mediaDevices.getSupportedConstraints||!n.mediaDevices.getSupportedConstraints().facingMode||o)){let t;if(delete r.video.facingMode,"environment"===u.exact||"environment"===u.ideal?t=["back","rear"]:"user"!==u.exact&&"user"!==u.ideal||(t=["front"]),t)return n.mediaDevices.enumerateDevices().then(n=>{let o=(n=n.filter(e=>"videoinput"===e.kind)).find(e=>t.some(t=>e.label.toLowerCase().includes(t)));return!o&&n.length&&t.includes("back")&&(o=n[n.length-1]),o&&(r.video.deviceId=u.exact?{exact:o.deviceId}:{ideal:o.deviceId}),r.video=e(r.video),K("chrome: "+JSON.stringify(r)),i(r)})}r.video=e(r.video)}return K("chrome: "+JSON.stringify(r)),i(r)},i=function(e){return 64<=t.version?e:{name:{PermissionDeniedError:"NotAllowedError",PermissionDismissedError:"NotAllowedError",InvalidStateError:"NotAllowedError",DevicesNotFoundError:"NotFoundError",ConstraintNotSatisfiedError:"OverconstrainedError",TrackStartError:"NotReadableError",MediaDeviceFailedDueToShutdown:"NotAllowedError",MediaDeviceKillSwitchOn:"NotAllowedError",TabCaptureError:"AbortError",ScreenCaptureError:"AbortError",DeviceCaptureError:"AbortError"}[e.name]||e.name,message:e.message,constraint:e.constraint||e.constraintName,toString(){return this.name+(this.message&&": ")+this.message}}};if(n.getUserMedia=function(e,t,o){r(e,e=>{n.webkitGetUserMedia(e,t,e=>{o&&o(i(e))})})}.bind(n),n.mediaDevices.getUserMedia){const e=n.mediaDevices.getUserMedia.bind(n.mediaDevices);n.mediaDevices.getUserMedia=function(t){return r(t,t=>e(t).then(e=>{if(t.audio&&!e.getAudioTracks().length||t.video&&!e.getVideoTracks().length)throw e.getTracks().forEach(e=>{e.stop()}),new DOMException("","NotFoundError");return e},e=>Promise.reject(i(e))))}}}}function X(e,t){e.navigator.mediaDevices&&"getDisplayMedia"in e.navigator.mediaDevices||e.navigator.mediaDevices&&("function"==typeof t?e.navigator.mediaDevices.getDisplayMedia=function(n){return t(n).then(t=>{var r=n.video&&n.video.width,i=n.video&&n.video.height,o=n.video&&n.video.frameRate;return n.video={mandatory:{chromeMediaSource:"desktop",chromeMediaSourceId:t,maxFrameRate:o||3}},r&&(n.video.mandatory.maxWidth=r),i&&(n.video.mandatory.maxHeight=i),e.navigator.mediaDevices.getUserMedia(n)})}:console.error("shimGetDisplayMedia: getSourceId argument is not a function"))}function Q(e){e.MediaStream=e.MediaStream||e.webkitMediaStream}function Z(e){if("object"!=typeof e||!e.RTCPeerConnection||"ontrack"in e.RTCPeerConnection.prototype)V(e,"track",e=>(e.transceiver||Object.defineProperty(e,"transceiver",{value:{receiver:e.receiver}}),e));else{Object.defineProperty(e.RTCPeerConnection.prototype,"ontrack",{get(){return this._ontrack},set(e){this._ontrack&&this.removeEventListener("track",this._ontrack),this.addEventListener("track",this._ontrack=e)},enumerable:!0,configurable:!0});const t=e.RTCPeerConnection.prototype.setRemoteDescription;e.RTCPeerConnection.prototype.setRemoteDescription=function(){return this._ontrackpoly||(this._ontrackpoly=t=>{t.stream.addEventListener("addtrack",n=>{let r;r=e.RTCPeerConnection.prototype.getReceivers?this.getReceivers().find(e=>e.track&&e.track.id===n.track.id):{track:n.track};const i=new Event("track");i.track=n.track,i.receiver=r,i.transceiver={receiver:r},i.streams=[t.stream],this.dispatchEvent(i)}),t.stream.getTracks().forEach(n=>{let r;r=e.RTCPeerConnection.prototype.getReceivers?this.getReceivers().find(e=>e.track&&e.track.id===n.id):{track:n};const i=new Event("track");i.track=n,i.receiver=r,i.transceiver={receiver:r},i.streams=[t.stream],this.dispatchEvent(i)})},this.addEventListener("addstream",this._ontrackpoly)),t.apply(this,arguments)}}}function ee(e){if("object"==typeof e&&e.RTCPeerConnection&&!("getSenders"in e.RTCPeerConnection.prototype)&&"createDTMFSender"in e.RTCPeerConnection.prototype){const t=function(e,t){return{track:t,get dtmf(){return void 0===this._dtmf&&("audio"===t.kind?this._dtmf=e.createDTMFSender(t):this._dtmf=null),this._dtmf},_pc:e}};if(!e.RTCPeerConnection.prototype.getSenders){e.RTCPeerConnection.prototype.getSenders=function(){return this._senders=this._senders||[],this._senders.slice()};const n=e.RTCPeerConnection.prototype.addTrack;e.RTCPeerConnection.prototype.addTrack=function(e,r){let i=n.apply(this,arguments);return i||(i=t(this,e),this._senders.push(i)),i};const r=e.RTCPeerConnection.prototype.removeTrack;e.RTCPeerConnection.prototype.removeTrack=function(e){r.apply(this,arguments),-1!==(e=this._senders.indexOf(e))&&this._senders.splice(e,1)}}const n=e.RTCPeerConnection.prototype.addStream;e.RTCPeerConnection.prototype.addStream=function(e){this._senders=this._senders||[],n.apply(this,[e]),e.getTracks().forEach(e=>{this._senders.push(t(this,e))})};const r=e.RTCPeerConnection.prototype.removeStream;e.RTCPeerConnection.prototype.removeStream=function(e){this._senders=this._senders||[],r.apply(this,[e]),e.getTracks().forEach(e=>{var t=this._senders.find(t=>t.track===e);t&&this._senders.splice(this._senders.indexOf(t),1)})}}else if("object"==typeof e&&e.RTCPeerConnection&&"getSenders"in e.RTCPeerConnection.prototype&&"createDTMFSender"in e.RTCPeerConnection.prototype&&e.RTCRtpSender&&!("dtmf"in e.RTCRtpSender.prototype)){const t=e.RTCPeerConnection.prototype.getSenders;e.RTCPeerConnection.prototype.getSenders=function(){const e=t.apply(this,[]);return e.forEach(e=>e._pc=this),e},Object.defineProperty(e.RTCRtpSender.prototype,"dtmf",{get(){return void 0===this._dtmf&&("audio"===this.track.kind?this._dtmf=this._pc.createDTMFSender(this.track):this._dtmf=null),this._dtmf}})}}function te(e){if(e.RTCPeerConnection){const t=e.RTCPeerConnection.prototype.getStats;e.RTCPeerConnection.prototype.getStats=function(){const[e,n,r]=arguments;if(0<arguments.length&&"function"==typeof e)return t.apply(this,arguments);if(0===t.length&&(0===arguments.length||"function"!=typeof e))return t.apply(this,[]);const i=function(e){const t={};return e.result().forEach(e=>{const n={id:e.id,timestamp:e.timestamp,type:{localcandidate:"local-candidate",remotecandidate:"remote-candidate"}[e.type]||e.type};e.names().forEach(t=>{n[t]=e.stat(t)}),t[n.id]=n}),t},o=function(e){return new Map(Object.keys(e).map(t=>[t,e[t]]))};return 2<=arguments.length?t.apply(this,[function(e){n(o(i(e)))},e]):new Promise((e,n)=>{t.apply(this,[function(t){e(o(i(t)))},n])}).then(n,r)}}}function ne(e){if("object"==typeof e&&e.RTCPeerConnection&&e.RTCRtpSender&&e.RTCRtpReceiver){if(!("getStats"in e.RTCRtpSender.prototype)){const t=e.RTCPeerConnection.prototype.getSenders;t&&(e.RTCPeerConnection.prototype.getSenders=function(){const e=t.apply(this,[]);return e.forEach(e=>e._pc=this),e});const n=e.RTCPeerConnection.prototype.addTrack;n&&(e.RTCPeerConnection.prototype.addTrack=function(){const e=n.apply(this,arguments);return e._pc=this,e}),e.RTCRtpSender.prototype.getStats=function(){const e=this;return this._pc.getStats().then(t=>J(t,e.track,!0))}}if(!("getStats"in e.RTCRtpReceiver.prototype)){const t=e.RTCPeerConnection.prototype.getReceivers;t&&(e.RTCPeerConnection.prototype.getReceivers=function(){const e=t.apply(this,[]);return e.forEach(e=>e._pc=this),e}),V(e,"track",e=>(e.receiver._pc=e.srcElement,e)),e.RTCRtpReceiver.prototype.getStats=function(){const e=this;return this._pc.getStats().then(t=>J(t,e.track,!1))}}if("getStats"in e.RTCRtpSender.prototype&&"getStats"in e.RTCRtpReceiver.prototype){const t=e.RTCPeerConnection.prototype.getStats;e.RTCPeerConnection.prototype.getStats=function(){if(0<arguments.length&&arguments[0]instanceof e.MediaStreamTrack){const e=arguments[0];let t,n,r;return this.getSenders().forEach(n=>{n.track===e&&(t?r=!0:t=n)}),this.getReceivers().forEach(t=>(t.track===e&&(n?r=!0:n=t),t.track===e)),r||t&&n?Promise.reject(new DOMException("There are more than one sender or receiver for the track.","InvalidAccessError")):t?t.getStats():n?n.getStats():Promise.reject(new DOMException("There is no sender or receiver for the track.","InvalidAccessError"))}return t.apply(this,arguments)}}}}function re(e){e.RTCPeerConnection.prototype.getLocalStreams=function(){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},Object.keys(this._shimmedLocalStreams).map(e=>this._shimmedLocalStreams[e][0])};const t=e.RTCPeerConnection.prototype.addTrack;e.RTCPeerConnection.prototype.addTrack=function(e,n){if(!n)return t.apply(this,arguments);this._shimmedLocalStreams=this._shimmedLocalStreams||{};var r=t.apply(this,arguments);return this._shimmedLocalStreams[n.id]?-1===this._shimmedLocalStreams[n.id].indexOf(r)&&this._shimmedLocalStreams[n.id].push(r):this._shimmedLocalStreams[n.id]=[n,r],r};const n=e.RTCPeerConnection.prototype.addStream;e.RTCPeerConnection.prototype.addStream=function(e){this._shimmedLocalStreams=this._shimmedLocalStreams||{},e.getTracks().forEach(e=>{if(this.getSenders().find(t=>t.track===e))throw new DOMException("Track already exists.","InvalidAccessError")});const t=this.getSenders();n.apply(this,arguments);var r=this.getSenders().filter(e=>-1===t.indexOf(e));this._shimmedLocalStreams[e.id]=[e].concat(r)};const r=e.RTCPeerConnection.prototype.removeStream;e.RTCPeerConnection.prototype.removeStream=function(e){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},delete this._shimmedLocalStreams[e.id],r.apply(this,arguments)};const i=e.RTCPeerConnection.prototype.removeTrack;e.RTCPeerConnection.prototype.removeTrack=function(e){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},e&&Object.keys(this._shimmedLocalStreams).forEach(t=>{var n=this._shimmedLocalStreams[t].indexOf(e);-1!==n&&this._shimmedLocalStreams[t].splice(n,1),1===this._shimmedLocalStreams[t].length&&delete this._shimmedLocalStreams[t]}),i.apply(this,arguments)}}function ie(e,t){if(e.RTCPeerConnection){if(e.RTCPeerConnection.prototype.addTrack&&65<=t.version)return re(e);const r=e.RTCPeerConnection.prototype.getLocalStreams;e.RTCPeerConnection.prototype.getLocalStreams=function(){const e=r.apply(this);return this._reverseStreams=this._reverseStreams||{},e.map(e=>this._reverseStreams[e.id])};const i=e.RTCPeerConnection.prototype.addStream;e.RTCPeerConnection.prototype.addStream=function(t){var n;this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{},t.getTracks().forEach(e=>{if(this.getSenders().find(t=>t.track===e))throw new DOMException("Track already exists.","InvalidAccessError")}),this._reverseStreams[t.id]||(n=new e.MediaStream(t.getTracks()),this._streams[t.id]=n,this._reverseStreams[n.id]=t,t=n),i.apply(this,[t])};const o=e.RTCPeerConnection.prototype.removeStream;e.RTCPeerConnection.prototype.removeStream=function(e){this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{},o.apply(this,[this._streams[e.id]||e]),delete this._reverseStreams[(this._streams[e.id]||e).id],delete this._streams[e.id]},e.RTCPeerConnection.prototype.addTrack=function(t,n){if("closed"===this.signalingState)throw new DOMException("The RTCPeerConnection's signalingState is 'closed'.","InvalidStateError");const r=[].slice.call(arguments,1);if(1!==r.length||!r[0].getTracks().find(e=>e===t))throw new DOMException("The adapter.js addTrack polyfill only supports a single  stream which is associated with the specified track.","NotSupportedError");var i;if(this.getSenders().find(e=>e.track===t))throw new DOMException("Track already exists.","InvalidAccessError");this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{};const o=this._streams[n.id];return o?(o.addTrack(t),Promise.resolve().then(()=>{this.dispatchEvent(new Event("negotiationneeded"))})):(i=new e.MediaStream([t]),this._streams[n.id]=i,this._reverseStreams[i.id]=n,this.addStream(i)),this.getSenders().find(e=>e.track===t)},["createOffer","createAnswer"].forEach((function(t){const r=e.RTCPeerConnection.prototype[t];e.RTCPeerConnection.prototype[t]={[t](){const e=arguments;return arguments.length&&"function"==typeof arguments[0]?r.apply(this,[t=>{t=n(this,t),e[0].apply(null,[t])},t=>{e[1]&&e[1].apply(null,t)},arguments[2]]):r.apply(this,arguments).then(e=>n(this,e))}}[t]}));const u=e.RTCPeerConnection.prototype.setLocalDescription;e.RTCPeerConnection.prototype.setLocalDescription=function(){return arguments.length&&arguments[0].type&&(arguments[0]=function(e,t){let n=t.sdp;return Object.keys(e._reverseStreams||[]).forEach(t=>{var r=e._reverseStreams[t];t=e._streams[r.id];n=n.replace(new RegExp(r.id,"g"),t.id)}),new RTCSessionDescription({type:t.type,sdp:n})}(this,arguments[0])),u.apply(this,arguments)};const l=Object.getOwnPropertyDescriptor(e.RTCPeerConnection.prototype,"localDescription");function n(e,t){let n=t.sdp;return Object.keys(e._reverseStreams||[]).forEach(t=>{var r=e._reverseStreams[t];t=e._streams[r.id];n=n.replace(new RegExp(t.id,"g"),r.id)}),new RTCSessionDescription({type:t.type,sdp:n})}Object.defineProperty(e.RTCPeerConnection.prototype,"localDescription",{get(){var e=l.get.apply(this);return""===e.type?e:n(this,e)}}),e.RTCPeerConnection.prototype.removeTrack=function(e){if("closed"===this.signalingState)throw new DOMException("The RTCPeerConnection's signalingState is 'closed'.","InvalidStateError");if(!e._pc)throw new DOMException("Argument 1 of RTCPeerConnection.removeTrack does not implement interface RTCRtpSender.","TypeError");if(e._pc!==this)throw new DOMException("Sender was not created by this connection.","InvalidAccessError");let t;this._streams=this._streams||{},Object.keys(this._streams).forEach(n=>{this._streams[n].getTracks().find(t=>e.track===t)&&(t=this._streams[n])}),t&&(1===t.getTracks().length?this.removeStream(this._reverseStreams[t.id]):t.removeTrack(e.track),this.dispatchEvent(new Event("negotiationneeded")))}}}function oe(e,t){!e.RTCPeerConnection&&e.webkitRTCPeerConnection&&(e.RTCPeerConnection=e.webkitRTCPeerConnection),e.RTCPeerConnection&&t.version<53&&["setLocalDescription","setRemoteDescription","addIceCandidate"].forEach((function(t){const n=e.RTCPeerConnection.prototype[t];e.RTCPeerConnection.prototype[t]={[t](){return arguments[0]=new("addIceCandidate"===t?e.RTCIceCandidate:e.RTCSessionDescription)(arguments[0]),n.apply(this,arguments)}}[t]}))}function ue(e,t){V(e,"negotiationneeded",e=>{const n=e.target;if(!(t.version<72||n.getConfiguration&&"plan-b"===n.getConfiguration().sdpSemantics)||"stable"===n.signalingState)return e})}function le(e,t){const n=e&&e.navigator,r=e&&e.MediaStreamTrack;if(n.getUserMedia=function(e,t,r){z("navigator.getUserMedia","navigator.mediaDevices.getUserMedia"),n.mediaDevices.getUserMedia(e).then(t,r)},!(55<t.version&&"autoGainControl"in n.mediaDevices.getSupportedConstraints())){const e=function(e,t,n){t in e&&!(n in e)&&(e[n]=e[t],delete e[t])},t=n.mediaDevices.getUserMedia.bind(n.mediaDevices);if(n.mediaDevices.getUserMedia=function(n){return"object"==typeof n&&"object"==typeof n.audio&&(n=JSON.parse(JSON.stringify(n)),e(n.audio,"autoGainControl","mozAutoGainControl"),e(n.audio,"noiseSuppression","mozNoiseSuppression")),t(n)},r&&r.prototype.getSettings){const t=r.prototype.getSettings;r.prototype.getSettings=function(){var n=t.apply(this,arguments);return e(n,"mozAutoGainControl","autoGainControl"),e(n,"mozNoiseSuppression","noiseSuppression"),n}}if(r&&r.prototype.applyConstraints){const t=r.prototype.applyConstraints;r.prototype.applyConstraints=function(n){return"audio"===this.kind&&"object"==typeof n&&(n=JSON.parse(JSON.stringify(n)),e(n,"autoGainControl","mozAutoGainControl"),e(n,"noiseSuppression","mozNoiseSuppression")),t.apply(this,[n])}}}}function ae(e,t){e.navigator.mediaDevices&&"getDisplayMedia"in e.navigator.mediaDevices||e.navigator.mediaDevices&&(e.navigator.mediaDevices.getDisplayMedia=function(n){if(n&&n.video)return!0===n.video?n.video={mediaSource:t}:n.video.mediaSource=t,e.navigator.mediaDevices.getUserMedia(n);{const e=new DOMException("getDisplayMedia without video constraints is undefined");return e.name="NotFoundError",e.code=8,Promise.reject(e)}})}function se(e){"object"==typeof e&&e.RTCTrackEvent&&"receiver"in e.RTCTrackEvent.prototype&&!("transceiver"in e.RTCTrackEvent.prototype)&&Object.defineProperty(e.RTCTrackEvent.prototype,"transceiver",{get(){return{receiver:this.receiver}}})}function ce(e,t){if("object"==typeof e&&(e.RTCPeerConnection||e.mozRTCPeerConnection)){!e.RTCPeerConnection&&e.mozRTCPeerConnection&&(e.RTCPeerConnection=e.mozRTCPeerConnection),t.version<53&&["setLocalDescription","setRemoteDescription","addIceCandidate"].forEach((function(t){const n=e.RTCPeerConnection.prototype[t];e.RTCPeerConnection.prototype[t]={[t](){return arguments[0]=new("addIceCandidate"===t?e.RTCIceCandidate:e.RTCSessionDescription)(arguments[0]),n.apply(this,arguments)}}[t]}));const n={inboundrtp:"inbound-rtp",outboundrtp:"outbound-rtp",candidatepair:"candidate-pair",localcandidate:"local-candidate",remotecandidate:"remote-candidate"},r=e.RTCPeerConnection.prototype.getStats;e.RTCPeerConnection.prototype.getStats=function(){const[e,i,o]=arguments;return r.apply(this,[e||null]).then(e=>{if(t.version<53&&!i)try{e.forEach(e=>{e.type=n[e.type]||e.type})}catch(t){if("TypeError"!==t.name)throw t;e.forEach((t,r)=>{e.set(r,Object.assign({},t,{type:n[t.type]||t.type}))})}return e}).then(i,o)}}}function fe(e){if("object"==typeof e&&e.RTCPeerConnection&&e.RTCRtpSender&&(!e.RTCRtpSender||!("getStats"in e.RTCRtpSender.prototype))){const t=e.RTCPeerConnection.prototype.getSenders;t&&(e.RTCPeerConnection.prototype.getSenders=function(){const e=t.apply(this,[]);return e.forEach(e=>e._pc=this),e});const n=e.RTCPeerConnection.prototype.addTrack;n&&(e.RTCPeerConnection.prototype.addTrack=function(){const e=n.apply(this,arguments);return e._pc=this,e}),e.RTCRtpSender.prototype.getStats=function(){return this.track?this._pc.getStats(this.track):Promise.resolve(new Map)}}}function de(e){if("object"==typeof e&&e.RTCPeerConnection&&e.RTCRtpSender&&(!e.RTCRtpSender||!("getStats"in e.RTCRtpReceiver.prototype))){const t=e.RTCPeerConnection.prototype.getReceivers;t&&(e.RTCPeerConnection.prototype.getReceivers=function(){const e=t.apply(this,[]);return e.forEach(e=>e._pc=this),e}),V(e,"track",e=>(e.receiver._pc=e.srcElement,e)),e.RTCRtpReceiver.prototype.getStats=function(){return this._pc.getStats(this.track)}}}function he(e){!e.RTCPeerConnection||"removeStream"in e.RTCPeerConnection.prototype||(e.RTCPeerConnection.prototype.removeStream=function(e){z("removeStream","removeTrack"),this.getSenders().forEach(t=>{t.track&&e.getTracks().includes(t.track)&&this.removeTrack(t)})})}function pe(e){e.DataChannel&&!e.RTCDataChannel&&(e.RTCDataChannel=e.DataChannel)}function ve(e){if("object"==typeof e&&e.RTCPeerConnection){const t=e.RTCPeerConnection.prototype.addTransceiver;t&&(e.RTCPeerConnection.prototype.addTransceiver=function(){this.setParametersPromises=[];const e=arguments[1];var n=e&&"sendEncodings"in e;n&&e.sendEncodings.forEach(e=>{if("rid"in e){if(!/^[a-z0-9]{0,16}$/i.test(e.rid))throw new TypeError("Invalid RID value provided.")}if("scaleResolutionDownBy"in e&&!(1<=parseFloat(e.scaleResolutionDownBy)))throw new RangeError("scale_resolution_down_by must be >= 1.0");if("maxFramerate"in e&&!(0<=parseFloat(e.maxFramerate)))throw new RangeError("max_framerate must be >= 0.0")});var r=t.apply(this,arguments);if(n){const t=r.sender,n=t.getParameters();"encodings"in n&&(1!==n.encodings.length||0!==Object.keys(n.encodings[0]).length)||(n.encodings=e.sendEncodings,t.sendEncodings=e.sendEncodings,this.setParametersPromises.push(t.setParameters(n).then(()=>{delete t.sendEncodings}).catch(()=>{delete t.sendEncodings})))}return r})}}function _e(e){if("object"==typeof e&&e.RTCRtpSender){const t=e.RTCRtpSender.prototype.getParameters;t&&(e.RTCRtpSender.prototype.getParameters=function(){const e=t.apply(this,arguments);return"encodings"in e||(e.encodings=[].concat(this.sendEncodings||[{}])),e})}}function ge(e){if("object"==typeof e&&e.RTCPeerConnection){const t=e.RTCPeerConnection.prototype.createOffer;e.RTCPeerConnection.prototype.createOffer=function(){return this.setParametersPromises&&this.setParametersPromises.length?Promise.all(this.setParametersPromises).then(()=>t.apply(this,arguments)).finally(()=>{this.setParametersPromises=[]}):t.apply(this,arguments)}}}function me(e){if("object"==typeof e&&e.RTCPeerConnection){const t=e.RTCPeerConnection.prototype.createAnswer;e.RTCPeerConnection.prototype.createAnswer=function(){return this.setParametersPromises&&this.setParametersPromises.length?Promise.all(this.setParametersPromises).then(()=>t.apply(this,arguments)).finally(()=>{this.setParametersPromises=[]}):t.apply(this,arguments)}}}function ye(e){if("object"==typeof e&&e.RTCPeerConnection){if("getLocalStreams"in e.RTCPeerConnection.prototype||(e.RTCPeerConnection.prototype.getLocalStreams=function(){return this._localStreams||(this._localStreams=[]),this._localStreams}),!("addStream"in e.RTCPeerConnection.prototype)){const t=e.RTCPeerConnection.prototype.addTrack;e.RTCPeerConnection.prototype.addStream=function(e){this._localStreams||(this._localStreams=[]),this._localStreams.includes(e)||this._localStreams.push(e),e.getAudioTracks().forEach(n=>t.call(this,n,e)),e.getVideoTracks().forEach(n=>t.call(this,n,e))},e.RTCPeerConnection.prototype.addTrack=function(e,...n){return n&&n.forEach(e=>{this._localStreams?this._localStreams.includes(e)||this._localStreams.push(e):this._localStreams=[e]}),t.apply(this,arguments)}}"removeStream"in e.RTCPeerConnection.prototype||(e.RTCPeerConnection.prototype.removeStream=function(e){this._localStreams||(this._localStreams=[]);var t=this._localStreams.indexOf(e);if(-1!==t){this._localStreams.splice(t,1);const n=e.getTracks();this.getSenders().forEach(e=>{n.includes(e.track)&&this.removeTrack(e)})}})}}function be(e){if("object"==typeof e&&e.RTCPeerConnection&&("getRemoteStreams"in e.RTCPeerConnection.prototype||(e.RTCPeerConnection.prototype.getRemoteStreams=function(){return this._remoteStreams||[]}),!("onaddstream"in e.RTCPeerConnection.prototype))){Object.defineProperty(e.RTCPeerConnection.prototype,"onaddstream",{get(){return this._onaddstream},set(e){this._onaddstream&&(this.removeEventListener("addstream",this._onaddstream),this.removeEventListener("track",this._onaddstreampoly)),this.addEventListener("addstream",this._onaddstream=e),this.addEventListener("track",this._onaddstreampoly=e=>{e.streams.forEach(e=>{if(this._remoteStreams||(this._remoteStreams=[]),!this._remoteStreams.includes(e)){this._remoteStreams.push(e);const t=new Event("addstream");t.stream=e,this.dispatchEvent(t)}})})}});const t=e.RTCPeerConnection.prototype.setRemoteDescription;e.RTCPeerConnection.prototype.setRemoteDescription=function(){const e=this;return this._onaddstreampoly||this.addEventListener("track",this._onaddstreampoly=function(t){t.streams.forEach(t=>{if(e._remoteStreams||(e._remoteStreams=[]),!(0<=e._remoteStreams.indexOf(t))){e._remoteStreams.push(t);const n=new Event("addstream");n.stream=t,e.dispatchEvent(n)}})}),t.apply(e,arguments)}}}function Ce(e){if("object"==typeof e&&e.RTCPeerConnection){const t=e.RTCPeerConnection.prototype,n=t.createOffer,r=t.createAnswer,i=t.setLocalDescription,o=t.setRemoteDescription,u=t.addIceCandidate;t.createOffer=function(e,t){var r=2<=arguments.length?arguments[2]:e;const i=n.apply(this,[r]);return t?(i.then(e,t),Promise.resolve()):i},t.createAnswer=function(e,t){var n=2<=arguments.length?arguments[2]:e;const i=r.apply(this,[n]);return t?(i.then(e,t),Promise.resolve()):i},e=function(e,t,n){const r=i.apply(this,[e]);return n?(r.then(t,n),Promise.resolve()):r},t.setLocalDescription=e,t.setRemoteDescription=function(e,t,n){const r=o.apply(this,[e]);return n?(r.then(t,n),Promise.resolve()):r},t.addIceCandidate=function(e,t,n){const r=u.apply(this,[e]);return n?(r.then(t,n),Promise.resolve()):r}}}function Se(e){const t=e&&e.navigator;if(t.mediaDevices&&t.mediaDevices.getUserMedia){const e=t.mediaDevices,n=e.getUserMedia.bind(e);t.mediaDevices.getUserMedia=e=>n(Te(e))}!t.getUserMedia&&t.mediaDevices&&t.mediaDevices.getUserMedia&&(t.getUserMedia=function(e,n,r){t.mediaDevices.getUserMedia(e).then(n,r)}.bind(t))}function Te(e){return e&&void 0!==e.video?Object.assign({},e,{video:function e(t){return $(t)?Object.keys(t).reduce((function(n,r){var i=(o=$(t[r]))?e(t[r]):t[r],o=o&&!Object.keys(i).length;return void 0===i||o?n:Object.assign(n,{[r]:i})}),{}):t}(e.video)}):e}function Ee(e){if(e.RTCPeerConnection){const t=e.RTCPeerConnection;e.RTCPeerConnection=function(e,n){if(e&&e.iceServers){const t=[];for(let n=0;n<e.iceServers.length;n++){let r=e.iceServers[n];!r.hasOwnProperty("urls")&&r.hasOwnProperty("url")?(z("RTCIceServer.url","RTCIceServer.urls"),r=JSON.parse(JSON.stringify(r)),r.urls=r.url,delete r.url,t.push(r)):t.push(e.iceServers[n])}e.iceServers=t}return new t(e,n)},e.RTCPeerConnection.prototype=t.prototype,"generateCertificate"in t&&Object.defineProperty(e.RTCPeerConnection,"generateCertificate",{get:()=>t.generateCertificate})}}function Ae(e){"object"==typeof e&&e.RTCTrackEvent&&"receiver"in e.RTCTrackEvent.prototype&&!("transceiver"in e.RTCTrackEvent.prototype)&&Object.defineProperty(e.RTCTrackEvent.prototype,"transceiver",{get(){return{receiver:this.receiver}}})}function we(e){const t=e.RTCPeerConnection.prototype.createOffer;e.RTCPeerConnection.prototype.createOffer=function(e){if(e){void 0!==e.offerToReceiveAudio&&(e.offerToReceiveAudio=!!e.offerToReceiveAudio);const t=this.getTransceivers().find(e=>"audio"===e.receiver.track.kind);!1===e.offerToReceiveAudio&&t?"sendrecv"===t.direction?t.setDirection?t.setDirection("sendonly"):t.direction="sendonly":"recvonly"===t.direction&&(t.setDirection?t.setDirection("inactive"):t.direction="inactive"):!0!==e.offerToReceiveAudio||t||this.addTransceiver("audio"),void 0!==e.offerToReceiveVideo&&(e.offerToReceiveVideo=!!e.offerToReceiveVideo);const n=this.getTransceivers().find(e=>"video"===e.receiver.track.kind);!1===e.offerToReceiveVideo&&n?"sendrecv"===n.direction?n.setDirection?n.setDirection("sendonly"):n.direction="sendonly":"recvonly"===n.direction&&(n.setDirection?n.setDirection("inactive"):n.direction="inactive"):!0!==e.offerToReceiveVideo||n||this.addTransceiver("video")}return t.apply(this,arguments)}}function Re(e){"object"!=typeof e||e.AudioContext||(e.AudioContext=e.webkitAudioContext)}var Ie=n(55),Oe=n.n(Ie);function ke(e){if(e.RTCIceCandidate&&(!e.RTCIceCandidate||!("foundation"in e.RTCIceCandidate.prototype))){const t=e.RTCIceCandidate;e.RTCIceCandidate=function(e){if("object"==typeof e&&e.candidate&&0===e.candidate.indexOf("a=")&&((e=JSON.parse(JSON.stringify(e))).candidate=e.candidate.substr(2)),e.candidate&&e.candidate.length){var n=new t(e),r=Oe.a.parseCandidate(e.candidate);const i=Object.assign(n,r);return i.toJSON=function(){return{candidate:i.candidate,sdpMid:i.sdpMid,sdpMLineIndex:i.sdpMLineIndex,usernameFragment:i.usernameFragment}},i}return new t(e)},e.RTCIceCandidate.prototype=t.prototype,V(e,"icecandidate",t=>(t.candidate&&Object.defineProperty(t,"candidate",{value:new e.RTCIceCandidate(t.candidate),writable:"false"}),t))}}function Pe(e,t){if(e.RTCPeerConnection){"sctp"in e.RTCPeerConnection.prototype||Object.defineProperty(e.RTCPeerConnection.prototype,"sctp",{get(){return void 0===this._sctp?null:this._sctp}});const n=e.RTCPeerConnection.prototype.setRemoteDescription;e.RTCPeerConnection.prototype.setRemoteDescription=function(){if(this._sctp=null,"chrome"===t.browser&&76<=t.version&&("plan-b"===(e=this.getConfiguration().sdpSemantics)&&Object.defineProperty(this,"sctp",{get(){return void 0===this._sctp?null:this._sctp},enumerable:!0,configurable:!0})),function(e){if(!e||!e.sdp)return!1;const t=Oe.a.splitSections(e.sdp);return t.shift(),t.some(e=>{const t=Oe.a.parseMLine(e);return t&&"application"===t.kind&&-1!==t.protocol.indexOf("SCTP")})}(arguments[0])){var e=function(e){let n=65536;return"firefox"===t.browser&&(n=t.version<57?-1===e?16384:2147483637:t.version<60?57===t.version?65535:65536:2147483637),n}(r=function(e){return null===(e=e.sdp.match(/mozilla...THIS_IS_SDPARTA-(\d+)/))||e.length<2||(e=parseInt(e[1],10))!=e?-1:e}(arguments[0])),r=function(e,n){let r=65536;"firefox"===t.browser&&57===t.version&&(r=65535);const i=Oe.a.matchPrefix(e.sdp,"a=max-message-size:");return 0<i.length?r=parseInt(i[0].substr(19),10):"firefox"===t.browser&&-1!==n&&(r=2147483637),r}(arguments[0],r);let n;n=0===e&&0===r?Number.POSITIVE_INFINITY:0===e||0===r?Math.max(e,r):Math.min(e,r),r={},Object.defineProperty(r,"maxMessageSize",{get:()=>n}),this._sctp=r}return n.apply(this,arguments)}}}function xe(e){if(e.RTCPeerConnection&&"createDataChannel"in e.RTCPeerConnection.prototype){const n=e.RTCPeerConnection.prototype.createDataChannel;function t(e,t){const n=e.send;e.send=function(){var r=(r=arguments[0]).length||r.size||r.byteLength;if("open"===e.readyState&&t.sctp&&r>t.sctp.maxMessageSize)throw new TypeError("Message too large (can send a maximum of "+t.sctp.maxMessageSize+" bytes)");return n.apply(e,arguments)}}e.RTCPeerConnection.prototype.createDataChannel=function(){var e=n.apply(this,arguments);return t(e,this),e},V(e,"datachannel",e=>(t(e.channel,e.target),e))}}function De(e){if(e.RTCPeerConnection&&!("connectionState"in e.RTCPeerConnection.prototype)){const t=e.RTCPeerConnection.prototype;Object.defineProperty(t,"connectionState",{get(){return{completed:"connected",checking:"connecting"}[this.iceConnectionState]||this.iceConnectionState},enumerable:!0,configurable:!0}),Object.defineProperty(t,"onconnectionstatechange",{get(){return this._onconnectionstatechange||null},set(e){this._onconnectionstatechange&&(this.removeEventListener("connectionstatechange",this._onconnectionstatechange),delete this._onconnectionstatechange),e&&this.addEventListener("connectionstatechange",this._onconnectionstatechange=e)},enumerable:!0,configurable:!0}),["setLocalDescription","setRemoteDescription"].forEach(e=>{const n=t[e];t[e]=function(){return this._connectionstatechangepoly||(this._connectionstatechangepoly=e=>{const t=e.target;var n;return t._lastConnectionState!==t.connectionState&&(t._lastConnectionState=t.connectionState,n=new Event("connectionstatechange",e),t.dispatchEvent(n)),e},this.addEventListener("iceconnectionstatechange",this._connectionstatechangepoly)),n.apply(this,arguments)}})}}function Me(e,t){if(e.RTCPeerConnection&&!("chrome"===t.browser&&71<=t.version||"safari"===t.browser&&605<=t.version)){const t=e.RTCPeerConnection.prototype.setRemoteDescription;e.RTCPeerConnection.prototype.setRemoteDescription=function(n){var r;return n&&n.sdp&&-1!==n.sdp.indexOf("\na=extmap-allow-mixed")&&(r=n.sdp.split("\n").filter(e=>"a=extmap-allow-mixed"!==e.trim()).join("\n"),e.RTCSessionDescription&&n instanceof e.RTCSessionDescription?arguments[0]=new e.RTCSessionDescription({type:n.type,sdp:r}):n.sdp=r),t.apply(this,arguments)}}}function Ne(e,t){if(e.RTCPeerConnection&&e.RTCPeerConnection.prototype){const n=e.RTCPeerConnection.prototype.addIceCandidate;n&&0!==n.length&&(e.RTCPeerConnection.prototype.addIceCandidate=function(){return arguments[0]?("chrome"===t.browser&&t.version<78||"firefox"===t.browser&&t.version<68||"safari"===t.browser)&&arguments[0]&&""===arguments[0].candidate?Promise.resolve():n.apply(this,arguments):(arguments[1]&&arguments[1].apply(null),Promise.resolve())})}}function Le(e,t){if(e.RTCPeerConnection&&e.RTCPeerConnection.prototype){const t=e.RTCPeerConnection.prototype.setLocalDescription;t&&0!==t.length&&(e.RTCPeerConnection.prototype.setLocalDescription=function(){let e=arguments[0]||{};if("object"!=typeof e||e.type&&e.sdp)return t.apply(this,arguments);if(e={type:e.type,sdp:e.sdp},!e.type)switch(this.signalingState){case"stable":case"have-local-offer":case"have-remote-pranswer":e.type="offer";break;default:e.type="answer"}if(e.sdp||"offer"!==e.type&&"answer"!==e.type)return t.apply(this,[e]);const n="offer"===e.type?this.createOffer:this.createAnswer;return n.apply(this).then(e=>t.apply(this,[e]))})}}var Ue=function({window:e},t={shimChrome:!0,shimFirefox:!0,shimSafari:!0}){const n=B;var l=function(e){const t={browser:null,version:null};if(void 0===e||!e.navigator)return t.browser="Not a browser.",t;const n=e.navigator;if(n.mozGetUserMedia)t.browser="firefox",t.version=H(n.userAgent,/Firefox\/(\d+)\./,1);else if(n.webkitGetUserMedia||!1===e.isSecureContext&&e.webkitRTCPeerConnection&&!e.RTCIceGatherer)t.browser="chrome",t.version=H(n.userAgent,/Chrom(e|ium)\/(\d+)\./,2);else{if(!e.RTCPeerConnection||!n.userAgent.match(/AppleWebKit\/(\d+)\./))return t.browser="Not a supported browser.",t;t.browser="safari",t.version=H(n.userAgent,/AppleWebKit\/(\d+)\./,1),t.supportsUnifiedPlan=e.RTCRtpTransceiver&&"currentDirection"in e.RTCRtpTransceiver.prototype}return t}(e);const a={browserDetails:l,commonShim:u,extractVersion:H,disableLog:W,disableWarnings:G,sdp:Ie};switch(l.browser){case"chrome":if(!t.shimChrome)return n("Chrome shim is not included in this adapter release."),a;if(null===l.version)return n("Chrome shim can not determine version, not shimming."),a;n("adapter.js shimming chrome."),a.browserShim=r,Ne(e,l),Le(e),Y(e,l),Q(e),oe(e,l),Z(e),ie(e,l),ee(e),te(e),ne(e),ue(e,l),ke(e),De(e),Pe(e,l),xe(e),Me(e,l);break;case"firefox":if(!t.shimFirefox)return n("Firefox shim is not included in this adapter release."),a;n("adapter.js shimming firefox."),a.browserShim=i,Ne(e,l),Le(e),le(e,l),ce(e,l),se(e),he(e),fe(e),de(e),pe(e),ve(e),_e(e),ge(e),me(e),ke(e),De(e),Pe(e,l),xe(e);break;case"safari":if(!t.shimSafari)return n("Safari shim is not included in this adapter release."),a;n("adapter.js shimming safari."),a.browserShim=o,Ne(e,l),Le(e),Ee(e),we(e),Ce(e),ye(e),be(e),Ae(e),Se(e),Re(e),ke(e),Pe(e,l),xe(e),Me(e,l);break;default:n("Unsupported browser!")}return a}({window:"undefined"==typeof window?void 0:window}),je=new l.Logger("AppEnvironment");function Fe(e,t){return e.match(t)[0].split("/")[1]}var qe=(je.debug("browserDetails %o",Ue.browserDetails),(window&&window.navigator&&window.navigator.userAgent?function(){var e=window.navigator.userAgent.toLowerCase(),t={signalling:"SIP",clientType:"ReactJS"},n="",r="";switch(!0){case-1<e.indexOf("edge"):n="Edge",r=Fe(e,/edge\/[0-9.]*/i);break;case-1<e.indexOf("edg"):n="Edge",r=Fe(e,/edg\/[0-9.]*/i);break;case-1<e.indexOf("chrome")&&!!window.chrome:var i;r=(i=(i=null===(i=window.navigator.userAgentData)||void 0===i?void 0:i.brands)&&i.find((function(e){return"Google Chrome"===e.brand})))?(n="Chrome",Fe(e,/chrome\/[0-9.]*/i)):n="Other";break;case-1<e.indexOf("firefox"):n="Firefox",r=Fe(e,/firefox\/[0-9.]*/i);break;case-1<e.indexOf("safari"):n="Safari",r=Fe(e,/safari\/[0-9.]*/i);break;default:r=n="Other"}var o="Other";return-1!=e.indexOf("win")?o="Windows":-1!=navigator.userAgent.indexOf("like mac")?o="iOS":-1!=e.indexOf("mac")?o="Macintosh":-1!=e.indexOf("linux")?o="Linux":-1!=e.indexOf("android")&&(o="Android"),t.browserType=n,t.browserVersion=r,t.os=o,t}:function(){var e={signalling:"SIP",clientType:"other",browserType:"na",browserVersion:"na",os:"other",version:"na"};try{je.debug("Get info if its react-native based application"),function(){je.debug("Start Initializing ReactNative");var e=(u=n(386)).mediaDevices,t=u.MediaStream,r=u.MediaStreamTrack,i=u.RTCIceCandidate,o=u.RTCPeerConnection,u=u.RTCSessionDescription;window.RTCPeerConnection=window.RTCPeerConnection||o,window.RTCIceCandidate=window.RTCIceCandidate||i,window.RTCSessionDescription=window.RTCSessionDescription||u,window.MediaStream=window.MediaStream||t,window.MediaStreamTrack=window.MediaStreamTrack||r,window.navigator.mediaDevices=window.navigator.mediaDevices||e,window.navigator.getUserMedia=window.navigator.getUserMedia||e.getUserMedia,je.debug("ReactNative initialization completed")}();var t=n(385);e.os=t.Platform.OS,e.clientType="ReactNative",e.version="ios"===t.Platform.OS?t.Platform.Version:t.Platform.constants.Release}catch(e){je.debug("Error in AppEnvironment",e)}return e})()),He=n(10);function Ve(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var We=(Ve(Ue={},(t=n(9)).causes.CONNECTION_ERROR,{code:16001,message:"Connection Error"}),Ve(Ue,t.causes.REQUEST_TIMEOUT,{code:16002,message:"Request Timeout"}),Ve(Ue,t.causes.SIP_FAILURE_CODE,{code:16003,message:"Other Sip Failure"}),Ve(Ue,t.causes.INTERNAL_ERROR,{code:16004,message:"Internal Error"}),Ve(Ue,t.causes.BUSY,{code:16005,message:"Busy"}),Ve(Ue,t.causes.REJECTED,{code:16006,message:"Rejected"}),Ve(Ue,t.causes.REDIRECTED,{code:16007,message:"Redirected"}),Ve(Ue,t.causes.UNAVAILABLE,{code:16008,message:"Unavailable"}),Ve(Ue,t.causes.NOT_FOUND,{code:16009,message:"Not Found"}),Ve(Ue,t.causes.ADDRESS_INCOMPLETE,{code:16010,message:"Address Incomplete"}),Ve(Ue,t.causes.INCOMPATIBLE_SDP,{code:16011,message:"Incompatible SDP"}),Ve(Ue,t.causes.MISSING_SDP,{code:16012,message:"Missing SDP"}),Ve(Ue,t.causes.AUTHENTICATION_ERROR,{code:16013,message:"Authentication Error"}),Ve(Ue,t.causes.WEBRTC_ERROR,{code:16014,message:"WebRTC Error"}),Ve(Ue,t.causes.CANCELED,{code:16015,message:"Request canceled"}),Ve(Ue,t.causes.NO_ANSWER,{code:16016,message:"No Answer"}),Ve(Ue,t.causes.NO_ACK,{code:16017,message:"No ACK has been received"}),Ve(Ue,t.causes.DIALOG_ERROR,{code:16018,message:"Dialog Error"}),Ve(Ue,t.causes.USER_DENIED_MEDIA_ACCESS,{code:16019,message:"Media access is denied"}),Ve(Ue,t.causes.BAD_MEDIA_DESCRIPTION,{code:16020,message:"Bad Media Description"}),Ve(Ue,w.registrationFailed,{code:16021,message:"Registration is failed. Reason : %s"}),Ve(Ue,w.requestFailed,{code:16022,message:"Refer is failed. Reason : %s"}),Ve(Ue,b.upgradevideoaccessdenied,{code:16023,message:"User denided media access during upgrade"}),Ve(Ue,w.configurationError,{code:16024,message:"Invalid value %s for the parameter %s."}),Ve(Ue,w.alreadyReplied,{code:16025,message:"Message already replied"}),Ve(Ue,w.notSupportedError,{code:16026,message:"%s"}),Ve(Ue,w.invalidStateError,{code:16027,message:"Operation cannot be executed in state : %s"}),Ve(Ue,w.terminated,{code:16028,message:"Session is already terminated"}),Ve(Ue,w.typeError,{code:16029,message:"Invalid argument: %s"}),Ve(Ue,w.invalidEvent,{code:16030,message:"Invalid Event: %s"}),Ve(Ue,w.notConnected,{code:16031,message:"Not Connected"}),Ve(Ue,w.failedToFetch,{code:16032,message:"Failed to fetch %s file. Could not load file %s or file has invalid content"}),Ve(Ue,w.physicalDeviceChange,{code:16033,message:"%s"}),Ve(Ue,w.addvideonotsupported,{code:16034,message:"Add Video is not supported"}),Ve(Ue,w.removevideonotsupported,{code:16035,message:"Remove Video is not supported"}),Ve(Ue,w.invalidResolution,{code:16036,message:"Invalid Camera Resolution: %s"}),Ve(Ue,w.webrtcnotsupported,{code:16037,message:"Engage Digital WebRTC not Supported"}),Ve(Ue,w.callnotconnected,{code:16038,message:"Could not do this operation as call is not connected"}),Ue);function Ge(e){return(Ge="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Be(e,t,n){return(Be=ze()?Reflect.construct:function(e,t,n){var r=[null];return r.push.apply(r,t),r=new(Function.bind.apply(e,r)),n&&$e(r,n.prototype),r}).apply(null,arguments)}function ze(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}function $e(e,t){return($e=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Je(e){return(Je=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Ke=function(){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");Object.defineProperty(e,"prototype",{value:Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),writable:!1}),t&&$e(e,t)}(n,function(e){var t="function"==typeof Map?new Map:void 0;return function(e){if(null===e||-1===Function.toString.call(e).indexOf("[native code]"))return e;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==t){if(t.has(e))return t.get(e);t.set(e,n)}function n(){return Be(e,arguments,Je(this).constructor)}return n.prototype=Object.create(e.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),$e(n,e)}(e)}(Error));var e,t=function(e){var t=ze();return function(){var n,r=Je(e);return function(e,t){if(t&&("object"===Ge(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0!==e)return e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(e)}(this,t?(n=Je(this).constructor,Reflect.construct(r,arguments,n)):r.apply(this,arguments))}}(n);function n(e,r,i){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n);var o=t.call(this),u=We[e];return u?(o.errorMessage=st(u.message,[i,r]),o.errorCode=u.code):(o.errorMessage=e,o.errorCode=16004),o}return e=n,Object.defineProperty(e,"prototype",{writable:!1}),e}(),Ye=n(114);function Xe(e){return(Xe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Qe(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,o=[],u=!0,l=!1;try{for(n=n.call(e);!(u=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);u=!0);}catch(e){l=!0,i=e}finally{try{u||null==n.return||n.return()}finally{if(l)throw i}}return o}}(e,t)||function(e,t){if(e){if("string"==typeof e)return Ze(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Map"===(n="Object"===n&&e.constructor?e.constructor.name:n)||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Ze(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ze(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function et(e,t){var n,r=Object.keys(e);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(e),t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)),r}function tt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?et(Object(n),!0).forEach((function(t){var r,i;r=e,t=n[i=t],i in r?Object.defineProperty(r,i,{value:t,enumerable:!0,configurable:!0,writable:!0}):r[i]=t})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):et(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var nt=new l.Logger("Helper");function rt(e){for(var t="",n="abcdefghijklmnopqrstuvwxyz",r=n.length,i=0;i<e;i++)t+=n.charAt(Math.floor(Math.random()*r));return t}function it(){var e=qe.signalling,t=qe.clientType,n=qe.os,r=qe.browserType,i=qe.browserVersion,o=qe.version,u=bn();return"ReactNative"!==t?"X-Client-Info: ".concat(t,"-").concat(u,"-").concat(e,"-").concat(n,"-").concat(r,"-").concat(i):"X-Client-Info: ".concat(t,"-").concat(u,"-").concat(e,"-").concat(n,"-app-").concat(o)}function ot(e,t){var n=e.candidate,r=e.ready;nt.debug("Calling processIceCandidate isTimeoutRegistered : [%s] candidate : %o iceTimeoutInSeconds: %d",!0===ot.isIceTimeoutRegistered,n,t);var i="number"==typeof t?1e3*t:5e3;ot.isIceTimeoutRegistered||(ot.isIceTimeoutRegistered=!0,setTimeout((function(){try{nt.debug("Executing IceGathering timeout after [%d ms]",i),r()}catch(e){nt.debug("Error due to immediate cancel of call. Error %s",e.message)}ot.isIceTimeoutRegistered=!1}),i))}function ut(e,t){if(nt.debug("userProvidedCallParams : %o, defaultCallParams: %o",e,t),void 0!==(e=e||{}).customParams&&"object"!==Xe(e.customParams))throw new Ke(w.configurationError,"customParams",e);var n=Object.assign({},t);return Object.keys(e).forEach((function(t){n[t]=e[t]})),nt.debug("mergedCallParams %o",n),n}function lt(e,t){for(var n={},r=0,i=Object.entries(s);r<i.length;r++){var o,u=(o=Qe(i[r],2))[0];e[o=o[1]]&&(n[u]=e[o])}return nt.debug("Available constraints %o",t),t&&(n.mediaConstraints=t),n.extraHeaders=function(e){var t=it();return Ye.isEmpty(e.customParams)?[t]:[t,function(e){for(var t="X-Custom-Param : ",n=0,r=Object.entries(e.customParams);n<r.length;n++){var i=(o=Qe(r[n],2))[0],o=o[1];t=t+i+"="+encodeURIComponent(o)+","}return t.slice(0,t.length-1)}(e)]}(e),nt.debug("callParams in jssip format %o",n),n}function at(e,t){return!(!e||!e.find((function(e){return e.deviceId===t})))}function st(e,t){Array.isArray(t)||(t=[t]);var n=0;return e.replace(/%s/g,(function(){return t[n++]}))}function ct(e,t,n){var r=We[e];return r?{errorMessage:st(r.message,[n,t]),errorCode:r.code}:{errorMessage:e,errorCode:16004}}function ft(e,t){var n=We[e];return n?{errorMessage:st(n.message,t),errorCode:n.code}:{errorMessage:e,errorCode:16004}}function dt(e,t,n,r){if(e&&e.sdp&&t){var i=He.parse(e.sdp),o=i.media.filter((function(e){return"UDP/TLS/RTP/SAVP"===e.protocol})),u=i.media.filter((function(e){return"UDP/TLS/RTP/SAVPF"===e.protocol}));i.media=[];for(var l=0,a=0,s=0;s<t.length;s++)"UDP/TLS/RTP/SAVPF"===t[s].protocol&&0<u.length&&void 0!==u[l]&&("audio"===u[l].type&&(u[l].setup=n),"video"===u[l].type&&(u[l].setup=r),"inactive"===u[l].direction&&(u[l].port=0),t[s]=u[l],l++),"UDP/TLS/RTP/SAVP"===t[s].protocol&&0<o.length&&void 0!==o[a]&&("audio"===o[a].type&&(o[a].setup=n),"video"===o[a].type&&(o[a].setup=r),"inactive"===o[a].direction&&(o[a].port=0),t[s]=o[a],a++),i.media.push(t[s]);e.sdp=He.write(i)}else!function(e){if(e&&e.sdp){var t=He.parse(e.sdp),n=t.media.filter((function(e){return"UDP/TLS/RTP/SAVP"===e.protocol})),r=t.media.filter((function(e){return"UDP/TLS/RTP/SAVPF"===e.protocol}));if(0<r.length)for(var i=0;i<r.length;i++)"video"===r[i].type&&"inactive"===r[i].direction&&(r[i].port=0);else if(0<n.length)for(var o=0;o<n.length;o++)"video"===n[o].type&&"inactive"===n[o].direction&&(n[o].port=0);e.sdp=He.write(t),nt.debug("Modified SDP after converting the port 0 : %o",e)}}(e)}function ht(e,t){if(nt.debug("removeUnwantedMlinesFromOffer "),e&&e.sdp){var n=He.parse(e.sdp),r=n.media;n.media=[];for(var i=0;i<r.length;i++){var o=r[i];o.port=0,o.direction="inactive",n.media.push(o)}var u=n.media,l=He.parse(e.sdp),a=l.media.filter((function(e){return"UDP/TLS/RTP/SAVP"===e.protocol})),s=l.media.filter((function(e){return"UDP/TLS/RTP/SAVPF"===e.protocol}));if(l.media=[],0<s.length)for(var c=0;c<s.length;c++)0==s[c].port&&!0!==t||l.media.push(s[c]);else if(0<a.length)for(var f=0;f<a.length;f++)0==a[f].port&&!0!==t||l.media.push(a[f]);e.sdp=He.write(l),nt.debug("Modified SDP : %o",e)}return u}function pt(e){nt.debug("hasVideoMLine ");var t=!1;if(e&&e.sdp){var n=(e=He.parse(e.sdp)).media.filter((function(e){return"UDP/TLS/RTP/SAVP"===e.protocol})),r=e.media.filter((function(e){return"UDP/TLS/RTP/SAVPF"===e.protocol}));if(0<r.length)for(var i=0;i<r.length;i++)0!=r[i].port&&"video"===r[i].type&&(t=!0);else if(0<n.length)for(var o=0;o<n.length;o++)0!=n[o].port&&"video"===n[o].type&&(t=!0);nt.debug("Sdp hasVideo : %s",t)}return t}function vt(e){nt.debug("hasVideoMLine ");var t=!1;if(e&&e.sdp){var n=(e=He.parse(e.sdp)).media.filter((function(e){return"UDP/TLS/RTP/SAVP"===e.protocol})),r=e.media.filter((function(e){return"UDP/TLS/RTP/SAVPF"===e.protocol}));if(0<r.length)for(var i=0;i<r.length;i++)0!=r[i].port&&"video"===r[i].type&&(t=!0);else if(0<n.length)for(var o=0;o<n.length;o++)0!=n[o].port&&"video"===n[o].type&&(t=!0);nt.debug("Sdp hasVideo : %o",t)}return t}function _t(){var e=qe.os,t=qe.browserType,n=qe.browserVersion,r=qe.version,i=qe.clientType;return window.RTCPeerConnection?"ReactNative"!==i?"Chrome"===t&&parseFloat(n)>=72||"Firefox"===t&&parseFloat(n)>=72||"Edge"===t&&parseFloat(n)>=72||"Safari"===t&&parseFloat(n)>=12.1||(nt&&nt.warn("EngageDigital WebRTC is not supported for [%s] and [%s]",t,n),!1):"android"===e&&parseFloat(r)>=10||"ios"===e&&parseFloat(r)>=12||(nt&&nt.warn("EngageDigital WebRTC is not supported for ".concat(e,", ").concat(r)),!1):(nt&&nt.warn("EngageDigital WebRTC is not supported for [%s] and [%s]",t,n),!1)}function gt(e){var t=new Map;if(e){var n=e.split("&");if(n)for(var r=0;r<n.length;r++){var i=(o=Qe(n[r].split("="),2))[0],o=o[1];"replaces"!==(null==i?void 0:i.toLowerCase())&&t.set(i,decodeURIComponent(o))}}return t}var mt={0:"NULL",1:"INVITE_SENT",2:"1XX_RECEIVED",3:"INVITE_RECEIVED",4:"WAITING_FOR_ANSWER",5:"ANSWERED",6:"WAITING_FOR_ACK",7:"CANCELED",8:"TERMINATED",9:"CONFIRMED"},yt=new l.Logger("firefoxAdaptor");function bt(e){"Firefox"===qe.browserType&&(e.sdp=e.sdp.replace(/telephone-event\/8000/g,"telephone-event"),e.sdp=e.sdp.replace(/telephone-event\/16000/g,"telephone-event"),e.sdp=e.sdp.replace(/telephone-event\/32000/g,"telephone-event"),e.sdp=e.sdp.replace(/telephone-event\/48000/g,"telephone-event"),yt.debug("After converting the telephone-event. %o",e.sdp))}function Ct(e){"Firefox"===qe.browserType&&(e.sdp=e.sdp.replace(/telephone-event\/48000/g,"telephone-event/8000"),e.sdp=e.sdp.replace(/telephone-event\/32000/g,"telephone-event/8000"),e.sdp=e.sdp.replace(/telephone-event\/16000/g,"telephone-event/8000"),yt.debug("After converting the telephone-event. %o",e.sdp))}function St(e){e.sdp=e.sdp.replace(/telephone-event\r\n/g,"telephone-event/8000\r\n"),yt.debug("Convert wild card telephone event to 8k. %o",e.sdp)}function Tt(){return"Firefox"===qe.browserType}function Et(e){return(Et="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function At(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return wt(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Map"===(n="Object"===n&&e.constructor?e.constructor.name:n)||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?wt(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0;return{s:t=function(){},n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:t}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,o=!0,u=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return o=e.done,e},e:function(e){u=!0,i=e},f:function(){try{o||null==n.return||n.return()}finally{if(u)throw i}}}}function wt(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Rt(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function It(e,t){return(It=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Ot(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function kt(e){return(kt=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Pt(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function xt(e,t){Lt.debug("Collect WebRTC stats with webRTCStatsInterval %s seconds",t),e?Ut?Lt.debug("To collect statistics time interval is already running"):Ut=setInterval((function(){var t;t=function(e){e&&e.forEach&&(jt.allStats.codec=[],jt.allStats.audioRTCMediaStreamTrack=[],jt.allStats.videoRTCMediaStreamTrack=[],jt.candidates.remote=[],jt.candidates.local=[],jt.candidates.candidatePair=[],jt.allStats.certificate=[],jt.allStats.mediaSource=[],jt.allStats.videoInboundRTP={},jt.allStats.videoOutboundRTP={},jt.allStats.videoRemoteInboundRTP={},jt.allStats.videoRemoteOutboundRTP={},e.forEach((function(e){!function(e){"candidate-pair"===e.type&&"succeeded"===e.state&&e.nominated&&jt.candidates.candidatePair.push(e),"remote-candidate"===e.type&&jt.candidates.remote.push(e),"local-candidate"===e.type&&jt.candidates.local.push(e)}(e),function(e){switch(e.type){case"certificate":jt.allStats.certificate.push(e);break;case"codec":jt.allStats.codec.push(e);break;case"csrc":jt.allStats.csrc=e;break;case"data-channel":jt.allStats.dataChannel=e;break;case"ice-server":jt.allStats.iceServer=e;break;case"inbound-rtp":"audio"===e.kind?jt.allStats.audioInboundRTP=e:"video"===e.kind&&(jt.allStats.videoInboundRTP=e);break;case"media-source":jt.allStats.mediaSource.push(e);break;case"outbound-rtp":"audio"===e.kind?jt.allStats.audioOutboundRTP=e:"video"===e.kind&&(jt.allStats.videoOutboundRTP=e);break;case"peer-connection":jt.allStats.peerConnection=e;break;case"receiver":jt.allStats.receiver=e;break;case"remote-inbound-rtp":"audio"===e.kind?jt.allStats.audioRemoteInboundRTP=e:"video"===e.kind&&(jt.allStats.videoRemoteInboundRTP=e);break;case"remote-outbound-rtp":"audio"===e.kind?jt.allStats.audioRemoteOutboundRTP=e:"video"===e.kind&&(jt.allStats.videoRemoteOutboundRTP=e);break;case"sctp-transport":jt.allStats.sctpTransport=e;break;case"sender":jt.allStats.sender=e;break;case"stream":jt.allStats.stream=e;break;case"track":"audio"===e.kind?jt.allStats.audioRTCMediaStreamTrack.push(e):"video"===e.kind&&jt.allStats.videoRTCMediaStreamTrack.push(e);break;case"transceiver":jt.allStats.transceiver=e;break;case"transport":jt.allStats.transport=e}}(e)})),Lt.debug("WebRTC Statistics %o",JSON.parse(JSON.stringify(jt))))},e.getStats(null).then((function(e){t(e)})).catch(t)}),1e3*t):Lt.debug("Got peerConnection for statistics %o",e)}var Dt=new l.Logger("RTCUtils"),Mt=n(34),Nt=new(function(){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");Object.defineProperty(e,"prototype",{value:Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),writable:!1}),t&&It(e,t)}(r,Mt);var e,t,n=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=kt(e);return function(e,t){if(t&&("object"===Et(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return Ot(e)}(this,t?(n=kt(this).constructor,Reflect.construct(r,arguments,n)):r.apply(this,arguments))}}(r);function r(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,r),Pt(Ot(e=n.call(this)),"_registerDeviceSelectedEvent",(function(){e._deviceEventListener(P.deviceselected,(function(t){e._executeUserCallbacks(P.deviceselected,t)}))})),Pt(Ot(e),"_registerChangeDeviceEvent",(function(){e._deviceEventListener(P.devicechange,(function(t){e._executeUserCallbacks(P.devicechange,t)}))})),Pt(Ot(e),"_registerAudioOutputDeviceEvent",(function(){e._deviceEventListener(P.audiooutputdevice,(function(t){e._executeUserCallbacks(P.audiooutputdevice,t)}))})),Pt(Ot(e),"getSelectedAudioInputDevice",(function(){var t;return e._setAudioInputDeviceId?e._audioInputDeviceList.map((function(n){n.deviceId===e._setAudioInputDeviceId&&(t=n)})):e._updatedDeviceInfo.map((function(e){"default"===e.deviceId&&"audioinput"===e.kind&&(t=e)})),t})),Pt(Ot(e),"getSelectedVideoInputDevice",(function(){var t;return e._setVideoInputDeviceId?e._videoInputDeviceList.map((function(n){n.deviceId===e._setVideoInputDeviceId&&(t=n)})):e._updatedDeviceInfo.map((function(e){e.label&&e.label.includes("Integrated Webcam")&&(t=e)})),t})),Pt(Ot(e),"getSelectedAudioOutputDevice",(function(){var t;return e._setAudioOutputDeviceId?e._audioOutputDeviceList.map((function(n){n.deviceId===e._setAudioOutputDeviceId&&(t=n)})):e._updatedDeviceInfo.map((function(e){"default"===e.deviceId&&"audiooutput"===e.kind&&(t=e)})),t})),Pt(Ot(e),"getAudioOutputDevices",(function(){return Dt.debug("Get Audio Output Devices list %o",e._audioOutputDeviceList),e._audioOutputDeviceList})),Pt(Ot(e),"getAudioInputDevices",(function(){return Dt.debug("Get Audio Input Devices list %o",e._audioInputDeviceList),e._audioInputDeviceList})),Pt(Ot(e),"getVideoInputDevices",(function(){return Dt.debug("Get Video Input Devices list %o",e._videoInputDeviceList),e._videoInputDeviceList})),Pt(Ot(e),"setAudioOutputDevice",(function(t){return at(e._updatedDeviceInfo,t)?(e._setAudioOutputDeviceId=t,e.emit(P.deviceselected,e._setAudioOutputDeviceId),e._emitAudioOutputDeviceEvent(),!0):(Dt.debug("unable to setAudioOutputDevice"),!1)})),Pt(Ot(e),"setAudioInputDevice",(function(t){return Dt.debug("audio input device id: %s",t),at(e._updatedDeviceInfo,t)?("Safari"!==qe.browserType&&(e._updatedStream&&e._mediastreamClose(e._updatedStream),e._updatedModifiedStream&&e._mediastreamClose(e._updatedModifiedStream),e._session&&e._mediastreamClose(e._session._connection.getLocalStreams()[0])),e._setAudioInputDeviceId=t,e.emit(P.deviceselected,e._setAudioInputDeviceId),e._setUserMediaAccess(),!0):(Dt.debug("audio input device id not valid, %s",t),!1)})),Pt(Ot(e),"setVideoInputDevice",(function(t){return!!at(e._updatedDeviceInfo,t)&&("Safari"!==qe.browserType&&(e._closeVideoStream(e._updatedStream),e._closeVideoStream(e._updatedModifiedStream),e._session&&e._closeVideoStream(e._session._connection.getLocalStreams()[0])),e._setVideoInputDeviceId=t,e.emit(P.deviceselected,e._setVideoInputDeviceId),e._setUserMediaAccess(),!0)})),Pt(Ot(e),"_checkVideoFrameProperty",(function(){if(e._updateCameraQualityConstraints&&e._updateCameraQualityConstraints.width&&e._updateCameraQualityConstraints.height)return e._updateCameraQualityConstraints.deviceId.exact=e._setVideoInputDeviceId,e._updateCameraQualityConstraints})),Pt(Ot(e),"setCameraResolution",(function(t){"Safari"!==qe.browserType&&(e._updatedStream&&e._mediastreamClose(e._updatedStream),e._updatedModifiedStream&&e._mediastreamClose(e._updatedModifiedStream),e._session&&e._session._connection&&e._mediastreamClose(e._session._connection.getLocalStreams()[0]));var n,r=t&&"string"==typeof t&&t.toUpperCase();L.resolution.includes(r)?(n=U[r],e._setVideoInputDeviceId||(e._setVideoInputDeviceId=e._videoInputDeviceList&&(null===(r=e._videoInputDeviceList[0])||void 0===r?void 0:r.deviceId)),!e._setAudioInputDeviceId&&e._audioInputDeviceList&&0<e._audioInputDeviceList.length&&(e._setAudioInputDeviceId=e._audioInputDeviceList[0].deviceId),n={deviceId:{exact:e._setVideoInputDeviceId},height:n.frameHight,width:n.frameWidth,frameRate:n.frameRate},e._updateCameraQualityConstraints=n,e._selectedCameraResolution=t,e._setUserMediaAccess()):(Dt.debug("Invalid Camera Resolution %s",t),t=ft(w.invalidResolution,t),e.emit(P.errorinfo,t))})),Pt(Ot(e),"_replaceTracks",(function(t){var n,r;"ReactNative"!==qe.clientType?(n=t.getVideoTracks()[0],r=t.getAudioTracks()[0],e._session._connection.getSenders().forEach((function(t){t&&t.track&&("video"===t.track.kind&&n?n&&t.track.id!=n.id&&(Dt.debug("replace video track"),n&&e._isUsedVidioDeviceMuted(n),r&&e._isUsedAudioDeviceMuted(r),e._updatedModifiedStream&&e._mediastreamClose(e._updatedModifiedStream),e._updatedModifiedStream=r?new MediaStream([r,n]):new MediaStream([n]),t.replaceTrack(n),e._session.emit(b.localvideoadded,{stream:e._updatedModifiedStream})):r&&"audio"===t.track.kind&&t.track.id!=r.id&&(Dt.debug("replace audio track %o",r),r&&e._isUsedAudioDeviceMuted(r),t.replaceTrack(r)))}))):Dt.debug("Its react native returning from replaceTracks")})),Pt(Ot(e),"_setSession",(function(t){Dt.debug("Current session set"),e._session=t})),Pt(Ot(e),"addEventHandler",(function(t,n){var r;if(Dt.debug("Registering event %s",t),!e._checkInvalidEvent(t))switch(t){case void 0:case null:Dt.debug("Invalid Event name [%s]",t),r=ft(w.invalidEvent,t),e.emit(y,r);break;case P.deviceready:e.on(t,n);break;default:e._eventHandlerMapRTCUtils.get(t)||e._eventHandlerMapRTCUtils.set(t,[]),e._eventHandlerMapRTCUtils.get(t).push(n)}})),Pt(Ot(e),"resetVideoInputDevice",(function(){return 1<e._videoInputDeviceList.length?("Safari"!==qe.browserType&&(e._closeVideoStream(e._updatedStream),e._closeVideoStream(e._updatedModifiedStream),e._session&&e._closeVideoStream(e._session._connection.getLocalStreams()[0])),e._setVideoInputDeviceId=e._videoInputDeviceList[0].deviceId,e.emit(P.deviceselected,e._setVideoInputDeviceId),e._setUserMediaAccess(),!0):(Dt.debug("Unable to reset, only one device available"),!1)})),Pt(Ot(e),"resetAudioInputDevice",(function(){return"Safari"!==qe.browserType&&(e._updatedStream&&e._mediastreamClose(e._updatedStream),e._updatedModifiedStream&&e._mediastreamClose(e._updatedModifiedStream),e._session&&e._mediastreamClose(e._session._connection.getLocalStreams()[0])),1<e._audioInputDeviceList.length?("Firefox"===qe.browserType||"Safari"===qe.browserType?e._setAudioInputDeviceId=e._audioInputDeviceList[0].deviceId:e._setAudioInputDeviceId="default",e.emit(P.deviceselected,e._setAudioInputDeviceId),e._setUserMediaAccess(),!0):(Dt.debug("Unable to reset, only one device available"),!1)})),Pt(Ot(e),"resetAudioOutputDevice",(function(){return 1<e._audioOutputDeviceList.length?("Firefox"===qe.browserType||"Safari"===qe.browserType?e._setAudioOutputDeviceId=e._audioOutputDeviceList[0].deviceId:e._setAudioOutputDeviceId="default",e.emit(P.audiooutputdevice,e._setAudioOutputDeviceId),e.emit(P.deviceselected,e._setAudioOutputDeviceId),!0):(Dt.debug("Unable to reset, only one device available"),!1)})),Pt(Ot(e),"_closeMediaStream",(function(e){if(e)try{if(e.getTracks){var t,n=At(e.getTracks());try{for(n.s();!(t=n.n()).done;){var r=t.value;"video"==r.kind&&"live"==r.readyState&&(Dt.debug("stop media stream track %o",r),r.stop())}}catch(t){n.e(t)}finally{n.f()}}else{var i,o=At(e.getVideoTracks());try{for(o.s();!(i=o.n()).done;){var u=i.value;Dt.debug("stop media video track %o",u),u.stop()}}catch(t){o.e(t)}finally{o.f()}}}catch(t){"function"!=typeof e.stop&&"object"!==Et(e.stop)||e.stop()}})),e._setAudioOutputDeviceId=null,e._setAudioInputDeviceId=null,e._setVideoInputDeviceId=null,e._updatedStream=null,e._updatedMediaConstraints=null,e._updatedDeviceInfo=null,e._session=null,e._eventHandlerMapRTCUtils=new Map,e._updatedModifiedStream=null,e._selectedCameraResolution=null,e._resetDevices(),e._onDeviceChange(),e._registerDeviceEvents(),e}return e=r,(t=[{key:"getAVPermission",value:function(){Dt.debug("calling getAVPermission"),this._getUserMediaAccess()}},{key:"_registerDeviceEvents",value:function(){this._registerChangeDeviceEvent(),this._registerAudioOutputDeviceEvent(),this._registerAVAccessDeniedEvent(),this._registerFailedEvent(),this._registerErrorInfoEvent(),this._registerDeviceSelectedEvent()}},{key:"_registerAVAccessDeniedEvent",value:function(){var e=this;this._deviceEventListener(P.mediaaccessdenied,(function(t){e._executeUserCallbacks(P.mediaaccessdenied,We[t.cause])}))}},{key:"_registerFailedEvent",value:function(){var e=this;this._deviceEventListener(P.failed,(function(t){e._executeUserCallbacks(P.failed,t)}))}},{key:"_registerErrorInfoEvent",value:function(){var e=this;this._deviceEventListener(P.errorinfo,(function(t){e._executeUserCallbacks(P.errorinfo,t)}))}},{key:"_executeUserCallbacks",value:function(e,t){try{var n=this._eventHandlerMapRTCUtils&&this._eventHandlerMapRTCUtils.get(e);n&&n.forEach((function(e){return t?e(t):e()}))}catch(n){Dt.debug("Got error %o while executing usercallback for the event %s",n,e)}}},{key:"_onDeviceChange",value:function(){var e=this;try{navigator.mediaDevices.addEventListener("devicechange",(function(){return e._deviceChangeHandler()}))}catch(e){Dt.warn("Device Change error %o",e)}}},{key:"_deviceChangeHandler",value:function(){var e=this;navigator.mediaDevices.enumerateDevices().then((function(t){e._isNewDeviceAdded(t)?(Dt.debug("New device added"),e._gotDevices(t),e.emit(P.devicechange,t),"Safari"!==qe.browserType&&(e._updatedStream&&e._mediastreamClose(e._updatedStream),e._updatedModifiedStream&&e._mediastreamClose(e._updatedModifiedStream),e._session&&e._mediastreamClose(e._session._connection.getLocalStreams()[0])),e._videoDeviceSelection(),e._audioInputDeviceSelection(),e._audioOutputDeviceSelection(),e._setUserMediaAccess()):Dt.debug("Existing devices changed")}))}},{key:"_isNewDeviceAdded",value:function(e){var t=this;return this._tempAudioInputDeviceList=[],e.forEach((function(e){e.kind===k&&t._tempAudioInputDeviceList.push(e)})),this._tempAudioInputDeviceList.length!==this._audioInputDeviceList.length}},{key:"_videoDeviceSelection",value:function(){this._setVideoInputDeviceId=this._videoInputDeviceList[0].deviceId}},{key:"_audioInputDeviceSelection",value:function(){this._setAudioInputDeviceId=this._audioInputDeviceList[0].deviceId}},{key:"_audioOutputDeviceSelection",value:function(){0<this._audioOutputDeviceList.length&&(this._setAudioOutputDeviceId=this._audioOutputDeviceList[0].deviceId,this.emit(P.audiooutputdevice,this._setAudioOutputDeviceId))}},{key:"_getAvailableDevices",value:function(){var e=this;try{navigator.mediaDevices.enumerateDevices().then((function(t){e._gotDevices(t),e._closeMediaStream(e._updatedStream)}))}catch(e){var t=ft(w.internalServerError);this.emit(P.errorinfo,t),Dt.debug("GetAvailableDevices Error: [%s]",e)}}},{key:"_gotDevices",value:function(e){var t=this;this._updatedDeviceInfo=e,this._resetDevices(),e.forEach((function(e){e.kind===k?t._audioInputDeviceList.push(e):"audiooutput"===e.kind?t._audioOutputDeviceList.push(e):"videoinput"===e.kind?t._videoInputDeviceList.push(e):Dt.debug("Some other kind of source/device: %o",e)})),this.emit(P.deviceready)}},{key:"_resetDevices",value:function(){this._audioInputDeviceList=[],this._audioOutputDeviceList=[],this._videoInputDeviceList=[]}},{key:"_getSelectedDevice",value:function(e,t,n){var r;return e.forEach((function(e){e.kind===n&&e.deviceId===t&&(r=e)})),r}},{key:"_mediastreamClose",value:function(e){var t;e=e,t=this._setVideoInputDeviceId,nt.debug("trackStopper called - Stream :",e),e.getTracks().forEach((function(e){e&&"audio"===e.kind&&"live"==e.readyState&&e.stop(),t&&e&&"video"===e.kind&&"live"==e.readyState&&e.stop()}))}},{key:"_closeVideoStream",value:function(e){e&&e.getTracks((function(e){e&&"video"===e.kind&&"live"==e.readyState&&e.stop()}))}},{key:"_setUserMediaAccess",value:function(){var e,t=this,n={audio:this._setAudioInputDeviceId?{deviceId:{exact:this._setAudioInputDeviceId}}:void 0,video:this._updateCameraQualityConstraints&&this._updateCameraQualityConstraints.width?this._checkVideoFrameProperty():this._setVideoInputDeviceId?{deviceId:{exact:this._setVideoInputDeviceId}}:void 0};return Dt.debug("Final Constraints to set %o",n),this._updatedMediaConstraints=n,Dt.debug("peerConnection %o",null===(e=this._session)||void 0===e?void 0:e._connection),new Promise((function(e,r){t._session&&navigator.mediaDevices.getUserMedia(n).then((function(n){t._updatedStream=n,t._session&&t._replaceTracks(n),e(n)})).catch((function(e){Dt.debug("GetUser media error %o",e),Dt.debug(w.userDeniedMediaAccess,e);var n=ft(w.userDeniedMediaAccess,e);t.emit(m,n),r(e)}))}))}},{key:"_getUserMediaAccess",value:function(){var e=this;Dt.debug("calling getUserMediaAccess");var t={audio:!0,video:!0};return this._updatedMediaConstraints=t,new Promise((function(n,r){navigator.mediaDevices.getUserMedia(t).then((function(t){e._updatedStream=t,e._getAvailableDevices(),n()})).catch((function(t){Dt.debug(w.userDeniedMediaAccess,t);var n=ft(w.userDeniedMediaAccess,t);e.emit(m,n),r(t)}))}))}},{key:"_isUsedAudioDeviceMuted",value:function(e){this._session&&this._session.isMuted().audio&&(e.enabled=!1)}},{key:"_isUsedVidioDeviceMuted",value:function(e){this._session&&this._session.isMuted().video&&(e.enabled=!1)}},{key:"_deviceEventListener",value:function(e,t){this.on(e,t)}},{key:"removeEventHandler",value:function(e){this._checkInvalidEvent(e)||(this._eventHandlerMapRTCUtils.delete(e),Dt.debug("Removed Event : %s",e))}},{key:"_checkInvalidEvent",value:function(e){return void 0===P[e]&&(Dt.warn("Invalid Event [%s]",e),e=ft(w.invalidEvent,e),this.emit(y,e),!0)}},{key:"_emitAudioOutputDeviceEvent",value:function(){null!==this._session&&this._setAudioOutputDeviceId&&this.emit(P.audiooutputdevice,this._setAudioOutputDeviceId)}},{key:"getSelectedCameraResolution",value:function(){if(this._selectedCameraResolution)return this._selectedCameraResolution}},{key:"streamClose",value:function(){this._updatedStream&&!this._session&&this._closeMediaStream(this._updatedStream),this._updatedModifiedStream&&!this._session&&this._closeMediaStream(this._updatedModifiedStream)}},{key:"_clearRTCUtilsInternals",value:function(){Dt.debug("Clear RTCUtils Internal"),this._updatedStream&&this._mediastreamClose(this._updatedStream),this._updatedModifiedStream&&this._mediastreamClose(this._updatedModifiedStream),this._session=null,this._updatedStream=null,this._updatedModifiedStream=null,this._resetDevices()}}])&&Rt(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),r}()),Lt=new l.Logger("EngageDigitalStatistics"),Ut=null,jt={candidates:{local:[],remote:[],candidatePair:[]},allStats:{videoOutboundRTP:{},audioOutboundRTP:{},audioInboundRTP:{},videoInboundRTP:{},audioRemoteInboundRTP:{},videoRemoteInboundRTP:{},audioRemoteOutboundRTP:{},videoRemoteOutboundRTP:{},certificate:[],codec:[],csrc:{},dataChannel:{},iceServer:{},mediaSource:[],peerConnection:{},receiver:{},sctpTransport:{},sender:{},stream:{},audioRTCMediaStreamTrack:[],videoRTCMediaStreamTrack:[],transceiver:{},transport:{}}};function Ft(){clearInterval(Ut),Ut=null}function qt(e){return function(e){if(Array.isArray(e))return Bt(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||Gt(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ht(e){return(Ht="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Vt(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=Gt(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0;return{s:t=function(){},n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:t}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,o=!0,u=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return o=e.done,e},e:function(e){u=!0,i=e},f:function(){try{o||null==n.return||n.return()}finally{if(u)throw i}}}}function Wt(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,o=[],u=!0,l=!1;try{for(n=n.call(e);!(u=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);u=!0);}catch(e){l=!0,i=e}finally{try{u||null==n.return||n.return()}finally{if(l)throw i}}return o}}(e,t)||Gt(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Gt(e,t){if(e){if("string"==typeof e)return Bt(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Map"===(n="Object"===n&&e.constructor?e.constructor.name:n)||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Bt(e,t):void 0}}function Bt(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function zt(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function $t(e,t){return($t=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Jt(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Kt(e){return(Kt=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Yt(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Xt=n(34),Qt=new l.Logger("EngageDigitalSession"),Zt={once:!0},en=function(){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");Object.defineProperty(e,"prototype",{value:Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),writable:!1}),t&&$t(e,t)}(r,Xt);var e,t,n=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Kt(e);return function(e,t){if(t&&("object"===Ht(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return Jt(e)}(this,t?(n=Kt(this).constructor,Reflect.construct(r,arguments,n)):r.apply(this,arguments))}}(r);function r(){var e,t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},i=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,r),Yt(Jt(e=n.call(this)),"getSessionId",(function(){return e._checkState(),e._sessionId})),Yt(Jt(e),"getCallState",(function(){return e._checkState(),e._callState})),Yt(Jt(e),"getCallParams",(function(){return e._checkState(),Object.assign({},e._callParams)})),Yt(Jt(e),"getConfig",(function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"";if(e._checkState(),"string"==typeof t){var n=t&&t.trim();if(!n)return e._callParams;if(n in e._callParams)return e._callParams[n];Qt.warn("Get Config: Parameter %s not found",n),n=ft(w.typeError,t),e.emit(y,n)}else Qt.warn("Get Config: parameter %s not accepted",t),t=ft(w.typeError,t),e.emit(y,t)})),Yt(Jt(e),"getRemoteId",(function(){return e._checkState(),Qt.debug("RemoteId: %o",e._session.remote_identity),e._session.remote_identity})),Yt(Jt(e),"getPeerConnection",(function(){return e._checkState(),e._session.connection})),Yt(Jt(e),"acceptCall",(function(t){var n=ut(t,e._defaultCallParams);Qt.debug("Accept call: utils.updatedMediaConstraints %o",Nt._updatedMediaConstraints);var r,i={audio:(null!==(i=Nt._updatedMediaConstraints)&&void 0!==i&&i.audio?{audio:Nt._updatedMediaConstraints.audio}:{audio:!0}).audio};null!=t&&null!==(r=t.mediaConstraints)&&void 0!==r&&r.video?(r=null!==(r=Nt._updatedMediaConstraints)&&void 0!==r&&r.video?{video:Nt._updatedMediaConstraints.video}:{video:!0},i.video=r.video):i.video=!1,Qt.debug("Accept Call: Available constraints %o",i),i=lt(e._callParams=n,i),Qt.debug("Accept call: jssip call params %o",i);try{e._session.answer(i)}catch(t){Qt.debug("Error in acceptCall %s",t.message),e._checkAndThrowErrorInInvalidState(t)}})),Yt(Jt(e),"rejectCall",(function(){e._checkState();try{e._session.terminate()}catch(t){Qt.debug("Error in rejectCall %s",t.message),e._checkAndThrowErrorInInvalidState(t)}})),Yt(Jt(e),"disconnectCall",(function(){try{e._session.terminate()}catch(t){Qt.debug("Error in disconnectCall %s",t.message),e._checkAndThrowErrorInInvalidState(t)}})),Yt(Jt(e),"hasLocalVideo",(function(){e._checkState();var t=e.getPeerConnection().localDescription;return!M.values.includes(e._getVideoDirection(t))})),Yt(Jt(e),"hasRemoteVideo",(function(t){return e._checkState(),t=t||e.getPeerConnection().remoteDescription,e.hasValidRemoteVideoMLine(t.sdp)})),Yt(Jt(e),"addEventHandler",(function(t,n){e._checkState(),e._checkInvalidEvent(t)||(Qt.debug("adding Event handler %s",t),e._eventHandlerMap.get(t)||e._eventHandlerMap.set(t,[]),e._eventHandlerMap.get(t).push(n))})),Yt(Jt(e),"isRinging",(function(){return e._checkState(),e._session.isInProgress()})),Yt(Jt(e),"isEstablished",(function(){return e._checkState(),e._session.isEstablished()})),Yt(Jt(e),"getDirection",(function(){return e._checkState(),e._session.direction})),Yt(Jt(e),"isMuted",(function(){return e._checkState(),e._session.isMuted()})),Yt(Jt(e),"getOriginator",(function(){return e._checkState(),e._originator})),Yt(Jt(e),"canvasStream",(function(e){var t=e.color,n=document.createElement("canvas");n.width=n.height=10;var r=n.getContext("2d");r.fillStyle=t,r.fillRect(0,0,n.width,n.height);var i=n.captureStream(0),o=Wt(i.getVideoTracks(),1)[0];o.onmute=o.onunmute=function(){};return requestAnimationFrame((function e(){if(!o.enabled||"live"!==o.readyState)return!1;r.fillStyle=t,r.fillRect(0,0,n.width,n.height),("requestFrame"in o?o:i).requestFrame(),requestAnimationFrame(e)})),{track:o}})),Qt.debug("Begin Constructor"),e._callParams=Object.assign({},t),e._defaultCallParams=Object.assign({},i),e._session=null,e._sessionId=null,e._callState=null,e._originator=null,e._sessionState=null,e._eventHandlerMap=new Map,e._configParams,e._backedUpMLinesFromOffer=null,e.incomingCallWithVideo=!1,e._isCallGotReferred=!1,e._updatedAddVideoStream=void 0,e._updatedLocalStream=null,e.callTransferHeaders=null,e._needVideoMline=!1,e._isInitialInvite=!1,e._isCallee=!1,e._isCaller=!1,e._sendRemoveVideoEvent=!1,e._incomingInviteRequestHeaders=null,e._generateNewStreamAddVideo=null,e._firstSessionId=null,Qt.debug("End Constructor"),e}return e=r,(t=[{key:"isIncomingCallWithVideo",value:function(){return this.incomingCallWithVideo}},{key:"getCallTransferHeaders",value:function(){return this.callTransferHeaders}},{key:"hasValidRemoteVideoMLine",value:function(e){var t=!1;if(e){var n=(e=He.parse(e)).media.filter((function(e){return"UDP/TLS/RTP/SAVP"===e.protocol})),r=e.media.filter((function(e){return"UDP/TLS/RTP/SAVPF"===e.protocol}));if(0<r.length)for(var i=0;i<r.length;i++)0!=r[i].port&&"video"===r[i].type&&(t=!0);else if(0<n.length)for(var o=0;o<n.length;o++)0!=n[o].port&&"video"===n[o].type&&(t=!0);Qt.debug("Sdp hasVideo : %o",t)}return t}},{key:"_checkInvalidEvent",value:function(e){return null==b[e]&&(Qt.warn("Invalid Event [%s]",e),e=ft(w.invalidEvent,e),this.emit(b.errorinfo,e),!0)}},{key:"removeEventHandler",value:function(e){this._checkState(),this._checkInvalidEvent(e)||(Qt.debug("remove event handler for %s",e),this._eventHandlerMap.delete(e),Qt.debug("event handler map after remove %o",this._eventHandlerMap))}},{key:"getLocalStream",value:function(){return this._checkState(),this.getPeerConnection().getLocalStreams()[0]}},{key:"getRemoteStream",value:function(){return this._checkState(),this.getPeerConnection().getRemoteStreams()[0]}},{key:"toggleVideo",value:function(){var e=qe.clientType;this._checkState();var t=this.isMuted().video;return t?(Qt.debug("video unmuted"),this._session.unmute({video:!0}),this.videoResourceOnLight(e)):(Qt.debug("video muted"),this._session.mute({video:!0}),this.videoResourceOffLight(e)),t}},{key:"videoResourceOffLight",value:function(e){var t=this;if("ReactNative"!==e&&!0===this._configParams.lightOffOnVideoMute&&"object"===Ht(e=function(){if(Qt.debug("videoResourceOffLight"),!t._getVideoTransceiver())return Qt.debug("There is no video in this session"),{v:void 0};var e,n=t.canvasStream({color:"black"}).track,r=Vt(t.getPeerConnection().getSenders().filter((function(e){return e.track&&"video"===e.track.kind})));try{for(r.s();!(e=r.n()).done;)!function(){var t=e.value,r=t.track;Qt.debug("sender, track ",t,n),Qt.debug("canvas track ",n),setTimeout((function(){r.stop(),t.replaceTrack(n)}),2e3)}()}catch(e){r.e(e)}finally{r.f()}}()))return e.v}},{key:"videoResourceOnLight",value:function(e){var t=this;"ReactNative"!==e&&!0===this._configParams.lightOffOnVideoMute&&(this._getVideoTransceiver()?(this._stopMediaStream(),e=null!==(e=Nt._updatedMediaConstraints)&&void 0!==e&&e.video?{video:Nt._updatedMediaConstraints.video}:{video:!0},navigator.mediaDevices.getUserMedia(e).then((function(e){var n=(t._updatedAddVideoStream=e).getVideoTracks()[0],r=t.getPeerConnection();e=r.getLocalStreams()[0];r.getSenders().find((function(e){return e.track.kind==n.kind})).replaceTrack(n),e=e.getAudioTracks()[0],t._generateNewStreamAddVideo=new MediaStream([e,n]),t.emit(b.localvideoadded,{stream:t._generateNewStreamAddVideo})}))):Qt.debug("There is no video in this session, use addVideo() API"))}},{key:"toggleAudio",value:function(){this._checkState();var e=this.isMuted().audio;return e?this._session.unmute({audio:!0}):this._session.mute({audio:!0}),e}},{key:"enableAudio",value:function(e){this._checkState(),"boolean"!=typeof e&&Qt.debug("enableAudio: audioRequest should boolean");var t={audio:!0};e?this._session.unmute(t):this._session.mute(t)}},{key:"enableVideo",value:function(e){Qt.debug("enableVideo : %s",e);var t=qe.clientType;this._checkState(),"boolean"!=typeof e&&Qt.debug("enableVideo: audioRequest should boolean");var n={video:!0};e?(this._session.unmute(n),this.videoResourceOnLight(t)):(this._session.mute(n),this.videoResourceOffLight(t))}},{key:"sendDTMF",value:function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};Qt.debug("dtmf optionalParams %o",t),t=Object.assign({},t,{transportType:"RFC2833"}),Qt.debug("dtmf optional %o",t),this._checkState();try{this._session.sendDTMF(e,t)}catch(e){t=ft(w.typeError,e),this.emit(y,t),Qt.warn("DTMF: %o",e)}}},{key:"addVideo",value:function(){var e=this;this._checkState();var t=this.getPeerConnection();if(t.addTrack)if(this._callState===E){var n=t.getLocalStreams()[0],r=this._getVideoTransceiver();if(r&&"sendrecv"==r.direction){if(!Tt()||!0!==r.stopped)return void Qt.debug("Video is already there");Qt.debug("Browser type is firefox proceed.")}var i={rtcOfferConstraints:{offerToReceiveAudio:1,offerToReceiveVideo:1}};Qt.debug("utils.updatedMediaConstraints %o",Nt._updatedMediaConstraints);var o=null!==(o=Nt._updatedMediaConstraints)&&void 0!==o&&o.video?{video:Nt._updatedMediaConstraints.video}:{video:!0};Qt.debug("videoConstraints : %o",o),Qt.debug("Upgrade media stream %o",this._updatedAddVideoStream),navigator.mediaDevices.getUserMedia(o).then((function(o){if(e._updatedAddVideoStream=o,r&&("inactive"==r.direction||"recvonly"==r.direction)){Qt.debug("video transiver is %s",r.direction);var u=r.sender,l=o.getVideoTracks()[0],a=0<n.getVideoTracks().length;try{if(a)return Qt.debug("Before replace track %o",l),u.replaceTrack(l),Qt.debug("after replace track"),r.direction="sendrecv",Qt.debug("Sending addVideo renegotiate"),e._session.renegotiate(i),void e.emit(b.localvideoadded,{stream:t.getLocalStreams()[0]})}catch(o){Qt.debug("Not able to replace the stream try adding")}}u=o.getVideoTracks()[0],n.addTrack(u),t.addTrack(u,n),Tt()?e.emit(b.localvideoadded,{stream:n}):(l=n.getAudioTracks()[0],e._generateNewStreamAddVideo=new MediaStream([l,u]),e.emit(b.localvideoadded,{stream:e._generateNewStreamAddVideo})),Qt.debug("renegotiate reinvite flow, stream : %o",o),e._session.renegotiate(i),e._session.unmute({video:!0})})).catch((function(t){Qt.error("Error in media access %o",t),t=ft(w.userDeniedMediaAccess,t),e.emit(b.upgradevideoaccessdenied,t)}))}else{var u=ft(w.callnotconnected);this.emit(y,u)}else u=ft(w.addvideonotsupported),this.emit(y,u)}},{key:"_getVideoDirection",value:function(e){Qt.debug("_getVideoDirection Sdp %o",e);var t;e=He.parse(e.sdp);Array.isArray(e.media)||(e.media=[e.media]);var n,r=Vt(e.media);try{for(r.s();!(n=r.n()).done;){var i=n.value;"video"===i.type&&(t=i.direction)}}catch(e){r.e(e)}finally{r.f()}return Qt.debug("video Direction %s",t),t}},{key:"removeVideo",value:function(e){var t=this;if(this._checkState(),this.getPeerConnection().addTrack)if(this._callState===E){var n=this.getPeerConnection(),r=this._getVideoTransceiver();if(Qt.debug("removeVideo is firefox ? %s",Tt()),Tt()||"remote"===e||r&&"sendrecv"===(null==r?void 0:r.direction)){this._stopMediaStream(),"remote"!==e&&n.addEventListener("negotiationneeded",(function(e){Qt.debug("removevideo got negotiationneeded event %o",e),Qt.debug("Sending renegotiate"),t._session.renegotiate({rtcOfferConstraints:{offerToReceiveAudio:1,offerToReceiveVideo:0}})}),Zt);var i=n.getLocalStreams()[0].clone();if(Qt.debug("1 localStream.getVideoTracks() %o",i.getVideoTracks()),Tt())for(var o=i.getVideoTracks().length,u=i.getVideoTracks(),l=0;l<o;l++)i.removeTrack(u[l]);else 0<i.getVideoTracks().length&&i.removeTrack(i.getVideoTracks()[0]);Qt.debug("2 localStream.getVideoTracks() %o",i.getVideoTracks()),r&&n.removeTrack(r.sender),this.emit(b.localvideoremoved,{stream:i})}else Qt.debug("Video is not there, direction is %s ",null==r?void 0:r.direction)}else{var a=ft(w.callnotconnected);this.emit(y,a)}else a=ft(w.removevideonotsupported),this.emit(y,a)}},{key:"switchCamera",value:function(){Qt.debug("Begin Switch camera"),this.getLocalStream().getVideoTracks().forEach((function(e){Qt.debug("has _switchCamera %s",e._switchCamera),e._switchCamera&&e._switchCamera()})),Qt.debug("End Switch camera")}},{key:"_reactNativeRemoveVideo",value:function(e){var t=this;Qt.debug("react native remove stream");var n=this.getPeerConnection(),r=this.getPeerConnection().localDescription;r=this._getVideoDirection(r);Qt.debug("video direction is %s",r),"sendrecv"===r?("remote"!==e&&n.addEventListener("negotiationneeded",(function(e){Qt.debug("removevideo got negotiationneeded event %o",e),Qt.debug("Sending renegotiate"),t._session.renegotiate({rtcOfferConstraints:{offerToReceiveAudio:1,offerToReceiveVideo:0}})}),Zt),r=n.getLocalStreams()[0],Qt.debug("1 localStream.getVideoTracks() %o",r.getVideoTracks()),e=r.getAudioTracks()[0],e=new MediaStream([e]),Qt.debug("2 localStream.getVideoTracks() %o",r.getVideoTracks()),n.removeStream(r),n.addStream(e),this.emit(b.localvideoremoved,{stream:e})):Qt.debug("Video is not there")}},{key:"_setConfig",value:function(e){this._configParams=e}},{key:"_setSession",value:function(e){this._sessionId=e._id,Qt.debug("Setting session %o with id %s peerconnection %s",e,this._sessionId,e.connection),this._session=e,this._sessionState=E,this._registerAllEvents(),"local"===this._originator&&this._startListenToPeerConnectionEvents()}},{key:"_startListenToPeerConnectionEvents",value:function(){var e=this;this.getPeerConnection().addEventListener("addstream",(function(t){var n=t.stream;Qt.debug('peerconnection "addstream" event %o',n),e.emit(b.remotestream,{stream:n}),Nt._emitAudioOutputDeviceEvent(),n.addEventListener("removetrack",(function(t){Qt.debug("removetrack event %o",t),"video"===(null===(t=t.track)||void 0===t?void 0:t.kind)&&(Qt.debug("video track is removed"),e.removeVideo("remote"),e.emit(b.remotevideoremoved,{stream:n}))})),n.addEventListener("ended",(function(t){e.emit(b.remotevideoremoved,{stream:n}),Qt.debug("ended event for track %o",t.track)}))})),this.getPeerConnection().addEventListener("signalingstatechange",(function(t){Qt.debug("signalingstatechange message event %o state %s",t,e.getPeerConnection().signalingState),Qt.debug("client type isFirefox %s",Tt()),"stable"===e.getPeerConnection().signalingState&&e._needVideoMline&&!0===e._sendRemoveVideoEvent&&!0===Tt()&&(Qt.debug("video tracks size %s ",e.getPeerConnection().getRemoteStreams()[0].getVideoTracks().length),e.removeVideo("remote"),e.emit(b.remotevideoremoved,{stream:e.getPeerConnection().getRemoteStreams()[0]}),e._sendRemoveVideoEvent=!1)}),!1),this.getPeerConnection().addEventListener("track",(function(t){var n;Qt.debug("track event %o",t),"video"===t.track.kind&&(Qt.debug("Remote video track added track %o",t.track),Qt.debug("stream size is %s",t.streams.length),0===t.streams.length?((n=e.getPeerConnection().getRemoteStreams()[0].getVideoTracks()).push(t.track),n=new MediaStream([e.getPeerConnection().getRemoteStreams()[0].getAudioTracks()[0]].concat(qt(n))),e.emit(b.remotevideoadded,{stream:n})):e.emit(b.remotevideoadded,{stream:t.streams[0]}))}))}},{key:"_registerAllEvents",value:function(){this._registerIceCandidateEventHandler(),this._registerConnectingEvent(),this._registerAcceptedEvent(),this._registerEndedEvent(),this._registerFailedEvent(),this._registerErrorInfoEvent(),this._registerProgressEvent(),this._registerConnectedEvent(),this._registerSDPEvent(),this._registerPeerConnectionEvent(),this._registerEngageLocalVideoAddedEvent(),this._registerEngageRemoteVideoAddedEvent(),this._registerEngageRemoteVideoRemovedEvent(),this._registerEngageLocalVideoRemovedEvent(),this._registerEngageRemoteStreamEvent(),this._registerLocalStreamEvent(),this._registerEngageUpgradeVideoAccessDeniedEvent(),this._registerEngageSwitchCameraEvent(),this._registerLocalVideoAddedEvent(),this._registerUpgradeVideoAccessDeniedEvent(),this._registerMutedEvent(),this._registerUnMutedEvent(),this._registerReferEvent(),this._registerEngageCallTransferInitiatedEvent(),this._registerEngageCallTransferSucceededEvent()}},{key:"_registerMutedEvent",value:function(){var e=this;this._registerEventWithJssip(b.muted,(function(t){var n;Qt.debug("Got Mute event %o",t),!0===(null==t?void 0:t.video)&&null!==(n=e._updatedLocalStream)&&void 0!==n&&n.getVideoTracks()[0]&&(e._updatedLocalStream.getVideoTracks()[0].enabled=!1),e._executeUserCallbacks(b.muted,t)}))}},{key:"_registerUnMutedEvent",value:function(){var e=this;this._registerEventWithJssip(b.unmuted,(function(t){var n;Qt.debug("Got unMute event %o",t),!0===(null==t?void 0:t.video)&&null!==(n=e._updatedLocalStream)&&void 0!==n&&n.getVideoTracks()[0]&&(e._updatedLocalStream.getVideoTracks()[0].enabled=!0),e._executeUserCallbacks(b.unmuted,t)}))}},{key:"_registerReferEvent",value:function(){var e=this;this._registerEventWithJssip("refer",(function(t){var n,r,i,o,u;Qt.debug("Got refer event %o",t),Qt.debug("Dialing to referred number %s",null==t||null===(n=t.request)||void 0===n||null===(r=n.refer_to)||void 0===r||null===(c=r._uri)||void 0===c?void 0:c._user);var l,a,s,c={};c.mediaConstraints={audio:!0,video:e.hasLocalVideo()},c.extraHeaders=(l=null===(l=t.request.refer_to)||void 0===l||null===(a=l.uri)||void 0===a?void 0:a.toString(),s=[],l&&((a=l.split("?")[1])?(l=gt(a),s.push("".concat(N,": ").concat(a)),l.forEach((function(e,t){return s.push("".concat(t,": ").concat(e))}))):s.push("".concat(N,": additional-info=na"))),s),t.accept(null,c),e._isCallGotReferred=!0,e.emit(b.calltransferinitiated,{to:null==t||null===(i=t.request)||void 0===i||null===(o=i.refer_to)||void 0===o||null===(u=o._uri)||void 0===u?void 0:u._user})}))}},{key:"_registerErrorInfoEvent",value:function(){var e=this;this._registerEventWithEngageDigital(P.errorinfo,(function(t){Qt.debug("Got errorinfo event: %o",t),e._executeUserCallbacks(P.errorinfo,t)}))}},{key:"_registerIceCandidateEventHandler",value:function(){Qt.debug("Entering registerIceCandidateEventHandler");var e=this._configParams;this._session.on("icecandidate",(function(t){ot(t,e.iceTimeout),ot.isIceTimeoutRegistered=!0}))}},{key:"_registerConnectingEvent",value:function(){var e=this;this._registerEventWithJssip(b.connecting,(function(){e._callState="connecting",Qt.debug("Call is Connecting"),e._executeUserCallbacks(b.connecting)}))}},{key:"_executeUserCallbacks",value:function(e,t){try{var n=this._eventHandlerMap&&this._eventHandlerMap.get(e);n&&n.forEach((function(e){return t?e(t):e()}))}catch(n){Qt.debug("Got error %o while executing usercallback for the event %s",n,e)}}},{key:"_registerAcceptedEvent",value:function(){this._registerEventWithJssip("accepted",(function(e){Qt.debug("Call Accepted, originator %s",e.originator)}))}},{key:"_registerConnectedEvent",value:function(){var e=this;this._registerEventWithJssip("confirmed",(function(t){e._callState=E,Qt.debug("Call Connected"),e._isCallGotReferred?e.emit(b.calltransfersucceeded):e._executeUserCallbacks(b.connected,t)}))}},{key:"_registerLocalVideoAddedEvent",value:function(){var e=this;this._registerEventWithJssip(b.localvideoadded,(function(t){Qt.debug("localvideo added event %o",t),t=t.stream,e._executeUserCallbacks(b.localvideoadded,{stream:t})}))}},{key:"_registerPeerConnectionEvent",value:function(){var e=this;this._registerEventWithJssip("peerconnection",(function(t){e._configParams.enableWebRTCStats&&xt(t.peerconnection,e._configParams.webRTCStatsInterval),Qt.debug("Engage digital enableWebRTCStats %s",e._configParams.enableWebRTCStats),Qt.debug("Got peerconnection event %o",t),e._startListenToPeerConnectionEvents()}))}},{key:"_registerEngageLocalVideoAddedEvent",value:function(){var e=this;this._registerEventWithEngageDigital(b.localvideoadded,(function(t){Qt.debug("Local Video added event %o",t.stream.getVideoTracks()),e._updatedLocalStream=t.stream,e._executeUserCallbacks(b.localvideoadded,t)}))}},{key:"_registerEngageRemoteVideoAddedEvent",value:function(){var e=this;this._registerEventWithEngageDigital(b.remotevideoadded,(function(t){for(var n=t.stream.getVideoTracks(),r=0;r<n.length;++r)1<n.length&&(n[r].enabled=!1);t=new MediaStream([t.stream.getAudioTracks()[0]].concat(qt(n))),Qt.debug("Remote Video added event %o",t),e._executeUserCallbacks(b.remotevideoadded,{stream:t})}))}},{key:"_registerEngageRemoteVideoRemovedEvent",value:function(){var e=this;this._registerEventWithEngageDigital(b.remotevideoremoved,(function(t){t=new MediaStream([t.stream.getAudioTracks()[0]]),Qt.debug("Remote Video removed event %o",t),e._executeUserCallbacks(b.remotevideoremoved,{stream:t})}))}},{key:"_registerEngageLocalVideoRemovedEvent",value:function(){var e=this;this._registerEventWithEngageDigital(b.localvideoremoved,(function(t){Qt.debug("Local Video removed event %o",t),e._updatedLocalStream=t.stream,e._executeUserCallbacks(b.localvideoremoved,t)}))}},{key:"_registerEngageRemoteStreamEvent",value:function(){var e=this;this._registerEventWithEngageDigital(b.remotestream,(function(t){Qt.debug("Got remote stream %o",t),e._executeUserCallbacks(b.remotestream,t)}))}},{key:"_registerLocalStreamEvent",value:function(){var e=this;this._registerEventWithJssip(b.localstream,(function(t){Qt.debug("Got Local stream : %o joinWithVideoMuted : %s",t,e._callParams.joinWithVideoMuted),e._callParams.joinWithVideoMuted&&"boolean"==typeof e._callParams.joinWithVideoMuted&&e.enableVideo(!1),e._updatedLocalStream=t.stream,e._executeUserCallbacks(b.localstream,t)}))}},{key:"_registerEngageUpgradeVideoAccessDeniedEvent",value:function(){var e=this;this._registerEventWithEngageDigital(b.upgradevideoaccessdenied,(function(t){Qt.debug("User Denied Video access while trying to upgrade, in offer %o",t),t=ft(w.userDeniedMediaAccess,t),e._executeUserCallbacks(b.upgradevideoaccessdenied,t)}))}},{key:"_registerUpgradeVideoAccessDeniedEvent",value:function(){var e=this;this._registerEventWithJssip(b.upgradevideoaccessdenied,(function(t){Qt.debug("User Denied Video access while trying to upgrade, in answer %o",t),t=ft(w.userDeniedMediaAccess,t),e._executeUserCallbacks(b.upgradevideoaccessdenied,t)}))}},{key:"_registerEngageSwitchCameraEvent",value:function(){var e=this;this._registerEventWithEngageDigital("switchcamerastream",(function(t){Qt.debug("switchcamerastream %o",t),e._executeUserCallbacks("switchcamerastream",t)}))}},{key:"_registerEngageCallTransferInitiatedEvent",value:function(){var e=this;this._registerEventWithEngageDigital(b.calltransferinitiated,(function(t){Qt.debug("Got calltransferinitiated event %o",t),e._callState="calltransferinitiated",e._executeUserCallbacks(b.calltransferinitiated,t)}))}},{key:"_registerEngageCallTransferSucceededEvent",value:function(){var e=this;this._registerEventWithEngageDigital(b.calltransfersucceeded,(function(){Qt.debug("Got calltransfersucceeded event"),e._executeUserCallbacks(b.calltransfersucceeded)}))}},{key:"_registerEndedEvent",value:function(){var e=this;this._registerEventWithJssip("ended",(function(t){Qt.debug("Call Ended %o",t),"local"===t.originator&&(Qt.debug("You Disconnected"),e._callState=A,e._executeUserCallbacks(b.disconnected,t),e._clearInternals()),"remote"===t.originator&&(e._isCallEndedDueToRefer(t)?Qt.debug("As part of refer, got bye for current call. First SessionId %s refer sessionId %s",e._firstSessionId,e._sessionId):(Qt.debug("Peer Disconnected %o",t),e._callState=A,e._executeUserCallbacks(b.peerdisconnected,t),e._clearInternals()))}))}},{key:"_isCallEndedDueToRefer",value:function(e){return this._isCallGotReferred&&e.sessionid===this._firstSessionId}},{key:"_registerFailedEvent",value:function(){var e=this;this._registerEventWithJssip(b.failed,(function(t){e._callState="failed",Qt.debug("Call Failed"),t=ft(t.cause),e._executeUserCallbacks(b.failed,t),e._clearInternals()}))}},{key:"_registerProgressEvent",value:function(){var e=this;this._registerEventWithJssip("progress",(function(t){e._callState="ringing",Qt.debug("Call is in Progress"),e._executeUserCallbacks(b.ringing,t)}))}},{key:"getAudioRole",value:function(e,t,n){return!0===e?"answer"===n?"passive":"actpass":!0===t?"active":void 0}},{key:"getVideoRole",value:function(e,t,n){return!0===e||!0===t?"answer"===n?"active":"actpass":void 0}},{key:"_registerSDPEvent",value:function(){var e=this;this._registerEventWithJssip("sdp",(function(t){if("local"===t.originator&&"offer"===t.type&&e._callParams){var n=He.parse(t.sdp),r=n.media.find((function(e){return"video"===e.type})),i=n.media.find((function(e){return"audio"===e.type}));if(e._isInitialInvite||e.preferCodec(i,null===(i=e._callParams.codecPreferences)||void 0===i?void 0:i.audio),!0===vt(t)&&e.preferCodec(r,null===(r=e._callParams.codecPreferences)||void 0===r?void 0:r.video),t.sdp=He.write(n),e._isInitialInvite||(e._isInitialInvite=!0,e._isCaller=!0),!e._needVideoMline){e._needVideoMline=vt(t);var o=function(e){if(e)for(var t=0;t<e.length;t++)if("video"===e[t].type)return!0;return!1}(e._backedUpMLinesFromOffer);if(!0===e._isCallee&&!1===o){Qt.debug("recalculating the backUpMlines");var u=He.parse(t.sdp),l=u.media;u.media=[];for(var a=0;a<l.length;a++){var s=l[a];s.port=0,s.direction="inactive",u.media.push(s)}e._backedUpMLinesFromOffer=u.media}}n=e.getAudioRole(e._isCaller,e._isCallee,t.type),o=e.getVideoRole(e._isCaller,e._isCallee,t.type),Qt.debug("Current ICE roles audio=%s & video=%s ",n,o),dt(t,e._backedUpMLinesFromOffer,n,o),bt(t),Qt.debug("Added Codec Preferences in the sdp for type %s and originator %s",t.type,t.originator),Qt.debug("SDP data: ",t.sdp)}else{var c,f;"remote"===t.originator&&"offer"===t.type?(Qt.debug("Got remote sdp offer"),Tt()&&((o=He.parse(t.sdp)).media.map((function(e,t){"audio"===e.type&&e.rtp&&void 0!==e.maxptime&&0<e.rtp.length&&"opus"===e.rtp[0].codec.toLowerCase()&&(Qt.debug("set maxptime to 20 at sdp media at index %s",t),e.maxptime=20)})),t.sdp=He.write(o)),e._needVideoMline||(e._needVideoMline=vt(t)),Tt()&&(c=pt(t),e._needVideoMline&&!1===c&&(e._sendRemoveVideoEvent=!0)),e._backedUpMLinesFromOffer=ht(t,e._needVideoMline),e._isInitialInvite||(e._isInitialInvite=!0,e._isCallee=!0),St(t),St(t),Ct(t),Qt.debug("Modified SDP after removing unwanted mLines  %s",t.sdp)):"local"===t.originator&&"answer"===t.type?(Qt.debug("Answer sdp generated"),c=e.getAudioRole(e._isCaller,e._isCallee,t.type),f=e.getVideoRole(e._isCaller,e._isCallee,t.type),Qt.debug("Current ICE roles audio=%s & video=%s ",c,f),dt(t,e._backedUpMLinesFromOffer,c,f),bt(t),Qt.debug("Modified SDP with required mLines %s",t.sdp)):"remote"===t.originator&&"answer"===t.type&&(Qt.debug("Answer sdp received"),Tt()&&(f=pt(t),e._needVideoMline&&!1===f&&(e._sendRemoveVideoEvent=!0)),ht(t,e._needVideoMline),St(t),Ct(t))}t.sdp=t.sdp.replace(/a=extmap:\d{1,} urn:3gpp:video-orientation\r\n/g,""),t.sdp=e.removeIpv6Candidates(t.sdp)}))}},{key:"removeIpv6Candidates",value:function(e){return e.replace(/a=candidate:\d{1,} \d{1,} \w{3} \d{1,} [\w]{4}:.*\r\n/g,"")}},{key:"preferCodec",value:function(e,t){var n,r;e&&t&&qt(t).reverse().forEach((function(t){var i,o,u,l;if(t.includes("-")?(n=t.slice(0,t.indexOf("-")),r=t.slice(t.lastIndexOf("-")+1)):n=t,c=e.rtp.filter((function(e){return e.codec&&e.codec.toLowerCase()===n.toLowerCase()})).map((function(e){return e.payload}))){var a,s=e.payloads.toString().split(" ").map((function(e){return parseInt(e,10)})),c=0<(t=(t=e,l=[],(u=r)&&t.fmtp.filter((function(e){e.config.split(";").find((function(t){O[u]==t&&l.push(e.payload)}))})),l)).length?t:c,f=Vt((i=e,o=[],(c=c).map((function(e){i.fmtp.filter((function(t){(t.payload!=e||!t.config.includes("packetization-mode=0"))&&(t.payload!=e||t.config.includes("packetization-mode")||o.includes(e))||o.push(e)}))})),0<o.length?o:c).reverse());try{for(f.s();!(a=f.n()).done;){var d=a.value,h=s.indexOf(d);s.splice(h,1),s.unshift(d)}}catch(t){f.e(t)}finally{f.f()}e.payloads=s.join(" ")}}))}},{key:"_setIncomingRequestHeaders",value:function(e){for(var t in this._incomingInviteRequestHeaders=new Map,e)this._incomingInviteRequestHeaders.set(t.toLowerCase(),e[t])}},{key:"getIncomingCallHeader",value:function(e){if(e&&"string"==typeof e&&this._incomingInviteRequestHeaders){var t=this._incomingInviteRequestHeaders.get(e.toLowerCase());if(void 0!==t){if(1<t.length){var n,r=[];for(n in t)r.push(t[n].raw);return r}return t[0].raw}}Qt.debug("headerName %s is not found or this is not an incoming session",e)}},{key:"_registerEventWithJssip",value:function(e,t){this._session.on(e,t)}},{key:"_registerEventWithEngageDigital",value:function(e,t){0==this.listenerCount(e)&&this.on(e,t)}},{key:"_checkState",value:function(){if(!this._session)throw Qt.debug("Session State is not connected"),new Ke("InvalidStateError","",mt[0])}},{key:"_getVideoTransceiver",value:function(){var e=this.getPeerConnection().getTransceivers();Qt.debug("Transceivers %o",e);var t=null;if(Tt()){t=null;for(var n,r,i=0;i<e.length;i++)if(Qt.debug("videoTransiver[%o] = %o",i,e[i]),"video"===(null===(n=e[i].sender)||void 0===n||null===(r=n.track)||void 0===r?void 0:r.kind)&&!1===e[i].stopped){t=e[i];break}Qt.debug("videoTranseiver %o",t),t&&!0===t.stopped?Qt.debug("videoTranseiver is stopped"):t?Qt.debug("videoTranseiver is active"):Qt.debug("videoTranseiver is not available")}else t=e.find((function(e){var t,n;return"video"===(null==e||null===(t=e.sender)||void 0===t||null===(n=t.track)||void 0===n?void 0:n.kind)}));return t}},{key:"_getAudioTransceiver",value:function(){var e=this.getPeerConnection().getTransceivers().find((function(e){var t,n;return"audio"===(null==e||null===(t=e.sender)||void 0===t||null===(n=t.track)||void 0===n?void 0:n.kind)}));return Qt.debug("audioTransceiver %o",e),e}},{key:"_reactNativeAddVideo",value:function(){var e=this;Qt.debug("1 React native way of adding video");var t,n=this.getPeerConnection(),r=this.getPeerConnection().localDescription,i=this._getVideoDirection(r);Qt.debug("video direction is %s",i),"sendrecv"!==i?(t={rtcOfferConstraints:{offerToReceiveAudio:1,offerToReceiveVideo:1}},navigator.mediaDevices.getUserMedia({video:!0}).then((function(r){if(i&&("inactive"===i||"recvonly"===i)){var o=r.getVideoTracks();Qt.debug("Sending addVideo renegotiate");var u=n.getLocalStreams()[0].getAudioTracks()[0];return n.removeStream(n.getLocalStreams()[0]),o=new MediaStream([u,o[0]]),n.addStream(o),e.emit(b.localvideoadded,{stream:o}),void e._session.renegotiate(t)}o=r.getVideoTracks()[0],Qt.debug("LocalStreams size : %s",n.getLocalStreams().length),r=n.getLocalStreams()[0].getAudioTracks()[0],n.getLocalStreams()[0].removeTrack(r),o=new MediaStream([r,o]),n.removeStream(n.getLocalStreams()[0]),Qt.debug("LocalStreams size : %s",n.getLocalStreams().length),n.addStream(o),e.emit(b.localvideoadded,{stream:o}),Qt.debug("renegotiate reinvite flow, audio track length %s : steam length : %d",n.getLocalStreams()[0].getAudioTracks().length,n.getLocalStreams().length),e._session.renegotiate(t)})).catch((function(t){Qt.error("Error in media access %o",t),e.emit(b.upgradevideoaccessdenied,{originator:"local",message:null,cause:w.userDeniedMediaAccess})}))):Qt.debug("Video is already there")}},{key:"_stopMediaStream",value:function(){Nt._closeMediaStream(this._updatedLocalStream),Nt._updatedStream&&Nt._closeMediaStream(Nt._updatedStream),Nt._updatedModifiedStream&&Nt._closeMediaStream(Nt._updatedModifiedStream),this._updatedAddVideoStream&&Nt._closeMediaStream(this._updatedAddVideoStream),this._generateNewStreamAddVideo&&Nt._closeMediaStream(this._generateNewStreamAddVideo)}},{key:"_clearInternals",value:function(){Qt.debug("Start clearing the session internals"),Ft(),this._stopMediaStream(),this.emit("sessionTerminated",this._sessionId),this._session=null,this._sessionId=null,this._callState=null,this._callParams=null,this._originator=null,this._sessionState=null,this._eventHandlerMap.clear(),this._defaultCallParams=null,ot.isIceTimeoutRegistered=!1,Qt.debug("End clearing the session internals")}},{key:"_checkAndThrowErrorInInvalidState",value:function(e){if("INVALID_STATE_ERROR"===e.name)throw new Ke("InvalidStateError","",mt[""+e.status])}}])&&zt(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),r}();function tn(e){return(tn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var nn=n(114),rn=new l.Logger("ConfigParamsValidator"),on={iceTimeout:{defaultVal:5,validate:function(e){if(Object(j.isDecimal)(e)){var t=Number(e);if(0<t)return t}rn.debug("invalid value %s for iceTimeout",e)}},registrarServer:{validate:function(e){if(Object(j.isEmpty)(e))throw new Ke(w.configurationError,"registrarServer",e);return e}},enableWebRTCStats:{defaultVal:!1,validate:function(e){if("boolean"==typeof e)return e}},lightOffOnVideoMute:{defaultVal:!1,validate:function(e){if("boolean"==typeof e)return e}},webRTCStatsInterval:{defaultVal:30,validate:function(e){if(Object(j.isDecimal)(e)){var t=Number(e);if(0<t)return t}rn.debug("invalid value %s for webRTCStatsInterval",e)}},log:{defaultVal:{console:{enable:!1},blob:{enable:!1,emptyAfterRetrieval:!0}},validate:function(e){var t={};if("object"===tn(e=e||{})){var n=e.console;if(void 0!==n){if("object"!==tn(n)||"boolean"!=typeof n.enable)return;t.console={},t.console.enable=n.enable}if(void 0!==(e=e.blob)){if("object"!==tn(e))return;if(void 0!==e.enable){if(t.blob={},"boolean"!=typeof e.enable)return;t.blob.enable=e.enable}if(void 0!==e.emptyAfterRetrieval){if(t.blob=t.blob||{},"boolean"!=typeof e.emptyAfterRetrieval)return;t.blob.emptyAfterRetrieval=e.emptyAfterRetrieval}}}if(0<Object.keys(t).length)return t},merge:function(e,t){return nn.merge(e,t)}}};function un(e){return(un="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ln(e,t){var n,r=Object.keys(e);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(e),t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)),r}function an(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ln(Object(n),!0).forEach((function(t){vn(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ln(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function sn(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,o=[],u=!0,l=!1;try{for(n=n.call(e);!(u=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);u=!0);}catch(e){l=!0,i=e}finally{try{u||null==n.return||n.return()}finally{if(l)throw i}}return o}}(e,t)||function(e,t){if(e){if("string"==typeof e)return cn(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Map"===(n="Object"===n&&e.constructor?e.constructor.name:n)||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?cn(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function cn(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function fn(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function dn(e,t){return(dn=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function hn(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function pn(e){return(pn=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function vn(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var _n=n(34),gn=new l.Logger("EngageDigitalClient"),mn=function(){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");Object.defineProperty(e,"prototype",{value:Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),writable:!1}),t&&dn(e,t)}(i,_n);var e,t,r=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=pn(e);return function(e,t){if(t&&("object"===un(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return hn(e)}(this,t?(n=pn(this).constructor,Reflect.construct(r,arguments,n)):r.apply(this,arguments))}}(i);function i(e,t){var o,u=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{};!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),vn(hn(o=r.call(this)),"_checkWebrtcSupported",(function(){var e;_t()||(e=ft(w.webrtcnotsupported),o.emit(y,e))})),vn(hn(o),"getUniqueClientId",(function(){return o._uniqueClientId})),vn(hn(o),"getConfig",(function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"";if("string"==typeof e&&void 0!==e){var t=e&&e.trim();if(!t)return o._configParams;if(t in o._configParams)return o._configParams[t];var n=ft(w.typeError,e);o.emit(y,n),gn.warn("Get Config: Parameter %s not found",t)}else gn.warn("Get Config: parameter %s not accepted",e),e=ft(w.typeError,e),o.emit(y,e)})),vn(hn(o),"setConfig",(function(e,t){try{if(gn.debug("Set Config: confName %s value %o",e,t),e in R){var n=on[e];if(n){var r=n.validate(t);return void 0===r?(o._emitErrorInfo(w.configurationError,[t,e]),!1):(n.merge&&(r=n.merge(o._configParams[e],r)),o._configParams[e]=r,"log"===e&&l.logHandler.updateLogSettings(r),"enableWebRTCStats"===e&&(r?o.collectStatsWhenSessionIsAlive():Ft()),!0)}var i=o._UA.set(c[e],t);return i?o._configParams[e]=t:o._emitErrorInfo(w.configurationError,[t,e]),i}return o._emitErrorInfo(w.configurationError,[t,e]),!1}catch(n){return o._emitErrorInfo(w.configurationError,[t,e]),!1}})),vn(hn(o),"_registerEventToEngageDigitalClient",(function(e,t){o.on(e,t)})),vn(hn(o),"addEventHandler",(function(e,t){var n;if(!o._checkInvalidEvent(e))switch(e){case void 0:case null:gn.debug("Invalid Event name [%s]",e),n=ft(w.invalidEvent,e),o.emit(y,n);break;case d:o._registerEventToEngageDigitalClient(e,t);break;default:o._eventHandlerMap.get(e)||o._eventHandlerMap.set(e,[]),o._eventHandlerMap.get(e).push(t),gn.debug("addeventHandler for %s",e)}})),vn(hn(o),"_registerNewSessionEvent",(function(){o._registerEventToUA(v,(function(e){if(gn.debug("Got newRTCSession event %o",e),o._sessionMap&&0<o._sessionMap.size&&!e.isRefer)return gn.warn("Rejecting the request originated from [%s] as you are already in a call",e.originator),void e.session.terminate();"local"===e.originator?(gn.debug("newRTCSession is for outgoing call"),o._engageSession&&e.isRefer&&(o._sessionMap.delete(o._engageSession.getSessionId()),o._engageSession.removeEventHandler(b.connecting),o._engageSession.removeEventHandler(b.ringing))):(gn.debug("newRTCSession is for incoming call"),o._engageSession=new en({},o._defaultConfig.callParams),o._engageSession._setIncomingRequestHeaders(e.request.headers)),o._configParams.enableWebRTCStats&&xt(null===(t=e.session)||void 0===t?void 0:t._connection,o._configParams.webRTCStatsInterval),o._engageSession._setConfig(o._configParams),o._engageSession._originator=e.originator,o._engageSession._setSession(e.session),gn.debug("Set Engage Session to RTCUtils"),o._engageDigitalRTCUtils._setSession(e.session),o._sessionMap.set(o._engageSession.getSessionId(),o._engageSession),e.isRefer||(o._engageSession._firstSessionId=e.session._id);var t,n=o._eventHandlerMap.get("newRTCSession");"remote"===e.originator&&(t=o._engageSession.hasRemoteVideo({sdp:e.request.body}),gn.debug("hasRemoteVideo %s",t),o._engageSession.incomingCallWithVideo=t,(t=e.request.getHeader(N))&&(o._engageSession.callTransferHeaders=gt(t),gn.debug("This call is being transferred here. Additional data : %o",o._engageSession.getCallTransferHeaders()))),gn.debug("this.incomingCallWithVideo %s : ",o._engageSession.isIncomingCallWithVideo()),n&&!e.isRefer&&n.forEach((function(e){return e(o._engageSession)})),o._engageSession.on("sessionTerminated",(function(e){gn.debug("Clearing session with id %s from session map",e),o._sessionMap.delete(e),Nt._clearRTCUtilsInternals()}))}))})),vn(hn(o),"connect",(function(){var e;gn.debug("connect"),o._connectionState==C?o._UA.start():(e=ft(w.connectionError),o.emit(y,e),gn.warn("Connection Error: Connection already established"))})),vn(hn(o),"disconnect",(function(){try{o._clearInternals(),o._sessionMap.clear(),o._UA.stop(),o._isFirstTimeConnected=!0,o._connectionState=T,l.logHandler.clearLogs(),o._eventHandlerMap.clear(),o._engageDigitalRTCUtils=null}catch(e){gn.warn("Connection Error: Connection not initiated ")}})),vn(hn(o),"makeCall",(function(e,t){if(!o.isConnected())throw new Ke(w.notConnected);if(!(e=e?e.trim():""))throw new Ke(w.configurationError,"uri",e);gn.debug("makeCall Start");var n=ut(t,o._defaultConfig.callParams);gn.debug("updatedMediaConstraints %o callParams.mediaConstraints %o",Nt._updatedMediaConstraints,null==t?void 0:t.mediaConstraints),o._engageSession=new en(n),o._engageSession._setConfig(o._configParams);var r,i={audio:(null!==(i=Nt._updatedMediaConstraints)&&void 0!==i&&i.audio?{audio:Nt._updatedMediaConstraints.audio}:{audio:!0}).audio};return null!=t&&null!==(r=t.mediaConstraints)&&void 0!==r&&r.video&&(r=null!==(r=Nt._updatedMediaConstraints)&&void 0!==r&&r.video?{video:Nt._updatedMediaConstraints.video}:{video:!0},i.video=r.video),gn.debug("mediaConstraints : %o",i),i=lt(n,i),o._UA.call(e,i),gn.debug("makeCall End"),o._engageSession})),vn(hn(o),"getUri",(function(){try{return gn.debug("getUri called with %o",o._UA.configuration.uri),o._UA.configuration.uri}catch(t){gn.warn("Get uri Error: %o",t);var e=ft(w.internalServerError);o.emit(y,e)}})),vn(hn(o),"isConnected",(function(){try{return!(o._connectionState!==S||!o._UA.isConnected())}catch(t){var e=ft(w.connectionError);o.emit(y,e),gn.warn("Connection Error: Connection not initiated ")}})),vn(hn(o),"getSessions",(function(){return 0<o._sessionMap.size?o._sessionMap:(gn.debug("No session is running currently"),null)})),vn(hn(o),"getSessionById",(function(e){return e&&0<o._sessionMap.size?o._sessionMap.get(e):(gn.debug("getSessions method called once you get newRtcSession"),gn.debug("Session not available for provided session Id",e),null)})),vn(hn(o),"getEngageDigitalRTCUtils",(function(){return o._engageDigitalRTCUtils})),vn(hn(o),"getEngageDigitalStats",(function(){return jt})),vn(hn(o),"disableEngageDigitalStats",(function(){o.setConfig("enableWebRTCStats",!1)})),vn(hn(o),"enableEngageDigitalStats",(function(){o.setConfig("enableWebRTCStats",!0)})),function(){var e=new l.Logger,t=n(157),r=l.logHandler.logSettings;l.logHandler.updateLogSettings({console:{enable:!0},blob:{enable:!0}});var i=qe.os,o=qe.browserType,u=qe.browserVersion,a=qe.version;"ReactNative"!==qe.clientType?(e.debug("version: %s",t.version),e.debug("[%s]: Application running on [%s] browser and version is [%s] ",i,o,u)):(e.debug("version: ".concat(t.version)),e.debug("Application running on ".concat(i,": ").concat(a))),_t(),l.logHandler.updateLogSettings(r)}(),gn.debug("Begin Constructor");var a=on.log.validate(u.log);return a&&(a=on.log.merge(on.log.defaultVal,a),l.logHandler.updateLogSettings(a)),o._userProvidedConfigParams=function(e,t,n){if(nt.debug("domain %s",t),!e)throw new Ke(w.configurationError,"userIdentity",e);if(!t)throw new Ke(w.configurationError,"domain",t);return t=t.constructor==Array?t:[t],tt({userIdentity:e.replace(/\s+/g,""),domain:t},n)}(e,t,u),o._initialized=!!o._initialized,o._connectionState=C,o._eventHandlerMap=new Map,o._sessionMap=new Map,o._disabledCodecs=null,o._isFirstTimeConnected=!0,o._clientIp=null,o._engageDigitalRTCUtils=Nt,u=function(e,t){if(t=!(1<arguments.length&&void 0!==t)||t,nt.debug("generateURL domain %s",e),e)return"".concat(t?"https":"http","://").concat(e,"/").concat("engageDigitalConfig.js");throw new Ke("domain",e)}(o._userProvidedConfigParams.domain,o._userProvidedConfigParams.isSecureWeb),o._registerEngageDigitalEvents(),o._loadConfig(u).then((function(e){var t,n;o._defaultConfig=Object.assign({},e),o._disabledCodecs=null==e||null===(n=e.configParams)||void 0===n?void 0:n.unsupportedVideoCodecs,gn.debug("Got unSupportedCodec list from config [%o]",o._disabledCodecs),o._configParams=o._buildConfigParams(o._userProvidedConfigParams,e.configParams),o.updateLogSettings(o._configParams.log),o._uniqueClientId=(t=o._configParams,e=(n=o._clientIp)||"clientIP",nt.debug("ClientIp %s",n),((n=t.userName)?t.userName.trim():t.userName)?"sip:".concat(n.replace(/\s+/g,"").concat("_").concat(rt(5)),"@").concat(e):(n="EngageDigital_".concat(rt(5)),"sip:".concat(n,"@").concat(e))),o._createAgent(),o._checkWebrtcSupported()})).catch((function(e){gn.error("Engage Digital client load error %o",e),o.emit(m,e)})),o}return e=i,(t=[{key:"updateLogSettings",value:function(e){return this.setConfig("log",e)}},{key:"_emitErrorInfo",value:function(e,t){t=ft(e,t),this.emit(y,t),gn.warn(t)}},{key:"_registerEventToUA",value:function(e,t){this._UA.on(e,t)}},{key:"_registerJsSipEvents",value:function(){this._registerConnectingEvent(),this._registerConnectedEvent(),this._registerDisconnectedEvent(),this._registerNewSessionEvent(),this._registerRegisteredEvent(),this._registerUnRegisteredEvent(),this._registerRegistrationFailedEvent(),this._registerRegistrationExpiringEvent(),this._registerNewMessageEvent(),this._registerSipEvent()}},{key:"_registerEngageDigitalEvents",value:function(){this._registerFailedEvent(),this._registerErrorInfoEvent()}},{key:"_registerFailedEvent",value:function(){var e=this;this._registerEventToEngageDigitalClient(m,(function(t){gn.debug("emitting failed event"),e._executeUserCallbacks(m,t)}))}},{key:"_registerErrorInfoEvent",value:function(){var e=this;this._registerEventToEngageDigitalClient(y,(function(t){e._executeUserCallbacks(y,t)}))}},{key:"_executeUserCallbacks",value:function(e,t){try{var n=this._eventHandlerMap&&this._eventHandlerMap.get(e);n&&n.forEach((function(e){return t?e(t):e()}))}catch(n){gn.debug("Got error %o while executing usercallback for the event %s",n,e)}}},{key:"_registerConnectingEvent",value:function(){var e=this;this._registerEventToUA(f,(function(t){e._connectionState="connecting",e._isFirstTimeConnected?(gn.debug("Event %s and data %o",f,t),e._executeUserCallbacks(f,t)):(gn.debug("Event %s and data %o",_,t),e._executeUserCallbacks(_,t))}))}},{key:"_registerRegistrationExpiringEvent",value:function(){var e=this;this._registerEventToUA("registrationExpiring",(function(){gn.debug("Registration is going to be expired, doing register"),e._UA.register()}))}},{key:"_registerNewMessageEvent",value:function(){this._registerEventToUA("newMessage",(function(){}))}},{key:"_registerSipEvent",value:function(){this._registerEventToUA("sipEvent",(function(){}))}},{key:"_registerConnectedEvent",value:function(){var e=this;this._registerEventToUA(h,(function(t){gn.debug("needRegistration at connected event : %s",e._configParams.needRegistration),e._configParams.needRegistration||(e._connectionState=S,e._isFirstTimeConnected?(gn.debug("Event %s and data %o",h,t),e._executeUserCallbacks(h,t),e._isFirstTimeConnected=!1):(gn.debug("Event %s and data %o",g,t),e._executeUserCallbacks(g,t)))}))}},{key:"_registerDisconnectedEvent",value:function(){var e=this;this._registerEventToUA(p,(function(t){e._isFirstTimeConnected=!1,e._connectionState=T,gn.debug("Event %s and data %o",p,t),e._executeUserCallbacks(p,t)}))}},{key:"_registerRegisteredEvent",value:function(){var e=this;this._registerEventToUA("registered",(function(t){e._isFirstTimeConnected?(gn.debug("Event %s and data %o",h,t),e._connectionState=S,e._executeUserCallbacks(h,t)):(gn.debug("Event %s and data %o",g,t),e._connectionState=S,e._executeUserCallbacks(g,t))}))}},{key:"_registerUnRegisteredEvent",value:function(){var e=this;this._registerEventToUA("unregistered",(function(t){e._connectionState="unRegistered",gn.debug("Event %s and data %o",p,t)}))}},{key:"_registerRegistrationFailedEvent",value:function(){var e=this;this._registerEventToUA("registrationFailed",(function(t){gn.warn("registrationFailed %o",t),e._emitErrorInfo(w.registrationFailed,t.cause),e._connectionState="registrationFailed"}))}},{key:"_loadConfig",value:function(e){var t=this;if(!this._initialized)return gn.debug(e),new Promise((function(n){gn.debug("User provided configParams : %o",t._userProvidedConfigParams),fetch(e).then((function(e){return t._clientIp=e.headers.get("X-Real-IP"),gn.debug("clientIp",e.headers.get("X-Real-IP")),e.text()})).then((function(e){window.eval(e),e=window.engageDigitalCfg,t._initialized=!0,gn.debug("defaultConfig %o",e),n(e)})).catch((function(n){gn.error("",n),n=ct("Failed_To_Fetch",e,"engageDigitalConfig.js"),t.emit(m,n)}))}))}},{key:"_createAgent",value:function(){try{var e=this._configParams,t=e.domain,n=e.userIdentity;this._socketConnections=function(e,t,n){var r=!(2<arguments.length&&void 0!==n)||n,i=[];return e.forEach((function(e){var n=r?"wss://":"ws://";(e=void 0===t||Object(j.isEmpty)(t.trim())?new l.WebSocketInterface(n+e+"/kamailio"):new l.WebSocketInterface(n+e+"/"+t.trim()+"/kamailio")).via_transport="auto",i.push(e)})),i}(t,e.zoneId,e.isSecureWeb);for(var r={},i=Object.keys(e),o=0,u=Object.entries(a);o<u.length;o++){var s=sn(u[o],2),c=s[0],f=s[1];i.includes(f)&&(r[c]=e[f])}var d="sip:".concat(n,"@").concat(this._configParams.registrarServer),h=an(an({},r),{},{contact_uri:this._uniqueClientId,uri:d,sockets:this._socketConnections,user_agent:"EngageDigital"});gn.debug("Configuration send to jssip [%o]",h),this._UA=new l.UA(h),this._UA.xClientInfoHeader=it(),this._UA.rtcUtils=Nt,this._registerJsSipEvents(),this.emit("ready")}catch(e){throw gn.error("Create Agent Error %o",e),e.name&&(h=ct(e.name,a[e.parameter],e.value),this.emit(m,h)),e}}},{key:"removeEventHandler",value:function(e){var t;this._checkInvalidEvent(e)?(t=ft(w.invalidEvent,e),this.emit(y,t),gn.warn("Invalid event name [%s]",e)):(this._eventHandlerMap.delete(e),gn.debug("Removed Event handler : %s",e))}},{key:"_buildConfigParams",value:function(e,t){var n=Object.assign({},t);return Object.keys(e).forEach((function(t){n[t]=e[t]})),function(e,t){var n,r=1<arguments.length&&void 0!==t?t:{},i=e||{};for(n in on){var o=on[n],u=o.validate(e[n]),l=void 0,a=void 0;a=void 0!==(a=void 0!==r[n]?o.validate(r[n]):a)?a:o.defaultVal,l=void 0!==u?u:a;o.merge&&(l=o.merge(a,l)),i[n]=l}return rn.debug("final configuration %o",i),i}(n,t)}},{key:"getSupportedCodecs",value:function(){var e=navigator.userAgent&&navigator.userAgent.includes("Firefox")?{video:this._supportedCodecList(x),audio:this._supportedCodecList(D)}:{video:this._supportedCodecList(RTCRtpSender.getCapabilities("video").codecs),audio:this._supportedCodecList(RTCRtpSender.getCapabilities("audio").codecs)};return gn.debug("Supported Codecs: [%o]",e),e}},{key:"_supportedCodecList",value:function(e){var t=this;try{var n,r=[];return e?((e&&e.filter((function(e){return navigator.userAgent&&!navigator.userAgent.includes("Firefox")?!t._disabledCodecs.includes(e.mimeType.split("/")[1]):!t._disabledCodecs.includes(e)}))).map((function(e){var t=e.mimeType?e.mimeType.split("/")[1]:e;e.sdpFmtpLine&&e.sdpFmtpLine.includes("packetization-mode")&&e.sdpFmtpLine.split(";").map((function(e){Object.keys(O).forEach((function(i){O[i]===e&&(n=t+"-"+i,r.includes(n)||r.push(n))}))})),r.includes(t)||r.push(t)})),r):[]}catch(t){gn.warn("SupportedCodecList Error: %o",t),e=ft(w.internalServerError),this.emit(y,e)}}},{key:"_checkInvalidEvent",value:function(e){return null==I[e]&&(gn.warn("Invalid Event [%s]",e),e=ft(w.invalidEvent,e),this.emit(y,e),!0)}},{key:"getEnvironment",value:function(){var e=qe.os,t=qe.browserType,n=qe.browserVersion,r=qe.version,i=qe.api_level,o=qe.clientType;return gn.debug("clientType : %s",o),"ReactNative"!==o?{os:e,browserType:t,browserVersion:n}:{os:e,version:r,api_level:i}}},{key:"getLogs",value:function(){return l.logHandler.getLogs()}},{key:"collectStatsWhenSessionIsAlive",value:function(){var e;!this._sessionMap.keys().next().value||(e=this._sessionMap.values().next().value)&&xt(null===(e=e._session)||void 0===e?void 0:e._connection,this._configParams.webRTCStatsInterval)}},{key:"_clearInternals",value:function(){this._engageDigitalRTCUtils._clearRTCUtilsInternals()}}])&&fn(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),i}(),yn=n(157),bn=function(){return yn.version},Cn=_t}],n.c=i,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)n.d(r,i,function(t){return e[t]}.bind(null,i));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=158);function n(e){if(i[e])return i[e].exports;var t=i[e]={i:e,l:!1,exports:{}};return r[e].call(t.exports,t,t.exports,n),t.l=!0,t.exports}var r,i}));